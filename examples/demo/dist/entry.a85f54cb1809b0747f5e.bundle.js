(()=>{"use strict";var t,e,s={355:(t,e,s)=>{s.d(e,{Z:()=>a});var i=s(601),n=s.n(i),r=s(609),o=s.n(r)()(n());o.push([t.id,"nav {\n    background: #eee;\n    display: flex;\n  }\n  \n  a {\n    padding: 10px;\n    text-decoration: none;\n    color: black;\n  }\n  \n  a:hover {\n    background-color: darkgray;\n  }\n  \n  .active {\n    background-color: lightgray;\n  }",""]);const a=o},609:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var s="",i=void 0!==e[5];return e[4]&&(s+="@supports (".concat(e[4],") {")),e[2]&&(s+="@media ".concat(e[2]," {")),i&&(s+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),s+=t(e),i&&(s+="}"),e[2]&&(s+="}"),e[4]&&(s+="}"),s})).join("")},e.i=function(t,s,i,n,r){"string"==typeof t&&(t=[[null,t,void 0]]);var o={};if(i)for(var a=0;a<this.length;a++){var h=this[a][0];null!=h&&(o[h]=!0)}for(var c=0;c<t.length;c++){var l=[].concat(t[c]);i&&o[l[0]]||(void 0!==r&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=r),s&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=s):l[2]=s),n&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=n):l[4]="".concat(n)),e.push(l))}},e}},601:t=>{t.exports=function(t){return t[1]}},62:t=>{var e=[];function s(t){for(var s=-1,i=0;i<e.length;i++)if(e[i].identifier===t){s=i;break}return s}function i(t,i){for(var r={},o=[],a=0;a<t.length;a++){var h=t[a],c=i.base?h[0]+i.base:h[0],l=r[c]||0,u="".concat(c," ").concat(l);r[c]=l+1;var d=s(u),p={css:h[1],media:h[2],sourceMap:h[3],supports:h[4],layer:h[5]};if(-1!==d)e[d].references++,e[d].updater(p);else{var f=n(p,i);i.byIndex=a,e.splice(a,0,{identifier:u,updater:f,references:1})}o.push(u)}return o}function n(t,e){var s=e.domAPI(e);return s.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;s.update(t=e)}else s.remove()}}t.exports=function(t,n){var r=i(t=t||[],n=n||{});return function(t){t=t||[];for(var o=0;o<r.length;o++){var a=s(r[o]);e[a].references--}for(var h=i(t,n),c=0;c<r.length;c++){var l=s(r[c]);0===e[l].references&&(e[l].updater(),e.splice(l,1))}r=h}}},793:t=>{var e={};t.exports=function(t,s){var i=function(t){if(void 0===e[t]){var s=document.querySelector(t);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(t){s=null}e[t]=s}return e[t]}(t);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(s)}},173:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},892:(t,e,s)=>{t.exports=function(t){var e=s.nc;e&&t.setAttribute("nonce",e)}},36:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(s){!function(t,e,s){var i="";s.supports&&(i+="@supports (".concat(s.supports,") {")),s.media&&(i+="@media ".concat(s.media," {"));var n=void 0!==s.layer;n&&(i+="@layer".concat(s.layer.length>0?" ".concat(s.layer):""," {")),i+=s.css,n&&(i+="}"),s.media&&(i+="}"),s.supports&&(i+="}");var r=s.sourceMap;r&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleTagTransform(i,t,e.options)}(e,t,s)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},464:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},414:(t,e,s)=>{function i(t){return"object"==typeof t&&null!==t||"function"==typeof t}function n(t){return null==t}s.d(e,{Kn:()=>i,RT:()=>O,SF:()=>x});let r=new WeakMap;const o=(t,e,s,i,n)=>new TypeError(`${t}(${e.map(String).join(",")}) - Expected '${s}' to be of type ${n}, but got: ${Object.prototype.toString.call(i)} (${String(i)})`);function a(t){switch(typeof t){case"undefined":case"string":case"symbol":return t;default:return`${t}`}}function h(t,e,s){let i=r.get(t);if(void 0===i){if(!s)return;i=new Map,r.set(t,i)}let n=i.get(e);if(void 0===n){if(!s)return;n=new Map,i.set(e,n)}return n}function c(t,e,s){const i=h(e,s,!1);return void 0!==i&&i.has(t)}function l(t,e,s){if(c(t,e,s))return!0;const i=E(e);return null!==i&&l(t,i,s)}function u(t,e,s){const i=h(e,s,!1);if(void 0!==i)return i.get(t)}function d(t,e,s){if(c(t,e,s))return u(t,e,s);const i=E(e);return null!==i?d(t,i,s):void 0}function p(t,e,s,i){h(s,i,!0).set(t,e)}function f(t,e){const s=[],i=h(t,e,!1);if(void 0===i)return s;const n=i.keys();let r=0;for(const t of n)s[r]=t,++r;return s}function g(t,e){const s=f(t,e),i=E(t);if(null===i)return s;const n=g(i,e),r=s.length;if(0===r)return n;const o=n.length;if(0===o)return s;const a=new Set,h=[];let c,l=0;for(let t=0;t<r;++t)c=s[t],a.has(c)||(a.add(c),h[l]=c,++l);for(let t=0;t<o;++t)c=n[t],a.has(c)||(a.add(c),h[l]=c,++l);return h}function v(t,e){return function(s,n){if(!i(s))throw o("@metadata",[t,e,s,n],"target",s,"Object or Function");p(t,e,s,function(t){switch(typeof t){case"undefined":case"string":case"symbol":return t;default:throw new TypeError(`Invalid metadata propertyKey: ${t}.`)}}(n))}}function m(t,e,s,r){if(void 0!==s){if(!Array.isArray(t))throw o("Metadata.decorate",[t,e,s,r],"decorators",t,"Array");if(!i(e))throw o("Metadata.decorate",[t,e,s,r],"target",e,"Object or Function");if(!i(r)&&!n(r))throw o("Metadata.decorate",[t,e,s,r],"attributes",r,"Object, Function, null, or undefined");return null===r&&(r=void 0),s=function(t){switch(typeof t){case"string":case"symbol":return t;default:return`${t}`}}(s),function(t,e,s,r){for(let a=t.length-1;a>=0;--a){const h=(0,t[a])(e,s,r);if(!n(h)){if(!i(h))throw o("DecorateProperty",[t,e,s,r],"decorated",h,"Object, Function, null, or undefined");r=h}}return r}(t,e,s,r)}if(!Array.isArray(t))throw o("Metadata.decorate",[t,e,s,r],"decorators",t,"Array");if("function"!=typeof e)throw o("Metadata.decorate",[t,e,s,r],"target",e,"Function");return function(t,e){for(let s=t.length-1;s>=0;--s){const i=(0,t[s])(e);if(!n(i)){if("function"!=typeof i)throw o("DecorateConstructor",[t,e],"decorated",i,"Function, null, or undefined");e=i}}return e}(t,e)}function w(t,e,s,n){if(!i(s))throw o("Metadata.define",[t,e,s,n],"target",s,"Object or Function");return p(t,e,s,a(n))}function y(t,e,s){if(!i(e))throw o("Metadata.has",[t,e,s],"target",e,"Object or Function");return l(t,e,a(s))}function b(t,e,s){if(!i(e))throw o("Metadata.hasOwn",[t,e,s],"target",e,"Object or Function");return c(t,e,a(s))}function k(t,e,s){if(!i(e))throw o("Metadata.get",[t,e,s],"target",e,"Object or Function");return d(t,e,a(s))}function C(t,e,s){if(!i(e))throw o("Metadata.getOwn",[t,e,s],"target",e,"Object or Function");return u(t,e,a(s))}function S(t,e){if(!i(t))throw o("Metadata.getKeys",[t,e],"target",t,"Object or Function");return g(t,a(e))}function T(t,e){if(!i(t))throw o("Metadata.getOwnKeys",[t,e],"target",t,"Object or Function");return f(t,a(e))}function $(t,e,s){if(!i(e))throw o("Metadata.delete",[t,e,s],"target",e,"Object or Function");return function(t,e,s){const i=h(t,s,!1);return void 0!==i&&i.delete(e)}(e,t,a(s))}const x={define:w,has:y,hasOwn:b,get:k,getOwn:C,getKeys:S,getOwnKeys:T,delete:$},A="[[$au]]",I=(t,e,s)=>[[A,r],["metadata",v],["decorate",m],["defineMetadata",w],["hasMetadata",y],["hasOwnMetadata",b],["getMetadata",k],["getOwnMetadata",C],["getMetadataKeys",S],["getOwnMetadataKeys",T],["deleteMetadata",$]].forEach((([i,n])=>((t,e,s,i,n)=>{if(!Reflect.defineProperty(t,e,{writable:i,enumerable:!1,configurable:n,value:s}))throw R(`AUR1000:${e}`)})(t,i,n,e,s))),O=(t,e=!0,s=!1,i=!0,n=!0)=>{if((t=>A in t)(t)){if(t[A]===r)return;if(t[A]instanceof WeakMap)return void(r=t[A]);throw R("AUR1001")}const o="metadata decorate defineMetadata hasMetadata hasOwnMetadata getMetadata getOwnMetadata getMetadataKeys getOwnMetadataKeys deleteMetadata".split(" ").filter((t=>t in Reflect));if(o.length>0){if(e){const t=o.map((function(t){return`${t}:\n${Reflect[t].toString().slice(0,100)}...`})).join("\n\n");throw R(`AUR1002:${t}`)}s&&I(t,i,n)}else I(t,i,n)},R=t=>new Error(t),E=Object.getPrototypeOf},788:(t,e,s)=>{s.d(e,{$6:()=>yt,BR:()=>C,DB:()=>G,DI:()=>ut,E8:()=>D,FD:()=>At,GL:()=>w,H3:()=>mt,Ho:()=>m,JW:()=>F,P2:()=>pt,Protocol:()=>B,Qy:()=>S,TD:()=>A,TI:()=>Ot,Xo:()=>Mt,YM:()=>Tt,ZT:()=>It,bE:()=>dt,eG:()=>k,eV:()=>v,g:()=>$t,hh:()=>ft,jt:()=>bt,ow:()=>xt,p9:()=>x,pU:()=>L,qo:()=>y,y5:()=>f});var i=s(878);const n=Object.freeze,r=String,o=i.SF.getOwn,a=i.SF.hasOwn,h=i.SF.define,c=t=>"function"==typeof t,l=t=>"string"==typeof t,u=()=>Object.create(null),d=(t,...e)=>new Error(`AUR${r(t).padStart(4,"0")}:${e.map(r)}`),p={},f=t=>{switch(typeof t){case"number":return t>=0&&(0|t)===t;case"string":{const e=p[t];if(void 0!==e)return e;const s=t.length;if(0===s)return p[t]=!1;let i=0,n=0;for(;n<s;++n)if(i=I(t,n),0===n&&48===i&&s>1||i<48||i>57)return p[t]=!1;return p[t]=!0}default:return!1}},g=function(){const t=Object.assign(u(),{0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0}),e=e=>""===e?0:e!==e.toUpperCase()?3:e!==e.toLowerCase()?2:!0===t[e]?1:0;return(t,s)=>{const i=t.length;if(0===i)return t;let n,r=!1,o="",a="",h=0,c=t.charAt(0),l=e(c),u=0;for(;u<i;++u)n=h,a=c,h=l,c=t.charAt(u+1),l=e(c),0===h?o.length>0&&(r=!0):(!r&&o.length>0&&2===h&&(r=3===n||3===l),o+=s(a,r),r=!1);return o}}(),v=function(){const t=u(),e=(t,e)=>e?t.toUpperCase():t.toLowerCase();return s=>{let i=t[s];return void 0===i&&(i=t[s]=g(s,e)),i}}(),m=function(){const t=u();return e=>{let s=t[e];return void 0===s&&(s=v(e),s.length>0&&(s=s[0].toUpperCase()+s.slice(1)),t[e]=s),s}}(),w=function(){const t=u(),e=(t,e)=>e?`-${t.toLowerCase()}`:t.toLowerCase();return s=>{let i=t[s];return void 0===i&&(i=t[s]=g(s,e)),i}}(),y=t=>{const e=t.length,s=Array(e);let i=0;for(;i<e;++i)s[i]=t[i];return s},b=(t,e,s)=>({configurable:!0,enumerable:s.enumerable,get(){const t=s.value.bind(this);return Reflect.defineProperty(this,e,{value:t,writable:!0,configurable:!0,enumerable:s.enumerable}),t}}),k=(...t)=>{const e=[];let s=0;const i=t.length;let n,r=0,o=0;for(;o<i;++o)if(n=t[o],void 0!==n){r=n.length;let t=0;for(;t<r;++t)e[s++]=n[t]}return e},C=(...t)=>{const e=t.length;let s,i=0;for(;e>i;++i)if(s=t[i],void 0!==s)return s;throw d(20)},S=function(){const t=Function.prototype,e=Object.getPrototypeOf,s=new WeakMap;let i,n=t,r=0;return function(o){if(i=s.get(o),void 0===i)for(s.set(o,i=[n=o]),r=0;(n=e(n))!==t;)i[++r]=n;return i}}();function T(...t){return Object.assign(u(),...t)}const $=function(){const t=new WeakMap;let e=!1,s="",i=0;return n=>(e=t.get(n),void 0===e&&(s=n.toString(),i=s.length,e=i>=29&&i<=100&&125===I(s,i-1)&&I(s,i-2)<=32&&93===I(s,i-3)&&101===I(s,i-4)&&100===I(s,i-5)&&111===I(s,i-6)&&99===I(s,i-7)&&32===I(s,i-8)&&101===I(s,i-9)&&118===I(s,i-10)&&105===I(s,i-11)&&116===I(s,i-12)&&97===I(s,i-13)&&110===I(s,i-14)&&88===I(s,i-15),t.set(n,e)),e)}(),x=(t,e)=>t instanceof Promise?t.then(e):e(t),A=(...t)=>{let e,s,i,n=0,r=t.length;for(;n<r;++n)e=t[n],(e=t[n])instanceof Promise&&(void 0===s?s=e:void 0===i?i=[s,e]:i.push(e));return void 0===i?s:Promise.all(i)},I=(t,e)=>t.charCodeAt(e),O="au:annotation",R=(t,e)=>void 0===e?`${O}:${t}`:`${O}:${t}:${e}`,E=(t,e)=>{const s=o(O,t);void 0===s?h(O,[e],t):s.push(e)},P="au:resource",N=t=>a(P,t),M=t=>{const e=o(P,t);return void 0===e?xt:e.map((e=>o(e,t)))},B={annotation:n({name:"au:annotation",appendTo:E,set(t,e,s){h(R(e),s,t)},get:(t,e)=>o(R(e),t),getKeys(t){let e=o(O,t);return void 0===e&&h(O,e=[],t),e},isKey:t=>t.startsWith(O),keyFor:R}),resource:n({name:P,appendTo(t,e){const s=o(P,t);void 0===s?h(P,[e],t):s.push(e)},has:N,getAll:M,getKeys(t){let e=o(P,t);return void 0===e&&h(P,e=[],t),e},isKey:t=>t.startsWith(P),keyFor:(t,e)=>void 0===e?`${P}:${t}`:`${P}:${t}:${e}`})},j=Object.prototype.hasOwnProperty;function F(t,e,s,i){let n=o(R(t),s);return void 0===n?(n=e[t],void 0===n?(n=s[t],void 0!==n&&j.call(s,t)?n:i()):n):n}function L(t,e,s){let i=o(R(t),e);return void 0===i?(i=e[t],void 0!==i&&j.call(e,t)?i:s()):i}function D(t,e,s){const i=e[t];return void 0===i?s():i}const V=new Set("Array ArrayBuffer Boolean DataView Date Error EvalError Float32Array Float64Array Function Int8Array Int16Array Int32Array Map Number Object Promise RangeError ReferenceError RegExp Set SharedArrayBuffer String SyntaxError TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array URIError WeakMap WeakSet".split(" "));let U=0,W=null;class q{get depth(){return null===this.t?0:this.t.depth+1}get parent(){return this.t}constructor(t,e){if(this.id=++U,this.i=0,this.u=new Map,this.t=t,this.config=e,this.h=new Map,this.res={},null===t)this.root=this,this.R=new Map;else if(this.root=t.root,this.R=t.R,e.inheritParentResources)for(const e in t.res)this.registerResolver(e,t.res[e]);this.h.set(dt,X)}register(...t){if(100==++this.i)throw d(6,...t);let e,s,n,r,o,a=0,h=t.length;for(;a<h;++a)if(e=t[a],(0,i.Kn)(e))if(Z(e))e.register(this);else if(N(e)){const t=M(e);if(1===t.length)t[0].register(this);else for(r=0,o=t.length;o>r;)t[r].register(this),++r}else if(J(e))Tt.singleton(e,e).register(this);else for(s=Object.keys(e),r=0,o=s.length;r<o;++r)n=e[s[r]],(0,i.Kn)(n)&&(Z(n)?n.register(this):this.register(n));return--this.i,this}registerResolver(t,e,s=!1){K(t);const i=this.h,n=i.get(t);if(null==n){if(i.set(t,e),tt(t)){if(void 0!==this.res[t])throw d(7,t);this.res[t]=e}}else n instanceof Ct&&4===n.C?n._state.push(e):i.set(t,new Ct(t,4,[n,e]));return s&&this.u.set(t,e),e}registerTransformer(t,e){const s=this.getResolver(t);if(null==s)return!1;if(s.getFactory){const t=s.getFactory(this);return null!=t&&(t.registerTransformer(e),!0)}return!1}getResolver(t,e=!0){if(K(t),void 0!==t.resolve)return t;const s=W;let i,n,r=W=this;try{for(;null!=r;){if(i=r.h.get(t),null!=i)return i;if(null==r.t)return n=Y(t)?this:r,e?this.L(t,n):null;r=r.t}}finally{W=s}return null}has(t,e=!1){return!!(this.h.has(t)||tt(t)&&t in this.res)||!(!e||null==this.t)&&this.t.has(t,!0)}get(t){if(K(t),t.$isResolver)return t.resolve(this,this);const e=W;let s,i,n=W=this;try{for(;null!=n;){if(s=n.h.get(t),null!=s)return s.resolve(n,this);if(null==n.t)return i=Y(t)?this:n,s=this.L(t,i),s.resolve(n,this);n=n.t}}finally{W=e}throw d(8,t)}getAll(t,e=!1){K(t);const s=W,i=W=this;let n,r=i,o=xt;try{if(e){for(;null!=r;)n=r.h.get(t),null!=n&&(o=o.concat(Q(n,r,i))),r=r.t;return o}for(;null!=r;){if(n=r.h.get(t),null!=n)return Q(n,r,i);if(r=r.t,null==r)return xt}}finally{W=s}return xt}invoke(t,e){const s=W;W=this;try{if($(t))throw d(15,t);return void 0===e?new t(...ct(t).map(z,this)):new t(...ct(t).map(z,this),...e)}finally{W=s}}hasFactory(t){return this.R.has(t)}getFactory(t){let e=this.R.get(t);if(void 0===e){if($(t))throw d(15,t);this.R.set(t,e=new _(t,ct(t)))}return e}registerFactory(t,e){this.R.set(t,e)}createChild(t){return void 0===t&&this.config.inheritParentResources?this.config===ot.DEFAULT?new q(this,this.config):new q(this,ot.from({...this.config,inheritParentResources:!1})):new q(this,ot.from(t??this.config))}disposeResolvers(){const t=this.h,e=this.u;let s,i;for([i,s]of e.entries())s.dispose(),t.delete(i);e.clear()}useResources(t){const e=t.res;for(const t in e)this.registerResolver(t,e[t])}find(t,e){const s=t.keyFrom(e);let i=this.res[s];if(void 0===i&&(i=this.root.res[s],void 0===i))return null;if(null===i)return null;if(c(i.getFactory)){const e=i.getFactory(this);if(null==e)return null;const s=o(t.name,e.Type);return void 0===s?null:s}return null}create(t,e){const s=t.keyFrom(e);let i=this.res[s];return void 0===i?(i=this.root.res[s],void 0===i?null:i.resolve(this.root,this)??null):i.resolve(this,this)??null}dispose(){this.u.size>0&&this.disposeResolvers(),this.h.clear()}L(t,e){if(!c(t))throw d(9,t);if(V.has(t.name))throw d(10,t);if(Z(t)){const s=t.register(e,t);if(!(s instanceof Object)||null==s.resolve){const s=e.h.get(t);if(null!=s)return s;throw d(11,t)}return s}if(N(t)){const s=M(t);if(1===s.length)s[0].register(e);else{const t=s.length;for(let i=0;i<t;++i)s[i].register(e)}const i=e.h.get(t);if(null!=i)return i;throw d(11,t)}if(t.$isInterface)throw d(12,t.friendlyName);const s=this.config.defaultResolver(t,e);return e.h.set(t,s),s}}class _{constructor(t,e){this.Type=t,this.dependencies=e,this.transformers=null}construct(t,e){const s=W;let i;W=t;try{return i=void 0===e?new this.Type(...this.dependencies.map(z,t)):new this.Type(...this.dependencies.map(z,t),...e),null==this.transformers?i:this.transformers.reduce(H,i)}finally{W=s}}registerTransformer(t){(this.transformers??(this.transformers=[])).push(t)}}function H(t,e){return e(t)}function K(t){if(null==t)throw d(14)}function z(t){return this.get(t)}function G(...t){if(null==W)throw d(16,...t);return 1===t.length?W.get(t[0]):t.map(z,W)}const Q=(t,e,s)=>{if(t instanceof Ct&&4===t.C){const i=t._state,n=i.length,r=Array(n);let o=0;for(;o<n;++o)r[o]=i[o].resolve(e,s);return r}return[t.resolve(e,s)]},X={$isResolver:!0,resolve:(t,e)=>e},Z=t=>c(t.register),Y=t=>(t=>Z(t)&&"boolean"==typeof t.registerInRequestor)(t)&&t.registerInRequestor,J=t=>void 0!==t.prototype,tt=t=>l(t)&&t.indexOf(":")>0,et=new WeakMap,st=t=>(e,s,i)=>{let n=et.get(e);if(void 0===n&&et.set(e,n=new WeakMap),n.has(i))return n.get(i);const r=t(e,s,i);return n.set(i,r),r};(0,i.RT)(Reflect,!1,!1);class it{constructor(t,e){this.c=t,this.k=e}instance(t){return this.$(0,t)}singleton(t){return this.$(1,t)}transient(t){return this.$(2,t)}callback(t){return this.$(3,t)}cachedCallback(t){return this.$(3,st(t))}aliasTo(t){return this.$(5,t)}$(t,e){const{c:s,k:i}=this;return this.c=this.k=void 0,s.registerResolver(i,new Ct(i,t,e))}}const nt=t=>{const e=t.slice(),s=Object.keys(t),i=s.length;let n;for(let r=0;r<i;++r)n=s[r],f(n)||(e[n]=t[n]);return e},rt={none(t){throw d(2,t)},singleton:t=>new Ct(t,1,t),transient:t=>new Ct(t,2,t)};class ot{constructor(t,e){this.inheritParentResources=t,this.defaultResolver=e}static from(t){return void 0===t||t===ot.DEFAULT?ot.DEFAULT:new ot(t.inheritParentResources??!1,t.defaultResolver??rt.singleton)}}ot.DEFAULT=ot.from({});const at=t=>{const e=R("di:paramtypes");return o(e,t)},ht=t=>{const e=R("di:paramtypes");let s=o(e,t);return void 0===s&&(h(e,s=[],t),E(t,e)),s},ct=t=>{const e=R("di:dependencies");let s=o(e,t);if(void 0===s){const i=t.inject;if(void 0===i){const e=ut.getDesignParamtypes(t),i=at(t);if(void 0===e)if(void 0===i){const e=Object.getPrototypeOf(t);s=c(e)&&e!==Function.prototype?nt(ct(e)):[]}else s=nt(i);else if(void 0===i)s=nt(e);else{s=nt(e);let t,n=i.length,r=0;for(;r<n;++r)t=i[r],void 0!==t&&(s[r]=t);const o=Object.keys(i);let a;for(r=0,n=o.length,r=0;r<n;++r)a=o[r],f(a)||(s[a]=i[a])}}else s=nt(i);h(e,s,t),E(t,e)}return s},lt=(t,e)=>{const s=c(t)?t:e,i=(l(t)?t:void 0)??"(anonymous)",n=function(t,e,s){if(null==t||void 0!==new.target)throw d(1,i);ht(t)[s]=n};return n.$isInterface=!0,n.friendlyName=i,null!=s&&(n.register=(t,e)=>s(new it(t,e??n))),n.toString=()=>`InterfaceSymbol<${i}>`,n},ut={createContainer:t=>new q(null,ot.from(t)),getDesignParamtypes:t=>o("design:paramtypes",t),getAnnotationParamtypes:at,getOrCreateAnnotationParamTypes:ht,getDependencies:ct,createInterface:lt,inject:(...t)=>(e,s,i)=>{if("number"==typeof i){const s=ht(e),n=t[0];void 0!==n&&(s[i]=n)}else if(s){const i=ht(e.constructor),n=t[0];void 0!==n&&(i[s]=n)}else if(i){const e=i.value,s=ht(e);let n,r=0;for(;r<t.length;++r)n=t[r],void 0!==n&&(s[r]=n)}else{const s=ht(e);let i,n=0;for(;n<t.length;++n)i=t[n],void 0!==i&&(s[n]=i)}},transient:t=>(t.register=function(e){return Tt.transient(t,t).register(e,t)},t.registerInRequestor=!1,t),singleton:(t,e=wt)=>(t.register=function(e){return Tt.singleton(t,t).register(e,t)},t.registerInRequestor=e.scoped,t)},dt=lt("IContainer"),pt=dt;function ft(t){return function(e){function s(t,e,i){gt(s)(t,e,i)}return s.$isResolver=!0,s.resolve=function(s,i){return t(e,s,i)},s}}const gt=ut.inject;function vt(t){return ut.transient(t)}function mt(t){return null==t?vt:vt(t)}const wt={scoped:!1};ut.singleton;const yt=(t,e=!1)=>{function s(t,e,i){gt(s)(t,e,i)}return s.$isResolver=!0,s.resolve=(s,i)=>i.getAll(t,e),s},bt=ft(((t,e,s)=>s.has(t,!0)?s.get(t):void 0)),kt=(t,e,s)=>{gt(kt)(t,e,s)};kt.$isResolver=!0,kt.resolve=()=>{};class Ct{constructor(t,e,s){this.resolving=!1,this.k=t,this.C=e,this._state=s}get $isResolver(){return!0}register(t,e){return t.registerResolver(e||this.k,this)}resolve(t,e){switch(this.C){case 0:return this._state;case 1:if(this.resolving)throw d(3,this._state.name);return this.resolving=!0,this._state=t.getFactory(this._state).construct(e),this.C=0,this.resolving=!1,this._state;case 2:{const s=t.getFactory(this._state);if(null===s)throw d(4,this.k);return s.construct(e)}case 3:return this._state(t,e,this);case 4:return this._state[0].resolve(t,e);case 5:return e.get(this._state);default:throw d(5,this.C)}}getFactory(t){switch(this.C){case 1:case 2:return t.getFactory(this._state);case 5:return t.getResolver(this._state)?.getFactory?.(t)??null;default:return null}}}class St{constructor(t,e){this.key=t,this.params=e}register(t){t.has(this.key,!0)?t.get(this.key).register(t,...this.params):t.register(...this.params.filter((t=>"object"==typeof t)))}}const Tt={instance:(t,e)=>new Ct(t,0,e),singleton:(t,e)=>new Ct(t,1,e),transient:(t,e)=>new Ct(t,2,e),callback:(t,e)=>new Ct(t,3,e),cachedCallback:(t,e)=>new Ct(t,3,st(e)),aliasTo:(t,e)=>new Ct(e,5,t),defer:(t,...e)=>new St(t,e)};class $t{get friendlyName(){return this.O}constructor(t,e){this.A=null,this.O=t,void 0!==e&&(this.A=e)}prepare(t){this.A=t}get $isResolver(){return!0}resolve(){if(null==this.A)throw d(13,this.O);return this.A}dispose(){this.A=null}}const xt=n([]),At=n({});function It(){}const Ot=lt("IPlatform");function Rt(t,e,s,i){var n,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,s,o):n(e,s))||o);return r>3&&o&&Object.defineProperty(e,s,o),o}n({trace:0,debug:1,info:2,warn:3,error:4,fatal:5,none:6});const Et=lt("ILogConfig",(t=>t.instance(new Lt("no-colors",3)))),Pt=lt("ISink"),Nt=lt("ILogEventFactory",(t=>t.singleton(qt))),Mt=lt("ILogger",(t=>t.singleton(_t))),Bt=lt("ILogScope"),jt=n({key:R("logger-sink-handles"),define(t,e){return h(this.key,e.handles,t.prototype),t},getHandles(t){return i.SF.get(this.key,t)}}),Ft=T({red:t=>`[31m${t}[39m`,green:t=>`[32m${t}[39m`,yellow:t=>`[33m${t}[39m`,blue:t=>`[34m${t}[39m`,magenta:t=>`[35m${t}[39m`,cyan:t=>`[36m${t}[39m`,white:t=>`[37m${t}[39m`,grey:t=>`[90m${t}[39m`});class Lt{constructor(t,e){this.colorOptions=t,this.level=e}}const Dt=function(){const t={"no-colors":T({TRC:"TRC",DBG:"DBG",INF:"INF",WRN:"WRN",ERR:"ERR",FTL:"FTL",QQQ:"???"}),colors:T({TRC:Ft.grey("TRC"),DBG:Ft.grey("DBG"),INF:Ft.white("INF"),WRN:Ft.yellow("WRN"),ERR:Ft.red("ERR"),FTL:Ft.red("FTL"),QQQ:Ft.grey("???")})};return(e,s)=>e<=0?t[s].TRC:e<=1?t[s].DBG:e<=2?t[s].INF:e<=3?t[s].WRN:e<=4?t[s].ERR:e<=5?t[s].FTL:t[s].QQQ}(),Vt=(t,e)=>"no-colors"===e?t.join("."):t.map(Ft.cyan).join("."),Ut=(t,e)=>"no-colors"===e?new Date(t).toISOString():Ft.grey(new Date(t).toISOString());class Wt{constructor(t,e,s,i,n,r){this.severity=t,this.message=e,this.optionalParams=s,this.scope=i,this.colorOptions=n,this.timestamp=r}toString(){const{severity:t,message:e,scope:s,colorOptions:i,timestamp:n}=this;return 0===s.length?`${Ut(n,i)} [${Dt(t,i)}] ${e}`:`${Ut(n,i)} [${Dt(t,i)} ${Vt(s,i)}] ${e}`}getFormattedLogInfo(t=!1){const{severity:e,message:s,scope:i,colorOptions:n,timestamp:r,optionalParams:o}=this;let a=null,h="";t&&s instanceof Error?a=s:h=s;const c=0===i.length?"":` ${Vt(i,n)}`;let l=`${Ut(r,n)} [${Dt(e,n)}${c}] ${h}`;if(void 0===o||0===o.length)return null===a?[l]:[l,a];let u=0;for(;l.includes("%s");)l=l.replace("%s",String(o[u++]));return null!==a?[l,a,...o.slice(u)]:[l,...o.slice(u)]}}class qt{constructor(){this.config=G(Et)}createLogEvent(t,e,s,i){return new Wt(e,s,i,t.scope,this.config.colorOptions,Date.now())}}class _t{constructor(t=G(Et),e=G(Nt),s=G(yt(Pt)),i=G(bt(Bt))??[],n=null){let r,o,a,h,c,l;if(this.scope=i,this.I=u(),this.config=t,this.f=e,this.sinks=s,null===n){this.root=this,this.parent=this,r=this.F=[],o=this.M=[],a=this.T=[],h=this.j=[],c=this._=[],l=this.P=[];for(const t of s){const e=jt.getHandles(t);(e?.includes(0)??1)&&r.push(t),(e?.includes(1)??1)&&o.push(t),(e?.includes(2)??1)&&a.push(t),(e?.includes(3)??1)&&h.push(t),(e?.includes(4)??1)&&c.push(t),(e?.includes(5)??1)&&l.push(t)}}else this.root=n.root,this.parent=n,r=this.F=n.F,o=this.M=n.M,a=this.T=n.T,h=this.j=n.j,c=this._=n._,l=this.P=n.P}trace(t,...e){this.config.level<=0&&this.K(this.F,0,t,e)}debug(t,...e){this.config.level<=1&&this.K(this.M,1,t,e)}info(t,...e){this.config.level<=2&&this.K(this.T,2,t,e)}warn(t,...e){this.config.level<=3&&this.K(this.j,3,t,e)}error(t,...e){this.config.level<=4&&this.K(this._,4,t,e)}fatal(t,...e){this.config.level<=5&&this.K(this.P,5,t,e)}scopeTo(t){const e=this.I;let s=e[t];return void 0===s&&(s=e[t]=new _t(this.config,this.f,null,this.scope.concat(t),this)),s}K(t,e,s,i){const n=c(s)?s():s,r=this.f.createLogEvent(this,e,n,i);for(let e=0,s=t.length;e<s;++e)t[e].handleEvent(r)}}Rt([b],_t.prototype,"trace",null),Rt([b],_t.prototype,"debug",null),Rt([b],_t.prototype,"info",null),Rt([b],_t.prototype,"warn",null),Rt([b],_t.prototype,"error",null),Rt([b],_t.prototype,"fatal",null)},878:(t,e,s)=>{function i(t){return"object"==typeof t&&null!==t||"function"==typeof t}function n(t){return null==t}s.d(e,{Kn:()=>i,RT:()=>O,SF:()=>x});let r=new WeakMap;const o=(t,e,s,i,n)=>new TypeError(`${t}(${e.map(String).join(",")}) - Expected '${s}' to be of type ${n}, but got: ${Object.prototype.toString.call(i)} (${String(i)})`);function a(t){switch(typeof t){case"undefined":case"string":case"symbol":return t;default:return`${t}`}}function h(t,e,s){let i=r.get(t);if(void 0===i){if(!s)return;i=new Map,r.set(t,i)}let n=i.get(e);if(void 0===n){if(!s)return;n=new Map,i.set(e,n)}return n}function c(t,e,s){const i=h(e,s,!1);return void 0!==i&&i.has(t)}function l(t,e,s){if(c(t,e,s))return!0;const i=E(e);return null!==i&&l(t,i,s)}function u(t,e,s){const i=h(e,s,!1);if(void 0!==i)return i.get(t)}function d(t,e,s){if(c(t,e,s))return u(t,e,s);const i=E(e);return null!==i?d(t,i,s):void 0}function p(t,e,s,i){h(s,i,!0).set(t,e)}function f(t,e){const s=[],i=h(t,e,!1);if(void 0===i)return s;const n=i.keys();let r=0;for(const t of n)s[r]=t,++r;return s}function g(t,e){const s=f(t,e),i=E(t);if(null===i)return s;const n=g(i,e),r=s.length;if(0===r)return n;const o=n.length;if(0===o)return s;const a=new Set,h=[];let c,l=0;for(let t=0;t<r;++t)c=s[t],a.has(c)||(a.add(c),h[l]=c,++l);for(let t=0;t<o;++t)c=n[t],a.has(c)||(a.add(c),h[l]=c,++l);return h}function v(t,e){return function(s,n){if(!i(s))throw o("@metadata",[t,e,s,n],"target",s,"Object or Function");p(t,e,s,function(t){switch(typeof t){case"undefined":case"string":case"symbol":return t;default:throw new TypeError(`Invalid metadata propertyKey: ${t}.`)}}(n))}}function m(t,e,s,r){if(void 0!==s){if(!Array.isArray(t))throw o("Metadata.decorate",[t,e,s,r],"decorators",t,"Array");if(!i(e))throw o("Metadata.decorate",[t,e,s,r],"target",e,"Object or Function");if(!i(r)&&!n(r))throw o("Metadata.decorate",[t,e,s,r],"attributes",r,"Object, Function, null, or undefined");return null===r&&(r=void 0),s=function(t){switch(typeof t){case"string":case"symbol":return t;default:return`${t}`}}(s),function(t,e,s,r){for(let a=t.length-1;a>=0;--a){const h=(0,t[a])(e,s,r);if(!n(h)){if(!i(h))throw o("DecorateProperty",[t,e,s,r],"decorated",h,"Object, Function, null, or undefined");r=h}}return r}(t,e,s,r)}if(!Array.isArray(t))throw o("Metadata.decorate",[t,e,s,r],"decorators",t,"Array");if("function"!=typeof e)throw o("Metadata.decorate",[t,e,s,r],"target",e,"Function");return function(t,e){for(let s=t.length-1;s>=0;--s){const i=(0,t[s])(e);if(!n(i)){if("function"!=typeof i)throw o("DecorateConstructor",[t,e],"decorated",i,"Function, null, or undefined");e=i}}return e}(t,e)}function w(t,e,s,n){if(!i(s))throw o("Metadata.define",[t,e,s,n],"target",s,"Object or Function");return p(t,e,s,a(n))}function y(t,e,s){if(!i(e))throw o("Metadata.has",[t,e,s],"target",e,"Object or Function");return l(t,e,a(s))}function b(t,e,s){if(!i(e))throw o("Metadata.hasOwn",[t,e,s],"target",e,"Object or Function");return c(t,e,a(s))}function k(t,e,s){if(!i(e))throw o("Metadata.get",[t,e,s],"target",e,"Object or Function");return d(t,e,a(s))}function C(t,e,s){if(!i(e))throw o("Metadata.getOwn",[t,e,s],"target",e,"Object or Function");return u(t,e,a(s))}function S(t,e){if(!i(t))throw o("Metadata.getKeys",[t,e],"target",t,"Object or Function");return g(t,a(e))}function T(t,e){if(!i(t))throw o("Metadata.getOwnKeys",[t,e],"target",t,"Object or Function");return f(t,a(e))}function $(t,e,s){if(!i(e))throw o("Metadata.delete",[t,e,s],"target",e,"Object or Function");return function(t,e,s){const i=h(t,s,!1);return void 0!==i&&i.delete(e)}(e,t,a(s))}const x={define:w,has:y,hasOwn:b,get:k,getOwn:C,getKeys:S,getOwnKeys:T,delete:$},A="[[$au]]",I=(t,e,s)=>[[A,r],["metadata",v],["decorate",m],["defineMetadata",w],["hasMetadata",y],["hasOwnMetadata",b],["getMetadata",k],["getOwnMetadata",C],["getMetadataKeys",S],["getOwnMetadataKeys",T],["deleteMetadata",$]].forEach((([i,n])=>((t,e,s,i,n)=>{if(!Reflect.defineProperty(t,e,{writable:i,enumerable:!1,configurable:n,value:s}))throw R(`AUR1000:${e}`)})(t,i,n,e,s))),O=(t,e=!0,s=!1,i=!0,n=!0)=>{if((t=>A in t)(t)){if(t[A]===r)return;if(t[A]instanceof WeakMap)return void(r=t[A]);throw R("AUR1001")}const o="metadata decorate defineMetadata hasMetadata hasOwnMetadata getMetadata getOwnMetadata getMetadataKeys getOwnMetadataKeys deleteMetadata".split(" ").filter((t=>t in Reflect));if(o.length>0){if(e){const t=o.map((function(t){return`${t}:\n${Reflect[t].toString().slice(0,100)}...`})).join("\n\n");throw R(`AUR1002:${t}`)}s&&I(t,i,n)}else I(t,i,n)},R=t=>new Error(t),E=Object.getPrototypeOf},573:(t,e,s)=>{s.d(e,{o:()=>r});var i=s(934);const n=new Map;class r extends i.t4{constructor(t,e={}){super(t,e),this.t=!1,this.i=-1,this.h=!1,this.u=-1,"Node Element HTMLElement CustomEvent CSSStyleSheet ShadowRoot MutationObserver window document customElements".split(" ").forEach((s=>this[s]=s in e?e[s]:t[s])),"fetch requestAnimationFrame cancelAnimationFrame".split(" ").forEach((s=>this[s]=s in e?e[s]:t[s]?.bind(t)??o(s))),this.flushDomRead=this.flushDomRead.bind(this),this.flushDomWrite=this.flushDomWrite.bind(this),this.domReadQueue=new i.wn(this,this.requestDomRead.bind(this),this.cancelDomRead.bind(this)),this.domWriteQueue=new i.wn(this,this.requestDomWrite.bind(this),this.cancelDomWrite.bind(this))}static getOrCreate(t,e={}){let s=n.get(t);return void 0===s&&n.set(t,s=new r(t,e)),s}static set(t,e){n.set(t,e)}requestDomRead(){this.t=!0,-1===this.u&&(this.u=this.requestAnimationFrame(this.flushDomWrite))}cancelDomRead(){this.t=!1,this.i>-1&&(this.clearTimeout(this.i),this.i=-1),!1===this.h&&this.u>-1&&(this.cancelAnimationFrame(this.u),this.u=-1)}flushDomRead(){this.i=-1,!0===this.t&&(this.t=!1,this.domReadQueue.flush())}requestDomWrite(){this.h=!0,-1===this.u&&(this.u=this.requestAnimationFrame(this.flushDomWrite))}cancelDomWrite(){this.h=!1,this.u>-1&&(!1===this.t||this.i>-1)&&(this.cancelAnimationFrame(this.u),this.u=-1)}flushDomWrite(){this.u=-1,!0===this.h&&(this.h=!1,this.domWriteQueue.flush()),!0===this.t&&-1===this.i&&(this.i=this.setTimeout(this.flushDomRead,0))}}const o=t=>()=>{throw new Error(`The PLATFORM did not receive a valid reference to the global function '${t}'.`)}},934:(t,e,s)=>{s.d(e,{Nj:()=>u,t4:()=>c,wn:()=>l});const i="pending",n="running",r="completed",o="canceled",a=new Map,h=t=>()=>{throw S(`AUR1005:${t}`)};class c{constructor(t,e={}){this.macroTaskRequested=!1,this.macroTaskHandle=-1,this.globalThis=t,"decodeURI decodeURIComponent encodeURI encodeURIComponent Date Reflect console".split(" ").forEach((s=>{this[s]=s in e?e[s]:t[s]})),"clearInterval clearTimeout queueMicrotask setInterval setTimeout".split(" ").forEach((s=>{this[s]=s in e?e[s]:t[s]?.bind(t)??h(s)})),this.performanceNow="performanceNow"in e?e.performanceNow:t.performance?.now?.bind(t.performance)??h("performance.now"),this.flushMacroTask=this.flushMacroTask.bind(this),this.taskQueue=new l(this,this.requestMacroTask.bind(this),this.cancelMacroTask.bind(this))}static getOrCreate(t,e={}){let s=a.get(t);return void 0===s&&a.set(t,s=new c(t,e)),s}static set(t,e){a.set(t,e)}requestMacroTask(){this.macroTaskRequested=!0,-1===this.macroTaskHandle&&(this.macroTaskHandle=this.setTimeout(this.flushMacroTask,0))}cancelMacroTask(){this.macroTaskRequested=!1,this.macroTaskHandle>-1&&(this.clearTimeout(this.macroTaskHandle),this.macroTaskHandle=-1)}flushMacroTask(){this.macroTaskHandle=-1,!0===this.macroTaskRequested&&(this.macroTaskRequested=!1,this.taskQueue.flush())}}class l{get isEmpty(){return 0===this.t&&0===this.i.length&&0===this.h.length&&0===this.u.length}get T(){return 0===this.t&&this.i.every(b)&&this.h.every(b)&&this.u.every(b)}constructor(t,e,s){this.platform=t,this.$request=e,this.$cancel=s,this.$=void 0,this.t=0,this.i=[],this.h=[],this.u=[],this.R=!1,this.A=void 0,this.P=[],this.M=0,this.U=0,this.q=0,this.I=()=>{this.R||(this.R=!0,this.U=this._(),this.$request())},this._=t.performanceNow,this.C=new f(t.console)}flush(t=this._()){if(this.R=!1,this.q=t,void 0===this.$){if(this.h.length>0&&(this.i.push(...this.h),this.h.length=0),this.u.length>0){let e=-1;for(;++e<this.u.length&&this.u[e].queueTime<=t;);this.i.push(...this.u.splice(0,e))}let e;for(;this.i.length>0;)if((e=this.i.shift()).run(),e.status===n){if(!0===e.suspend)return this.$=e,void this.I();++this.t}if(this.h.length>0&&(this.i.push(...this.h),this.h.length=0),this.u.length>0){let e=-1;for(;++e<this.u.length&&this.u[e].queueTime<=t;);this.i.push(...this.u.splice(0,e))}if((this.i.length>0||this.u.length>0||this.t>0)&&this.I(),void 0!==this.A&&this.T){const t=this.A;this.A=void 0,t.resolve()}}else this.I()}cancel(){this.R&&(this.$cancel(),this.R=!1)}async yield(){this.isEmpty||(void 0===this.A&&(this.A=y()),await this.A)}queueTask(t,e){const{delay:s,preempt:i,persistent:n,reusable:r,suspend:o}={...g,...e};if(i){if(s>0)throw k();if(n)throw C()}0===this.i.length&&this.I();const a=this._();let h;if(r){const e=this.P,c=this.M-1;c>=0?(h=e[c],e[c]=void 0,this.M=c,h.reuse(a,s,i,n,o,t)):h=new p(this.C,this,a,a+s,i,n,o,r,t)}else h=new p(this.C,this,a,a+s,i,n,o,r,t);return i?this.i[this.i.length]=h:0===s?this.h[this.h.length]=h:this.u[this.u.length]=h,h}remove(t){let e=this.i.indexOf(t);if(e>-1)this.i.splice(e,1);else if(e=this.h.indexOf(t),e>-1)this.h.splice(e,1);else{if(e=this.u.indexOf(t),!(e>-1))throw S(`Task #${t.id} could not be found`);this.u.splice(e,1)}}N(t){this.P[this.M++]=t}j(t){t.reset(this._()),t.createdTime===t.queueTime?this.h[this.h.length]=t:this.u[this.u.length]=t}F(t){if(!0===t.suspend){if(this.$!==t)throw S(`Async task completion mismatch: suspenderTask=${this.$?.id}, task=${t.id}`);this.$=void 0}else--this.t;if(void 0!==this.A&&this.T){const t=this.A;this.A=void 0,t.resolve()}this.isEmpty&&this.cancel()}}class u extends Error{constructor(t){super("Task was canceled."),this.task=t}}let d=0;class p{get result(){const t=this.O;if(void 0===t)switch(this.W){case i:{const t=this.O=y();return this.B=t.resolve,this.G=t.reject,t}case n:throw S("Trying to await task from within task will cause a deadlock.");case r:return this.O=Promise.resolve();case o:return this.O=Promise.reject(new u(this))}return t}get status(){return this.W}constructor(t,e,s,n,r,o,a,h,c){this.taskQueue=e,this.createdTime=s,this.queueTime=n,this.preempt=r,this.persistent=o,this.suspend=a,this.reusable=h,this.callback=c,this.id=++d,this.B=void 0,this.G=void 0,this.O=void 0,this.W=i,this.C=t}run(t=this.taskQueue.platform.performanceNow()){if(this.W!==i)throw S(`Cannot run task in ${this.W} state`);const{persistent:e,reusable:s,taskQueue:a,callback:h,B:c,G:l,createdTime:u}=this;let d;this.W=n;try{d=h(t-u),d instanceof Promise?d.then((t=>{this.persistent?a.j(this):(this.W=e?o:r,this.dispose()),a.F(this),void 0!==c&&c(t),!this.persistent&&s&&a.N(this)})).catch((t=>{if(this.persistent||this.dispose(),a.F(this),void 0===l)throw t;l(t)})):(this.persistent?a.j(this):(this.W=e?o:r,this.dispose()),void 0!==c&&c(d),!this.persistent&&s&&a.N(this))}catch(t){if(this.persistent||this.dispose(),void 0===l)throw t;l(t)}}cancel(){if(this.W===i){const t=this.taskQueue,e=this.reusable,s=this.G;return t.remove(this),t.isEmpty&&t.cancel(),this.W=o,this.dispose(),e&&t.N(this),void 0!==s&&s(new u(this)),!0}return!(this.W!==n||!this.persistent||(this.persistent=!1,0))}reset(t){const e=this.queueTime-this.createdTime;this.createdTime=t,this.queueTime=t+e,this.W=i,this.B=void 0,this.G=void 0,this.O=void 0}reuse(t,e,s,n,r,o){this.createdTime=t,this.queueTime=t+e,this.preempt=s,this.persistent=n,this.suspend=r,this.callback=o,this.W=i}dispose(){this.callback=void 0,this.B=void 0,this.G=void 0,this.O=void 0}}class f{constructor(t){this.console=t,this.enabled=!1,this.depth=0}enter(t,e){this.log(`${"  ".repeat(this.depth++)}> `,t,e)}leave(t,e){this.log(`${"  ".repeat(--this.depth)}< `,t,e)}trace(t,e){this.log(`${"  ".repeat(this.depth)}- `,t,e)}log(t,e,s){if(e instanceof l){const i=`processing=${e.i.length} pending=${e.h.length} delayed=${e.u.length} flushReq=${e.R} susTask=${!!e.$}`;this.console.log(`${t}[Q.${s}] ${i}`)}else{const i=e.id,n=Math.round(10*e.createdTime)/10,r=Math.round(10*e.queueTime)/10,o=e.preempt,a=e.reusable,h=e.persistent,c=e.suspend,l=`id=${i} created=${n} queue=${r} preempt=${o} persistent=${h} reusable=${a} status=${e.W} suspend=${c}`;this.console.log(`${t}[T.${s}] ${l}`)}}}const g={delay:0,preempt:!1,persistent:!1,reusable:!0,suspend:!1};let v,m;const w=(t,e)=>{v=t,m=e},y=()=>{const t=new Promise(w);return t.resolve=v,t.reject=m,t},b=t=>t.persistent,k=()=>S("AUR1006"),C=()=>S("AUR1007"),S=t=>new Error(t)},742:(t,e,s)=>{s.d(e,{EQ_:()=>kl,b_N:()=>wa,TIm:()=>xo,BkS:()=>vp,MoW:()=>ta});var i=s(788),n=s(878);const r=Object,o=r.prototype.hasOwnProperty,a=Reflect.defineProperty,h=t=>new Error(t),c=t=>"function"==typeof t,l=t=>t instanceof r,u=t=>t instanceof Array,d=t=>t instanceof Set,p=t=>t instanceof Map,f=r.is;function g(t,e,s){return a(t,e,{enumerable:!1,configurable:!0,writable:!0,value:s}),s}function v(t,e,s){e in t||g(t,e,s)}const m=Object.assign,w=Object.freeze,y=String,b=i.DI.createInterface,k=()=>r.create(null),C=n.SF.getOwn;n.SF.hasOwn;const S=n.SF.define;i.Protocol.annotation.keyFor,i.Protocol.resource.keyFor,i.Protocol.resource.appendTo;const T="AccessThis",$="AccessGlobal",x="AccessScope",A="ArrayLiteral",I="ObjectLiteral",O="PrimitiveLiteral",R="Template",E="Unary",P="CallScope",N="CallMember",M="CallFunction",B="CallGlobal",j="AccessMember",F="AccessKeyed",L="TaggedTemplate",D="Binary",V="Conditional",U="Assign",W="ArrowFunction",q="ValueConverter",_="BindingBehavior",H="ArrayBindingPattern",K="ObjectBindingPattern",z="BindingIdentifier",G="ForOfStatement",Q="Interpolation",X="ArrayDestructuring",Z="ObjectDestructuring",Y="DestructuringAssignmentLeaf",J="Custom";class tt{constructor(t){this.value=t,this.$kind=J}evaluate(t,e,s){return this.value}assign(t,e,s){return s}bind(t,e){}unbind(t,e){}accept(t){}}class et{constructor(t,e,s){this.expression=t,this.name=e,this.args=s,this.$kind=_,this.key=`_bb_${e}`}}class st{constructor(t,e,s){this.expression=t,this.name=e,this.args=s,this.$kind=q}}class it{constructor(t,e){this.target=t,this.value=e,this.$kind=U}}class nt{constructor(t,e,s){this.condition=t,this.yes=e,this.no=s,this.$kind=V}}class rt{constructor(t){this.name=t,this.$kind=$}}class ot{constructor(t=0){this.ancestor=t,this.$kind=T}}class at{constructor(t,e=0){this.name=t,this.ancestor=e,this.$kind=x}}const ht=t=>t.$kind===$||(t.$kind===j||t.$kind===F)&&t.accessGlobal;class ct{constructor(t,e,s=!1){this.object=t,this.name=e,this.optional=s,this.$kind=j,this.accessGlobal=ht(t)}}class lt{constructor(t,e,s=!1){this.object=t,this.key=e,this.optional=s,this.$kind=F,this.accessGlobal=ht(t)}}class ut{constructor(t,e,s=0,i=!1){this.name=t,this.args=e,this.ancestor=s,this.optional=i,this.$kind=P}}class dt{constructor(t,e,s,i=!1,n=!1){this.object=t,this.name=e,this.args=s,this.optionalMember=i,this.optionalCall=n,this.$kind=N}}class pt{constructor(t,e,s=!1){this.func=t,this.args=e,this.optional=s,this.$kind=M}}class ft{constructor(t,e){this.name=t,this.args=e,this.$kind=B}}class gt{constructor(t,e,s){this.operation=t,this.left=e,this.right=s,this.$kind=D}}class vt{constructor(t,e){this.operation=t,this.expression=e,this.$kind=E}}class mt{constructor(t){this.value=t,this.$kind=O}}mt.$undefined=new mt(void 0),mt.$null=new mt(null),mt.$true=new mt(!0),mt.$false=new mt(!1),mt.$empty=new mt("");class wt{constructor(t){this.elements=t,this.$kind=A}}wt.$empty=new wt(i.ow);class yt{constructor(t,e){this.keys=t,this.values=e,this.$kind=I}}yt.$empty=new yt(i.ow,i.ow);class bt{constructor(t,e=i.ow){this.cooked=t,this.expressions=e,this.$kind=R}}bt.$empty=new bt([""]);class kt{constructor(t,e,s,n=i.ow){this.cooked=t,this.func=s,this.expressions=n,this.$kind=L,t.raw=e}}class Ct{constructor(t){this.elements=t,this.$kind=H}}class St{constructor(t,e){this.keys=t,this.values=e,this.$kind=K}}class Tt{constructor(t){this.name=t,this.$kind=z}}class $t{constructor(t,e,s){this.declaration=t,this.iterable=e,this.semiIdx=s,this.$kind=G}}class xt{constructor(t,e=i.ow){this.parts=t,this.expressions=e,this.$kind=Q,this.isMulti=e.length>1,this.firstExpression=e[0]}}class At{constructor(t,e,s,i){this.$kind=t,this.list=e,this.source=s,this.initializer=i}}class It{constructor(t,e,s){this.target=t,this.source=e,this.initializer=s,this.$kind=Y}}class Ot{constructor(t,e,s=!1){this.args=t,this.body=e,this.rest=s,this.$kind=W}}const Rt=(t,...e)=>new Error(`AUR${y(t).padStart(4,"0")}:${e.map(y)}`);class Et{constructor(t,e){void 0!==t&&(this[t]=e)}}class Pt{constructor(t,e,s,i){this.parent=t,this.bindingContext=e,this.overrideContext=s,this.isBoundary=i}static getContext(t,e,s){if(null==t)throw Rt(203);let i=t.overrideContext,n=t;if(s>0){for(;s>0;)if(s--,n=n.parent,null==n)return;return i=n.overrideContext,e in i?i:n.bindingContext}for(;null!=n&&!n.isBoundary&&!(e in n.overrideContext)&&!(e in n.bindingContext);)n=n.parent;return null==n?t.bindingContext:(i=n.overrideContext,e in i?i:n.bindingContext)}static create(t,e,s){if(null==t)throw Rt(204);return new Pt(null,t,null==e?new Nt:e,s??!1)}static fromParent(t,e){if(null==t)throw Rt(203);return new Pt(t,e,new Nt,!1)}}class Nt{}const Mt=Pt.getContext;function Bt(t,e,s,i){switch(t.$kind){case T:{let s=e.overrideContext,i=e,n=t.ancestor;for(;n--&&s;)i=i.parent,s=i?.overrideContext??null;return n<1&&i?i.bindingContext:void 0}case x:{const n=Mt(e,t.name,t.ancestor);null!==i&&i.observe(n,t.name);const r=n[t.name];if(null==r&&"$host"===t.name)throw Rt(105);return s?.strict?s?.boundFn&&c(r)?r.bind(n):r:null==r?"":s?.boundFn&&c(r)?r.bind(n):r}case $:return globalThis[t.name];case B:{const n=globalThis[t.name];if(c(n))return n(...t.args.map((t=>Bt(t,e,s,i))));if(!s?.strictFnCall&&null==n)return;throw Rt(107)}case A:return t.elements.map((t=>Bt(t,e,s,i)));case I:{const n={};for(let r=0;r<t.keys.length;++r)n[t.keys[r]]=Bt(t.values[r],e,s,i);return n}case O:return t.value;case R:{let n=t.cooked[0];for(let r=0;r<t.expressions.length;++r)n+=String(Bt(t.expressions[r],e,s,i)),n+=t.cooked[r+1];return n}case E:switch(t.operation){case"void":return void Bt(t.expression,e,s,i);case"typeof":return typeof Bt(t.expression,e,s,i);case"!":return!Bt(t.expression,e,s,i);case"-":return-Bt(t.expression,e,s,i);case"+":return+Bt(t.expression,e,s,i);default:throw Rt(109,t.operation)}case P:{const n=t.args.map((t=>Bt(t,e,s,i))),r=Mt(e,t.name,t.ancestor),o=Dt(s?.strictFnCall,r,t.name);return o?o.apply(r,n):void 0}case N:{const n=Bt(t.object,e,s,i),r=t.args.map((t=>Bt(t,e,s,i))),o=Dt(s?.strictFnCall,n,t.name);let a;return o&&(a=o.apply(n,r),u(n)&&Wt.includes(t.name)&&i?.observeCollection(n)),a}case M:{const n=Bt(t.func,e,s,i);if(c(n))return n(...t.args.map((t=>Bt(t,e,s,i))));if(!s?.strictFnCall&&null==n)return;throw Rt(107)}case W:{const n=(...n)=>{const r=t.args,o=t.rest,a=r.length-1,h=r.reduce(((t,e,s)=>(t[e.name]=o&&s===a?n.slice(s):n[s],t)),{}),c=Pt.fromParent(e,h);return Bt(t.body,c,s,i)};return n}case j:{const n=Bt(t.object,e,s,i);let r;if(s?.strict){if(null==n)return;return null===i||t.accessGlobal||i.observe(n,t.name),r=n[t.name],s?.boundFn&&c(r)?r.bind(n):r}return null!==i&&l(n)&&!t.accessGlobal&&i.observe(n,t.name),n?(r=n[t.name],s?.boundFn&&c(r)?r.bind(n):r):""}case F:{const n=Bt(t.object,e,s,i),r=Bt(t.key,e,s,i);return l(n)?(null===i||t.accessGlobal||i.observe(n,r),n[r]):null==n?void 0:n[r]}case L:{const n=t.expressions.map((t=>Bt(t,e,s,i))),r=Bt(t.func,e,s,i);if(!c(r))throw Rt(110);return r(t.cooked,...n)}case D:{const n=t.left,r=t.right;switch(t.operation){case"&&":return Bt(n,e,s,i)&&Bt(r,e,s,i);case"||":return Bt(n,e,s,i)||Bt(r,e,s,i);case"??":return Bt(n,e,s,i)??Bt(r,e,s,i);case"==":return Bt(n,e,s,i)==Bt(r,e,s,i);case"===":return Bt(n,e,s,i)===Bt(r,e,s,i);case"!=":return Bt(n,e,s,i)!=Bt(r,e,s,i);case"!==":return Bt(n,e,s,i)!==Bt(r,e,s,i);case"instanceof":{const t=Bt(r,e,s,i);return!!c(t)&&Bt(n,e,s,i)instanceof t}case"in":{const t=Bt(r,e,s,i);return!!l(t)&&Bt(n,e,s,i)in t}case"+":{const t=Bt(n,e,s,i),o=Bt(r,e,s,i);if(s?.strict)return t+o;if(!t||!o){if(Vt(t)||Vt(o))return(t||0)+(o||0);if(Ut(t)||Ut(o))return(t||"")+(o||"")}return t+o}case"-":return Bt(n,e,s,i)-Bt(r,e,s,i);case"*":return Bt(n,e,s,i)*Bt(r,e,s,i);case"/":return Bt(n,e,s,i)/Bt(r,e,s,i);case"%":return Bt(n,e,s,i)%Bt(r,e,s,i);case"<":return Bt(n,e,s,i)<Bt(r,e,s,i);case">":return Bt(n,e,s,i)>Bt(r,e,s,i);case"<=":return Bt(n,e,s,i)<=Bt(r,e,s,i);case">=":return Bt(n,e,s,i)>=Bt(r,e,s,i);default:throw Rt(108,t.operation)}}case V:return Bt(t.condition,e,s,i)?Bt(t.yes,e,s,i):Bt(t.no,e,s,i);case U:return jt(t.target,e,s,Bt(t.value,e,s,i));case q:{const n=s?.getConverter?.(t.name);if(null==n)throw Rt(103,t.name);return"toView"in n?n.toView(Bt(t.expression,e,s,i),...t.args.map((t=>Bt(t,e,s,i)))):Bt(t.expression,e,s,i)}case _:return Bt(t.expression,e,s,i);case z:return t.name;case G:return Bt(t.iterable,e,s,i);case Q:if(t.isMulti){let n=t.parts[0],r=0;for(;r<t.expressions.length;++r)n+=y(Bt(t.expressions[r],e,s,i)),n+=t.parts[r+1];return n}return`${t.parts[0]}${Bt(t.firstExpression,e,s,i)}${t.parts[1]}`;case Y:return Bt(t.target,e,s,i);case X:return t.list.map((t=>Bt(t,e,s,i)));case H:case K:case Z:default:return;case J:return t.evaluate(e,s,i)}}function jt(t,e,s,n){switch(t.$kind){case x:if("$host"===t.name)throw Rt(106);return Mt(e,t.name,t.ancestor)[t.name]=n;case j:{const i=Bt(t.object,e,s,null);return l(i)?"length"===t.name&&u(i)&&!isNaN(n)?i.splice(n):i[t.name]=n:jt(t.object,e,s,{[t.name]:n}),n}case F:{const r=Bt(t.object,e,s,null),o=Bt(t.key,e,s,null);if(u(r)){if("length"===o&&!isNaN(n))return r.splice(n),n;if((0,i.y5)(o))return r.splice(o,1,n),n}return r[o]=n}case U:return jt(t.value,e,s,n),jt(t.target,e,s,n);case q:{const i=s?.getConverter?.(t.name);if(null==i)throw Rt(103,t.name);return"fromView"in i&&(n=i.fromView(n,...t.args.map((t=>Bt(t,e,s,null))))),jt(t.expression,e,s,n)}case _:return jt(t.expression,e,s,n);case X:case Z:{const i=t.list,r=i.length;let o,a;for(o=0;o<r;o++)switch(a=i[o],a.$kind){case Y:jt(a,e,s,n);break;case X:case Z:{if("object"!=typeof n||null===n)throw Rt(112);let t=Bt(a.source,Pt.create(n),s,null);void 0===t&&a.initializer&&(t=Bt(a.initializer,e,s,null)),jt(a,e,s,t);break}}break}case Y:if(t instanceof It){if(null==n)return;if("object"!=typeof n)throw Rt(112);let i=Bt(t.source,Pt.create(n),s,null);void 0===i&&t.initializer&&(i=Bt(t.initializer,e,s,null)),jt(t.target,e,s,i)}else{if(null==n)return;if("object"!=typeof n)throw Rt(112);const r=t.indexOrProperties;let o;if((0,i.y5)(r)){if(!Array.isArray(n))throw Rt(112);o=n.slice(r)}else o=Object.entries(n).reduce(((t,[e,s])=>(r.includes(e)||(t[e]=s),t)),{});jt(t.target,e,s,o)}break;case J:return t.assign(e,s,n);default:return}}function Ft(t,e,s){switch(t.$kind){case _:{const i=t.name,n=t.key,r=s.getBehavior?.(i);if(null==r)throw Rt(101,i);if(void 0!==s[n])throw Rt(102,i);return s[n]=r,r.bind?.(e,s,...t.args.map((t=>Bt(t,e,s,null)))),void Ft(t.expression,e,s)}case q:{const i=t.name,n=s.getConverter?.(i);if(null==n)throw Rt(103,i);const r=n.signals;if(null!=r){const t=s.getSignaler?.(),e=r.length;let i=0;for(;i<e;++i)t?.addSignalListener(r[i],s)}return void Ft(t.expression,e,s)}case G:Ft(t.iterable,e,s);break;case J:t.bind?.(e,s)}}function Lt(t,e,s){switch(t.$kind){case _:{const i=t.key,n=s;void 0!==n[i]&&(n[i].unbind?.(e,s),n[i]=void 0),Lt(t.expression,e,s);break}case q:{const i=s.getConverter?.(t.name);if(void 0===i?.signals)return;const n=s.getSignaler?.();let r=0;for(;r<i.signals.length;++r)n?.removeSignalListener(i.signals[r],s);Lt(t.expression,e,s);break}case G:Lt(t.iterable,e,s);break;case J:t.unbind?.(e,s)}}const Dt=(t,e,s)=>{const i=null==e?null:e[s];if(c(i))return i;if(!t&&null==i)return null;throw Rt(111,s)},Vt=t=>{switch(typeof t){case"number":case"bigint":return!0;default:return!1}},Ut=t=>{switch(typeof t){case"string":return!0;case"object":return t instanceof Date;default:return!1}},Wt="at map filter includes indexOf lastIndexOf findIndex find flat flatMap join reduce reduceRight slice every some sort".split(" "),qt=i.DI.createInterface("ICoercionConfiguration"),_t=w({None:0,Observer:1,Node:2,Layout:4});function Ht(t=0){const e=Array(t);let s=0;for(;s<t;)e[s]=s++;return e.deletedIndices=[],e.deletedItems=[],e.isIndexMap=!0,e}new Map;function Kt(t){return null==t?Gt:Gt(t)}const zt=new WeakSet;function Gt(t){if(zt.has(t))return;zt.add(t);const e=t.prototype;a(e,"subs",{get:Xt}),v(e,"subscribe",Zt),v(e,"unsubscribe",Yt)}class Qt{constructor(){this.count=0,this.t=[]}add(t){return!this.t.includes(t)&&(this.t[this.t.length]=t,++this.count,!0)}remove(t){const e=this.t.indexOf(t);return-1!==e&&(this.t.splice(e,1),--this.count,!0)}notify(t,e){const s=this.t.slice(0),i=s.length;let n=0;for(;n<i;++n)s[n].handleChange(t,e)}notifyCollection(t,e){const s=this.t.slice(0),i=s.length;let n=0;for(;n<i;++n)s[n].handleCollectionChange(t,e)}}function Xt(){return g(this,"subs",new Qt)}function Zt(t){return this.subs.add(t)}function Yt(t){return this.subs.remove(t)}class Jt{constructor(t){this.owner=t,this.type=1,this.v=(this.o=t.collection).length}getValue(){return this.o.length}setValue(t){t!==this.v&&(Number.isNaN(t)||(this.o.splice(t),this.v=this.o.length))}handleCollectionChange(t,e){const s=this.v,i=this.o.length;(this.v=i)!==s&&this.subs.notify(this.v,s)}}class te{constructor(t){this.owner=t,this.type=1,this.v=(this.o=t.collection).size}getValue(){return this.o.size}setValue(){throw Rt(220)}handleCollectionChange(t,e){const s=this.v,i=this.o.size;(this.v=i)!==s&&this.subs.notify(this.v,s)}}function ee(t){const e=t.prototype;v(e,"subscribe",se),v(e,"unsubscribe",ie),Kt(t)}function se(t){this.subs.add(t)&&1===this.subs.count&&this.owner.subscribe(this)}function ie(t){this.subs.remove(t)&&0===this.subs.count&&this.owner.subscribe(this)}ee(Jt),ee(te);const ne=Symbol.for("__au_arr_obs__"),re=Array[ne]??g(Array,ne,new WeakMap);function oe(t,e){return t===e?0:(t=null===t?"null":t.toString())<(e=null===e?"null":e.toString())?-1:1}function ae(t,e){return void 0===t?void 0===e?0:1:void 0===e?-1:0}function he(t,e,s,i,n){let r,o,a,h,c,l,u;for(l=s+1;l<i;l++){for(r=t[l],o=e[l],u=l-1;u>=s&&(a=t[u],h=e[u],c=n(a,r),c>0);u--)t[u+1]=a,e[u+1]=h;t[u+1]=r,e[u+1]=o}}function ce(t,e,s,i,n){let r,o,a,h,c,l,u,d,p,f,g,v,m,w,y,b,k,C,S,T=0,$=0;for(;;){if(i-s<=10)return void he(t,e,s,i,n);T=s+(i-s>>1),r=t[s],h=e[s],o=t[i-1],c=e[i-1],a=t[T],l=e[T],u=n(r,o),u>0&&(f=r,g=h,r=o,h=c,o=f,c=g),d=n(r,a),d>=0?(f=r,g=h,r=a,h=l,a=o,l=c,o=f,c=g):(p=n(o,a),p>0&&(f=o,g=c,o=a,c=l,a=f,l=g)),t[s]=r,e[s]=h,t[i-1]=a,e[i-1]=l,v=o,m=c,w=s+1,y=i-1,t[T]=t[w],e[T]=e[w],t[w]=v,e[w]=m;t:for($=w+1;$<y;$++)if(b=t[$],k=e[$],C=n(b,v),C<0)t[$]=t[w],e[$]=e[w],t[w]=b,e[w]=k,w++;else if(C>0){do{if(y--,y==$)break t;S=t[y],C=n(S,v)}while(C>0);t[$]=t[y],e[$]=e[y],t[y]=b,e[y]=k,C<0&&(b=t[$],k=e[$],t[$]=t[w],e[$]=e[w],t[w]=b,e[w]=k,w++)}i-y<w-s?(ce(t,e,y,i,n),i=w):(ce(t,e,s,w,n),s=y)}}const le=Array.prototype,ue=le.push,de=le.unshift,pe=le.pop,fe=le.shift,ge=le.splice,ve=le.reverse,me=le.sort,we=["push","unshift","pop","shift","splice","reverse","sort"],ye={push:function(...t){const e=re.get(this);if(void 0===e)return ue.apply(this,t);const s=this.length,i=t.length;if(0===i)return s;this.length=e.indexMap.length=s+i;let n=s;for(;n<this.length;)this[n]=t[n-s],e.indexMap[n]=-2,n++;return e.notify(),this.length},unshift:function(...t){const e=re.get(this);if(void 0===e)return de.apply(this,t);const s=t.length,i=new Array(s);let n=0;for(;n<s;)i[n++]=-2;de.apply(e.indexMap,i);const r=de.apply(this,t);return e.notify(),r},pop:function(){const t=re.get(this);if(void 0===t)return pe.call(this);const e=t.indexMap,s=pe.call(this),i=e.length-1;return e[i]>-1&&(e.deletedIndices.push(e[i]),e.deletedItems.push(s)),pe.call(e),t.notify(),s},shift:function(){const t=re.get(this);if(void 0===t)return fe.call(this);const e=t.indexMap,s=fe.call(this);return e[0]>-1&&(e.deletedIndices.push(e[0]),e.deletedItems.push(s)),fe.call(e),t.notify(),s},splice:function(...t){const e=t[0],s=t[1],i=re.get(this);if(void 0===i)return ge.apply(this,t);const n=this.length,r=0|e,o=r<0?Math.max(n+r,0):Math.min(r,n),a=i.indexMap,h=t.length,c=0===h?0:1===h?n-o:s;let l=o;if(c>0){const t=l+c;for(;l<t;)a[l]>-1&&(a.deletedIndices.push(a[l]),a.deletedItems.push(this[l])),l++}if(l=0,h>2){const t=h-2,i=new Array(t);for(;l<t;)i[l++]=-2;ge.call(a,e,s,...i)}else ge.apply(a,t);const u=ge.apply(this,t);return(c>0||l>0)&&i.notify(),u},reverse:function(){const t=re.get(this);if(void 0===t)return ve.call(this),this;const e=this.length,s=e/2|0;let i=0;for(;i!==s;){const s=e-i-1,n=this[i],r=t.indexMap[i],o=this[s],a=t.indexMap[s];this[i]=o,t.indexMap[i]=a,this[s]=n,t.indexMap[s]=r,i++}return t.notify(),this},sort:function(t){const e=re.get(this);if(void 0===e)return me.call(this,t),this;let s=this.length;if(s<2)return this;ce(this,e.indexMap,0,s,ae);let i=0;for(;i<s&&void 0!==this[i];)i++;void 0!==t&&c(t)||(t=oe),ce(this,e.indexMap,0,i,t);let n=!1;for(i=0,s=e.indexMap.length;s>i;++i)if(e.indexMap[i]!==i){n=!0;break}return n&&e.notify(),this}};for(const t of we)a(ye[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let be=!1;const ke="__au_arr_on__";class Ce{constructor(t){this.type=1,be||(be=!0,function(){if(!C(ke,Array)){S(ke,!0,Array);for(const t of we)!0!==le[t].observing&&g(le,t,ye[t])}}()),this.indexObservers={},this.collection=t,this.indexMap=Ht(t.length),this.lenObs=void 0,re.set(t,this)}notify(){this.subs;const t=this.indexMap;const e=this.collection,s=e.length;this.indexMap=Ht(s),this.subs.notifyCollection(e,t)}getLengthObserver(){return this.lenObs??(this.lenObs=new Jt(this))}getIndexObserver(t){var e;return(e=this.indexObservers)[t]??(e[t]=new Se(this,t))}}class Se{constructor(t,e){this.owner=t,this.index=e,this.doNotCache=!0,this.value=this.getValue()}getValue(){return this.owner.collection[this.index]}setValue(t){if(t===this.getValue())return;const e=this.owner,s=this.index,i=e.indexMap;i[s]>-1&&i.deletedIndices.push(i[s]),i[s]=-2,e.collection[s]=t,e.notify()}handleCollectionChange(t,e){const s=this.index;if(e[s]===s)return;const i=this.value,n=this.value=this.getValue();i!==n&&this.subs.notify(n,i)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&this.owner.subscribe(this)}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.owner.unsubscribe(this)}}function Te(t){let e=re.get(t);return void 0===e&&(e=new Ce(t)),e}Kt(Ce),Kt(Se);const $e=Symbol.for("__au_set_obs__"),xe=Set[$e]??g(Set,$e,new WeakMap),Ae=Set.prototype,Ie=Ae.add,Oe=Ae.clear,Re=Ae.delete,Ee=["add","clear","delete"],Pe={add:function(t){const e=xe.get(this);if(void 0===e)return Ie.call(this,t),this;const s=this.size;return Ie.call(this,t),this.size===s||(e.indexMap[s]=-2,e.notify()),this},clear:function(){const t=xe.get(this);if(void 0===t)return Oe.call(this);if(this.size>0){const e=t.indexMap;let s=0;for(const t of this.keys())e[s]>-1&&(e.deletedIndices.push(e[s]),e.deletedItems.push(t)),s++;Oe.call(this),e.length=0,t.notify()}},delete:function(t){const e=xe.get(this);if(void 0===e)return Re.call(this,t);if(0===this.size)return!1;let s=0;const i=e.indexMap;for(const n of this.keys()){if(n===t){i[s]>-1&&(i.deletedIndices.push(i[s]),i.deletedItems.push(n)),i.splice(s,1);const r=Re.call(this,t);return!0===r&&e.notify(),r}s++}return!1}},Ne={writable:!0,enumerable:!1,configurable:!0};for(const t of Ee)a(Pe[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let Me=!1;const Be="__au_set_on__";class je{constructor(t){this.type=1,Me||(Me=!0,function(){if(!C(Be,Set)){S(Be,!0,Set);for(const t of Ee)!0!==Ae[t].observing&&a(Ae,t,{...Ne,value:Pe[t]})}}()),this.collection=t,this.indexMap=Ht(t.size),this.lenObs=void 0,xe.set(t,this)}notify(){this.subs;const t=this.indexMap;const e=this.collection,s=e.size;this.indexMap=Ht(s),this.subs.notifyCollection(e,t)}getLengthObserver(){return this.lenObs??(this.lenObs=new te(this))}}function Fe(t){let e=xe.get(t);return void 0===e&&(e=new je(t)),e}Kt(je);const Le=Symbol.for("__au_map_obs__"),De=Map[Le]??g(Map,Le,new WeakMap),Ve=Map.prototype,Ue=Ve.set,We=Ve.clear,qe=Ve.delete,_e=["set","clear","delete"],He={set:function(t,e){const s=De.get(this);if(void 0===s)return Ue.call(this,t,e),this;const i=this.get(t),n=this.size;if(Ue.call(this,t,e),this.size===n){let e=0;for(const n of this.entries()){if(n[0]===t)return n[1]!==i&&(s.indexMap.deletedIndices.push(s.indexMap[e]),s.indexMap.deletedItems.push(n),s.indexMap[e]=-2,s.notify()),this;e++}return this}return s.indexMap[n]=-2,s.notify(),this},clear:function(){const t=De.get(this);if(void 0===t)return We.call(this);if(this.size>0){const e=t.indexMap;let s=0;for(const t of this.keys())e[s]>-1&&(e.deletedIndices.push(e[s]),e.deletedItems.push(t)),s++;We.call(this),e.length=0,t.notify()}},delete:function(t){const e=De.get(this);if(void 0===e)return qe.call(this,t);if(0===this.size)return!1;let s=0;const i=e.indexMap;for(const n of this.keys()){if(n===t){i[s]>-1&&(i.deletedIndices.push(i[s]),i.deletedItems.push(n)),i.splice(s,1);const r=qe.call(this,t);return!0===r&&e.notify(),r}++s}return!1}},Ke={writable:!0,enumerable:!1,configurable:!0};for(const t of _e)a(He[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let ze=!1;const Ge="__au_map_on__";class Qe{constructor(t){this.type=1,ze||(ze=!0,function(){if(!C(Ge,Map)){S(Ge,!0,Map);for(const t of _e)!0!==Ve[t].observing&&a(Ve,t,{...Ke,value:He[t]})}}()),this.collection=t,this.indexMap=Ht(t.size),this.lenObs=void 0,De.set(t,this)}notify(){const t=this.subs,e=this.indexMap;const s=this.collection,i=s.size;this.indexMap=Ht(i),t.notifyCollection(s,e)}getLengthObserver(){return this.lenObs??(this.lenObs=new te(this))}}function Xe(t){let e=De.get(t);return void 0===e&&(e=new Qe(t)),e}function Ze(){return g(this,"obs",new is(this))}function Ye(t,e){this.obs.add(this.oL.getObserver(t,e))}function Je(t){let e;if(u(t))e=Te(t);else if(d(t))e=Fe(t);else{if(!p(t))throw Rt(210,t);e=Xe(t)}this.obs.add(e)}function ts(t){this.obs.add(t)}function es(){throw Rt(99,"handleChange")}function ss(){throw Rt(99,"handleCollectionChange")}Kt(Qe);class is{constructor(t){this.version=0,this.count=0,this.o=new Map,this.b=t}add(t){this.o.has(t)||(t.subscribe(this.b),++this.count),this.o.set(t,this.version)}clear(){this.o.forEach(rs,this),this.count=this.o.size}clearAll(){this.o.forEach(ns,this),this.o.clear(),this.count=0}}function ns(t,e){e.unsubscribe(this.b)}function rs(t,e){this.version!==t&&(e.unsubscribe(this.b),this.o.delete(e))}function os(t){const e=t.prototype;return v(e,"observe",Ye),v(e,"observeCollection",Je),v(e,"subscribeTo",ts),a(e,"obs",{get:Ze}),v(e,"handleChange",es),v(e,"handleCollectionChange",ss),t}function as(t){return null==t?os:os(t)}const hs=b("IExpressionParser",(t=>t.singleton(cs)));class cs{constructor(){this.i=k(),this.u=k(),this.h=k()}parse(t,e){let s;switch(e){case Ss:return new tt(t);case ws:return s=this.h[t],void 0===s&&(s=this.h[t]=this.$parse(t,e)),s;case ys:return s=this.u[t],void 0===s&&(s=this.u[t]=this.$parse(t,e)),s;default:if(0===t.length){if(e===ks||e===Cs)return mt.$empty;throw ai()}return s=this.i[t],void 0===s&&(s=this.i[t]=this.$parse(t,e)),s}}$parse(t,e){return $s=t,xs=0,As=t.length,Is=0,Os=0,Rs=6291456,Es="",Ts=Fs(0),Ps=!0,Ns=!1,Ms=!0,Bs=-1,Vs(61,void 0===e?Cs:e)}}function ls(t){switch(t){case 98:return 8;case 116:return 9;case 110:return 10;case 118:return 11;case 102:return 12;case 114:return 13;case 34:return 34;case 39:return 39;case 92:return 92;default:return t}}const us=mt.$false,ds=mt.$true,ps=mt.$null,fs=mt.$undefined,gs=new ot(0),vs=new ot(1),ms="None",ws="Interpolation",ys="IsIterator",bs="IsChainable",ks="IsFunction",Cs="IsProperty",Ss="IsCustom";let Ts,$s="",xs=0,As=0,Is=0,Os=0,Rs=6291456,Es="",Ps=!0,Ns=!1,Ms=!0,Bs=-1;const js=String.fromCharCode,Fs=t=>$s.charCodeAt(t),Ls=()=>$s.slice(Os,xs),Ds="Infinity NaN isFinite isNaN parseFloat parseInt decodeURI decodeURIComponent encodeURI encodeURIComponent Array BigInt Boolean Date Map Number Object RegExp Set String JSON Math Intl".split(" ");function Vs(t,e){if(e===Ss)return new tt($s);if(0===xs){if(e===ws)return function(){const t=[],e=[],s=As;let i="";for(;xs<s;){switch(Ts){case 36:if(123===Fs(xs+1)){t.push(i),i="",xs+=2,Ts=Fs(xs),Gs();const s=Vs(61,ws);e.push(s);continue}i+="$";break;case 92:i+=js(ls(Qs()));break;default:i+=js(Ts)}Qs()}return e.length?(t.push(i),new xt(t,e)):null}();if(Gs(),4194304&Rs)throw ei()}Ps=513>t,Ns=!1,Ms=514>t;let s,i=!1,n=0;if(131072&Rs){const t=Ai[63&Rs];Gs(),s=new vt(t,Vs(514,e)),Ps=!1}else{t:switch(Rs){case 12294:n=Is,Ps=!1,Ms=!1;do{switch(Gs(),++n,Rs){case 65545:if(Gs(),0==(12288&Rs))throw ii();break;case 10:case 11:throw ii();case 2162700:if(Ns=!0,Gs(),0==(12288&Rs)){s=0===n?gs:1===n?vs:new ot(n),i=!0;break t}break;default:if(2097152&Rs){s=0===n?gs:1===n?vs:new ot(n);break t}throw ni()}}while(12294===Rs);case 4096:{const t=Es;if(e===ys)s=new Tt(t);else if(Ms&&Ds.includes(t))s=new rt(t);else{if(Ms&&"import"===t)throw di();s=new at(t,n)}if(Ps=!Ns,Gs(),Js(50)){if(524296===Rs)throw $i();const e=Ns,i=Is;++Is;const n=Vs(62,ms);Ns=e,Is=i,Ps=!1,s=new Ot([new Tt(t)],n)}break}case 10:throw xi();case 11:throw si();case 12292:switch(Ps=!1,Gs(),Is){case 0:s=gs;break;case 1:s=vs;break;default:s=new ot(Is)}break;case 2688007:s=function(t){Gs();const e=xs,s=Os,i=Rs,n=Ts,r=Es,o=Ps,a=Ns,h=[];let c=1,l=!1;e:for(;;){if(11===Rs){if(Gs(),4096!==Rs)throw ii();if(h.push(new Tt(Es)),Gs(),6291471===Rs)throw Ti();if(7340046!==Rs)throw si();if(Gs(),50!==Rs)throw si();Gs();const t=Ns,e=Is;++Is;const s=Vs(62,ms);return Ns=t,Is=e,Ps=!1,new Ot(h,s,!0)}switch(Rs){case 4096:h.push(new Tt(Es)),Gs();break;case 7340046:Gs();break e;case 524296:case 2688016:Gs(),c=4;break;case 6291471:c=2,l=!0;break e;case 2688007:c=2;break e;default:Gs(),c=2}switch(Rs){case 6291471:if(Gs(),l=!0,1===c)break;break e;case 7340046:Gs();break e;case 4194349:1===c&&(c=3);break e;case 50:if(l)throw ki();Gs(),c=2;break e;default:1===c&&(c=2);break e}}if(50===Rs){if(1===c){if(Gs(),524296===Rs)throw $i();const t=Ns,e=Is;++Is;const s=Vs(62,ms);return Ns=t,Is=e,Ps=!1,new Ot(h,s)}throw ki()}if(1===c&&0===h.length)throw vi();if(l)switch(c){case 2:throw ki();case 3:throw Ci();case 4:throw Si()}xs=e,Os=s,Rs=i,Ts=n,Es=r,Ps=o,Ns=a;const u=Ns,d=Vs(62,t);if(Ns=u,ti(7340046),50===Rs)switch(c){case 2:throw ki();case 3:throw Ci();case 4:throw Si()}return d}(e);break;case 2688016:s=$s.search(/\s+of\s+/)>xs?function(){const t=[],e=new At(X,t,void 0,void 0);let s="",i=!0,n=0;for(;i;)switch(Gs(),Rs){case 7340051:i=!1,r();break;case 6291471:r();break;case 4096:s=Ls();break;default:throw wi()}return ti(7340051),e;function r(){""!==s?(t.push(new It(new ct(gs,s),new lt(gs,new mt(n++)),void 0)),s=""):n++}}():function(t){const e=Ns;Gs();const s=new Array;for(;7340051!==Rs;)if(Js(6291471)){if(s.push(fs),7340051===Rs)break}else{if(s.push(Vs(62,t===ys?ms:t)),!Js(6291471))break;if(7340051===Rs)break}return Ns=e,ti(7340051),t===ys?new Ct(s):(Ps=!1,new wt(s))}(e);break;case 524296:s=function(t){const e=Ns,s=new Array,i=new Array;for(Gs();7340045!==Rs;){if(s.push(Es),49152&Rs)Gs(),ti(6291476),i.push(Vs(62,t===ys?ms:t));else{if(!(12288&Rs))throw fi();{const e=Ts,s=Rs,n=xs;Gs(),Js(6291476)?i.push(Vs(62,t===ys?ms:t)):(Ts=e,Rs=s,xs=n,i.push(Vs(515,t===ys?ms:t)))}}7340045!==Rs&&ti(6291471)}return Ns=e,ti(7340045),t===ys?new St(s,i):(Ps=!1,new yt(s,i))}(e);break;case 2163759:s=new bt([Es]),Ps=!1,Gs();break;case 2163760:s=Ks(e,s,!1);break;case 16384:case 32768:s=new mt(Es),Ps=!1,Gs();break;case 8194:case 8195:case 8193:case 8192:s=Ai[63&Rs],Ps=!1,Gs();break;default:throw xs>=As?ri():oi()}if(e===ys)return function(t){if(!Hs.includes(t.$kind))throw pi(t.$kind);if(4204593!==Rs)throw pi(t.$kind);Gs();const e=t,s=Vs(61,bs);return new $t(e,s,Bs)}(s);if(514<t)return s;if(10===Rs||11===Rs)throw ii();if(s.$kind===T)switch(Rs){case 2162700:if(Ns=!0,Ps=!1,Gs(),0==(13312&Rs))throw yi();if(12288&Rs)s=new at(Es,s.ancestor),Gs();else if(2688007===Rs)s=new pt(s,Us(),!0);else{if(2688016!==Rs)throw bi();s=Ws(s,!0)}break;case 65545:if(Ps=!Ns,Gs(),0==(12288&Rs))throw ii();s=new at(Es,s.ancestor),Gs();break;case 10:case 11:throw ii();case 2688007:s=new pt(s,Us(),i);break;case 2688016:s=Ws(s,i);break;case 2163759:s=zs(s);break;case 2163760:s=Ks(e,s,!0)}for(;(65536&Rs)>0;)switch(Rs){case 2162700:s=qs(s);break;case 65545:if(Gs(),0==(12288&Rs))throw ii();s=_s(s,!1);break;case 10:case 11:throw ii();case 2688007:s=s.$kind===x?new ut(s.name,Us(),s.ancestor,!1):s.$kind===j?new dt(s.object,s.name,Us(),s.optional,!1):s.$kind===$?new ft(s.name,Us()):new pt(s,Us(),!1);break;case 2688016:s=Ws(s,!1);break;case 2163759:if(Ns)throw bi();s=zs(s);break;case 2163760:if(Ns)throw bi();s=Ks(e,s,!0)}}if(10===Rs||11===Rs)throw ii();if(513<t)return s;for(;(262144&Rs)>0;){const i=Rs;if((960&i)<=t)break;Gs(),s=new gt(Ai[63&i],s,Vs(960&i,e)),Ps=!1}if(63<t)return s;if(Js(6291478)){const t=Vs(62,e);ti(6291476),s=new nt(s,t,Vs(62,e)),Ps=!1}if(62<t)return s;if(Js(4194349)){if(!Ps)throw hi();s=new it(s,Vs(62,e))}if(61<t)return s;for(;Js(6291480);){if(6291456===Rs)throw ci();const t=Es;Gs();const i=new Array;for(;Js(6291476);)i.push(Vs(62,e));s=new st(s,t,i)}for(;Js(6291479);){if(6291456===Rs)throw li();const t=Es;Gs();const i=new Array;for(;Js(6291476);)i.push(Vs(62,e));s=new et(s,t,i)}if(6291456!==Rs){if(e===ws&&7340045===Rs)return s;if(e===bs&&6291477===Rs){if(xs===As)throw oi();return Bs=xs-1,s}if("of"===Ls())throw ui();throw oi()}return s}function Us(){const t=Ns;Gs();const e=[];for(;7340046!==Rs&&(e.push(Vs(62,ms)),Js(6291471)););return ti(7340046),Ps=!1,Ns=t,e}function Ws(t,e){const s=Ns;return Gs(),t=new lt(t,Vs(62,ms),e),ti(7340051),Ps=!s,Ns=s,t}function qs(t){if(Ns=!0,Ps=!1,Gs(),0==(13312&Rs))throw yi();if(12288&Rs)return _s(t,!0);if(2688007===Rs)return t.$kind===x?new ut(t.name,Us(),t.ancestor,!0):t.$kind===j?new dt(t.object,t.name,Us(),t.optional,!0):new pt(t,Us(),!0);if(2688016===Rs)return Ws(t,!0);throw bi()}function _s(t,e){const s=Es;switch(Rs){case 2162700:{Ns=!0,Ps=!1;const i=xs,n=Os,r=Rs,o=Ts,a=Es,h=Ps,c=Ns;if(Gs(),0==(13312&Rs))throw yi();return 2688007===Rs?new dt(t,s,Us(),e,!0):(xs=i,Os=n,Rs=r,Ts=o,Es=a,Ps=h,Ns=c,new ct(t,s,e))}case 2688007:return Ps=!1,new dt(t,s,Us(),e,!1);default:return Ps=!Ns,Gs(),new ct(t,s,e)}}const Hs=[H,K,z,X,Z];function Ks(t,e,s){const i=Ns,n=[Es];ti(2163760);const r=[Vs(62,t)];for(;2163759!==(Rs=Ys());)n.push(Es),ti(2163760),r.push(Vs(62,t));return n.push(Es),Ps=!1,Ns=i,s?(Gs(),new kt(n,n,e,r)):(Gs(),new bt(n,r))}function zs(t){Ps=!1;const e=[Es];return Gs(),new kt(e,e,t)}function Gs(){for(;xs<As;)if(Os=xs,null!=(Rs=Mi[Ts]()))return;Rs=6291456}function Qs(){return Ts=Fs(++xs)}function Xs(t){let e=Ts;if(!1===t){do{e=Qs()}while(e<=57&&e>=48);if(46!==e)return Es=parseInt(Ls(),10),32768;if(e=Qs(),xs>=As)return Es=parseInt(Ls().slice(0,-1),10),32768}if(e<=57&&e>=48)do{e=Qs()}while(e<=57&&e>=48);else Ts=Fs(--xs);return Es=parseFloat(Ls()),32768}function Zs(){let t=!0,e="";for(;96!==Qs();)if(36===Ts){if(xs+1<As&&123===Fs(xs+1)){xs++,t=!1;break}e+="$"}else if(92===Ts)e+=js(ls(Qs()));else{if(xs>=As)throw gi();e+=js(Ts)}return Qs(),Es=e,t?2163759:2163760}const Ys=()=>{if(xs>=As)throw gi();return xs--,Zs()},Js=t=>Rs===t&&(Gs(),!0),ti=t=>{if(Rs!==t)throw vi();Gs()},ei=()=>Rt(151,$s),si=()=>Rt(152,$s),ii=()=>Rt(153,$s),ni=()=>Rt(154,$s),ri=()=>Rt(155,$s),oi=()=>Rt(156,Ls(),xs,$s),ai=()=>Rt(157),hi=()=>Rt(158,$s),ci=()=>Rt(159,$s),li=()=>Rt(160,$s),ui=()=>Rt(161,$s),di=()=>Rt(162,$s),pi=t=>Rt(163,$s,t),fi=()=>Rt(164,$s),gi=()=>Rt(166,$s),vi=t=>Rt(167,$s),mi=()=>{throw Rt(168,$s)};mi.notMapped=!0;const wi=()=>Rt(170,$s),yi=()=>Rt(171,$s),bi=()=>Rt(172,$s),ki=()=>Rt(173,$s),Ci=()=>Rt(174,$s),Si=()=>Rt(175,$s),Ti=()=>Rt(176,$s),$i=()=>Rt(178,$s),xi=()=>Rt(179,$s),Ai=[us,ds,ps,fs,"$this",null,"$parent","(","{",".","..","...","?.","}",")",",","[","]",":",";","?","'",'"',"&","|","??","||","&&","==","!=","===","!==","<",">","<=",">=","in","instanceof","+","-","typeof","void","*","%","/","=","!",2163759,2163760,"of","=>"],Ii=m(Object.create(null),{true:8193,null:8194,false:8192,undefined:8195,$this:12292,$parent:12294,in:6562212,instanceof:6562213,typeof:139304,void:139305,of:4204593}),Oi=[36,0,65,91,95,0,97,123,170,0,186,0,192,215,216,247,248,697,736,741,7424,7462,7468,7517,7522,7526,7531,7544,7545,7615,7680,7936,8305,0,8319,0,8336,8349,8490,8492,8498,0,8526,0,8544,8585,11360,11392,42786,42888,42891,42927,42928,42936,42999,43008,43824,43867,43868,43877,64256,64263,65313,65339,65345,65371],Ri=[48,58],Ei=(t,e,s,i)=>{const n=s.length;for(let r=0;r<n;r+=2){const n=s[r];let o=s[r+1];if(o=o>0?o:n+1,t&&t.fill(i,n,o),e)for(let t=n;t<o;t++)e.add(t)}},Pi=t=>()=>(Qs(),t);Ei(null,new Set,[36,0,48,58,65,91,95,0,97,123],!0);const Ni=new Uint8Array(65535);Ei(Ni,null,Oi,1),Ei(Ni,null,Ri,1);const Mi=new Array(65535);Mi.fill(mi,0,65535),Ei(Mi,null,[0,33,127,161],(()=>(Qs(),null))),Ei(Mi,null,Oi,(function(){for(;Ni[Qs()];);const t=Ii[Es=Ls()];return void 0===t?4096:t})),Ei(Mi,null,Ri,(()=>Xs(!1))),Mi[34]=Mi[39]=()=>function(){const t=Ts;Qs();let e=0;const s=new Array;let i=xs;for(;Ts!==t;)if(92===Ts)s.push($s.slice(i,xs)),Qs(),e=ls(Ts),Qs(),s.push(js(e)),i=xs;else{if(xs>=As)throw Rt(165,$s);Qs()}const n=$s.slice(i,xs);Qs(),s.push(n);const r=s.join("");return Es=r,16384}(),Mi[96]=()=>Zs(),Mi[33]=()=>61!==Qs()?131118:61!==Qs()?6553949:(Qs(),6553951),Mi[61]=()=>62===Qs()?(Qs(),50):61!==Ts?4194349:61!==Qs()?6553948:(Qs(),6553950),Mi[38]=()=>38!==Qs()?6291479:(Qs(),6553883),Mi[124]=()=>124!==Qs()?6291480:(Qs(),6553818),Mi[63]=()=>{if(46===Qs()){const t=Fs(xs+1);return t<=48||t>=57?(Qs(),2162700):6291478}return 63!==Ts?6291478:(Qs(),6553753)},Mi[46]=()=>Qs()<=57&&Ts>=48?Xs(!0):46===Ts?46!==Qs()?10:(Qs(),11):65545,Mi[60]=()=>61!==Qs()?6554016:(Qs(),6554018),Mi[62]=()=>61!==Qs()?6554017:(Qs(),6554019),Mi[37]=Pi(6554155),Mi[40]=Pi(2688007),Mi[41]=Pi(7340046),Mi[42]=Pi(6554154),Mi[43]=Pi(2490854),Mi[44]=Pi(6291471),Mi[45]=Pi(2490855),Mi[47]=Pi(6554156),Mi[58]=Pi(6291476),Mi[59]=Pi(6291477),Mi[91]=Pi(2688016),Mi[93]=Pi(7340051),Mi[123]=Pi(524296),Mi[125]=Pi(7340045);let Bi=null;const ji=[];let Fi=!1;function Li(){return Bi}function Di(t){if(null==t)throw Rt(206);if(null==Bi)return Bi=t,ji[0]=Bi,void(Fi=!0);if(Bi===t)throw Rt(207);ji.push(t),Bi=t,Fi=!0}function Vi(t){if(null==t)throw Rt(208);if(Bi!==t)throw Rt(209);ji.pop(),Bi=ji.length>0?ji[ji.length-1]:null,Fi=null!=Bi}const Ui=w({get current(){return Bi},get connecting(){return Fi},enter:Di,exit:Vi,pause:function(){Fi=!1},resume:function(){Fi=!0}}),Wi=Reflect.get,qi=Object.prototype.toString,_i=new WeakMap,Hi="__au_nw__";function Ki(t){switch(qi.call(t)){case"[object Object]":return!0!==t.constructor[Hi];case"[object Array]":case"[object Map]":case"[object Set]":return!0;default:return!1}}const zi="__raw__";function Gi(t){return Ki(t)?Qi(t):t}function Qi(t){return _i.get(t)??function(t){const e=u(t)?tn:p(t)||d(t)?Tn:Ji,s=new Proxy(t,e);return _i.set(t,s),_i.set(s,s),s}(t)}function Xi(t){return t[zi]??t}function Zi(t){return Ki(t)&&t[zi]||t}function Yi(t,e){return"constructor"===e||"__proto__"===e||"$observers"===e||e===Symbol.toPrimitive||e===Symbol.toStringTag||!0===t.constructor[`__au_nw_${y(e)}__`]}const Ji={get(t,e,s){if(e===zi)return t;const i=Li();return!Fi||Yi(t,e)||null==i?Wi(t,e,s):(i.observe(t,e),Gi(Wi(t,e,s)))}},tn={get(t,e,s){if(e===zi)return t;if(!Fi||Yi(t,e)||null==Bi)return Wi(t,e,s);switch(e){case"length":return Bi.observe(t,"length"),t.length;case"map":return en;case"includes":return rn;case"indexOf":return on;case"lastIndexOf":return an;case"every":return sn;case"filter":return nn;case"find":return cn;case"findIndex":return hn;case"flat":return ln;case"flatMap":return un;case"join":return dn;case"push":return fn;case"pop":return pn;case"reduce":return Cn;case"reduceRight":return Sn;case"reverse":return wn;case"shift":return gn;case"unshift":return vn;case"slice":return kn;case"splice":return mn;case"some":return yn;case"sort":return bn;case"keys":return Pn;case"values":case Symbol.iterator:return Nn;case"entries":return Mn}return Bi.observe(t,e),Gi(Wi(t,e,s))},ownKeys:t=>(Li()?.observe(t,"length"),Reflect.ownKeys(t))};function en(t,e){const s=Xi(this),i=s.map(((s,i)=>Zi(t.call(e,Gi(s),i,this))));return Bn(Bi,s),Gi(i)}function sn(t,e){const s=Xi(this),i=s.every(((s,i)=>t.call(e,Gi(s),i,this)));return Bn(Bi,s),i}function nn(t,e){const s=Xi(this),i=s.filter(((s,i)=>Zi(t.call(e,Gi(s),i,this))));return Bn(Bi,s),Gi(i)}function rn(t){const e=Xi(this),s=e.includes(Zi(t));return Bn(Bi,e),s}function on(t){const e=Xi(this),s=e.indexOf(Zi(t));return Bn(Bi,e),s}function an(t){const e=Xi(this),s=e.lastIndexOf(Zi(t));return Bn(Bi,e),s}function hn(t,e){const s=Xi(this),i=s.findIndex(((s,i)=>Zi(t.call(e,Gi(s),i,this))));return Bn(Bi,s),i}function cn(t,e){const s=Xi(this),i=s.find(((e,s)=>t(Gi(e),s,this)),e);return Bn(Bi,s),Gi(i)}function ln(){const t=Xi(this);return Bn(Bi,t),Gi(t.flat())}function un(t,e){const s=Xi(this);return Bn(Bi,s),Qi(s.flatMap(((s,i)=>Gi(t.call(e,Gi(s),i,this)))))}function dn(t){const e=Xi(this);return Bn(Bi,e),e.join(t)}function pn(){return Gi(Xi(this).pop())}function fn(...t){return Xi(this).push(...t)}function gn(){return Gi(Xi(this).shift())}function vn(...t){return Xi(this).unshift(...t)}function mn(...t){return Gi(Xi(this).splice(...t))}function wn(...t){const e=Xi(this),s=e.reverse();return Bn(Bi,e),Gi(s)}function yn(t,e){const s=Xi(this),i=s.some(((s,i)=>Zi(t.call(e,Gi(s),i,this))));return Bn(Bi,s),i}function bn(t){const e=Xi(this),s=e.sort(t);return Bn(Bi,e),Gi(s)}function kn(t,e){const s=Xi(this);return Bn(Bi,s),Qi(s.slice(t,e))}function Cn(t,e){const s=Xi(this),i=s.reduce(((e,s,i)=>t(e,Gi(s),i,this)),e);return Bn(Bi,s),Gi(i)}function Sn(t,e){const s=Xi(this),i=s.reduceRight(((e,s,i)=>t(e,Gi(s),i,this)),e);return Bn(Bi,s),Gi(i)}const Tn={get(t,e,s){if(e===zi)return t;const i=Li();if(!Fi||Yi(t,e)||null==i)return Wi(t,e,s);switch(e){case"size":return i.observe(t,"size"),t.size;case"clear":return Rn;case"delete":return En;case"forEach":return $n;case"add":if(d(t))return On;break;case"get":if(p(t))return An;break;case"set":if(p(t))return In;break;case"has":return xn;case"keys":return Pn;case"values":return Nn;case"entries":return Mn;case Symbol.iterator:return p(t)?Mn:Nn}return Gi(Wi(t,e,s))}};function $n(t,e){const s=Xi(this);return Bn(Bi,s),s.forEach(((s,i)=>{t.call(e,Gi(s),Gi(i),this)}))}function xn(t){const e=Xi(this);return Bn(Bi,e),e.has(Zi(t))}function An(t){const e=Xi(this);return Bn(Bi,e),Gi(e.get(Zi(t)))}function In(t,e){return Gi(Xi(this).set(Zi(t),Zi(e)))}function On(t){return Gi(Xi(this).add(Zi(t)))}function Rn(){return Gi(Xi(this).clear())}function En(t){return Gi(Xi(this).delete(Zi(t)))}function Pn(){const t=Xi(this);Bn(Bi,t);const e=t.keys();return{next(){const t=e.next(),s=t.value,i=t.done;return i?{value:void 0,done:i}:{value:Gi(s),done:i}},[Symbol.iterator](){return this}}}function Nn(){const t=Xi(this);Bn(Bi,t);const e=t.values();return{next(){const t=e.next(),s=t.value,i=t.done;return i?{value:void 0,done:i}:{value:Gi(s),done:i}},[Symbol.iterator](){return this}}}function Mn(){const t=Xi(this);Bn(Bi,t);const e=t.entries();return{next(){const t=e.next(),s=t.value,i=t.done;return i?{value:void 0,done:i}:{value:[Gi(s[0]),Gi(s[1])],done:i}},[Symbol.iterator](){return this}}}const Bn=(t,e)=>t?.observeCollection(e),jn=w({getProxy:Qi,getRaw:Xi,wrap:Gi,unwrap:Zi,rawKey:zi});class Fn{constructor(t,e,s,i,n){this.type=1,this.v=void 0,this.ir=!1,this.D=!1,this.cb=void 0,this.C=void 0,this.A=void 0,this.o=t,this.O=n?Gi(t):t,this.$get=e,this.$set=s,this.oL=i}init(t){this.v=t,this.D=!1}getValue(){return 0===this.subs.count?this.$get.call(this.o,this.o,this):(this.D&&(this.compute(),this.D=!1),this.v)}setValue(t){if(!c(this.$set))throw Rt(221);void 0!==this.C&&(t=this.C.call(null,t,this.A)),f(t,this.v)||(this.ir=!0,this.$set.call(this.o,t),this.ir=!1,this.run())}useCoercer(t,e){return this.C=t,this.A=e,!0}useCallback(t){return this.cb=t,!0}handleChange(){this.D=!0,this.subs.count>0&&this.run()}handleCollectionChange(){this.D=!0,this.subs.count>0&&this.run()}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.compute(),this.D=!1)}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&(this.D=!0,this.obs.clearAll())}run(){if(this.ir)return;const t=this.v,e=this.compute();this.D=!1,f(e,t)||(this.cb?.(e,t),this.subs.notify(this.v,t))}compute(){this.ir=!0,this.obs.version++;try{return Di(this),this.v=Zi(this.$get.call(this.O,this.O,this))}finally{this.obs.clear(),this.ir=!1,Vi(this)}}}as(Fn),Kt(Fn);const Ln=b("IDirtyChecker",void 0),Dn={timeoutsPerCheck:25,disabled:!1,throw:!1,resetToDefault(){this.timeoutsPerCheck=6,this.disabled=!1,this.throw=!1}};class Vn{static register(t){t.register(i.YM.singleton(this,this),i.YM.aliasTo(this,Ln))}constructor(t){this.p=t,this.tracked=[],this.T=null,this.P=0,this.check=()=>{if(Dn.disabled)return;if(++this.P<Dn.timeoutsPerCheck)return;this.P=0;const t=this.tracked,e=t.length;let s,i=0;for(;i<e;++i)s=t[i],s.isDirty()&&s.flush()},Kt(Un)}createProperty(t,e){if(Dn.throw)throw h(`AUR0222:${y(e)}`);return new Un(this,t,e)}addProperty(t){this.tracked.push(t),1===this.tracked.length&&(this.T=this.p.taskQueue.queueTask(this.check,{persistent:!0}))}removeProperty(t){this.tracked.splice(this.tracked.indexOf(t),1),0===this.tracked.length&&(this.T.cancel(),this.T=null)}}Vn.inject=[i.TI];class Un{constructor(t,e,s){this.obj=e,this.key=s,this.type=0,this.ov=void 0,this.I=t}getValue(){return this.obj[this.key]}setValue(t){throw h(`Trying to set value for property ${y(this.key)} in dirty checker`)}isDirty(){return this.ov!==this.obj[this.key]}flush(){const t=this.ov,e=this.getValue();this.ov=e,this.subs.notify(e,t)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.ov=this.obj[this.key],this.I.addProperty(this))}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.I.removeProperty(this)}}class Wn{get doNotCache(){return!0}constructor(t,e){this.type=0,this.o=t,this.k=e}getValue(){return this.o[this.k]}setValue(){}subscribe(){}unsubscribe(){}}class qn{constructor(){this.type=0}getValue(t,e){return t[e]}setValue(t,e,s){e[s]=t}}class _n{constructor(t,e){this.type=1,this.v=void 0,this.iO=!1,this.cb=void 0,this.C=void 0,this.A=void 0,this.o=t,this.k=e}getValue(){return this.v}setValue(t){if(void 0!==this.C&&(t=this.C.call(void 0,t,this.A)),this.iO){if(f(t,this.v))return;Hn=this.v,this.v=t,this.cb?.(t,Hn),this.subs.notify(t,Hn)}else this.v=this.o[this.k]=t,this.cb?.(t,Hn)}useCallback(t){return this.cb=t,this.start(),!0}useCoercer(t,e){return this.C=t,this.A=e,this.start(),!0}subscribe(t){!1===this.iO&&this.start(),this.subs.add(t)}start(){return!1===this.iO&&(this.iO=!0,this.v=this.o[this.k],a(this.o,this.k,{enumerable:!0,configurable:!0,get:m((()=>this.getValue()),{getObserver:()=>this}),set:t=>{this.setValue(t)}})),this}stop(){return this.iO&&(a(this.o,this.k,{enumerable:!0,configurable:!0,writable:!0,value:this.v}),this.iO=!1),this}}let Hn;Kt(_n);const Kn=new qn,zn=b("IObserverLocator",(t=>t.singleton(Xn))),Gn=b("INodeObserverLocator",(t=>t.cachedCallback((t=>new Qn))));class Qn{handles(){return!1}getObserver(){return Kn}getAccessor(){return Kn}}class Xn{constructor(t,e){this.L=[],this.I=t,this.M=e}addAdapter(t){this.L.push(t)}getObserver(t,e){if(null==t)throw Rt(199,e);if(!l(t))return new Wn(t,c(e)?"":e);if(c(e))return new Fn(t,e,void 0,this,!0);const s=Jn(t);let i=s[e];return void 0===i&&(i=this.createObserver(t,e),i.doNotCache||(s[e]=i)),i}getAccessor(t,e){const s=t.$observers?.[e];return void 0!==s?s:this.M.handles(t,e,this)?this.M.getAccessor(t,e,this):Kn}getArrayObserver(t){return Te(t)}getMapObserver(t){return Xe(t)}getSetObserver(t){return Fe(t)}createObserver(t,e){if(this.M.handles(t,e,this))return this.M.getObserver(t,e,this);switch(e){case"length":if(u(t))return Te(t).getLengthObserver();break;case"size":if(p(t))return Xe(t).getLengthObserver();if(d(t))return Fe(t).getLengthObserver();break;default:if(u(t)&&(0,i.y5)(e))return Te(t).getIndexObserver(Number(e))}let s=Yn(t,e);if(void 0===s){let i=Zn(t);for(;null!==i&&(s=Yn(i,e),void 0===s);)i=Zn(i)}if(void 0!==s&&!o.call(s,"value")){let i=this.R(t,e,s);return null==i&&(i=(s.get?.getObserver??s.set?.getObserver)?.(t,this)),null==i?s.configurable?this._(t,e,s,!0):this.I.createProperty(t,e):i}return new _n(t,e)}_(t,e,s,i){const n=new Fn(t,s.get,s.set,this,!!i);return a(t,e,{enumerable:s.enumerable,configurable:!0,get:m((()=>n.getValue()),{getObserver:()=>n}),set:t=>{n.setValue(t)}}),n}R(t,e,s){if(this.L.length>0)for(const i of this.L){const n=i.getObserver(t,e,s,this);if(null!=n)return n}return null}}Xn.inject=[Ln,Gn];const Zn=Object.getPrototypeOf,Yn=Object.getOwnPropertyDescriptor,Jn=t=>{let e=t.$observers;return void 0===e&&a(t,"$observers",{enumerable:!1,value:e=k()}),e};as(class{constructor(t,e){this.oL=t,this.fn=e,this.maxRunCount=10,this.queued=!1,this.running=!1,this.runCount=0,this.stopped=!1}handleChange(){this.queued=!0,this.run()}handleCollectionChange(){this.queued=!0,this.run()}run(){if(this.stopped)throw Rt(225);if(!this.running){++this.runCount,this.running=!0,this.queued=!1,++this.obs.version;try{Di(this),this.fn(this)}finally{this.obs.clear(),this.running=!1,Vi(this)}if(this.queued){if(this.runCount>this.maxRunCount)throw this.runCount=0,Rt(226);this.run()}else this.runCount=0}}stop(){this.stopped=!0,this.obs.clearAll()}});const tr=b("ISignaler",(t=>t.singleton(er)));class er{constructor(){this.signals=k()}dispatchSignal(t){const e=this.signals[t];if(void 0===e)return;let s;for(s of e.keys())s.handleChange(void 0,void 0)}addSignalListener(t,e){const s=this.signals,i=s[t];void 0===i?s[t]=new Set([e]):i.add(e)}removeSignalListener(t,e){this.signals[t]?.delete(e)}}var sr=s(573),ir=s(934);function nr(t,e,s,i){var n,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,s,o):n(e,s))||o);return r>3&&o&&Object.defineProperty(e,s,o),o}const rr=Object,or=String,ar=rr.prototype,hr=()=>rr.create(null),cr=ar.hasOwnProperty,lr=rr.freeze,ur=rr.assign,dr=rr.getOwnPropertyNames,pr=rr.keys,fr=hr(),gr=(t,e,s)=>{if(!0===fr[e])return!0;if(!yr(e))return!1;const i=e.slice(0,5);return fr[e]="aria-"===i||"data-"===i||s.isStandardSvgAttribute(t,e)},vr=t=>t instanceof Promise,mr=t=>t instanceof Array,wr=t=>"function"==typeof t,yr=t=>"string"==typeof t,br=t=>{throw t},kr=rr.is,Cr=Reflect.defineProperty,Sr=(t,e,s)=>(Cr(t,e,{enumerable:!1,configurable:!0,writable:!0,value:s}),s),Tr=(t,e,s)=>t.addSignalListener(e,s),$r=(t,e,s)=>t.removeSignalListener(e,s),xr="Interpolation",Ar="IsIterator",Ir="IsFunction",Or="IsProperty",Rr="pending",Er="running",Pr=_t.Observer,Nr=_t.Node,Mr=_t.Layout,Br=n.SF.getOwn,jr=n.SF.hasOwn,Fr=n.SF.define,{annotation:Lr,resource:Dr}=i.Protocol,Vr=Lr.keyFor,Ur=Dr.keyFor,Wr=Dr.appendTo,qr=Lr.appendTo,_r=Lr.getKeys;function Hr(t,e){let s;function i(t,e){arguments.length>1&&(s.name=e),Fr(zr,Qr.create(e,t,s),t.constructor,e),qr(t.constructor,Gr.keyFrom(e))}return arguments.length>1?(s={},void i(t,e)):yr(t)?(s={},i):(s=void 0===t?{}:t,i)}function Kr(t){return t.startsWith(zr)}const zr=Vr("bindable"),Gr=lr({name:zr,keyFrom:t=>`${zr}:${t}`,from(t,...e){const s={},i=Array.isArray;function n(e){s[e]=Qr.create(e,t)}function r(e,i){s[e]=i instanceof Qr?i:Qr.create(e,t,i)}return e.forEach((function(t){i(t)?t.forEach(n):t instanceof Qr?s[t.name]=t:void 0!==t&&pr(t).forEach((e=>r(e,t[e])))})),s},getAll(t){const e=zr.length+1,s=[],n=(0,i.Qy)(t);let r,o,a,h,c=n.length,l=0;for(;--c>=0;)for(a=n[c],r=_r(a).filter(Kr),o=r.length,h=0;h<o;++h)s[l++]=Br(zr,a,r[h].slice(e));return s}});class Qr{constructor(t,e,s,i,n,r){this.attribute=t,this.callback=e,this.mode=s,this.primary=i,this.name=n,this.set=r}static create(t,e,s={}){return new Qr(s.attribute??(0,i.GL)(t),s.callback??`${t}Changed`,s.mode??2,s.primary??!1,s.name??t,s.set??function(t,e,s={}){const r=s.type??n.SF.get("design:type",e,t)??null;if(null==r)return i.ZT;let o;switch(r){case Number:case Boolean:case String:case BigInt:o=r;break;default:{const t=r.coerce;o="function"==typeof t?t.bind(r):Xr.for(r)??i.ZT;break}}return o===i.ZT?o:function(t,e){return function(s,i){return i?.enableCoercion?(e??!i?.coerceNullish)&&null==s?s:t(s,i):s}}(o,s.nullable)}(t,e,s))}}const Xr={key:Vr("coercer"),define(t,e){Fr(Xr.key,t[e].bind(t),t)},for:t=>Br(Xr.key,t)},Zr=t=>(0,i.hh)(((t,e,s)=>s.has(t,!1)?s.get(t):s.root.get(t)))(t),Yr=i.DI.createInterface,Jr=i.YM.singleton,to=i.YM.aliasTo,eo=i.YM.instance;i.YM.callback;const so=i.YM.transient,io=(t,e,s)=>t.registerResolver(e,s);function no(t,e,s,n){for(let r=0,o=t.length;r<o;++r)i.YM.aliasTo(s,e.keyFrom(t[r])).register(n)}const ro=(t,...e)=>new Error(`AUR${or(t).padStart(4,"0")}:${e.map(or)}`);function oo(t){return function(e){return lo.define(t,e)}}class ao{constructor(t,e,s,i){this.Type=t,this.name=e,this.aliases=s,this.key=i}static create(t,e){let s,n;return yr(t)?(s=t,n={name:s}):(s=t.name,n=t),new ao(e,(0,i.BR)(co(e,"name"),s),(0,i.eG)(co(e,"aliases"),n.aliases,e.aliases),lo.keyFrom(s))}register(t){const{Type:e,key:s,aliases:i}=this;Jr(s,e).register(t),to(s,e).register(t),no(i,lo,s,t)}}const ho=Ur("binding-behavior"),co=(t,e)=>Br(Vr(e),t),lo=lr({name:ho,keyFrom:t=>`${ho}:${t}`,isType:t=>wr(t)&&jr(ho,t),define(t,e){const s=ao.create(t,e);return Fr(ho,s,s.Type),Fr(ho,s,s),Wr(e,ho),s.Type},getDefinition(t){const e=Br(ho,t);if(void 0===e)throw ro(151,t);return e},annotate(t,e,s){Fr(Vr(e),s,t)},getAnnotation:co}),uo=new Map;class po{bind(t,e){uo.set(e,e.mode),e.mode=this.mode}unbind(t,e){e.mode=uo.get(e),uo.delete(e)}}class fo extends po{get mode(){return 1}}class go extends po{get mode(){return 2}}class vo extends po{get mode(){return 4}}class mo extends po{get mode(){return 6}}oo("oneTime")(fo),oo("toView")(go),oo("fromView")(vo),oo("twoWay")(mo);const wo=new WeakMap;class yo{constructor(){this.p=(0,i.DB)(i.TI)}bind(t,e,s,n){const r={type:"debounce",delay:s??200,now:this.p.performanceNow,queue:this.p.taskQueue,signals:yr(n)?[n]:n??i.ow},o=e.limit?.(r);null==o||wo.set(e,o)}unbind(t,e){wo.get(e)?.dispose(),wo.delete(e)}}oo("debounce")(yo);class bo{constructor(){this.i=new Map,this.u=(0,i.DB)(tr)}bind(t,e,...s){if(!("handleChange"in e))throw ro(817);if(0===s.length)throw ro(818);let i;for(i of(this.i.set(e,s),s))Tr(this.u,i,e)}unbind(t,e){const s=this.i.get(e);let i;for(i of(this.i.delete(e),s))$r(this.u,i,e)}}oo("signal")(bo);const ko=new WeakMap;class Co{constructor(){({performanceNow:this.C,taskQueue:this.A}=(0,i.DB)(i.TI))}bind(t,e,s,n){const r={type:"throttle",delay:s??200,now:this.C,queue:this.A,signals:yr(n)?[n]:n??i.ow},o=e.limit?.(r);null==o||ko.set(e,o)}unbind(t,e){ko.get(e)?.dispose(),ko.delete(e)}}oo("throttle")(Co);const So=Yr("IAppTask");class To{constructor(t,e,s){this.c=void 0,this.slot=t,this.k=e,this.cb=s}register(t){return this.c=t.register(eo(So,this))}run(){const t=this.k,e=this.cb;return null===t?e():e(this.c.get(t))}}function $o(t){return function(e,s){return wr(s)?new To(t,e,s):new To(t,null,e)}}lr({creating:$o("creating"),hydrating:$o("hydrating"),hydrated:$o("hydrated"),activating:$o("activating"),activated:$o("activated"),deactivating:$o("deactivating"),deactivated:$o("deactivated")});const xo=i.TI;class Ao{}function Io(t,e){return t.$au?.[e]??null}function Oo(t,e,s){var i;((i=t).$au??(i.$au=new Ao))[e]=s}const Ro=Yr("INode"),Eo=Yr("IEventTarget",(t=>t.cachedCallback((t=>t.has(wl,!0)?t.get(wl).host:t.get(xo).document)))),Po=Yr("IRenderLocation"),No=Yr("CssModules"),Mo=new WeakMap;function Bo(t){if(Mo.has(t))return Mo.get(t);let e=0,s=t.nextSibling;for(;null!==s;){if(8===s.nodeType)switch(s.textContent){case"au-start":++e;break;case"au-end":if(0==e--)return s}s=s.nextSibling}if(null===t.parentNode&&11===t.nodeType){const e=fa(t);if(void 0===e)return null;if(2===e.mountTarget)return Bo(e.host)}return t.parentNode}function jo(t){if(Fo(t))return t;const e=t.ownerDocument.createComment("au-end"),s=e.$start=t.ownerDocument.createComment("au-start"),i=t.parentNode;return null!==i&&(i.replaceChild(e,t),i.insertBefore(s,e)),e}function Fo(t){return"au-end"===t.textContent}class Lo{get firstChild(){return this.B}get lastChild(){return this._}constructor(t,e){this.platform=t,this.next=void 0,this.R=!1,this.I=!1,this.ref=null;const s=(this.f=e).querySelectorAll("au-m");let i,n,r=0,o=s.length,a=this.t=Array(o);for(;o>r;)n=s[r],i=n.nextSibling,n.remove(),8===i.nodeType&&(n=i,(i=i.nextSibling).$start=n),a[r]=i,++r;const h=e.childNodes,c=this.childNodes=Array(o=h.length);for(r=0;o>r;)c[r]=h[r],++r;this.B=e.firstChild,this._=e.lastChild}findTargets(){return this.t}insertBefore(t){if(this.I&&this.ref)this.addToLinked();else{const e=t.parentNode;if(this.R){let s,i=this.B;const n=this._;for(;null!=i&&(s=i.nextSibling,e.insertBefore(i,t),i!==n);)i=s}else this.R=!0,t.parentNode.insertBefore(this.f,t)}}appendTo(t,e=!1){if(this.R){let e,s=this.B;const i=this._;for(;null!=s&&(e=s.nextSibling,t.appendChild(s),s!==i);)s=e}else this.R=!0,e||t.appendChild(this.f)}remove(){if(this.R){this.R=!1;const t=this.f,e=this._;let s,i=this.B;for(;null!==i&&(s=i.nextSibling,t.appendChild(i),i!==e);)i=s}}addToLinked(){const t=this.ref,e=t.parentNode;if(this.R){let s,i=this.B;const n=this._;for(;null!=i&&(s=i.nextSibling,e.insertBefore(i,t),i!==n);)i=s}else this.R=!0,e.insertBefore(this.f,t)}unlink(){this.I=!1,this.next=void 0,this.ref=void 0}link(t){this.I=!0,Fo(t)?this.ref=t:(this.next=t,this.T())}T(){void 0!==this.next?this.ref=this.next.firstChild:this.ref=void 0}}const Do=(t,e,s)=>(io(t,e.HTMLElement,io(t,e.Element,io(t,Ro,new i.g("ElementResolver",s)))),t),Vo="Element";function Uo(t){return function(e){return Go(t,e)}}function Wo(t){return function(e){return Go(yr(t)?{isTemplateController:!0,name:t}:{isTemplateController:!0,...t},e)}}class qo{get type(){return"Attribute"}constructor(t,e,s,i,n,r,o,a,h,c){this.Type=t,this.name=e,this.aliases=s,this.key=i,this.defaultBindingMode=n,this.isTemplateController=r,this.bindables=o,this.noMultiBindings=a,this.watches=h,this.dependencies=c}static create(t,e){let s,n;return yr(t)?(s=t,n={name:s}):(s=t.name,n=t),new qo(e,(0,i.BR)(Ko(e,"name"),s),(0,i.eG)(Ko(e,"aliases"),n.aliases,e.aliases),Ho(s),(0,i.BR)(Ko(e,"defaultBindingMode"),n.defaultBindingMode,e.defaultBindingMode,2),(0,i.BR)(Ko(e,"isTemplateController"),n.isTemplateController,e.isTemplateController,!1),Gr.from(e,...Gr.getAll(e),Ko(e,"bindables"),e.bindables,n.bindables),(0,i.BR)(Ko(e,"noMultiBindings"),n.noMultiBindings,e.noMultiBindings,!1),(0,i.eG)(Jo.getAnnotation(e),e.watches),(0,i.eG)(Ko(e,"dependencies"),n.dependencies,e.dependencies))}register(t){const{Type:e,key:s,aliases:i}=this;so(s,e).register(t),to(s,e).register(t),no(i,Xo,s,t)}toString(){return`au:ca:${this.name}`}}const _o=Ur("custom-attribute"),Ho=t=>`${_o}:${t}`,Ko=(t,e)=>Br(Vr(e),t),zo=(t,e)=>Io(t,Ho(e))??void 0,Go=(t,e)=>{const s=qo.create(t,e);return Fr(_o,s,s.Type),Fr(_o,s,s),Wr(e,_o),s.Type},Qo=t=>{const e=Br(_o,t);if(void 0===e)throw ro(759,t);return e},Xo=lr({name:_o,keyFrom:Ho,isType:t=>wr(t)&&jr(_o,t),for:zo,define:Go,getDefinition:Qo,annotate(t,e,s){Fr(Vr(e),s,t)},getAnnotation:Ko}),Zo=i.ow,Yo=Vr("watch"),Jo=lr({name:Yo,add(t,e){let s=Br(Yo,t);null==s&&Fr(Yo,s=[],t),s.push(e)},getAnnotation:t=>Br(Yo,t)??Zo});function ta(t){return function(e){return da(t,e)}}const ea=new WeakMap;class sa{get type(){return Vo}constructor(t,e,s,i,n,r,o,a,h,c,l,u,d,p,f,g,v,m,w){this.Type=t,this.name=e,this.aliases=s,this.key=i,this.cache=n,this.capture=r,this.template=o,this.instructions=a,this.dependencies=h,this.injectable=c,this.needsCompile=l,this.surrogates=u,this.bindables=d,this.containerless=p,this.shadowOptions=f,this.hasSlots=g,this.enhance=v,this.watches=m,this.processContent=w}static create(t,e=null){if(null===e){const s=t;if(yr(s))throw ro(761,t);const n=(0,i.E8)("name",s,ua);return e=wr(s.Type)?s.Type:ma((0,i.Ho)(n)),new sa(e,n,(0,i.eG)(s.aliases),(0,i.E8)("key",s,(()=>la(n))),(0,i.E8)("cache",s,na),(0,i.E8)("capture",s,oa),(0,i.E8)("template",s,ra),(0,i.eG)(s.instructions),(0,i.eG)(s.dependencies),(0,i.E8)("injectable",s,ra),(0,i.E8)("needsCompile",s,aa),(0,i.eG)(s.surrogates),Gr.from(e,s.bindables),(0,i.E8)("containerless",s,oa),(0,i.E8)("shadowOptions",s,ra),(0,i.E8)("hasSlots",s,oa),(0,i.E8)("enhance",s,oa),(0,i.E8)("watches",s,ha),(0,i.pU)("processContent",e,ra))}if(yr(t))return new sa(e,t,(0,i.eG)(ga(e,"aliases"),e.aliases),la(t),(0,i.pU)("cache",e,na),(0,i.pU)("capture",e,oa),(0,i.pU)("template",e,ra),(0,i.eG)(ga(e,"instructions"),e.instructions),(0,i.eG)(ga(e,"dependencies"),e.dependencies),(0,i.pU)("injectable",e,ra),(0,i.pU)("needsCompile",e,aa),(0,i.eG)(ga(e,"surrogates"),e.surrogates),Gr.from(e,...Gr.getAll(e),ga(e,"bindables"),e.bindables),(0,i.pU)("containerless",e,oa),(0,i.pU)("shadowOptions",e,ra),(0,i.pU)("hasSlots",e,oa),(0,i.pU)("enhance",e,oa),(0,i.eG)(Jo.getAnnotation(e),e.watches),(0,i.pU)("processContent",e,ra));const s=(0,i.E8)("name",t,ua);return new sa(e,s,(0,i.eG)(ga(e,"aliases"),t.aliases,e.aliases),la(s),(0,i.JW)("cache",t,e,na),(0,i.JW)("capture",t,e,oa),(0,i.JW)("template",t,e,ra),(0,i.eG)(ga(e,"instructions"),t.instructions,e.instructions),(0,i.eG)(ga(e,"dependencies"),t.dependencies,e.dependencies),(0,i.JW)("injectable",t,e,ra),(0,i.JW)("needsCompile",t,e,aa),(0,i.eG)(ga(e,"surrogates"),t.surrogates,e.surrogates),Gr.from(e,...Gr.getAll(e),ga(e,"bindables"),e.bindables,t.bindables),(0,i.JW)("containerless",t,e,oa),(0,i.JW)("shadowOptions",t,e,ra),(0,i.JW)("hasSlots",t,e,oa),(0,i.JW)("enhance",t,e,oa),(0,i.eG)(t.watches,Jo.getAnnotation(e),e.watches),(0,i.JW)("processContent",t,e,ra))}static getOrCreate(t){if(t instanceof sa)return t;if(ea.has(t))return ea.get(t);const e=sa.create(t);return ea.set(t,e),Fr(ca,e,e.Type),e}register(t){const{Type:e,key:s,aliases:i}=this;t.has(s,!1)||(so(s,e).register(t),to(s,e).register(t),no(i,wa,s,t))}toString(){return`au:ce:${this.name}`}}const ia={name:void 0,searchParents:!1,optional:!1},na=()=>0,ra=()=>null,oa=()=>!1,aa=()=>!0,ha=()=>i.ow,ca=Ur("custom-element"),la=t=>`${ca}:${t}`,ua=(()=>{let t=0;return()=>"unnamed-"+ ++t})(),da=(t,e)=>{const s=sa.create(t,e);return Fr(ca,s,s.Type),Fr(ca,s,s),Wr(s.Type,ca),s.Type},pa=t=>wr(t)&&jr(ca,t),fa=(t,e=ia)=>{if(void 0===e.name&&!0!==e.searchParents){const s=Io(t,ca);if(null===s){if(!0===e.optional)return null;throw ro(762,t)}return s}if(void 0!==e.name){if(!0!==e.searchParents){const s=Io(t,ca);if(null===s)throw ro(763,t);return s.is(e.name)?s:void 0}let s=t,i=!1;for(;null!==s;){const t=Io(s,ca);if(null!==t&&(i=!0,t.is(e.name)))return t;s=Bo(s)}if(i)return;throw ro(764,t)}let s=t;for(;null!==s;){const t=Io(s,ca);if(null!==t)return t;s=Bo(s)}throw ro(765,t)},ga=(t,e)=>Br(Vr(e),t),va=t=>{const e=Br(ca,t);if(void 0===e)throw ro(760,t);return e},ma=function(){const t={value:"",writable:!1,enumerable:!1,configurable:!0},e={};return function(s,i=e){const n=class{};return t.value=s,Cr(n,"name",t),i!==e&&ur(n.prototype,i),n}}(),wa=lr({name:ca,keyFrom:la,isType:pa,for:fa,define:da,getDefinition:va,annotate:(t,e,s)=>{Fr(Vr(e),s,t)},getAnnotation:ga,generateName:ua,createInjectable:()=>{const t=function(e,s,n){return i.DI.getOrCreateAnnotationParamTypes(e)[n]=t,e};return t.register=function(e){return{resolve:(e,s)=>s.has(t,!0)?s.get(t):null}},t},generateType:ma}),ya=(t,e,s,i)=>{t.addEventListener(e,s,i)},ba=(t,e,s,i)=>{t.removeEventListener(e,s,i)},ka=t=>{let e;const s=t.prototype;Sr(s,"subscribe",(function(t){if(this.subs.add(t)&&1===this.subs.count){for(e of this.cf.events)ya(this.P,e,this);this.L=!0,this.M?.()}})),Sr(s,"unsubscribe",(function(t){if(this.subs.remove(t)&&0===this.subs.count){for(e of this.cf.events)ba(this.P,e,this);this.L=!1,this.q?.()}})),Sr(s,"useConfig",(function(t){if(this.cf=t,this.L){for(e of this.cf.events)ba(this.P,e,this);for(e of this.cf.events)ya(this.P,e,this)}}))},Ca=t=>{Sr(t.prototype,"subscribe",i.ZT),Sr(t.prototype,"unsubscribe",i.ZT)};class Sa{get doNotCache(){return!0}constructor(t){this.obj=t,this.type=Nr|Mr,this.v="",this.F={},this.H=0}getValue(){return this.v}setValue(t){t!==this.v&&(this.v=t,this.O())}O(){const t=this.F,e=++this.H,s=this.obj.classList,i=Ta(this.v),n=i.length;let r,o=0;if(n>0)for(;o<n;o++)r=i[o],0!==r.length&&(t[r]=this.H,s.add(r));if(1!==e)for(r in t)t[r]!==e&&s.remove(r)}}function Ta(t){if(yr(t))return $a(t);if("object"!=typeof t)return i.ow;if(t instanceof Array){const e=t.length;if(e>0){const s=[];let i=0;for(;e>i;++i)s.push(...Ta(t[i]));return s}return i.ow}const e=[];let s;for(s in t)Boolean(t[s])&&(s.includes(" ")?e.push(...$a(s)):e.push(s));return e}function $a(t){const e=t.match(/\S+/g);return null===e?i.ow:e}Ca(Sa);const xa=Yr("IShadowDOMStyles"),Aa=Yr("IShadowDOMGlobalStyles",(t=>t.instance({applyTo:i.ZT})));class Ia{constructor(t,e,s,i){this.Type=t,this.name=e,this.aliases=s,this.key=i}static create(t,e){let s,n;return yr(t)?(s=t,n={name:s}):(s=t.name,n=t),new Ia(e,(0,i.BR)(Ra(e,"name"),s),(0,i.eG)(Ra(e,"aliases"),n.aliases,e.aliases),Ea.keyFrom(s))}register(t){const{Type:e,key:s,aliases:n}=this;i.YM.singleton(s,e).register(t),i.YM.aliasTo(s,e).register(t),no(n,Ea,s,t)}}const Oa=Ur("value-converter"),Ra=(t,e)=>Br(Vr(e),t),Ea=lr({name:Oa,keyFrom:t=>`${Oa}:${t}`,isType:t=>wr(t)&&jr(Oa,t),define(t,e){const s=Ia.create(t,e);return Fr(Oa,s,s.Type),Fr(Oa,s,s),Wr(e,Oa),s.Type},getDefinition(t){const e=Br(Oa,t);if(void 0===e)throw ro(152,t);return e},annotate(t,e,s){Fr(Vr(e),s,t)},getAnnotation:Ra});class Pa{constructor(t,e){this.v=void 0,this.b=t,this.N=e}flush(){this.b.updateSource(this.v)}handleChange(t,e){const s=this.b;t!==Bt(s.ast,s.s,s,null)&&(this.v=t,this.N.add(this))}}const Na=t=>{Sr(t.prototype,"useScope",(function(t){this.s=t}))},Ma=(t,e=!0)=>s=>{const i=s.prototype;null!=t&&Cr(i,"strict",{enumerable:!0,get:function(){return t}}),Cr(i,"strictFnCall",{enumerable:!0,get:function(){return e}}),Sr(i,"get",(function(t){return this.l.get(t)})),Sr(i,"getSignaler",(function(){return this.l.root.get(tr)})),Sr(i,"getConverter",(function(t){const e=Ea.keyFrom(t);let s=Ba.get(this);return null==s&&Ba.set(this,s=new ja),s[e]??(s[e]=this.l.get(Zr(e)))})),Sr(i,"getBehavior",(function(t){const e=lo.keyFrom(t);let s=Ba.get(this);return null==s&&Ba.set(this,s=new ja),s[e]??(s[e]=this.l.get(Zr(e)))}))},Ba=new WeakMap;class ja{}const Fa=Yr("IFlushQueue",(t=>t.singleton(La)));class La{constructor(){this.$=!1,this.W=new Set}get count(){return this.W.size}add(t){if(this.W.add(t),!this.$){this.$=!0;try{this.W.forEach(Da)}finally{this.$=!1}}}clear(){this.W.clear(),this.$=!1}}function Da(t,e,s){s.delete(t),t.flush()}const Va=new WeakSet,Ua=(t,e)=>{Sr(t.prototype,"limit",(function(t){if(Va.has(this))throw ro(9996);Va.add(this);const s=e(this,t),i=t.signals,n=i.length>0?this.get(tr):null,r=this[s],o=(...t)=>r.call(this,...t),a="debounce"===t.type?Wa(t,o,this):qa(t,o,this),h=n?{handleChange:a.flush}:null;return this[s]=a,n&&i.forEach((t=>Tr(n,t,h))),{dispose:()=>{n&&i.forEach((t=>$r(n,t,h))),Va.delete(this),a.dispose(),delete this[s]}}}))},Wa=(t,e,s)=>{let i,n,r,o=!1;const a=t.queue,h=()=>e(r),c=e=>{r=e,s.isBound?(n=i,i=a.queueTask(h,{delay:t.delay,reusable:!1}),n?.cancel()):h()},l=c.dispose=()=>{n?.cancel(),i?.cancel(),n=i=void 0};return c.flush=()=>{o=i?.status===Rr,l(),o&&h()},c},qa=(t,e,s)=>{let i,n,r,o=0,a=0,h=!1;const c=t.queue,l=()=>t.now(),u=()=>e(r),d=e=>{r=e,s.isBound?(a=l()-o,n=i,a>t.delay?(o=l(),u()):i=c.queueTask((()=>{o=l(),u()}),{delay:t.delay-a,reusable:!1}),n?.cancel()):u()},p=d.dispose=()=>{n?.cancel(),i?.cancel(),n=i=void 0};return d.flush=()=>{h=i?.status===Rr,p(),h&&u()},d},{enter:_a,exit:Ha}=Ui,{wrap:Ka,unwrap:za}=jn;class Ga{get value(){return this.v}constructor(t,e,s,i,n){this.obj=t,this.$get=s,this.useProxy=n,this.isBound=!1,this.running=!1,this.v=void 0,this.cb=i,this.oL=e}handleChange(){this.run()}handleCollectionChange(){this.run()}bind(){this.isBound||(this.compute(),this.isBound=!0)}unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll())}run(){if(!this.isBound||this.running)return;const t=this.obj,e=this.v,s=this.compute();kr(s,e)||this.cb.call(t,s,e,t)}compute(){this.running=!0,this.obs.version++;try{return _a(this),this.v=za(this.$get.call(void 0,this.useProxy?Ka(this.obj):this.obj,this))}finally{this.obs.clear(),this.running=!1,Ha(this)}}}class Qa{get value(){return this.v}constructor(t,e,s,i,n){this.scope=t,this.l=e,this.oL=s,this.isBound=!1,this.boundFn=!1,this.obj=t.bindingContext,this.j=i,this.cb=n}handleChange(t){const e=this.j,s=this.obj,i=this.v;"AccessScope"===e.$kind&&1===this.obs.count||(this.obs.version++,t=Bt(e,this.scope,this,this),this.obs.clear()),kr(t,i)||(this.v=t,this.cb.call(s,t,i,s))}bind(){this.isBound||(this.obs.version++,this.v=Bt(this.j,this.scope,this,this),this.obs.clear(),this.isBound=!0)}unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll(),this.v=void 0)}}as(Ga),as(Qa),Ma(!0)(Qa);const Xa=Yr("ILifecycleHooks");class Za{constructor(t,e){this.definition=t,this.instance=e}}class Ya{constructor(t,e){this.Type=t,this.propertyNames=e}static create(t,e){const s=new Set;let i=e.prototype;for(;i!==ar;){for(const t of dr(i))"constructor"===t||t.startsWith("_")||s.add(t);i=Object.getPrototypeOf(i)}return new Ya(e,s)}register(t){Jr(Xa,this.Type).register(t)}}const Ja=new WeakMap,th=Vr("lifecycle-hooks"),eh=lr({name:th,define(t,e){const s=Ya.create(t,e);return Fr(th,s,e),Wr(e,th),s.Type},resolve(t){let e=Ja.get(t);if(void 0===e){Ja.set(t,e=new sh);const s=t.root,i=s.id===t.id?t.getAll(Xa):t.has(Xa,!1)?s.getAll(Xa).concat(t.getAll(Xa)):s.getAll(Xa);let n,r,o,a,h;for(n of i)for(a of(r=Br(th,n.constructor),o=new Za(r,n),r.propertyNames))h=e[a],void 0===h?e[a]=[o]:h.push(o)}return e}});class sh{}const ih={reusable:!1,preempt:!0};class nh{constructor(t,e,s,i,n,r,o,a,h){this.targetAttribute=o,this.targetProperty=a,this.mode=h,this.isBound=!1,this.s=void 0,this.U=null,this.v=void 0,this.boundFn=!1,this.l=e,this.ast=n,this.G=t,this.target=r,this.oL=s,this.A=i}updateTarget(t){const e=this.target,s=this.targetAttribute,i=this.targetProperty;switch(s){case"class":e.classList.toggle(i,!!t);break;case"style":{let s="",n=or(t);yr(n)&&n.includes("!important")&&(s="important",n=n.replace("!important","")),e.style.setProperty(i,n,s);break}default:null==t?e.removeAttribute(s):e.setAttribute(s,or(t))}}handleChange(){if(!this.isBound)return;let t;this.obs.version++;const e=Bt(this.ast,this.s,this,(2&this.mode)>0?this:null);this.obs.clear(),e!==this.v&&(this.v=e,this.G.state!==Xc?(t=this.U,this.U=this.A.queueTask((()=>{this.U=null,this.updateTarget(e)}),ih),t?.cancel()):this.updateTarget(e))}handleCollectionChange(){this.handleChange()}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,Ft(this.ast,t,this),3&this.mode&&this.updateTarget(this.v=Bt(this.ast,t,this,(2&this.mode)>0?this:null)),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,Lt(this.ast,this.s,this),this.s=void 0,this.v=void 0,this.U?.cancel(),this.U=null,this.obs.clearAll())}}Na(nh),Ua(nh,(()=>"updateTarget")),as(nh),Ma(!0)(nh);const rh={reusable:!1,preempt:!0};class oh{constructor(t,e,s,i,n,r,o,a){this.ast=n,this.target=r,this.targetProperty=o,this.mode=a,this.isBound=!1,this.s=void 0,this.U=null,this.G=t,this.oL=s,this.A=i,this.X=s.getAccessor(r,o);const h=n.expressions,c=this.partBindings=Array(h.length),l=h.length;let u=0;for(;l>u;++u)c[u]=new ah(h[u],r,o,e,s,this)}K(){this.updateTarget()}updateTarget(){const t=this.partBindings,e=this.ast.parts,s=t.length;let i="",n=0;if(1===s)i=e[0]+t[0].v+e[1];else for(i=e[0];s>n;++n)i+=t[n].v+e[n+1];const r=this.X;let o;this.G.state!==Xc&&(r.type&Mr)>0?(o=this.U,this.U=this.A.queueTask((()=>{this.U=null,r.setValue(i,this.target,this.targetProperty)}),rh),o?.cancel(),o=null):r.setValue(i,this.target,this.targetProperty)}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t;const e=this.partBindings,s=e.length;let i=0;for(;s>i;++i)e[i].bind(t);this.updateTarget(),this.isBound=!0}unbind(){if(!this.isBound)return;this.isBound=!1,this.s=void 0;const t=this.partBindings,e=t.length;let s=0;for(;e>s;++s)t[s].unbind();this.U?.cancel(),this.U=null}}class ah{constructor(t,e,s,i,n,r){this.ast=t,this.target=e,this.targetProperty=s,this.owner=r,this.mode=2,this.task=null,this.isBound=!1,this.v="",this.boundFn=!1,this.l=i,this.oL=n}updateTarget(){this.owner.K()}handleChange(){if(!this.isBound)return;this.obs.version++;const t=Bt(this.ast,this.s,this,(2&this.mode)>0?this:null);this.obs.clear(),t!=this.v&&(this.v=t,mr(t)&&this.observeCollection(t),this.updateTarget())}handleCollectionChange(){this.updateTarget()}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,Ft(this.ast,t,this),this.v=Bt(this.ast,this.s,this,(2&this.mode)>0?this:null),mr(this.v)&&this.observeCollection(this.v),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,Lt(this.ast,this.s,this),this.s=void 0,this.obs.clearAll())}}Na(ah),Ua(ah,(()=>"updateTarget")),as(ah),Ma(!0)(ah);const hh={reusable:!1,preempt:!0};class ch{constructor(t,e,s,i,n,r,o){this.p=n,this.ast=r,this.target=o,this.isBound=!1,this.mode=2,this.U=null,this.v="",this.Y=!1,this.boundFn=!1,this.strict=!0,this.l=e,this.G=t,this.oL=s,this.A=i}updateTarget(t){const e=this.target,s=this.v;this.v=t,this.Y&&(s.parentNode?.removeChild(s),this.Y=!1),t instanceof this.p.Node&&(e.parentNode?.insertBefore(t,e),t="",this.Y=!0),e.textContent=or(t??"")}handleChange(){if(!this.isBound)return;this.obs.version++;const t=Bt(this.ast,this.s,this,(2&this.mode)>0?this:null);if(this.obs.clear(),t===this.v)return this.U?.cancel(),void(this.U=null);this.G.state!==Xc?this.Z(t):this.updateTarget(t)}handleCollectionChange(){if(!this.isBound)return;this.obs.version++;const t=this.v=Bt(this.ast,this.s,this,(2&this.mode)>0?this:null);this.obs.clear(),mr(t)&&this.observeCollection(t),this.G.state!==Xc?this.Z(t):this.updateTarget(t)}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,Ft(this.ast,t,this);const e=this.v=Bt(this.ast,this.s,this,(2&this.mode)>0?this:null);mr(e)&&this.observeCollection(e),this.updateTarget(e),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,Lt(this.ast,this.s,this),this.Y&&this.v.parentNode?.removeChild(this.v),this.s=void 0,this.obs.clearAll(),this.U?.cancel(),this.U=null)}Z(t){const e=this.U;this.U=this.A.queueTask((()=>{this.U=null,this.updateTarget(t)}),hh),e?.cancel()}}Na(ch),Ua(ch,(()=>"updateTarget")),as()(ch),Ma(void 0,!1)(ch);class lh{constructor(t,e,s,i,n=!1){this.ast=s,this.targetProperty=i,this.isBound=!1,this.s=void 0,this.target=null,this.boundFn=!1,this.l=t,this.oL=e,this.J=n}updateTarget(){this.target[this.targetProperty]=this.v}handleChange(){this.isBound&&(this.obs.version++,this.v=Bt(this.ast,this.s,this,this),this.obs.clear(),this.updateTarget())}handleCollectionChange(){this.handleChange()}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,this.target=this.J?t.bindingContext:t.overrideContext,Ft(this.ast,t,this),this.v=Bt(this.ast,this.s,this,this),this.updateTarget(),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,Lt(this.ast,this.s,this),this.s=void 0,this.obs.clearAll())}}Na(lh),Ua(lh,(()=>"updateTarget")),as(lh),Ma(!0)(lh);class uh{constructor(t,e,s,i,n,r,o,a){this.ast=n,this.target=r,this.targetProperty=o,this.mode=a,this.isBound=!1,this.s=void 0,this.X=void 0,this.U=null,this.tt=null,this.boundFn=!1,this.l=e,this.G=t,this.A=i,this.oL=s}updateTarget(t){this.X.setValue(t,this.target,this.targetProperty)}updateSource(t){jt(this.ast,this.s,this,t)}handleChange(){if(!this.isBound)return;this.obs.version++;const t=Bt(this.ast,this.s,this,(2&this.mode)>0?this:null);this.obs.clear(),this.G.state!==Xc&&(this.X.type&Mr)>0?(dh=this.U,this.U=this.A.queueTask((()=>{this.updateTarget(t),this.U=null}),ph),dh?.cancel(),dh=null):this.updateTarget(t)}handleCollectionChange(){this.handleChange()}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,Ft(this.ast,t,this);const e=this.oL,s=this.mode;let i=this.X;i||(i=4&s?e.getObserver(this.target,this.targetProperty):e.getAccessor(this.target,this.targetProperty),this.X=i);const n=(2&s)>0;3&s&&this.updateTarget(Bt(this.ast,this.s,this,n?this:null)),4&s&&(i.subscribe(this.tt??(this.tt=new Pa(this,this.l.get(Fa)))),n||this.updateSource(i.getValue(this.target,this.targetProperty))),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,Lt(this.ast,this.s,this),this.s=void 0,this.tt&&(this.X.unsubscribe(this.tt),this.tt=null),this.U?.cancel(),this.U=null,this.obs.clearAll())}useTargetObserver(t){this.X?.unsubscribe(this),(this.X=t).subscribe(this)}useTargetSubscriber(t){if(null!=this.tt)throw ro(9995);this.tt=t}}Na(uh),Ua(uh,(t=>4&t.mode?"updateSource":"updateTarget")),as(uh),Ma(!0,!1)(uh);let dh=null;const ph={reusable:!1,preempt:!0};class fh{constructor(t,e,s){this.ast=e,this.target=s,this.isBound=!1,this.s=void 0,this.l=t}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,Ft(this.ast,t,this),jt(this.ast,this.s,this,this.target),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,Bt(this.ast,this.s,this,null)===this.target&&jt(this.ast,this.s,this,null),Lt(this.ast,this.s,this),this.s=void 0)}}Ma(!1)(fh);class gh{constructor(t,e=!1){this.prevent=t,this.capture=e}}class vh{constructor(t,e,s,i,n){this.ast=e,this.target=s,this.targetEvent=i,this.isBound=!1,this.self=!1,this.boundFn=!0,this.l=t,this.et=n}callSource(t){const e=this.s.overrideContext;e.$event=t;let s=Bt(this.ast,this.s,this,null);return delete e.$event,wr(s)&&(s=s(t)),!0!==s&&this.et.prevent&&t.preventDefault(),s}handleEvent(t){this.self&&this.target!==t.composedPath()[0]||this.callSource(t)}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,Ft(this.ast,t,this),this.target.addEventListener(this.targetEvent,this,this.et),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,Lt(this.ast,this.s,this),this.s=void 0,this.target.removeEventListener(this.targetEvent,this,this.et))}}Na(vh),Ua(vh,(()=>"callSource")),Ma(!0,!0)(vh);const mh=Yr("IViewFactory");class wh{constructor(t,e){this.isCaching=!1,this.it=null,this.st=-1,this.name=e.name,this.container=t,this.def=e}setCacheSize(t,e){t&&("*"===t?t=wh.maxCacheSize:yr(t)&&(t=parseInt(t,10)),-1!==this.st&&e||(this.st=t)),this.st>0?this.it=[]:this.it=null,this.isCaching=this.st>0}canReturnToCache(t){return null!=this.it&&this.it.length<this.st}tryReturnToCache(t){return!!this.canReturnToCache(t)&&(this.it.push(t),!0)}create(t){const e=this.it;let s;return null!=e&&e.length>0?(s=e.pop(),s):(s=Dc.$view(this,t),s)}}wh.maxCacheSize=65535;const yh=(t,e)=>t.document.createComment(e),bh=(t,e,s)=>t.insertBefore(e,s),kh=(t,e,s)=>{if(null===t)return;const i=s.length;let n=0;for(;i>n;)t.insertBefore(s[n],e),++n},Ch=(t,e)=>t.content.appendChild(e),Sh=(t,e)=>{const s=e.length;let i=0;for(;s>i;)t.content.appendChild(e[i]),++i},Th=(t,e)=>new t.ownerDocument.defaultView.MutationObserver(e),$h=t=>1===t.nodeType,xh=t=>3===t.nodeType,Ah=Yr("IAuSlotsInfo");class Ih{constructor(t){this.projectedSlots=t}}const Oh=Yr("IAuSlotWatcher");class Rh{static create(t,e,s,n,r,o,a,h){const c=[],l=n.renderers,u=e=>{let s=e,i=t;for(;null!=i&&s>0;)i=i.parent,--s;if(null==i)throw ro(9999);return i},d=t=>{const n=u(t),p=new Rh(n),f=r.compileSpread(n.controller.definition,n.instruction?.captures??i.ow,n.controller.container,e,s);let g;for(g of f)switch(g.type){case Ph:d(t+1);break;case Nh:l[g.instructions.type].render(p,fa(e),g.instructions,o,a,h);break;default:l[g.type].render(p,e,g,o,a,h)}c.push(p)};return d(0),c}get container(){return this.locator}get definition(){return this.$controller.definition}get state(){return this.$controller.state}constructor(t){this.ht=t,this.isBound=!1,this.ct=[],this.$controller=t.controller,this.locator=this.$controller.container}get(t){return this.locator.get(t)}bind(t){if(this.isBound)return;this.isBound=!0;const e=this.scope=this.ht.controller.scope.parent??void 0;if(null==e)throw ro(9999);this.ct.forEach((t=>t.bind(e)))}unbind(){this.ct.forEach((t=>t.unbind())),this.isBound=!1}addBinding(t){this.ct.push(t)}addChild(t){if(t.vmKind!==zc)throw ro(9998);this.$controller.addChild(t)}}const Eh="rg",Ph="hs",Nh="hp",Mh=Yr("Instruction");class Bh{constructor(t,e){this.from=t,this.to=e,this.type="rf"}}class jh{constructor(t,e,s){this.from=t,this.to=e,this.mode=s,this.type=Eh}}class Fh{constructor(t,e,s){this.forOf=t,this.to=e,this.props=s,this.type="rk"}}class Lh{constructor(t,e){this.from=t,this.to=e,this.type="rj"}}class Dh{constructor(t,e){this.value=t,this.to=e,this.type="re"}}class Vh{constructor(t,e,s){this.value=t,this.to=e,this.command=s,this.type="rl"}}class Uh{constructor(t,e,s,i,n,r){this.res=t,this.alias=e,this.props=s,this.projections=i,this.containerless=n,this.captures=r,this.type="ra",this.auSlot=null}}class Wh{constructor(t,e,s){this.res=t,this.alias=e,this.props=s,this.type="rb"}}class qh{constructor(t,e,s,i){this.def=t,this.res=e,this.alias=s,this.props=i,this.type="rc"}}class _h{constructor(t,e){this.instructions=t,this.toBindingContext=e,this.type="rd"}}class Hh{constructor(t,e){this.from=t,this.to=e,this.type="ri"}}class Kh{constructor(t){this.from=t,this.type="ha"}}class zh{constructor(t,e,s,i){this.from=t,this.to=e,this.preventDefault=s,this.capture=i,this.type="hb"}}class Gh{constructor(t,e){this.value=t,this.to=e,this.type="he"}}class Qh{constructor(t){this.value=t,this.type="hf"}}class Xh{constructor(t){this.value=t,this.type="hg"}}class Zh{constructor(t,e,s){this.attr=t,this.from=e,this.to=s,this.type="hc"}}class Yh{constructor(){this.type=Ph}}class Jh{constructor(t){this.instructions=t,this.type=Nh}}const tc=Yr("ITemplateCompiler"),ec=Yr("IRenderer");function sc(t){return function(e){return e.register=function(t){Jr(ec,this).register(t)},Cr(e.prototype,"target",{configurable:!0,get:function(){return t}}),e}}function ic(t,e,s){return yr(e)?t.parse(e,s):e}function nc(t){return null!=t.viewModel?t.viewModel:t}let rc=class{render(t,e,s){const i=nc(e);void 0!==i.$observers?.[s.to]?i.$observers[s.to].setValue(s.value):i[s.to]=s.value}};rc=nr([sc("re")],rc);let oc=class{constructor(){this.r=(0,i.DB)(Pc)}render(t,e,s,n,r,o){let a,h,c,l;const u=s.res,d=s.projections,p=t.container;if("string"==typeof u){if(a=p.find(wa,u),null==a)throw ro(752,s,t)}else a=u;const f=s.containerless||a.containerless?jo(e):null,g=function(t,e,s,n,r,o){const a=e.container.createChild();return Do(a,t,s),io(a,sl,new i.g(Cc,e)),io(a,Mh,new i.g(Sc,n)),io(a,Po,null==r?Oc:new Ic(r)),io(a,mh,Rc),io(a,Ah,null==o?Ec:new i.g($c,o)),a}(n,t,e,s,f,null==d?void 0:new Ih(pr(d)));h=a.Type,c=g.invoke(h),io(g,h,new i.g(a.key,c)),l=Dc.$el(g,c,e,s,a,f),Oo(e,a.key,l);const v=this.r.renderers,m=s.props,w=m.length;let y,b=0;for(;w>b;)y=m[b],v[y.type].render(t,l,y,n,r,o),++b;t.addChild(l)}};oc=nr([sc("ra")],oc);let ac=class{constructor(){this.r=(0,i.DB)(Pc)}render(t,e,s,i,n,r){let o,a=t.container;if("string"==typeof s.res){if(o=a.find(Xo,s.res),null==o)throw ro(753,s,t)}else o=s.res;const h=Ac(i,o,t,e,s,void 0,void 0),c=Dc.$attr(h.ctn,h.vm,e,o);Oo(e,o.key,c);const l=this.r.renderers,u=s.props,d=u.length;let p,f=0;for(;d>f;)p=u[f],l[p.type].render(t,c,p,i,n,r),++f;t.addChild(c)}};ac=nr([sc("rb")],ac);let hc=class{constructor(){this.r=(0,i.DB)(Pc)}render(t,e,s,i,n,r){let o,a=t.container;if("string"==typeof s.res){if(o=a.find(Xo,s.res),null==o)throw ro(754,s,t)}else o=s.res;const h=this.r.getViewFactory(s.def,a),c=jo(e),l=Ac(i,o,t,e,s,h,c),u=Dc.$attr(l.ctn,l.vm,e,o);Oo(c,o.key,u),l.vm.link?.(t,u,e,s);const d=this.r.renderers,p=s.props,f=p.length;let g,v=0;for(;f>v;)g=p[v],d[g.type].render(t,u,g,i,n,r),++v;t.addChild(u)}};hc=nr([sc("rc")],hc);let cc=class{render(t,e,s,i,n,r){e.remove();const o=s.instructions,a=s.toBindingContext,h=t.container,c=o.length;let l,u,d=0;for(;c>d;)l=o[d],u=ic(n,l.from,Or),t.addBinding(new lh(h,r,u,l.to,a)),++d}};cc=nr([sc("rd")],cc);let lc=class{render(t,e,s,i,n){t.addBinding(new fh(t.container,ic(n,s.from,Or),function(t,e){if("element"===e)return t;switch(e){case"controller":return fa(t);case"view":throw ro(750);case"component":return fa(t).viewModel;default:{const s=zo(t,e);if(void 0!==s)return s.viewModel;const i=fa(t,{name:e});if(void 0===i)throw ro(751,e);return i.viewModel}}}(e,s.to)))}};lc=nr([sc("rj")],lc);let uc=class{render(t,e,s,i,n,r){t.addBinding(new oh(t,t.container,r,i.domWriteQueue,ic(n,s.from,xr),nc(e),s.to,2))}};uc=nr([sc("rf")],uc);let dc=class{render(t,e,s,i,n,r){t.addBinding(new uh(t,t.container,r,i.domWriteQueue,ic(n,s.from,Or),nc(e),s.to,s.mode))}};dc=nr([sc(Eh)],dc);let pc=class{render(t,e,s,i,n,r){t.addBinding(new uh(t,t.container,r,i.domWriteQueue,ic(n,s.forOf,Ar),nc(e),s.to,2))}};pc=nr([sc("rk")],pc);let fc=class{render(t,e,s,i,n,r){t.addBinding(new ch(t,t.container,r,i.domWriteQueue,i,ic(n,s.from,Or),e))}};fc=nr([sc("ha")],fc);let gc=class{render(t,e,s,i,n){t.addBinding(new vh(t.container,ic(n,s.from,Ir),e,s.to,new gh(s.preventDefault,s.capture)))}};gc=nr([sc("hb")],gc);let vc=class{render(t,e,s){e.setAttribute(s.to,s.value)}};vc=nr([sc("he")],vc);let mc=class{render(t,e,s){!function(t,e){const s=e.length;let i=0;for(let n=0;n<s;++n)32===e.charCodeAt(n)?(n!==i&&t.add(e.slice(i,n)),i=n+1):n+1===s&&t.add(e.slice(i))}(e.classList,s.value)}};mc=nr([sc("hf")],mc);let wc=class{render(t,e,s){e.style.cssText+=s.value}};wc=nr([sc("hg")],wc);let yc=class{render(t,e,s,i,n,r){t.addBinding(new uh(t,t.container,r,i.domWriteQueue,ic(n,s.from,Or),e.style,s.to,2))}};yc=nr([sc("hd")],yc);let bc=class{render(t,e,s,i,n,r){const o=t.container,a=o.has(No,!1)?o.get(No):null;t.addBinding(new nh(t,o,r,i.domWriteQueue,ic(n,s.from,Or),e,s.attr,null==a?s.to:s.to.split(/\s/g).map((t=>a[t]??t)).join(" "),2))}};bc=nr([sc("hc")],bc);let kc=class{constructor(){this.ut=(0,i.DB)(tc),this.r=(0,i.DB)(Pc)}render(t,e,s,i,n,r){Rh.create(t.container.get(il),e,void 0,this.r,this.ut,i,n,r).forEach((e=>t.addBinding(e)))}};kc=nr([sc(Ph)],kc);const Cc="IController",Sc="IInstruction",Tc="IRenderLocation",$c="ISlotsInfo";class xc{get $isResolver(){return!0}constructor(t){this.f=t}resolve(){const t=this.f;if(null===t)throw ro(755);if(!yr(t.name)||0===t.name.length)throw ro(756);return t}}function Ac(t,e,s,n,r,o,a,h){const c=s instanceof Dc?s:s.$controller,l=c.container.createChild();return Do(l,t,n),io(l,sl,new i.g(Cc,c)),io(l,Mh,new i.g(Sc,r)),io(l,Po,null==a?Oc:new i.g(Tc,a)),io(l,mh,null==o?Rc:new xc(o)),io(l,Ah,null==h?Ec:new i.g($c,h)),{vm:l.invoke(e.Type),ctn:l}}class Ic{get name(){return"IRenderLocation"}get $isResolver(){return!0}constructor(t){this.l=t}resolve(){return this.l}}const Oc=new Ic(null),Rc=new xc(null),Ec=new i.g($c,new Ih(i.ow)),Pc=Yr("IRendering",(t=>t.singleton(Nc)));class Nc{get renderers(){return this.ft??(this.ft=this.dt.getAll(ec,!1).reduce(((t,e)=>(t[e.target]=e,t)),hr()))}constructor(){this.gt=new WeakMap,this.vt=new WeakMap;const t=this.dt=(0,i.DB)(i.bE).root;this.p=t.get(xo),this.ep=t.get(hs),this.oL=t.get(zn),this.bt=new Lo(this.p,this.p.document.createDocumentFragment())}compile(t,e,s){if(!1!==t.needsCompile){const i=this.gt,n=e.get(tc);let r=i.get(t);return null==r?i.set(t,r=n.compile(t,e,s)):e.register(...r.dependencies),r}return t}getViewFactory(t,e){return new wh(e,sa.getOrCreate(t))}createNodes(t){if(!0===t.enhance)return new Lo(this.p,this.xt(t.template));let e,s=!1;const i=this.vt,n=this.p,r=n.document;if(i.has(t))e=i.get(t);else{const o=t.template;let a;null===o?e=null:o instanceof n.Node?"TEMPLATE"===o.nodeName?(e=o.content,s=!0):(e=r.createDocumentFragment()).appendChild(o.cloneNode(!0)):(a=r.createElement("template"),yr(o)&&(a.innerHTML=o),e=a.content,s=!0),this.xt(e),i.set(t,e)}return null==e?this.bt:new Lo(this.p,s?r.importNode(e,!0):r.adoptNode(e.cloneNode(!0)))}render(t,e,s,i){const n=s.instructions,r=this.renderers,o=e.length;let a,h,c,l=0,u=0,d=n.length;if(o!==d)throw ro(757,o,d);if(o>0)for(;o>l;){for(a=n[l],c=e[l],u=0,d=a.length;d>u;)h=a[u],r[h.type].render(t,c,h,this.p,this.ep,this.oL),++u;++l}if(null!=i&&(a=s.surrogates,(d=a.length)>0))for(u=0;d>u;)h=a[u],r[h.type].render(t,i,h,this.p,this.ep,this.oL),++u}wt(){return this.p.document.createElement("au-m")}xt(t){if(null==t)return null;let e=t,s=e.firstChild,i=null;for(;null!=s;)if(8===s.nodeType&&"au*"===s.nodeValue&&(i=s.nextSibling,e.removeChild(s),e.insertBefore(this.wt(),i),s=8===i.nodeType?i.nextSibling:i),i=s?.firstChild,null==i)if(i=s?.nextSibling,null==i)for(s=e.nextSibling,e=e.parentNode;null==s&&null!=e;)s=e.nextSibling,e=e.parentNode;else s=i;else e=s,s=i;return t}}var Mc,Bc;(Bc=Mc||(Mc={}))[Bc.none=0]="none",Bc[Bc.host=1]="host",Bc[Bc.shadowRoot=2]="shadowRoot",Bc[Bc.location=3]="location";const jc={optional:!0},Fc=(t=>(0,i.hh)(((t,e,s)=>s.has(t,!1)?s.get(t):s.root.has(t,!1)?s.root.get(t):void 0))(t))(qt),Lc=new WeakMap;class Dc{get lifecycleHooks(){return this.yt}get isActive(){return(this.state&(Xc|Zc))>0&&0==(this.state&Yc)}get name(){if(null===this.parent)switch(this.vmKind){case zc:return`[${this.definition.name}]`;case Kc:return this.definition.name;case Gc:return this.viewFactory.name}switch(this.vmKind){case zc:return`${this.parent.name}>[${this.definition.name}]`;case Kc:return`${this.parent.name}>${this.definition.name}`;case Gc:return this.viewFactory.name===this.parent.definition?.name?`${this.parent.name}[view]`:`${this.parent.name}[view:${this.viewFactory.name}]`}}get viewModel(){return this.kt}set viewModel(t){this.kt=t,this.Ct=null==t||this.vmKind===Gc?_c.none:new _c(t)}constructor(t,e,s,i,n,r,o){this.container=t,this.vmKind=e,this.definition=s,this.viewFactory=i,this.host=r,this.head=null,this.tail=null,this.next=null,this.parent=null,this.bindings=null,this.children=null,this.hasLockedScope=!1,this.scope=null,this.isBound=!1,this.At=!1,this.hostController=null,this.mountTarget=0,this.shadowRoot=null,this.nodes=null,this.location=null,this.yt=null,this.state=Qc,this.Bt=!1,this.$initiator=null,this.$resolve=void 0,this.$reject=void 0,this.$promise=void 0,this.St=0,this._t=0,this.Rt=0,this.kt=n,this.Ct=e===Gc?_c.none:new _c(n),this.location=o,this.r=t.root.get(Pc),this.coercion=e===Gc?void 0:t.get(Fc)}static getCached(t){return Lc.get(t)}static getCachedOrThrow(t){const e=Dc.getCached(t);if(void 0===e)throw ro(500,t);return e}static $el(t,e,s,n,r=void 0,o=null){if(Lc.has(e))return Lc.get(e);r=r??va(e.constructor);const a=new Dc(t,Kc,r,null,e,s,o),h=t.get((0,i.jt)(il));return r.dependencies.length>0&&t.register(...r.dependencies),io(t,il,new i.g("IHydrationContext",new nl(a,n,h))),Lc.set(e,a),null!=n&&!1===n.hydrate||a.hE(n,h),a}static $attr(t,e,s,i){if(Lc.has(e))return Lc.get(e);i=i??Qo(e.constructor);const n=new Dc(t,zc,i,null,e,s,null);return i.dependencies.length>0&&t.register(...i.dependencies),Lc.set(e,n),n.It(),n}static $view(t,e=void 0){const s=new Dc(t.container,Gc,null,t,null,null,null);return s.parent=e??null,s.Tt(),s}hE(t,e){const s=this.container,n=this.kt;let r=this.definition;if(this.scope=Pt.create(n,null,!0),r.watches.length>0&&qc(this,s,r,n),Vc(this,r,n),this.Ct.Et){const t=n.define(this,e,r);void 0!==t&&t!==r&&(r=sa.getOrCreate(t))}this.yt=eh.resolve(s),r.register(s),null!==r.injectable&&io(s,r.injectable,new i.g("definition.injectable",n)),null!=t&&!1===t.hydrate||(this.hS(t),this.hC())}hS(t){null!=this.yt.hydrating&&this.yt.hydrating.forEach(al,this),this.Ct.Pt&&this.kt.hydrating(this);const e=this.Lt=this.r.compile(this.definition,this.container,t),{shadowOptions:s,hasSlots:i,containerless:n}=e;let r=this.location;if(null!==(this.hostController=fa(this.host,jc))&&(this.host=this.container.root.get(xo).document.createElement(this.definition.name),n&&null==r&&(r=this.location=jo(this.host))),Oo(this.host,ca,this),Oo(this.host,this.definition.key,this),null!==s||i){if(null!=r)throw ro(501);Oo(this.shadowRoot=this.host.attachShadow(s??Hc),ca,this),Oo(this.shadowRoot,this.definition.key,this),this.mountTarget=2}else null!=r?(Oo(r,ca,this),Oo(r,this.definition.key,this),this.mountTarget=3):this.mountTarget=1;this.kt.$controller=this,this.nodes=this.r.createNodes(e),void 0!==this.yt.hydrated&&this.yt.hydrated.forEach(hl,this),this.Ct.Dt&&this.kt.hydrated(this)}hC(){this.r.render(this,this.nodes.findTargets(),this.Lt,this.host),void 0!==this.yt.created&&this.yt.created.forEach(ol,this),this.Ct.Mt&&this.kt.created(this)}It(){const t=this.definition,e=this.kt;t.watches.length>0&&qc(this,this.container,t,e),Vc(this,t,e),e.$controller=this,this.yt=eh.resolve(this.container),void 0!==this.yt.created&&this.yt.created.forEach(ol,this),this.Ct.Mt&&this.kt.created(this)}Tt(){this.Lt=this.r.compile(this.viewFactory.def,this.container,null),this.r.render(this,(this.nodes=this.r.createNodes(this.Lt)).findTargets(),this.Lt,void 0)}activate(t,e,s){switch(this.state){case Qc:case Jc:if(null!==e&&!e.isActive)return;this.state=Xc;break;case Zc:return;case el:throw ro(502,this.name);default:throw ro(503,this.name,function(t){const e=[];return(t&Xc)===Xc&&e.push("activating"),(t&Zc)===Zc&&e.push("activated"),(t&Yc)===Yc&&e.push("deactivating"),(t&Jc)===Jc&&e.push("deactivated"),(t&tl)===tl&&e.push("released"),(t&el)===el&&e.push("disposed"),0===e.length?"none":e.join("|")}(this.state))}switch(this.parent=e,this.vmKind){case Kc:this.scope.parent=s??null;break;case zc:this.scope=s??null;break;case Gc:if(null==s)throw ro(504,this.name);this.hasLockedScope||(this.scope=s)}let n;return this.$initiator=t,this.qt(),this.vmKind!==Gc&&null!=this.yt.binding&&(n=(0,i.TD)(...this.yt.binding.map(cl,this))),this.Ct.Ft&&(n=(0,i.TD)(n,this.kt.binding(this.$initiator,this.parent))),vr(n)?(this.Ht(),n.then((()=>{this.At=!0,this.state!==Xc?this.Ot():this.bind()})).catch((t=>{this.Vt(t)})),this.$promise):(this.At=!0,this.bind(),this.$promise)}bind(){let t,e=0,s=0;if(null!==this.bindings)for(e=0,s=this.bindings.length;s>e;)this.bindings[e].bind(this.scope),++e;if(this.vmKind!==Gc&&null!=this.yt.bound&&(t=(0,i.TD)(...this.yt.bound.map(ll,this))),this.Ct.Nt&&(t=(0,i.TD)(t,this.kt.bound(this.$initiator,this.parent))),vr(t))return this.Ht(),void t.then((()=>{this.isBound=!0,this.state!==Xc?this.Ot():this.$t()})).catch((t=>{this.Vt(t)}));this.isBound=!0,this.$t()}Wt(...t){switch(this.mountTarget){case 1:this.host.append(...t);break;case 2:this.shadowRoot.append(...t);break;case 3:{let e=0;for(;e<t.length;++e)this.location.parentNode.insertBefore(t[e],this.location);break}}}$t(){if(null!==this.hostController)switch(this.mountTarget){case 1:case 2:this.hostController.Wt(this.host);break;case 3:this.hostController.Wt(this.location.$start,this.location)}switch(this.mountTarget){case 1:this.nodes.appendTo(this.host,null!=this.definition&&this.definition.enhance);break;case 2:{const t=this.container;(t.has(xa,!1)?t.get(xa):t.get(Aa)).applyTo(this.shadowRoot),this.nodes.appendTo(this.shadowRoot);break}case 3:this.nodes.insertBefore(this.location)}let t,e=0;if(this.vmKind!==Gc&&null!=this.yt.attaching&&(t=(0,i.TD)(...this.yt.attaching.map(ul,this))),this.Ct.jt&&(t=(0,i.TD)(t,this.kt.attaching(this.$initiator,this.parent))),vr(t)&&(this.Ht(),this.qt(),t.then((()=>{this.Ot()})).catch((t=>{this.Vt(t)}))),null!==this.children)for(;e<this.children.length;++e)this.children[e].activate(this.$initiator,this,this.scope);this.Ot()}deactivate(t,e){let s;switch(this.state&~tl){case Zc:this.state=Yc;break;case Xc:this.state=Yc,s=this.$promise?.catch(i.ZT);break;case Qc:case Jc:case el:case Jc|el:return;default:throw ro(505,this.name,this.state)}this.$initiator=t,t===this&&this.zt();let n,r=0;if(null!==this.children)for(r=0;r<this.children.length;++r)this.children[r].deactivate(t,this);return(0,i.p9)(s,(()=>{if(this.isBound&&(this.vmKind!==Gc&&null!=this.yt.detaching&&(n=(0,i.TD)(...this.yt.detaching.map(pl,this))),this.Ct.Ut&&(n=(0,i.TD)(n,this.kt.detaching(this.$initiator,this.parent)))),vr(n)&&(this.Ht(),t.zt(),n.then((()=>{t.Gt()})).catch((e=>{t.Vt(e)}))),null===t.head?t.head=this:t.tail.next=this,t.tail=this,t===this)return this.Gt(),this.$promise}))}removeNodes(){switch(this.vmKind){case Kc:case Gc:this.nodes.remove(),this.nodes.unlink()}if(null!==this.hostController)switch(this.mountTarget){case 1:case 2:this.host.remove();break;case 3:this.location.$start.remove(),this.location.remove()}}unbind(){let t=0;if(null!==this.bindings)for(;t<this.bindings.length;++t)this.bindings[t].unbind();switch(this.parent=null,this.vmKind){case zc:this.scope=null;break;case Gc:this.hasLockedScope||(this.scope=null),(this.state&tl)!==tl||this.viewFactory.tryReturnToCache(this)||this.$initiator!==this||this.dispose();break;case Kc:this.scope.parent=null}this.state=Jc,this.$initiator=null,this.Xt()}Ht(){void 0===this.$promise&&(this.$promise=new Promise(((t,e)=>{this.$resolve=t,this.$reject=e})),this.$initiator!==this&&this.parent.Ht())}Xt(){void 0!==this.$promise&&(gl=this.$resolve,this.$resolve=this.$reject=this.$promise=void 0,gl(),gl=void 0)}Vt(t){void 0!==this.$promise&&(vl=this.$reject,this.$resolve=this.$reject=this.$promise=void 0,vl(t),vl=void 0),this.$initiator!==this&&this.parent.Vt(t)}qt(){++this.St,this.$initiator!==this&&this.parent.qt()}Ot(){if(this.state!==Xc)return--this.St,this.Xt(),void(this.$initiator!==this&&this.parent.Ot());if(0==--this.St){if(this.vmKind!==Gc&&null!=this.yt.attached&&(ml=(0,i.TD)(...this.yt.attached.map(dl,this))),this.Ct.Qt&&(ml=(0,i.TD)(ml,this.kt.attached(this.$initiator))),vr(ml))return this.Ht(),ml.then((()=>{this.state=Zc,this.Xt(),this.$initiator!==this&&this.parent.Ot()})).catch((t=>{this.Vt(t)})),void(ml=void 0);ml=void 0,this.state=Zc,this.Xt()}this.$initiator!==this&&this.parent.Ot()}zt(){++this._t}Gt(){if(0==--this._t){this.Kt(),this.removeNodes();let t,e=this.$initiator.head;for(;null!==e;)e!==this&&(e.debug&&e.logger.trace("detach()"),e.removeNodes()),e.At&&(e.vmKind!==Gc&&null!=e.yt.unbinding&&(t=(0,i.TD)(...e.yt.unbinding.map(fl,e))),e.Ct.Yt&&(e.debug&&e.logger.trace("unbinding()"),t=(0,i.TD)(t,e.viewModel.unbinding(e.$initiator,e.parent)))),vr(t)&&(this.Ht(),this.Kt(),t.then((()=>{this.Zt()})).catch((t=>{this.Vt(t)}))),t=void 0,e=e.next;this.Zt()}}Kt(){++this.Rt}Zt(){if(0==--this.Rt){let t=this.$initiator.head,e=null;for(;null!==t;)t!==this&&(t.At=!1,t.isBound=!1,t.unbind()),e=t.next,t.next=null,t=e;this.head=this.tail=null,this.At=!1,this.isBound=!1,this.unbind()}}addBinding(t){null===this.bindings?this.bindings=[t]:this.bindings[this.bindings.length]=t}addChild(t){null===this.children?this.children=[t]:this.children[this.children.length]=t}is(t){switch(this.vmKind){case zc:return Qo(this.kt.constructor).name===t;case Kc:return va(this.kt.constructor).name===t;case Gc:return this.viewFactory.name===t}}lockScope(t){this.scope=t,this.hasLockedScope=!0}setHost(t){return this.vmKind===Kc&&(Oo(t,ca,this),Oo(t,this.definition.key,this)),this.host=t,this.mountTarget=1,this}setShadowRoot(t){return this.vmKind===Kc&&(Oo(t,ca,this),Oo(t,this.definition.key,this)),this.shadowRoot=t,this.mountTarget=2,this}setLocation(t){return this.vmKind===Kc&&(Oo(t,ca,this),Oo(t,this.definition.key,this)),this.location=t,this.mountTarget=3,this}release(){this.state|=tl}dispose(){(this.state&el)!==el&&(this.state|=el,this.Ct.Jt&&this.kt.dispose(),null!==this.children&&(this.children.forEach(rl),this.children=null),this.hostController=null,this.scope=null,this.nodes=null,this.location=null,this.viewFactory=null,null!==this.kt&&(Lc.delete(this.kt),this.kt=null),this.kt=null,this.host=null,this.shadowRoot=null,this.container.disposeResolvers())}accept(t){if(!0===t(this))return!0;if(this.Ct.te&&!0===this.kt.accept(t))return!0;if(null!==this.children){const{children:e}=this;for(let s=0,i=e.length;s<i;++s)if(!0===e[s].accept(t))return!0}}}function Vc(t,e,s){const n=e.bindables,r=dr(n),o=r.length,a=t.container.get(zn);if(o>0)for(let e=0;e<o;++e){const o=r[e],h=n[o],c=h.callback,l=a.getObserver(s,o);if(h.set!==i.ZT&&!0!==l.useCoercer?.(h.set,t.coercion))throw ro(507,o);if(null!=s[c]||null!=s.propertyChanged){const e=(e,i)=>{t.isBound&&(s[c]?.(e,i),s.propertyChanged?.(o,e,i))};if(!0!==l.useCallback?.(e))throw ro(508,o)}}}const Uc=new Map,Wc=t=>{let e=Uc.get(t);return null==e&&(e=new at(t,0),Uc.set(t,e)),e};function qc(t,e,s,i){const n=e.get(zn),r=e.get(hs),o=s.watches,a=t.vmKind===Kc?t.scope:Pt.create(i,null,!0),h=o.length;let c,l,u,d=0;for(;h>d;++d){if(({expression:c,callback:l}=o[d]),l=wr(l)?l:Reflect.get(i,l),!wr(l))throw ro(506,l);wr(c)?t.addBinding(new Ga(i,n,c,l,!0)):(u=yr(c)?r.parse(c,Or):Wc(c),t.addBinding(new Qa(a,e,n,u,l)))}}class _c{constructor(t){this.Et="define"in t,this.Pt="hydrating"in t,this.Dt="hydrated"in t,this.Mt="created"in t,this.Ft="binding"in t,this.Nt="bound"in t,this.jt="attaching"in t,this.Qt="attached"in t,this.Ut="detaching"in t,this.Yt="unbinding"in t,this.Jt="dispose"in t,this.te="accept"in t}}_c.none=new _c({});const Hc={mode:"open"},Kc="customElement",zc="customAttribute",Gc="synthetic",Qc=0,Xc=1,Zc=2,Yc=4,Jc=8,tl=16,el=32,sl=Yr("IController"),il=Yr("IHydrationContext");class nl{constructor(t,e,s){this.instruction=e,this.parent=s,this.controller=t}}function rl(t){t.dispose()}function ol(t){t.instance.created(this.kt,this)}function al(t){t.instance.hydrating(this.kt,this)}function hl(t){t.instance.hydrated(this.kt,this)}function cl(t){return t.instance.binding(this.kt,this.$initiator,this.parent)}function ll(t){return t.instance.bound(this.kt,this.$initiator,this.parent)}function ul(t){return t.instance.attaching(this.kt,this.$initiator,this.parent)}function dl(t){return t.instance.attached(this.kt,this.$initiator)}function pl(t){return t.instance.detaching(this.kt,this.$initiator,this.parent)}function fl(t){return t.instance.unbinding(this.kt,this.$initiator,this.parent)}let gl,vl,ml;const wl=Yr("IAppRoot");class yl{constructor(t,e,s,n){this.config=t,this.platform=e,this.container=s,this.ee=void 0,this.host=t.host,n.prepare(this),Do(s,e,t.host),this.ee=(0,i.p9)(this.ie("creating"),(()=>{const e=t.component,n=s.createChild();let r;r=pa(e)?this.container.get(e):t.component;const o={hydrate:!1,projections:null},a=this.controller=Dc.$el(n,r,this.host,o);return a.hE(o,null),(0,i.p9)(this.ie("hydrating"),(()=>(a.hS(null),(0,i.p9)(this.ie("hydrated"),(()=>{a.hC(),this.ee=void 0})))))}))}activate(){return(0,i.p9)(this.ee,(()=>(0,i.p9)(this.ie("activating"),(()=>(0,i.p9)(this.controller.activate(this.controller,null,void 0),(()=>this.ie("activated")))))))}deactivate(){return(0,i.p9)(this.ie("deactivating"),(()=>(0,i.p9)(this.controller.deactivate(this.controller,null),(()=>this.ie("deactivated")))))}ie(t){return(0,i.TD)(...this.container.getAll(So).reduce(((e,s)=>(s.slot===t&&e.push(s.run()),e)),[]))}dispose(){this.controller?.dispose()}}const bl=Yr("IAurelia");class kl{get isRunning(){return this.ir}get isStarting(){return this.se}get isStopping(){return this.ne}get root(){if(null==this.re){if(null==this.next)throw ro(767);return this.next}return this.re}constructor(t=i.DI.createContainer()){if(this.container=t,this.ir=!1,this.se=!1,this.ne=!1,this.re=void 0,this.next=void 0,this.oe=void 0,this.le=void 0,t.has(bl,!0)||t.has(kl,!0))throw ro(768);io(t,bl,new i.g("IAurelia",this)),io(t,kl,new i.g("Aurelia",this)),io(t,wl,this.he=new i.g("IAppRoot"))}register(...t){return this.container.register(...t),this}app(t){return this.next=new yl(t,this.ae(t.host),this.container,this.he),this}enhance(t,e){const s=t.container??this.container.createChild(),n=t.host,r=this.ae(n),o=t.component;let a;wr(o)?(Do(s,r,n),a=s.invoke(o)):a=o,io(s,Eo,new i.g("IEventTarget",n)),e=e??null;const h=Dc.$el(s,a,n,null,sa.create({name:ua(),template:n,enhance:!0}));return(0,i.p9)(h.activate(h,e),(()=>h))}async waitForIdle(){const t=this.root.platform;await t.domWriteQueue.yield(),await t.domReadQueue.yield(),await t.taskQueue.yield()}ae(t){let e;if(this.container.has(xo,!1))e=this.container.get(xo);else{if(null===t.ownerDocument.defaultView)throw ro(769);e=new sr.o(t.ownerDocument.defaultView),this.container.register(eo(xo,e))}return e}start(t=this.next){if(null==t)throw ro(770);return vr(this.oe)?this.oe:this.oe=(0,i.p9)(this.stop(),(()=>(Reflect.set(t.host,"$aurelia",this),this.he.prepare(this.re=t),this.se=!0,(0,i.p9)(t.activate(),(()=>{this.ir=!0,this.se=!1,this.oe=void 0,this.ce(t,"au-started",t.host)})))))}stop(t=!1){if(vr(this.le))return this.le;if(!0===this.ir){const e=this.re;return this.ir=!1,this.ne=!0,this.le=(0,i.p9)(e.deactivate(),(()=>{Reflect.deleteProperty(e.host,"$aurelia"),t&&e.dispose(),this.re=void 0,this.he.dispose(),this.ne=!1,this.ce(e,"au-stopped",e.host)}))}}dispose(){if(this.ir||this.ne)throw ro(771);this.container.dispose()}ce(t,e,s){const i=new t.platform.window.CustomEvent(e,{detail:this,bubbles:!0,cancelable:!0});s.dispatchEvent(i)}}class Cl{constructor(t,e,s,i){if(this.chars=t,this.repeat=e,this.isSymbol=s,this.isInverted=i,i)switch(t.length){case 0:this.has=this.ue;break;case 1:this.has=this.fe;break;default:this.has=this.de}else switch(t.length){case 0:this.has=this.me;break;case 1:this.has=this.ge;break;default:this.has=this.pe}}equals(t){return this.chars===t.chars&&this.repeat===t.repeat&&this.isSymbol===t.isSymbol&&this.isInverted===t.isInverted}pe(t){return this.chars.includes(t)}ge(t){return this.chars===t}me(t){return!1}de(t){return!this.chars.includes(t)}fe(t){return this.chars!==t}ue(t){return!0}}class Sl{constructor(){this.parts=i.ow,this.ve="",this.be={},this.xe={}}get pattern(){const t=this.ve;return""===t?null:t}set pattern(t){null==t?(this.ve="",this.parts=i.ow):(this.ve=t,this.parts=this.xe[t])}append(t,e){const s=this.be;void 0===s[t]?s[t]=e:s[t]+=e}next(t){const e=this.be;let s;void 0!==e[t]&&(s=this.xe,void 0===s[t]?s[t]=[e[t]]:s[t].push(e[t]),e[t]=void 0)}}class Tl{get ve(){return this.we?this.ye[0]:null}constructor(t,...e){this.charSpec=t,this.ke=[],this.Ce=null,this.we=!1,this.ye=e}findChild(t){const e=this.ke,s=e.length;let i=null,n=0;for(;n<s;++n)if(i=e[n],t.equals(i.charSpec))return i;return null}append(t,e){const s=this.ye;s.includes(e)||s.push(e);let i=this.findChild(t);return null==i&&(i=new Tl(t,e),this.ke.push(i),t.repeat&&i.ke.push(i)),i}findMatches(t,e){const s=[],i=this.ke,n=i.length;let r=0,o=null,a=0,h=0;for(;a<n;++a)if(o=i[a],o.charSpec.has(t))if(s.push(o),r=o.ye.length,h=0,o.charSpec.isSymbol)for(;h<r;++h)e.next(o.ye[h]);else for(;h<r;++h)e.append(o.ye[h],t);return s}}class $l{constructor(t){this.text=t;const e=this.Ae=t.length,s=this.Be=[];let i=0;for(;e>i;++i)s.push(new Cl(t[i],!1,!1,!1))}eachChar(t){const e=this.Ae,s=this.Be;let i=0;for(;e>i;++i)t(s[i])}}class xl{constructor(t){this.text="PART",this.Se=new Cl(t,!0,!1,!0)}eachChar(t){t(this.Se)}}class Al{constructor(t){this.text=t,this.Se=new Cl(t,!1,!0,!1)}eachChar(t){t(this.Se)}}class Il{constructor(){this.statics=0,this.dynamics=0,this.symbols=0}}const Ol=Yr("ISyntaxInterpreter",(t=>t.singleton(Rl)));class Rl{constructor(){this._e=new Tl(null),this.Re=[this._e]}add(t){t=t.slice(0).sort(((t,e)=>t.pattern>e.pattern?1:-1));const e=t.length;let s,i,n,r,o,a,h,c,l=0;for(;e>l;){for(s=this._e,i=t[l],n=i.pattern,r=new Il,o=this.Ie(i,r),a=o.length,h=t=>s=s.append(t,n),c=0;a>c;++c)o[c].eachChar(h);s.Ce=r,s.we=!0,++l}}interpret(t){const e=new Sl,s=t.length;let i,n=this.Re,r=0;for(;r<s&&(n=this.Te(n,t.charAt(r),e),0!==n.length);++r);return n=n.filter(El),n.length>0&&(n.sort(Pl),i=n[0],i.charSpec.isSymbol||e.next(i.ve),e.pattern=i.ve),e}Te(t,e,s){const i=[];let n=null;const r=t.length;let o=0;for(;o<r;++o)n=t[o],i.push(...n.findMatches(e,s));return i}Ie(t,e){const s=[],i=t.pattern,n=i.length,r=t.symbols;let o=0,a=0,h="";for(;o<n;)h=i.charAt(o),0!==r.length&&r.includes(h)?o!==a?(s.push(new $l(i.slice(a,o))),++e.statics,a=o):(s.push(new Al(i.slice(a,o+1))),++e.symbols,a=++o):o===a&&"P"===h&&"PART"===i.slice(o,o+4)?(a=o+=4,s.push(new xl(r)),++e.dynamics):++o;return a!==o&&(s.push(new $l(i.slice(a,o))),++e.statics),s}}function El(t){return t.we}function Pl(t,e){const s=t.Ce,i=e.Ce;return s.statics!==i.statics?i.statics-s.statics:s.dynamics!==i.dynamics?i.dynamics-s.dynamics:s.symbols!==i.symbols?i.symbols-s.symbols:0}class Nl{constructor(t,e,s,i){this.rawName=t,this.rawValue=e,this.target=s,this.command=i}}const Ml=Yr("IAttributePattern"),Bl=Yr("IAttributeParser",(t=>t.singleton(jl)));class jl{constructor(t,e){this.it={},this.Ee=t;const s=this.ye={},n=e.reduce(((t,e)=>{const i=Ul(e.constructor);return i.forEach((t=>s[t.pattern]=e)),t.concat(i)}),i.ow);t.add(n)}parse(t,e){let s=this.it[t];null==s&&(s=this.it[t]=this.Ee.interpret(t));const i=s.pattern;return null==i?new Nl(t,e,t,null):this.ye[i][i](t,e,s.parts)}}function Fl(...t){return function(e){return Wl.define(t,e)}}jl.inject=[Ol,(0,i.$6)(Ml)];class Ll{constructor(t){this.Type=t,this.name=void 0}register(t){Jr(Ml,this.Type).register(t)}}const Dl=Ur("attribute-pattern"),Vl="attribute-pattern-definitions",Ul=t=>i.Protocol.annotation.get(t,Vl),Wl=lr({name:Dl,definitionAnnotationKey:Vl,define(t,e){const s=new Ll(e);return Fr(Dl,s,e),Wr(e,Dl),i.Protocol.annotation.set(e,Vl,t),qr(e,Vl),e},getPatternDefinitions:Ul});let ql=class{"PART.PART"(t,e,s){return new Nl(t,e,s[0],s[1])}"PART.PART.PART"(t,e,s){return new Nl(t,e,`${s[0]}.${s[1]}`,s[2])}};ql=nr([Fl({pattern:"PART.PART",symbols:"."},{pattern:"PART.PART.PART",symbols:"."})],ql);let _l=class{ref(t,e,s){return new Nl(t,e,"element","ref")}"PART.ref"(t,e,s){let i=s[0];return"view-model"===i&&(i="component"),new Nl(t,e,i,"ref")}};_l=nr([Fl({pattern:"ref",symbols:""},{pattern:"PART.ref",symbols:"."})],_l);let Hl=class{":PART"(t,e,s){return new Nl(t,e,s[0],"bind")}};Hl=nr([Fl({pattern:":PART",symbols:":"})],Hl);let Kl=class{"@PART"(t,e,s){return new Nl(t,e,s[0],"trigger")}};Kl=nr([Fl({pattern:"@PART",symbols:"@"})],Kl);let zl=class{"...$attrs"(t,e,s){return new Nl(t,e,"","...$attrs")}};zl=nr([Fl({pattern:"...$attrs",symbols:""})],zl);const Gl="None",Ql="IgnoreAttr";function Xl(t){return function(e){return eu.define(t,e)}}class Zl{constructor(t,e,s,i,n){this.Type=t,this.name=e,this.aliases=s,this.key=i,this.type=n}static create(t,e){let s,n;return yr(t)?(s=t,n={name:s}):(s=t.name,n=t),new Zl(e,(0,i.BR)(tu(e,"name"),s),(0,i.eG)(tu(e,"aliases"),n.aliases,e.aliases),Jl(s),(0,i.BR)(tu(e,"type"),n.type,e.type,null))}register(t){const{Type:e,key:s,aliases:i}=this;Jr(s,e).register(t),to(s,e).register(t),no(i,eu,s,t)}}const Yl=Ur("binding-command"),Jl=t=>`${Yl}:${t}`,tu=(t,e)=>Br(Vr(e),t),eu=lr({name:Yl,keyFrom:Jl,define(t,e){const s=Zl.create(t,e);return Fr(Yl,s,s.Type),Fr(Yl,s,s),Wr(e,Yl),s.Type},getAnnotation:tu});let su=class{get type(){return Gl}build(t,e,s){let n=t.attr.target,r=t.attr.rawValue;return null==t.bindable?n=s.map(t.node,n)??(0,i.eV)(n):(""===r&&t.def.type===Vo&&(r=(0,i.eV)(n)),n=t.bindable.name),new jh(e.parse(r,Or),n,1)}};su=nr([Xl("one-time")],su);let iu=class{get type(){return Gl}build(t,e,s){let n=t.attr.target,r=t.attr.rawValue;return null==t.bindable?n=s.map(t.node,n)??(0,i.eV)(n):(""===r&&t.def.type===Vo&&(r=(0,i.eV)(n)),n=t.bindable.name),new jh(e.parse(r,Or),n,2)}};iu=nr([Xl("to-view")],iu);let nu=class{get type(){return Gl}build(t,e,s){const n=t.attr;let r=n.target,o=n.rawValue;return null==t.bindable?r=s.map(t.node,r)??(0,i.eV)(r):(""===o&&t.def.type===Vo&&(o=(0,i.eV)(r)),r=t.bindable.name),new jh(e.parse(o,Or),r,4)}};nu=nr([Xl("from-view")],nu);let ru=class{get type(){return Gl}build(t,e,s){const n=t.attr;let r=n.target,o=n.rawValue;return null==t.bindable?r=s.map(t.node,r)??(0,i.eV)(r):(""===o&&t.def.type===Vo&&(o=(0,i.eV)(r)),r=t.bindable.name),new jh(e.parse(o,Or),r,6)}};ru=nr([Xl("two-way")],ru);let ou=class{get type(){return Gl}build(t,e,s){const n=t.attr,r=t.bindable;let o,a,h=n.target,c=n.rawValue;return null==r?(a=s.isTwoWay(t.node,h)?6:2,h=s.map(t.node,h)??(0,i.eV)(h)):(""===c&&t.def.type===Vo&&(c=(0,i.eV)(h)),o=t.def.defaultBindingMode,a=8===r.mode||null==r.mode?null==o||8===o?2:o:r.mode,h=r.name),new jh(e.parse(c,Or),h,a)}};ou=nr([Xl("bind")],ou);let au=class{get type(){return Gl}static get inject(){return[Bl]}constructor(t){this.Pe=t}build(t,e){const s=null===t.bindable?(0,i.eV)(t.attr.target):t.bindable.name,n=e.parse(t.attr.rawValue,Ar);let r=i.ow;if(n.semiIdx>-1){const e=t.attr.rawValue.slice(n.semiIdx+1),s=e.indexOf(":");if(s>-1){const t=e.slice(0,s).trim(),i=e.slice(s+1).trim(),n=this.Pe.parse(t,i);r=[new Vh(i,n.target,n.command)]}}return new Fh(n,s,r)}};au=nr([Xl("for")],au);let hu=class{get type(){return Ql}build(t,e){return new zh(e.parse(t.attr.rawValue,Ir),t.attr.target,!0,!1)}};hu=nr([Xl("trigger")],hu);let cu=class{get type(){return Ql}build(t,e){return new zh(e.parse(t.attr.rawValue,Ir),t.attr.target,!1,!0)}};cu=nr([Xl("capture")],cu);let lu=class{get type(){return Ql}build(t,e){return new Zh(t.attr.target,e.parse(t.attr.rawValue,Or),t.attr.target)}};lu=nr([Xl("attr")],lu);let uu=class{get type(){return Ql}build(t,e){return new Zh("style",e.parse(t.attr.rawValue,Or),t.attr.target)}};uu=nr([Xl("style")],uu);let du=class{get type(){return Ql}build(t,e){return new Zh("class",e.parse(t.attr.rawValue,Or),t.attr.target)}};du=nr([Xl("class")],du);let pu=class{get type(){return Ql}build(t,e){return new Lh(e.parse(t.attr.rawValue,Or),t.attr.target)}};pu=nr([Xl("ref")],pu);let fu=class{get type(){return Ql}build(t){return new Yh}};fu=nr([Xl("...$attrs")],fu);const gu=Yr("ISVGAnalyzer",(t=>t.singleton(vu)));class vu{isStandardSvgAttribute(t,e){return!1}}const mu=Yr("IAttrMapper",(t=>t.singleton(wu)));class wu{constructor(){this.fns=[],this.qe=hr(),this.Fe=hr(),this.svg=(0,i.DB)(gu),this.useMapping({LABEL:{for:"htmlFor"},IMG:{usemap:"useMap"},INPUT:{maxlength:"maxLength",minlength:"minLength",formaction:"formAction",formenctype:"formEncType",formmethod:"formMethod",formnovalidate:"formNoValidate",formtarget:"formTarget",inputmode:"inputMode"},TEXTAREA:{maxlength:"maxLength"},TD:{rowspan:"rowSpan",colspan:"colSpan"},TH:{rowspan:"rowSpan",colspan:"colSpan"}}),this.useGlobalMapping({accesskey:"accessKey",contenteditable:"contentEditable",tabindex:"tabIndex",textcontent:"textContent",innerhtml:"innerHTML",scrolltop:"scrollTop",scrollleft:"scrollLeft",readonly:"readOnly"})}useMapping(t){var e;let s,i,n,r;for(n in t)for(r in s=t[n],i=(e=this.qe)[n]??(e[n]=hr()),s){if(void 0!==i[r])throw yu(r,n);i[r]=s[r]}}useGlobalMapping(t){const e=this.Fe;for(const s in t){if(void 0!==e[s])throw yu(s,"*");e[s]=t[s]}}useTwoWay(t){this.fns.push(t)}isTwoWay(t,e){return function(t,e){switch(t.nodeName){case"INPUT":switch(t.type){case"checkbox":case"radio":return"checked"===e;default:return"value"===e||"files"===e||"value-as-number"===e||"value-as-date"===e}case"TEXTAREA":case"SELECT":return"value"===e;default:switch(e){case"textcontent":case"innerhtml":return t.hasAttribute("contenteditable");case"scrolltop":case"scrollleft":return!0;default:return!1}}}(t,e)||this.fns.length>0&&this.fns.some((s=>s(t,e)))}map(t,e){return this.qe[t.nodeName]?.[e]??this.Fe[e]??(gr(t,e,this.svg)?e:null)}}function yu(t,e){return ro(719,t,e)}const bu=hr();class ku{static forNs(t){return bu[t]??(bu[t]=new ku(t))}constructor(t){this.ns=t,this.type=Nr|Mr}getValue(t,e){return t.getAttributeNS(this.ns,e)}setValue(t,e,s){null==t?e.removeAttributeNS(this.ns,s):e.setAttributeNS(this.ns,s,t)}}Ca(ku);class Cu{constructor(){this.type=Nr|Mr}getValue(t,e){return t.getAttribute(e)}setValue(t,e,s){null==t?e.removeAttribute(s):e.setAttribute(s,t)}}Ca(Cu);const Su=new Cu,Tu={childList:!0,subtree:!0,characterData:!0};function $u(t,e){return t===e}class xu{constructor(t,e,s,i){this.type=Nr|Pr|Mr,this.v=void 0,this.ov=void 0,this.He=!1,this.Oe=void 0,this.Ve=void 0,this.iO=!1,this.L=!1,this.P=t,this.oL=i,this.cf=s}getValue(){return this.iO?this.v:this.P.multiple?function(t){const e=[];if(0===t.length)return e;const s=t.length;let i,n=0;for(;s>n;)i=t[n],i.selected&&(e[e.length]=cr.call(i,"model")?i.model:i.value),++n;return e}(this.P.options):this.P.value}setValue(t){this.ov=this.v,this.v=t,this.He=t!==this.ov,this.Ne(t instanceof Array?t:null),this.O()}O(){this.He&&(this.He=!1,this.syncOptions())}handleCollectionChange(){this.syncOptions()}syncOptions(){const t=this.v,e=this.P,s=mr(t),i=e.matcher??$u,n=e.options;let r=n.length;for(;r-- >0;){const e=n[r],o=cr.call(e,"model")?e.model:e.value;e.selected=s?-1!==t.findIndex((t=>!!i(o,t))):!!i(o,t)}}syncValue(){const t=this.P,e=t.options,s=e.length,i=this.v;let n=0;if(t.multiple){if(!(i instanceof Array))return!0;let r;const o=t.matcher||$u,a=[];for(;n<s;)r=e[n],r.selected&&a.push(cr.call(r,"model")?r.model:r.value),++n;let h;for(n=0;n<i.length;)h=i[n],-1===a.findIndex((t=>!!o(h,t)))?i.splice(n,1):++n;for(n=0;n<a.length;)h=a[n],-1===i.findIndex((t=>!!o(h,t)))&&i.push(h),++n;return!1}let r,o=null;for(;n<s;){if(r=e[n],r.selected){o=cr.call(r,"model")?r.model:r.value;break}++n}return this.ov=this.v,this.v=o,!0}M(){(this.Ve=Th(this.P,this.$e.bind(this))).observe(this.P,Tu),this.Ne(this.v instanceof Array?this.v:null),this.iO=!0}q(){this.Ve.disconnect(),this.Oe?.unsubscribe(this),this.Ve=this.Oe=void 0,this.iO=!1}Ne(t){if(this.Oe?.unsubscribe(this),this.Oe=void 0,null!=t){if(!this.P.multiple)throw new Error("AUR0654");(this.Oe=this.oL.getArrayObserver(t)).subscribe(this)}}handleEvent(){this.syncValue()&&this.We()}$e(t){this.syncOptions(),this.syncValue()&&this.We()}We(){Au=this.ov,this.ov=this.v,this.subs.notify(this.v,Au)}}let Au,Iu;ka(xu),Kt(xu);class Ou{constructor(t){this.obj=t,this.type=Nr|Mr,this.v="",this.ov="",this.styles={},this.version=0,this.He=!1}getValue(){return this.obj.style.cssText}setValue(t){this.v=t,this.He=t!==this.ov,this.O()}je(t){const e=[],s=/url\([^)]+$/;let i,n,r,o,a=0,h="";for(;a<t.length;)i=t.indexOf(";",a),-1===i&&(i=t.length),h+=t.substring(a,i),a=i+1,s.test(h)?h+=";":(n=h.indexOf(":"),r=h.substring(0,n).trim(),o=h.substring(n+1).trim(),e.push([r,o]),h="");return e}ze(t){let e,s;const n=[];for(s in t)if(e=t[s],null!=e)if(yr(e)){if(s.startsWith("--")){n.push([s,e]);continue}n.push([(0,i.GL)(s),e])}else n.push(...this.Ue(e));return n}Ge(t){const e=t.length;if(e>0){const s=[];let i=0;for(;e>i;++i)s.push(...this.Ue(t[i]));return s}return i.ow}Ue(t){return yr(t)?this.je(t):t instanceof Array?this.Ge(t):t instanceof Object?this.ze(t):i.ow}O(){if(this.He){this.He=!1;const t=this.v,e=this.styles,s=this.Ue(t);let i,n,r,o,a=this.version;this.ov=t;let h=0;const c=s.length;for(;h<c;++h)n=s[h],r=n[0],o=n[1],this.setProperty(r,o),e[r]=a;if(this.styles=e,this.version+=1,0===a)return;for(i in a-=1,e)cr.call(e,i)&&e[i]===a&&this.obj.style.removeProperty(i)}}setProperty(t,e){let s="";null!=e&&wr(e.indexOf)&&e.includes("!important")&&(s="important",e=e.replace("!important","")),this.obj.style.setProperty(t,e,s)}bind(){this.v=this.ov=this.obj.style.cssText}}Ca(Ou);class Ru{constructor(t,e,s){this.type=Nr|Pr|Mr,this.v="",this.ov="",this.He=!1,this.L=!1,this.P=t,this.k=e,this.cf=s}getValue(){return this.v}setValue(t){kr(t,this.v)||(this.ov=this.v,this.v=t,this.He=!0,this.cf.readonly||this.O())}O(){this.He&&(this.He=!1,this.P[this.k]=this.v??this.cf.default,this.We())}handleEvent(){this.ov=this.v,this.v=this.P[this.k],this.ov!==this.v&&(this.He=!1,this.We())}M(){this.v=this.ov=this.P[this.k]}We(){Iu=this.ov,this.ov=this.v,this.subs.notify(this.v,Iu)}}ka(Ru),Kt(Ru);const Eu="http://www.w3.org/1999/xlink",Pu="http://www.w3.org/XML/1998/namespace",Nu="http://www.w3.org/2000/xmlns/",Mu=ur(hr(),{"xlink:actuate":["actuate",Eu],"xlink:arcrole":["arcrole",Eu],"xlink:href":["href",Eu],"xlink:role":["role",Eu],"xlink:show":["show",Eu],"xlink:title":["title",Eu],"xlink:type":["type",Eu],"xml:lang":["lang",Pu],"xml:space":["space",Pu],xmlns:["xmlns",Nu],"xmlns:xlink":["xlink",Nu]}),Bu=new qn;Bu.type=Nr|Mr;class ju{constructor(){this.allowDirtyCheck=!0,this.Xe=hr(),this.Qe=hr(),this.Ke=hr(),this.Ye=hr(),this.Ze=(0,i.DB)(i.P2),this.p=(0,i.DB)(xo),this.Je=(0,i.DB)(Ln),this.svg=(0,i.DB)(gu);const t=["change","input"],e={events:t,default:""};this.useConfig({INPUT:{value:e,valueAsNumber:{events:t,default:0},checked:{type:Du,events:t},files:{events:t,readonly:!0}},SELECT:{value:{type:xu,events:["change"],default:""}},TEXTAREA:{value:e}});const s={events:["change","input","blur","keyup","paste"],default:""},n={events:["scroll"],default:0};this.useConfigGlobal({scrollTop:n,scrollLeft:n,textContent:s,innerHTML:s}),this.overrideAccessorGlobal("css","style","class"),this.overrideAccessor({INPUT:["value","checked","model"],SELECT:["value"],TEXTAREA:["value"]})}static register(t){to(Gn,ju).register(t),Jr(Gn,ju).register(t)}handles(t,e){return t instanceof this.p.Node}useConfig(t,e,s){const i=this.Xe;let n;if(yr(t))n=i[t]??(i[t]=hr()),null==n[e]?n[e]=s:Fu(t,e);else for(const s in t){n=i[s]??(i[s]=hr());const r=t[s];for(e in r)null==n[e]?n[e]=r[e]:Fu(s,e)}}useConfigGlobal(t,e){const s=this.Qe;if("object"==typeof t)for(const e in t)null==s[e]?s[e]=t[e]:Fu("*",e);else null==s[t]?s[t]=e:Fu("*",t)}getAccessor(t,e,s){if(e in this.Ye||e in(this.Ke[t.tagName]??i.FD))return this.getObserver(t,e,s);switch(e){case"src":case"href":case"role":case"minLength":case"maxLength":case"placeholder":case"size":case"pattern":case"title":case"popovertarget":case"popovertargetaction":return Su;default:{const s=Mu[e];return void 0!==s?ku.forNs(s[1]):gr(t,e,this.svg)?Su:Bu}}}overrideAccessor(t,e){var s,i;let n;if(yr(t))n=(s=this.Ke)[t]??(s[t]=hr()),n[e]=!0;else for(const e in t)for(const s of t[e])n=(i=this.Ke)[e]??(i[e]=hr()),n[s]=!0}overrideAccessorGlobal(...t){for(const e of t)this.Ye[e]=!0}getNodeObserverConfig(t,e){return this.Xe[t.tagName]?.[e]??this.Qe[e]}getNodeObserver(t,e,s){const i=this.Xe[t.tagName]?.[e]??this.Qe[e];let n;return null!=i?(n=new(i.type??Ru)(t,e,i,s,this.Ze),n.doNotCache||(Jn(t)[e]=n),n):null}getObserver(t,e,s){switch(e){case"class":return new Sa(t);case"css":case"style":return new Ou(t)}const i=this.getNodeObserver(t,e,s);if(null!=i)return i;const n=Mu[e];if(void 0!==n)return ku.forNs(n[1]);if(gr(t,e,this.svg))return Su;if(e in t.constructor.prototype){if(this.allowDirtyCheck)return this.Je.createProperty(t,e);throw ro(652,e)}return new _n(t,e)}}function Fu(t,e){throw ro(653,t,e)}function Lu(t,e){return t===e}ju.inject=[i.P2,xo,Ln,gu];class Du{constructor(t,e,s,i){this.type=Nr|Pr|Mr,this.v=void 0,this.ov=void 0,this.ti=void 0,this.ei=void 0,this.L=!1,this.P=t,this.oL=i,this.cf=s}getValue(){return this.v}setValue(t){const e=this.v;t!==e&&(this.v=t,this.ov=e,this.ii(),this.si(),this.We())}handleCollectionChange(){this.si()}handleChange(t,e){this.si()}si(){const t=this.v,e=this.P,s=cr.call(e,"model")?e.model:e.value,i="radio"===e.type,n=void 0!==e.matcher?e.matcher:Lu;if(i)e.checked=!!n(t,s);else if(!0===t)e.checked=!0;else{let i=!1;if(mr(t))i=-1!==t.findIndex((t=>!!n(t,s)));else if(t instanceof Set){for(const e of t)if(n(e,s)){i=!0;break}}else if(t instanceof Map)for(const e of t){const t=e[0],r=e[1];if(n(t,s)&&!0===r){i=!0;break}}e.checked=i}}handleEvent(){let t=this.ov=this.v;const e=this.P,s=cr.call(e,"model")?e.model:e.value,i=e.checked,n=void 0!==e.matcher?e.matcher:Lu;if("checkbox"===e.type){if(mr(t)){const e=t.findIndex((t=>!!n(t,s)));return void(i&&-1===e?t.push(s):i||-1===e||t.splice(e,1))}if(t instanceof Set){const e={};let r=e;for(const e of t)if(!0===n(e,s)){r=e;break}return void(i&&r===e?t.add(s):i||r===e||t.delete(r))}if(t instanceof Map){let e;for(const i of t){const t=i[0];if(!0===n(t,s)){e=t;break}}return void t.set(e,i)}t=i}else{if(!i)return;t=s}this.v=t,this.We()}M(){this.ii()}q(){this.ti?.unsubscribe(this),this.ei?.unsubscribe(this),this.ti=this.ei=void 0}We(){Vu=this.ov,this.ov=this.v,this.subs.notify(this.v,Vu)}ii(){const t=this.P;(this.ei??(this.ei=t.$observers?.model??t.$observers?.value))?.subscribe(this),this.ti?.unsubscribe(this),this.ti=void 0,"checkbox"===t.type&&(this.ti=function(t,e){return t instanceof Array?e.getArrayObserver(t):t instanceof Map?e.getMapObserver(t):t instanceof Set?e.getSetObserver(t):void 0}(this.v,this.oL))?.subscribe(this)}}let Vu;ka(Du),Kt(Du);class Uu{bind(t,e){if(!(e instanceof uh))throw ro(9994,e);e.useTargetObserver(Su)}}oo("attr")(Uu);class Wu{bind(t,e){if(!(e instanceof vh))throw ro(801);e.self=!0}unbind(t,e){e.self=!1}}oo("self")(Wu);class qu{constructor(){this.oL=(0,i.DB)(zn),this.ni=(0,i.DB)(Gn)}bind(t,e,...s){if(!(this.ni instanceof ju))throw ro(9993);if(0===s.length)throw ro(802);if(!(e instanceof uh&&4&e.mode))throw ro(803);const i=this.ni.getNodeObserverConfig(e.target,e.targetProperty);if(null==i)throw ro(9992,e);const n=this.ni.getNodeObserver(e.target,e.targetProperty,this.oL);n.useConfig({readonly:i.readonly,default:i.default,events:s}),e.useTargetObserver(n)}}oo("updateTrigger")(qu);class _u{constructor(){this.elseFactory=void 0,this.elseView=void 0,this.ifView=void 0,this.view=void 0,this.value=!1,this.cache=!0,this.pending=void 0,this.ri=!1,this.oi=0,this.li=(0,i.DB)(mh),this.l=(0,i.DB)(Po)}attaching(t,e){return this.hi(this.value)}detaching(t,e){return this.ri=!0,(0,i.p9)(this.pending,(()=>{this.ri=!1,this.pending=void 0,this.view?.deactivate(t,this.$controller)}))}valueChanged(t,e){if(this.$controller.isActive)return(t=!!t)!=(e=!!e)?this.hi(t):void 0}hi(t){const e=this.view,s=this.$controller,n=this.oi++,r=()=>!this.ri&&this.oi===n+1;let o;return(0,i.p9)(this.pending,(()=>this.pending=(0,i.p9)(e?.deactivate(e,s),(()=>{if(r()&&(o=this.view=t?this.ifView=this.cache&&null!=this.ifView?this.ifView:this.li.create():this.elseView=this.cache&&null!=this.elseView?this.elseView:this.elseFactory?.create(),null!=o))return o.setLocation(this.l),(0,i.p9)(o.activate(o,s,s.scope),(()=>{r()&&(this.pending=void 0)}))}))))}dispose(){this.ifView?.dispose(),this.elseView?.dispose(),this.ifView=this.elseView=this.view=void 0}accept(t){if(!0===this.view?.accept(t))return!0}}nr([Hr],_u.prototype,"value",void 0),nr([Hr({set:t=>""===t||!!t&&"false"!==t})],_u.prototype,"cache",void 0),Wo("if")(_u);class Hu{constructor(){this.f=(0,i.DB)(mh)}link(t,e,s,i){const n=t.children,r=n[n.length-1];if(r instanceof _u)r.elseFactory=this.f;else{if(!(r.viewModel instanceof _u))throw ro(810);r.viewModel.elseFactory=this.f}}}function Ku(t){t.dispose()}Wo({name:"else"})(Hu);const zu=["BindingBehavior","ValueConverter"];class Gu{constructor(t,e,s,i,n){this.views=[],this.ai=[],this.key=null,this.ui=new Map,this.fi=new Map,this.di=void 0,this.mi=!1,this.gi=!1,this.pi=null,this.vi=void 0,this.bi=!1;const r=t.props[0].props[0];if(void 0!==r){const{to:t,value:s,command:i}=r;if("key"!==t)throw ro(776,t);if(null===i)this.key=s;else{if("bind"!==i)throw ro(775,i);this.key=e.parse(s,Or)}}this.l=s,this.xi=i,this.f=n}binding(t,e){const s=this.xi.bindings,i=s.length;let n,r,o=0;for(;i>o;++o)if(n=s[o],n.target===this&&"items"===n.targetProperty){r=this.forOf=n.ast,this.wi=n;let t=r.iterable;for(;null!=t&&zu.includes(t.$kind);)t=t.expression,this.mi=!0;this.pi=t;break}this.yi();const a=r.declaration;(this.bi="ArrayDestructuring"===a.$kind||"ObjectDestructuring"===a.$kind)||(this.local=Bt(a,this.$controller.scope,n,null))}attaching(t,e){return this.ki(),this.Ci(t)}detaching(t,e){return this.yi(),this.Ai(t)}unbinding(t,e){this.fi.clear(),this.ui.clear()}itemsChanged(){this.$controller.isActive&&(this.yi(),this.ki(),this.Bi(this.items,void 0))}handleCollectionChange(t,e){const s=this.$controller;if(s.isActive){if(this.mi){if(this.gi)return;return this.gi=!0,this.items=Bt(this.forOf.iterable,s.scope,this.wi,null),void(this.gi=!1)}this.ki(),this.Bi(t,e)}}Bi(t,e){const s=this.views;this.ai=s.slice();const n=s.length,r=this.key,o=null!==r;if(o||void 0===e){const t=this.local,i=this.vi,a=i.length,h=this.forOf,c=h.declaration,l=this.wi,u=this.bi;e=Ht(a);let d=0;if(0===n)for(;d<a;++d)e[d]=-2;else if(0===a)if(u)for(d=0;d<n;++d)e.deletedIndices.push(d),e.deletedItems.push(Bt(c,s[d].scope,l,null));else for(d=0;d<n;++d)e.deletedIndices.push(d),e.deletedItems.push(s[d].scope.bindingContext[t]);else{const p=Array(n);if(u)for(d=0;d<n;++d)p[d]=Bt(c,s[d].scope,l,null);else for(d=0;d<n;++d)p[d]=s[d].scope.bindingContext[t];let f,g,v,m,w=0;const y=n-1,b=a-1,k=new Map,C=new Map,S=this.ui,T=this.fi,$=this.$controller.scope;d=0;t:{for(;;){if(o?(f=p[d],g=i[d],v=od(S,r,f,ad(T,f,h,$,l,t,u),l),m=od(S,r,g,ad(T,g,h,$,l,t,u),l)):(f=v=hd(p[d],d),g=m=hd(i[d],d)),v!==m){S.set(f,v),S.set(g,m);break}if(++d,d>y||d>b)break t}if(y===b)for(w=b;;){if(o?(f=p[w],g=i[w],v=od(S,r,f,ad(T,f,h,$,l,t,u),l),m=od(S,r,g,ad(T,g,h,$,l,t,u),l)):(f=v=hd(p[d],d),g=m=hd(i[d],d)),v!==m){S.set(f,v),S.set(g,m);break}if(--w,d>w)break t}}const x=d,A=d;for(d=A;d<=b;++d)S.has(g=o?i[d]:hd(i[d],d))?m=S.get(g):(m=o?od(S,r,g,ad(T,g,h,$,l,t,u),l):g,S.set(g,m)),C.set(m,d);for(d=x;d<=y;++d)v=S.has(f=o?p[d]:hd(p[d],d))?S.get(f):o?od(S,r,f,s[d].scope,l):f,k.set(v,d),C.has(v)?e[C.get(v)]=d:(e.deletedIndices.push(d),e.deletedItems.push(f));for(d=A;d<=b;++d)k.has(S.get(o?i[d]:hd(i[d],d)))||(e[d]=-2);k.clear(),C.clear()}}if(void 0===e){const t=(0,i.p9)(this.Ai(null),(()=>this.Ci(null)));vr(t)&&t.catch(br)}else if(e.deletedIndices.length>0){const t=(0,i.p9)(this.Si(e),(()=>this._i(n,e)));vr(t)&&t.catch(br)}else this._i(n,e)}yi(){const t=this.$controller.scope;let e,s=this.Ri,i=this.mi;i&&(s=this.Ri=Bt(this.pi,t,this.wi,null)??null,i=this.mi=!kr(this.items,s));const n=this.di;this.$controller.isActive?(e=this.di=(t=>{let e;return u(t)?e=Te(t):p(t)?e=Xe(t):d(t)&&(e=Fe(t)),e})(i?s:this.items),n!==e&&(n?.unsubscribe(this),e?.subscribe(this))):(n?.unsubscribe(this),this.di=void 0)}ki(){const{items:t}=this;if(mr(t))return void(this.vi=t);const e=[];ed(t,((t,s)=>{e[s]=t})),this.vi=e}Ci(t){let e,s,i,n;const{$controller:r,f:o,local:a,l:h,items:c,fi:l,wi:u,forOf:d,bi:p}=this,f=r.scope,g=td(c),v=this.views=Array(g);if(ed(c,((c,m)=>{i=v[m]=o.create().setLocation(h),i.nodes.unlink(),n=ad(l,c,d,f,u,a,p),Yu(n.overrideContext,m,g),s=i.activate(t??i,r,n),vr(s)&&(e??(e=[])).push(s)})),void 0!==e)return 1===e.length?e[0]:Promise.all(e)}Ai(t){let e,s,i,n=0;const{views:r,$controller:o}=this,a=r.length;for(;a>n;++n)i=r[n],i.release(),s=i.deactivate(t??i,o),vr(s)&&(e??(e=[])).push(s);if(void 0!==e)return 1===e.length?e[0]:Promise.all(e)}Si(t){let e,s,i;const{$controller:n,views:r}=this,o=t.deletedIndices.slice().sort(cd),a=o.length;let h=0;for(;a>h;++h)i=r[o[h]],i.release(),s=i.deactivate(i,n),vr(s)&&(e??(e=[])).push(s);for(h=0;a>h;++h)r.splice(o[h]-h,1);if(void 0!==e)return 1===e.length?e[0]:Promise.all(e)}_i(t,e){let s,i,n,r,o=0;const{$controller:a,f:h,local:c,vi:l,l:u,views:d,bi:p,wi:f,fi:g,ai:v,forOf:m}=this,w=e.length;for(;w>o;++o)-2===e[o]&&(n=h.create(),d.splice(o,0,n));if(d.length!==w)throw ro(814,[d.length,w]);const y=a.scope,b=e.length;let k=0;for(o=0;o<e.length;++o)-2!==(k=e[o])&&(d[o]=v[k]);const C=function(t){const e=t.length;e>Qu&&(Qu=e,Xu=new Int32Array(e),Zu=new Int32Array(e));let s=0,i=0,n=0,r=0,o=0,a=0,h=0,c=0;for(;r<e;r++)if(i=t[r],-2!==i){if(o=Xu[s],n=t[o],-2!==n&&n<i){Zu[r]=o,Xu[++s]=r;continue}for(a=0,h=s;a<h;)c=a+h>>1,n=t[Xu[c]],-2!==n&&n<i?a=c+1:h=c;n=t[Xu[a]],(i<n||-2===n)&&(a>0&&(Zu[r]=Xu[a-1]),Xu[a]=r)}r=++s;const l=new Int32Array(r);for(i=Xu[s-1];s-- >0;)l[s]=i,i=Zu[i];for(;r-- >0;)Xu[r]=0;return l}(e),S=C.length,T=m.declaration;let $,x=S-1;for(o=b-1;o>=0;--o)n=d[o],$=d[o+1],n.nodes.link($?.nodes??u),-2===e[o]?(r=ad(g,l[o],m,y,f,c,p),Yu(r.overrideContext,o,b),n.setLocation(u),i=n.activate(n,a,r),vr(i)&&(s??(s=[])).push(i)):x<0||1===S||o!==C[x]?(p?jt(T,n.scope,f,l[o]):n.scope.bindingContext[c]=l[o],Yu(n.scope.overrideContext,o,b),n.nodes.insertBefore(n.location)):(p?jt(T,n.scope,f,l[o]):n.scope.bindingContext[c]=l[o],t!==b&&Yu(n.scope.overrideContext,o,b),--x);if(void 0!==s)return 1===s.length?s[0]:Promise.all(s)}dispose(){this.views.forEach(Ku),this.views=void 0}accept(t){const{views:e}=this;if(void 0!==e)for(let s=0,i=e.length;s<i;++s)if(!0===e[s].accept(t))return!0}}Gu.inject=[Mh,hs,Po,sl,mh],nr([Hr],Gu.prototype,"items",void 0),Wo("repeat")(Gu);let Qu=16,Xu=new Int32Array(Qu),Zu=new Int32Array(Qu);const Yu=(t,e,s)=>{const i=0===e,n=e===s-1,r=e%2==0;t.$index=e,t.$first=i,t.$last=n,t.$middle=!i&&!n,t.$even=r,t.$odd=!r,t.$length=s},Ju=ar.toString,td=t=>{switch(Ju.call(t)){case"[object Array]":return t.length;case"[object Map]":case"[object Set]":return t.size;case"[object Number]":return t;case"[object Null]":case"[object Undefined]":return 0;default:throw ro(778,t)}},ed=(t,e)=>{switch(Ju.call(t)){case"[object Array]":return sd(t,e);case"[object Map]":return id(t,e);case"[object Set]":return nd(t,e);case"[object Number]":return rd(t,e);case"[object Null]":case"[object Undefined]":return;default:ro(777,t)}},sd=(t,e)=>{const s=t.length;let i=0;for(;i<s;++i)e(t[i],i,t)},id=(t,e)=>{let s,i=-0;for(s of t.entries())e(s,i++,t)},nd=(t,e)=>{let s,i=0;for(s of t.keys())e(s,i++,t)},rd=(t,e)=>{let s=0;for(;s<t;++s)e(s,s,t)},od=(t,e,s,i,n)=>{let r=t.get(s);return void 0===r&&(r="string"==typeof e?s[e]:Bt(e,i,n,null),t.set(s,r)),r},ad=(t,e,s,i,n,r,o)=>{let a=t.get(e);return void 0===a&&(o?jt(s.declaration,a=Pt.fromParent(i,new Et),n,e):a=Pt.fromParent(i,new Et(r,e)),t.set(e,a)),a},hd=(t,e)=>{const s=typeof t;switch(s){case"object":if(null!==t)return t;case"string":case"number":case"bigint":case"undefined":case"boolean":return`${e}${s}${t}`;default:return t}},cd=(t,e)=>t-e;class ld{constructor(){this.view=(0,i.DB)(mh).create().setLocation((0,i.DB)(Po))}valueChanged(t,e){const s=this.$controller,i=this.view.bindings;let n,r=0,o=0;if(s.isActive&&null!=i)for(n=Pt.fromParent(s.scope,void 0===t?{}:t),o=i.length;o>r;++r)i[r].bind(n)}attaching(t,e){const{$controller:s,value:i}=this,n=Pt.fromParent(s.scope,void 0===i?{}:i);return this.view.activate(t,s,n)}detaching(t,e){return this.view.deactivate(t,this.$controller)}dispose(){this.view.dispose(),this.view=void 0}accept(t){if(!0===this.view?.accept(t))return!0}}nr([Hr],ld.prototype,"value",void 0),Wo("with")(ld);let ud=class{constructor(){this.cases=[],this.activeCases=[],this.promise=void 0,this.f=(0,i.DB)(mh),this.l=(0,i.DB)(Po)}link(t,e,s,i){this.view=this.f.create(this.$controller).setLocation(this.l)}attaching(t,e){const s=this.view,i=this.$controller;return this.queue((()=>s.activate(t,i,i.scope))),this.queue((()=>this.swap(t,this.value))),this.promise}detaching(t,e){return this.queue((()=>this.view.deactivate(t,this.$controller))),this.promise}dispose(){this.view?.dispose(),this.view=void 0}valueChanged(t,e){this.$controller.isActive&&this.queue((()=>this.swap(null,this.value)))}caseChanged(t){this.queue((()=>this.Ii(t)))}Ii(t){const e=t.isMatch(this.value),s=this.activeCases,n=s.length;if(!e)return n>0&&s[0].id===t.id?this.Ti(null):void 0;if(n>0&&s[0].id<t.id)return;const r=[];let o=t.fallThrough;if(o){const e=this.cases,s=e.indexOf(t);for(let t=s,i=e.length;t<i&&o;t++){const s=e[t];r.push(s),o=s.fallThrough}}else r.push(t);return(0,i.p9)(this.Ti(null,r),(()=>(this.activeCases=r,this.Ei(null))))}swap(t,e){const s=[];let n=!1;for(const t of this.cases)if((n||t.isMatch(e))&&(s.push(t),n=t.fallThrough),s.length>0&&!n)break;const r=this.defaultCase;return 0===s.length&&void 0!==r&&s.push(r),(0,i.p9)(this.activeCases.length>0?this.Ti(t,s):void 0,(()=>{if(this.activeCases=s,0!==s.length)return this.Ei(t)}))}Ei(t){const e=this.$controller;if(!e.isActive)return;const s=this.activeCases,n=s.length;if(0===n)return;const r=e.scope;return 1===n?s[0].activate(t,r):(0,i.TD)(...s.map((e=>e.activate(t,r))))}Ti(t,e=[]){const s=this.activeCases,n=s.length;if(0!==n){if(1===n){const i=s[0];return e.includes(i)?void 0:(s.length=0,i.deactivate(t))}return(0,i.p9)((0,i.TD)(...s.reduce(((s,i)=>(e.includes(i)||s.push(i.deactivate(t)),s)),[])),(()=>{s.length=0}))}}queue(t){const e=this.promise;let s;s=this.promise=(0,i.p9)((0,i.p9)(e,t),(()=>{this.promise===s&&(this.promise=void 0)}))}accept(t){return!0===this.$controller.accept(t)||!!this.activeCases.some((e=>e.accept(t)))||void 0}};nr([Hr],ud.prototype,"value",void 0),ud=nr([Wo("switch")],ud);let dd=0,pd=class{constructor(){this.id=++dd,this.fallThrough=!1,this.view=void 0,this.f=(0,i.DB)(mh),this.Ze=(0,i.DB)(zn),this.l=(0,i.DB)(Po),this.Pi=(0,i.DB)(i.Xo).scopeTo(`${this.constructor.name}-#${this.id}`)}link(t,e,s,i){const n=t.parent,r=n?.viewModel;if(!(r instanceof ud))throw ro(815);this.$switch=r,this.linkToSwitch(r)}detaching(t,e){return this.deactivate(t)}isMatch(t){this.Pi.debug("isMatch()");const e=this.value;return mr(e)?(void 0===this.di&&(this.di=this.Li(e)),e.includes(t)):e===t}valueChanged(t,e){mr(t)?(this.di?.unsubscribe(this),this.di=this.Li(t)):void 0!==this.di&&this.di.unsubscribe(this),this.$switch.caseChanged(this)}handleCollectionChange(){this.$switch.caseChanged(this)}activate(t,e){let s=this.view;if(void 0===s&&(s=this.view=this.f.create().setLocation(this.l)),!s.isActive)return s.activate(t??s,this.$controller,e)}deactivate(t){const e=this.view;if(void 0!==e&&e.isActive)return e.deactivate(t??e,this.$controller)}dispose(){this.di?.unsubscribe(this),this.view?.dispose(),this.view=void 0}linkToSwitch(t){t.cases.push(this)}Li(t){const e=this.Ze.getArrayObserver(t);return e.subscribe(this),e}accept(t){return!0===this.$controller.accept(t)||this.view?.accept(t)}};nr([Hr],pd.prototype,"value",void 0),nr([Hr({set:t=>{switch(t){case"true":return!0;case"false":return!1;default:return!!t}},mode:1})],pd.prototype,"fallThrough",void 0),pd=nr([Wo("case")],pd);let fd=class extends pd{linkToSwitch(t){if(void 0!==t.defaultCase)throw ro(816);t.defaultCase=this}};fd=nr([Wo("default-case")],fd);let gd=class{constructor(){this.preSettledTask=null,this.postSettledTask=null,this.f=(0,i.DB)(mh),this.l=(0,i.DB)(Po),this.p=(0,i.DB)(xo),this.logger=(0,i.DB)(i.Xo).scopeTo("promise.resolve")}link(t,e,s,i){this.view=this.f.create(this.$controller).setLocation(this.l)}attaching(t,e){const s=this.view,n=this.$controller;return(0,i.p9)(s.activate(t,n,this.viewScope=Pt.fromParent(n.scope,{})),(()=>this.swap(t)))}valueChanged(t,e){this.$controller.isActive&&this.swap(null)}swap(t){const e=this.value;if(!vr(e))return;const s=this.p.domWriteQueue,n=this.fulfilled,r=this.rejected,o=this.pending,a=this.viewScope;let h;const c={reusable:!1},l=()=>{(0,i.TD)(h=(this.preSettledTask=s.queueTask((()=>(0,i.TD)(n?.deactivate(t),r?.deactivate(t),o?.activate(t,a))),c)).result.catch((t=>{if(!(t instanceof ir.Nj))throw t})),e.then((l=>{if(this.value!==e)return;const u=()=>{this.postSettlePromise=(this.postSettledTask=s.queueTask((()=>(0,i.TD)(o?.deactivate(t),r?.deactivate(t),n?.activate(t,a,l))),c)).result};this.preSettledTask.status===Er?h.then(u):(this.preSettledTask.cancel(),u())}),(l=>{if(this.value!==e)return;const u=()=>{this.postSettlePromise=(this.postSettledTask=s.queueTask((()=>(0,i.TD)(o?.deactivate(t),n?.deactivate(t),r?.activate(t,a,l))),c)).result};this.preSettledTask.status===Er?h.then(u):(this.preSettledTask.cancel(),u())})))};this.postSettledTask?.status===Er?this.postSettlePromise.then(l):(this.postSettledTask?.cancel(),l())}detaching(t,e){return this.preSettledTask?.cancel(),this.postSettledTask?.cancel(),this.preSettledTask=this.postSettledTask=null,this.view.deactivate(t,this.$controller)}dispose(){this.view?.dispose(),this.view=void 0}};nr([Hr],gd.prototype,"value",void 0),gd=nr([Wo("promise")],gd);let vd=class{constructor(){this.view=void 0,this.f=(0,i.DB)(mh),this.l=(0,i.DB)(Po)}link(t,e,s,i){yd(t).pending=this}activate(t,e){let s=this.view;if(void 0===s&&(s=this.view=this.f.create().setLocation(this.l)),!s.isActive)return s.activate(s,this.$controller,e)}deactivate(t){const e=this.view;if(void 0!==e&&e.isActive)return e.deactivate(e,this.$controller)}detaching(t){return this.deactivate(t)}dispose(){this.view?.dispose(),this.view=void 0}};nr([Hr({mode:2})],vd.prototype,"value",void 0),vd=nr([Wo(Rr)],vd);let md=class{constructor(){this.view=void 0,this.f=(0,i.DB)(mh),this.l=(0,i.DB)(Po)}link(t,e,s,i){yd(t).fulfilled=this}activate(t,e,s){this.value=s;let i=this.view;if(void 0===i&&(i=this.view=this.f.create().setLocation(this.l)),!i.isActive)return i.activate(i,this.$controller,e)}deactivate(t){const e=this.view;if(void 0!==e&&e.isActive)return e.deactivate(e,this.$controller)}detaching(t,e){return this.deactivate(t)}dispose(){this.view?.dispose(),this.view=void 0}};nr([Hr({mode:4})],md.prototype,"value",void 0),md=nr([Wo("then")],md);let wd=class{constructor(){this.view=void 0,this.f=(0,i.DB)(mh),this.l=(0,i.DB)(Po)}link(t,e,s,i){yd(t).rejected=this}activate(t,e,s){this.value=s;let i=this.view;if(void 0===i&&(i=this.view=this.f.create().setLocation(this.l)),!i.isActive)return i.activate(i,this.$controller,e)}deactivate(t){const e=this.view;if(void 0!==e&&e.isActive)return e.deactivate(e,this.$controller)}detaching(t,e){return this.deactivate(t)}dispose(){this.view?.dispose(),this.view=void 0}};function yd(t){const e=t.parent,s=e?.viewModel;if(s instanceof gd)return s;throw ro(813)}nr([Hr({mode:4})],wd.prototype,"value",void 0),wd=nr([Wo("catch")],wd);let bd=class{"promise.resolve"(t,e,s){return new Nl(t,e,"promise","bind")}};bd=nr([Fl({pattern:"promise.resolve",symbols:""})],bd);let kd=class{then(t,e,s){return new Nl(t,e,"then","from-view")}};kd=nr([Fl({pattern:"then",symbols:""})],kd);let Cd=class{catch(t,e,s){return new Nl(t,e,"catch","from-view")}};Cd=nr([Fl({pattern:"catch",symbols:""})],Cd);class Sd{constructor(){this.Di=!1,this.Mi=(0,i.DB)(Ro),this.p=(0,i.DB)(xo)}binding(){this.valueChanged()}valueChanged(){this.$controller.isActive?this.qi():this.Di=!0}attached(){this.Di&&(this.Di=!1,this.qi()),this.Mi.addEventListener("focus",this),this.Mi.addEventListener("blur",this)}detaching(){const t=this.Mi;t.removeEventListener("focus",this),t.removeEventListener("blur",this)}handleEvent(t){"focus"===t.type?this.value=!0:this.Fi||(this.value=!1)}qi(){const t=this.Mi,e=this.Fi,s=this.value;s&&!e?t.focus():!s&&e&&t.blur()}get Fi(){return this.Mi===this.p.document.activeElement}}Sd.inject=[Ro,xo],nr([Hr({mode:6})],Sd.prototype,"value",void 0),Uo("focus")(Sd);class Td{constructor(){this.position="beforeend",this.strict=!1;const t=(0,i.DB)(mh),e=(0,i.DB)(Po),s=(0,i.DB)(xo);this.p=s,this.Hi=s.document.createElement("div"),(this.view=t.create()).setLocation(this.Oi=(t=>{const e=yh(t,"au-end");return e.$start=yh(t,"au-start"),e})(s)),function(t,e){if(void 0===t.platform||t instanceof t.platform.Node)Mo.set(t,e);else{const s=t.childNodes;for(let t=0,i=s.length;t<i;++t)Mo.set(s[t],e)}}(this.view.nodes,e)}attaching(t){null==this.callbackContext&&(this.callbackContext=this.$controller.scope.bindingContext);const e=this.Hi=this.Vi();return this.Ni(e,this.position),this.$i(t,e)}detaching(t){return this.Wi(t,this.Hi)}targetChanged(){const{$controller:t}=this;if(!t.isActive)return;const e=this.Vi();if(this.Hi===e)return;this.Hi=e;const s=(0,i.p9)(this.Wi(null,e),(()=>(this.Ni(e,this.position),this.$i(null,e))));vr(s)&&s.catch(br)}positionChanged(){const{$controller:t,Hi:e}=this;if(!t.isActive)return;const s=(0,i.p9)(this.Wi(null,e),(()=>(this.Ni(e,this.position),this.$i(null,e))));vr(s)&&s.catch(br)}$i(t,e){const{activating:s,callbackContext:n,view:r}=this;return(0,i.p9)(s?.call(n,e,r),(()=>this.ji(t,e)))}ji(t,e){const{$controller:s,view:n}=this;return null!==t?(0,i.p9)(n.activate(t??n,s,s.scope),(()=>this.zi(e))):(n.nodes.insertBefore(this.Oi),this.zi(e))}zi(t){const{activated:e,callbackContext:s,view:i}=this;return e?.call(s,t,i)}Wi(t,e){const{deactivating:s,callbackContext:n,view:r}=this;return(0,i.p9)(s?.call(n,e,r),(()=>this.Ui(t,e)))}Ui(t,e){const{$controller:s,view:n}=this;return null!==t?(0,i.p9)(n.deactivate(t,s),(()=>this.Gi(e))):(n.nodes.remove(),this.Gi(e))}Gi(t){const{deactivated:e,callbackContext:s,view:n}=this;return(0,i.p9)(e?.call(s,t,n),(()=>this.Xi()))}Vi(){const t=this.p,e=t.document;let s=this.target,i=this.renderContext;if(""===s){if(this.strict)throw ro(811);return e.body}if(yr(s)){let n=e;yr(i)&&(i=e.querySelector(i)),i instanceof t.Node&&(n=i),s=n.querySelector(s)}if(s instanceof t.Node)return s;if(null==s){if(this.strict)throw ro(812);return e.body}return s}Xi(){this.Oi.remove(),this.Oi.$start.remove()}Ni(t,e){const s=this.Oi,i=s.$start,n=t.parentNode,r=[i,s];switch(e){case"beforeend":kh(t,null,r);break;case"afterbegin":kh(t,t.firstChild,r);break;case"beforebegin":kh(n,t,r);break;case"afterend":kh(n,t.nextSibling,r);break;default:throw new Error("Invalid portal insertion position")}}dispose(){this.view.dispose(),this.view=void 0,this.callbackContext=null}accept(t){if(!0===this.view?.accept(t))return!0}}nr([Hr({primary:!0})],Td.prototype,"target",void 0),nr([Hr()],Td.prototype,"position",void 0),nr([Hr({callback:"targetChanged"})],Td.prototype,"renderContext",void 0),nr([Hr()],Td.prototype,"strict",void 0),nr([Hr()],Td.prototype,"deactivating",void 0),nr([Hr()],Td.prototype,"activating",void 0),nr([Hr()],Td.prototype,"deactivated",void 0),nr([Hr()],Td.prototype,"activated",void 0),nr([Hr()],Td.prototype,"callbackContext",void 0),Wo("portal")(Td);let $d=class{constructor(){this.Qi=null,this.Ki=null,this.Qt=!1,this.expose=null,this.slotchange=null,this.Yi=new Set,this.di=null;const t=(0,i.DB)(il),e=(0,i.DB)(Po),s=(0,i.DB)(Mh),n=(0,i.DB)(Pc),r=s.auSlot,o=t.instruction?.projections?.[r.name],a=t.controller.container;let h,c;this.name=r.name,null==o?(c=a.createChild({inheritParentResources:!0}),h=n.getViewFactory(r.fallback,c),this.Zi=!1):(c=a.createChild(),c.useResources(t.parent.controller.container),io(c,il,new i.g(void 0,t.parent)),h=n.getViewFactory(o,c),this.Zi=!0,this.Ji=a.getAll(Oh,!1)?.filter((t=>"*"===t.slotName||t.slotName===r.name))??i.ow),this.ts=(this.Ji??(this.Ji=i.ow)).length>0,this.es=t,this.view=h.create().setLocation(this.l=e)}get nodes(){const t=[],e=this.l;let s=e.$start.nextSibling;for(;null!=s&&s!==e;)8!==s.nodeType&&t.push(s),s=s.nextSibling;return t}subscribe(t){this.Yi.add(t)}unsubscribe(t){this.Yi.delete(t)}binding(t,e){let s;this.Qi=this.$controller.scope.parent,this.Zi&&(s=this.es.controller.scope.parent,(this.Ki=Pt.fromParent(s,s.bindingContext)).overrideContext.$host=this.expose??this.Qi.bindingContext)}attaching(t,e){return(0,i.p9)(this.view.activate(t,this.$controller,this.Zi?this.Ki:this.Qi),(()=>{this.ts&&(this.Ji.forEach((t=>t.watch(this))),this.ii(),this.ss(),this.Qt=!0)}))}detaching(t,e){return this.Qt=!1,this.rs(),this.Ji.forEach((t=>t.unwatch(this))),this.view.deactivate(t,this.$controller)}exposeChanged(t){this.Zi&&null!=this.Ki&&(this.Ki.overrideContext.$host=t)}dispose(){this.view.dispose(),this.view=void 0}accept(t){if(!0===this.view?.accept(t))return!0}ii(){if(null!=this.di)return;const t=this.l,e=t.parentElement;null!=e&&(this.di=Th(e,(e=>{Ad(t,e)&&this.ss()}))).observe(e,{childList:!0})}rs(){this.di?.disconnect(),this.di=null}ss(){const t=this.nodes,e=new Set(this.Yi);let s;for(s of(this.Qt&&this.slotchange?.call(void 0,this.name,t),e))s.handleSlotChange(this,t)}};nr([Hr],$d.prototype,"expose",void 0),nr([Hr],$d.prototype,"slotchange",void 0),$d=nr([ta({name:"au-slot",template:null,containerless:!0})],$d);const xd=(t,e)=>t.compareDocumentPosition(e),Ad=(t,e)=>{for(const{addedNodes:s,removedNodes:i,nextSibling:n}of e){let e,r=0,o=s.length;for(;r<o;++r)if(e=s[r],4===xd(t.$start,e)&&2===xd(t,e))return!0;if(i.length>0&&null!=n&&4===xd(t.$start,n)&&2===xd(t,n))return!0}};class Id{constructor(){this.scopeBehavior="auto",this.os=void 0,this.c=(0,i.DB)(i.bE),this.parent=(0,i.DB)(sl),this.host=(0,i.DB)(Ro),this.l=(0,i.DB)(Po),this.p=(0,i.DB)(xo),this.r=(0,i.DB)(Pc),this.ls=(0,i.DB)(Mh),this.cs=(0,i.DB)((0,i.H3)(Rd)),this.ut=(0,i.DB)(tc),this.ht=(0,i.DB)(il),this.ep=(0,i.DB)(hs),this.oL=(0,i.DB)(zn)}get composing(){return this.us}get composition(){return this.os}attaching(t,e){return this.us=(0,i.p9)(this.queue(new Ed(this.template,this.component,this.model,void 0),t),(t=>{this.cs.ds(t)&&(this.us=void 0)}))}detaching(t){const e=this.os,s=this.us;return this.cs.invalidate(),this.os=this.us=void 0,(0,i.p9)(s,(()=>e?.deactivate(t)))}propertyChanged(t){"composing"!==t&&"composition"!==t&&("model"!==t||null==this.os?this.us=(0,i.p9)(this.us,(()=>(0,i.p9)(this.queue(new Ed(this.template,this.component,this.model,t),void 0),(t=>{this.cs.ds(t)&&(this.us=void 0)})))):this.os.update(this.model))}queue(t,e){const s=this.cs,n=this.os;return(0,i.p9)(s.create(t),(t=>s.ds(t)?(0,i.p9)(this.compose(t),(r=>s.ds(t)?(0,i.p9)(r.activate(e),(()=>s.ds(t)?(this.os=r,(0,i.p9)(n?.deactivate(e),(()=>t))):(0,i.p9)(r.controller.deactivate(r.controller,this.$controller),(()=>(r.controller.dispose(),t))))):(r.controller.dispose(),t))):t))}compose(t){let e;const{gs:s,ps:n,vs:r}=t.change,{c:o,host:a,$controller:h,l:c,ls:l}=this,u=this.getDef(n),d=o.createChild();let p;null!==u?(p=this.p.document.createElement(u.name),null==c?a.appendChild(p):c.parentNode.insertBefore(p,c),e=this.bs(d,n,p)):(p=c??a,e=this.bs(d,n,p));const f=()=>{if(null!==u){const s=l.captures??i.ow,n=u.capture,[r,o]=s.reduce(((t,e)=>(t[!(e.target in u.bindables)&&(!0===n||wr(n)&&n(e.target))?0:1].push(e),t)),[[],[]]),a=u.containerless?jo(p):null,c=Dc.$el(d,e,p,{projections:l.projections,captures:r},u,a),f=new nl(h,{projections:null,captures:o},this.ht.parent),g=()=>{if(null==a)p.remove();else{let t=a.$start.nextSibling,e=null;for(;null!==t&&t!==a;)e=t.nextSibling,t.remove(),t=e;a.$start?.remove(),a.remove()}};return Rh.create(f,p,u,this.r,this.ut,this.p,this.ep,this.oL).forEach((t=>c.addBinding(t))),new Md(c,(t=>c.activate(t??c,h,h.scope.parent)),(t=>(0,i.p9)(c.deactivate(t??c,h),g)),(t=>e.activate?.(t)),t)}{const i=sa.create({name:wa.generateName(),template:s}),n=this.r.getViewFactory(i,d),r=Dc.$view(n,h),o="auto"===this.scopeBehavior?Pt.fromParent(this.parent.scope,e):Pt.create(e);return Fo(p)?r.setLocation(p):r.setHost(p),new Md(r,(t=>r.activate(t??r,h,o)),(t=>r.deactivate(t??r,h)),(t=>e.activate?.(t)),t)}};return"activate"in e?(0,i.p9)(e.activate(r),(()=>f())):f()}bs(t,e,s){if(null==e)return new Od;if("object"==typeof e)return e;const n=this.p,r=Fo(s);Do(t,n,r?null:s),io(t,Po,new i.g("IRenderLocation",r?s:null));const o=t.invoke(e);return io(t,e,new i.g("au-compose.component",o)),o}getDef(t){const e=wr(t)?t:t?.constructor;return wa.isType(e)?wa.getDefinition(e):null}}nr([Hr],Id.prototype,"template",void 0),nr([Hr],Id.prototype,"component",void 0),nr([Hr],Id.prototype,"model",void 0),nr([Hr({set:t=>{if("scoped"===t||"auto"===t)return t;throw ro(805,t)}})],Id.prototype,"scopeBehavior",void 0),nr([Hr({mode:4})],Id.prototype,"composing",null),nr([Hr({mode:4})],Id.prototype,"composition",null),ta({name:"au-compose",capture:!0})(Id);class Od{}class Rd{constructor(){this.id=0}ds(t){return t.id===this.id}create(t){return(0,i.p9)(t.load(),(t=>new Nd(++this.id,t)))}invalidate(){this.id++}}class Ed{constructor(t,e,s,i){this.gs=t,this.ps=e,this.vs=s,this.xs=i}load(){return vr(this.gs)||vr(this.ps)?Promise.all([this.gs,this.ps]).then((([t,e])=>new Pd(t,e,this.vs,this.xs))):new Pd(this.gs,this.ps,this.vs,this.xs)}}class Pd{constructor(t,e,s,i){this.gs=t,this.ps=e,this.vs=s,this.xs=i}}class Nd{constructor(t,e){this.id=t,this.change=e}}class Md{constructor(t,e,s,i,n){this.controller=t,this.start=e,this.stop=s,this.update=i,this.context=n,this.state=0}activate(t){if(0!==this.state)throw ro(807,this);return this.state=1,this.start(t)}deactivate(t){switch(this.state){case 1:return this.state=-1,this.stop(t);case-1:throw ro(808);default:this.state=-1}}}const Bd=Yr("ISanitizer",(t=>t.singleton(class{sanitize(){throw ro(99,"sanitize")}})));class jd{constructor(){this.ws=(0,i.DB)(Bd)}toView(t){return null==t?null:this.ws.sanitize(t)}}!function(t){Ea.define("sanitize",t)}(jd);const Fd=Yr("ITemplateElementFactory",(t=>t.singleton(Dd))),Ld={};class Dd{constructor(){this.p=(0,i.DB)(xo),this.gs=this.t()}t(){return this.p.document.createElement("template")}createTemplate(t){if(yr(t)){let e=Ld[t];if(void 0===e){const s=this.gs;s.innerHTML=t;const i=s.content.firstElementChild;!function(t){if(null==t)return!0;if("TEMPLATE"!==t.nodeName)return!0;if(null!=t.nextElementSibling)return!0;const e=t.previousSibling;if(null!=e&&3===e.nodeType)return e.textContent.trim().length>0;const s=t.nextSibling;return null!=s&&3===s.nodeType&&s.textContent.trim().length>0}(i)?(s.content.removeChild(i),e=i):(this.gs=this.t(),e=s),Ld[t]=e}return e.cloneNode(!0)}if("TEMPLATE"!==t.nodeName){const e=this.t();return e.content.appendChild(t),e}return t.parentNode?.removeChild(t),t.cloneNode(!0)}}const Vd="TEMPLATE",Ud="au-start",Wd="au-end",qd=t=>"au*"===t.nodeValue;class _d{constructor(t,e,s,n,r,o){this.hasSlot=!1,this.Vs=hr();const a=null!==n;this.c=e,this.root=null===r?this:r,this.def=t,this.ci=s,this.parent=n,this.ys=a?n.ys:e.get(Fd),this.Pe=a?n.Pe:e.get(Bl),this.ep=a?n.ep:e.get(hs),this.m=a?n.m:e.get(mu),this.Pi=a?n.Pi:e.get(i.Xo),this.p=a?n.p:e.get(xo),this.localEls=a?n.localEls:new Set,this.rows=o??[]}Os(t){var e;((e=this.root).deps??(e.deps=[])).push(t),this.root.c.register(t)}Hs(t){return((t,e)=>t.document.createTextNode(e))(this.p,t)}qs(t){return yh(this.p,t)}wt(){return this.qs("au*")}h(t){const e=((t,e)=>t.document.createElement(e))(this.p,t);return"template"===t&&this.p.document.adoptNode(e.content),e}t(){return this.h("template")}Bs(t){return this.c.find(wa,t)}_s(t){return this.c.find(Xo,t)}Ms(t){return new _d(this.def,this.c,this.ci,this,this.root,t)}Ss(t){if(this.root!==this)return this.root.Ss(t);const e=t.command;if(null===e)return null;let s=this.Vs[e];if(void 0===s){if(s=this.c.create(eu,e),null===s)throw ro(713,e);this.Vs[e]=s}return s}}const Hd=t=>{const e=t.length;let s=0,i=0;for(;e>i;){if(s=t.charCodeAt(i),92===s)++i;else{if(58===s)return!0;if(36===s&&123===t.charCodeAt(i+1))return!1}++i}return!1},Kd=()=>{Qd.node=Qd.attr=Qd.bindable=Qd.def=null},zd={projections:null},Gd={name:"unnamed"},Qd={node:null,attr:null,bindable:null,def:null},Xd=ur(hr(),{id:!0,name:!0,"au-slot":!0,"as-element":!0}),Zd={checkbox:1,radio:1},Yd=new WeakMap;class Jd{static from(t,e){let s=Yd.get(t);if(null==s){const i=t.bindables,n=hr(),r=e?void 0===t.defaultBindingMode?8:t.defaultBindingMode:8;let o,a,h,c,l=!1;for(a in i){if(o=i[a],c=o.attribute,!0===o.primary){if(l)throw ro(714,t);l=!0,h=o}else l||null!=h||(h=o);n[c]=Qr.create(a,t.Type,o)}null==o&&e&&(h=n.value=Qr.create("value",t.Type,{mode:r})),Yd.set(t,s=new Jd(n,i,h))}return s}constructor(t,e,s){this.attrs=t,this.bindables=e,this.primary=s}}const tp=lr(["name","attribute","mode"]),ep="as-custom-element",sp=(t,e,s)=>{const i=e.getAttribute(ep);if(null===i||""===i)throw ro(715,t);if(s.has(i))throw ro(716,i,t);return s.add(i),e.removeAttribute(ep),i},ip=t=>{switch(t.getAttribute("mode")){case"oneTime":return 1;case"toView":return 2;case"fromView":return 4;case"twoWay":return 6;default:return 8}},np=Yr("ITemplateCompilerHooks"),rp=new WeakMap,op=Ur("compiler-hooks");lr({name:op,define(t){let e=rp.get(t);return void 0===e&&(rp.set(t,e=new ap(t)),Fr(op,e,t),Wr(t,op)),t}});class ap{get name(){return""}constructor(t){this.Type=t}register(t){t.register(Jr(np,this.Type))}}const hp="default",cp="au-slot";class lp{constructor(){this.el=(0,i.DB)(Ro),this.p=(0,i.DB)(xo),this.Ns=!1,this.U=null,this.$val="",this.$prio="",this.update=()=>{this.U=null,Boolean(this.value)!==this.$s&&(this.$s===this.Ws?(this.$s=!this.Ws,this.$val=this.el.style.getPropertyValue("display"),this.$prio=this.el.style.getPropertyPriority("display"),this.el.style.setProperty("display","none","important")):(this.$s=this.Ws,this.el.style.setProperty("display",this.$val,this.$prio),""===this.el.getAttribute("style")&&this.el.removeAttribute("style")))};const t=(0,i.DB)(Mh);this.$s=this.Ws="hide"!==t.alias}binding(){this.Ns=!0,this.update()}detaching(){this.Ns=!1,this.U?.cancel(),this.U=null}valueChanged(){this.Ns&&null===this.U&&(this.U=this.p.domWriteQueue.queueTask(this.update))}}nr([Hr],lp.prototype,"value",void 0),function(...t){return function(e){const s=Vr("aliases"),i=Br(s,e);void 0===i?Fr(s,t,e):i.push(...t)}}("hide")(lp),Uo("show")(lp);const up=[class{constructor(){this.debug=!1,this.resolveResources=!0}static register(t){t.register(Jr(this,this),to(this,tc))}compile(t,e,s){const n=sa.getOrCreate(t);if(null===n.template||void 0===n.template)return n;if(!1===n.needsCompile)return n;s??(s=zd);const r=new _d(t,e,s,null,null,void 0),o=yr(n.template)||!t.enhance?r.ys.createTemplate(n.template):n.template,a=o.nodeName===Vd&&null!=o.content,h=a?o.content:o,c=e.get((t=>(0,i.hh)(((t,e,s)=>s.root===s?s.getAll(t,!1):s.has(t,!1)?s.getAll(t,!1).concat(s.root.getAll(t,!1)):s.root.getAll(t,!1)))(t))(np)),l=c.length;let u=0;if(l>0)for(;l>u;)c[u].compiling?.(o),++u;if(o.hasAttribute(ep))throw ro(701,n);return this.ks(h,r),this.Cs(h,r),sa.create({...t,name:t.name||ua(),dependencies:(t.dependencies??i.ow).concat(r.deps??i.ow),instructions:r.rows,surrogates:a?this.As(o,r):i.ow,template:o,hasSlots:r.hasSlot,needsCompile:!1})}compileSpread(t,e,s,n,r){const o=new _d(t,s,zd,null,null,void 0),a=[],h=r??o.Bs(n.nodeName.toLowerCase()),c=null!==h,l=o.ep,u=e.length;let d,p,f,g,v,m,w,y,b,k,C=0,S=null,T=null;for(;u>C;++C)if(d=e[C],b=d.target,k=d.rawValue,T=o.Ss(d),null===T||T.type!==Ql)if(S=o._s(b),null===S)if(null===T){if(w=l.parse(k,xr),c&&(g=Jd.from(h,!1),v=g.attrs[b],void 0!==v)){w=l.parse(k,xr),a.push(new Jh(null==w?new Dh(k,v.name):new Bh(w,v.name)));continue}if(null!=w)a.push(new Bh(w,o.m.map(n,b)??(0,i.eV)(b)));else switch(b){case"class":a.push(new Qh(k));break;case"style":a.push(new Xh(k));break;default:a.push(new Gh(k,b))}}else{if(c&&(g=Jd.from(h,!1),v=g.attrs[b],void 0!==v)){Qd.node=n,Qd.attr=d,Qd.bindable=v,Qd.def=h,a.push(new Jh(T.build(Qd,o.ep,o.m)));continue}Qd.node=n,Qd.attr=d,Qd.bindable=null,Qd.def=null,a.push(T.build(Qd,o.ep,o.m))}else{if(S.isTemplateController)throw ro(9998,b);g=Jd.from(S,!0),y=!1===S.noMultiBindings&&null===T&&Hd(k),y?f=this.Rs(n,k,S,o):(m=g.primary,null===T?(w=l.parse(k,xr),f=[null===w?new Dh(k,m.name):new Bh(w,m.name)]):(Qd.node=n,Qd.attr=d,Qd.bindable=m,Qd.def=S,f=[T.build(Qd,o.ep,o.m)])),(p??(p=[])).push(new Wh(this.resolveResources?S:S.name,null!=S.aliases&&S.aliases.includes(b)?b:void 0,f))}else Qd.node=n,Qd.attr=d,Qd.bindable=null,Qd.def=null,a.push(T.build(Qd,o.ep,o.m));return Kd(),null!=p?p.concat(a):a}As(t,e){const s=[],n=t.attributes,r=e.ep;let o,a,h,c,l,u,d,p,f,g,v,m,w=n.length,y=0,b=null,k=null;for(;w>y;++y){if(o=n[y],a=o.name,h=o.value,c=e.Pe.parse(a,h),v=c.target,m=c.rawValue,Xd[v])throw ro(702,a);if(k=e.Ss(c),null===k||k.type!==Ql)if(b=e._s(v),null===b)if(null===k)if(f=r.parse(m,xr),null!=f)t.removeAttribute(a),--y,--w,s.push(new Bh(f,e.m.map(t,v)??(0,i.eV)(v)));else switch(a){case"class":s.push(new Qh(m));break;case"style":s.push(new Xh(m));break;default:s.push(new Gh(m,a))}else Qd.node=t,Qd.attr=c,Qd.bindable=null,Qd.def=null,s.push(k.build(Qd,e.ep,e.m));else{if(b.isTemplateController)throw ro(703,v);d=Jd.from(b,!0),g=!1===b.noMultiBindings&&null===k&&Hd(m),g?u=this.Rs(t,m,b,e):(p=d.primary,null===k?(f=r.parse(m,xr),u=[null===f?new Dh(m,p.name):new Bh(f,p.name)]):(Qd.node=t,Qd.attr=c,Qd.bindable=p,Qd.def=b,u=[k.build(Qd,e.ep,e.m)])),t.removeAttribute(a),--y,--w,(l??(l=[])).push(new Wh(this.resolveResources?b:b.name,null!=b.aliases&&b.aliases.includes(v)?v:void 0,u))}else Qd.node=t,Qd.attr=c,Qd.bindable=null,Qd.def=null,s.push(k.build(Qd,e.ep,e.m))}return Kd(),null!=l?l.concat(s):s}Cs(t,e){switch(t.nodeType){case 1:return"LET"===t.nodeName?this.Is(t,e):this.Ts(t,e);case 3:return this.Es(t,e);case 11:{let s=t.firstChild;for(;null!==s;)s=this.Cs(s,e);break}}return t.nextSibling}Is(t,e){const s=t.attributes,n=s.length,r=[],o=e.ep;let a,h,c,l,u,d,p,f,g=!1,v=0;for(;n>v;++v)if(a=s[v],c=a.name,l=a.value,"to-binding-context"!==c)if(h=e.Pe.parse(c,l),d=h.target,p=h.rawValue,u=e.Ss(h),null===u)f=o.parse(p,xr),r.push(new Hh(null===f?new mt(p):f,(0,i.eV)(d)));else{if("bind"!==h.command)throw ro(704,h);r.push(new Hh(o.parse(p,Or),(0,i.eV)(d)))}else g=!0;return e.rows.push([new _h(r,g)]),this.Ps(t,e).nextSibling}Ts(t,e){var s,n,r,o;const a=t.nextSibling,h=(t.getAttribute("as-element")??t.nodeName).toLowerCase(),c=e.Bs(h),l=null!==c,u=l&&null!=c.shadowOptions,d=c?.capture,p=null!=d&&"boolean"!=typeof d,f=d?[]:i.ow,g=e.ep,v=this.debug?i.ZT:()=>{t.removeAttribute(y),--L,--F};let m,w,y,b,k,C,S,T,$,x,A,I,O,R,E,P,N,M,B,j=t.attributes,F=j.length,L=0,D=null,V=!1,U=null,W=!0,q=!1,_=!1,H=!1;if("slot"===h){if(null==e.root.def.shadowOptions)throw ro(717,e.root.def.name);e.root.hasSlot=!0}for(l&&(W=c.processContent?.call(c.Type,t,e.p),j=t.attributes,F=j.length);F>L;++L){switch(w=j[L],y=w.name,b=w.value,y){case"as-element":case"containerless":v(),q||(q="containerless"===y);continue}if(k=e.Pe.parse(y,b),U=e.Ss(k),N=k.target,M=k.rawValue,d&&(!p||p&&d(N))){if(null!=U&&U.type===Ql){v(),f.push(k);continue}if(_=N!==cp&&"slot"!==N,_&&(E=Jd.from(c,!1),null==E.attrs[N]&&!e._s(N)?.isTemplateController)){v(),f.push(k);continue}}if(null===U||U.type!==Ql)if(D=e._s(N),null===D)if(null!==U)v(),l&&(E=Jd.from(c,!1),T=E.attrs[N],void 0!==T)?(Qd.node=t,Qd.attr=k,Qd.bindable=T,Qd.def=c,(S??(S=[])).push(U.build(Qd,e.ep,e.m))):(Qd.node=t,Qd.attr=k,Qd.bindable=null,Qd.def=null,(C??(C=[])).push(U.build(Qd,e.ep,e.m)));else{if(l&&(E=Jd.from(c,!1),T=E.attrs[N],void 0!==T)){O=g.parse(M,xr),(S??(S=[])).push(null==O?new Dh(M,T.name):new Bh(O,T.name)),v();continue}O=g.parse(M,xr),null!=O&&(v(),(C??(C=[])).push(new Bh(O,e.m.map(t,N)??(0,i.eV)(N))))}else E=Jd.from(D,!0),V=!1===D.noMultiBindings&&null===U&&Hd(M),V?x=this.Rs(t,M,D,e):(P=E.primary,null===U?(O=g.parse(M,xr),x=[null===O?new Dh(M,P.name):new Bh(O,P.name)]):(Qd.node=t,Qd.attr=k,Qd.bindable=P,Qd.def=D,x=[U.build(Qd,e.ep,e.m)])),v(),D.isTemplateController?(A??(A=[])).push(new qh(Gd,this.resolveResources?D:D.name,void 0,x)):($??($=[])).push(new Wh(this.resolveResources?D:D.name,null!=D.aliases&&D.aliases.includes(N)?N:void 0,x));else Qd.node=t,Qd.attr=k,Qd.bindable=null,Qd.def=null,(C??(C=[])).push(U.build(Qd,e.ep,e.m)),v()}if(Kd(),this.Ls(t,C)&&null!=C&&C.length>1&&this.Ds(t,C),l&&(R=new Uh(this.resolveResources?c:c.name,void 0,S??i.ow,null,q,f),h===cp)){const s=t.getAttribute("name")||hp,i=e.t(),n=e.Ms();let r=t.firstChild,o=0;for(;null!==r;)$h(r)&&r.hasAttribute(cp)?t.removeChild(r):(Ch(i,r),o++),r=t.firstChild;o>0&&this.Cs(i.content,n),R.auSlot={name:s,fallback:sa.create({name:ua(),template:i,instructions:n.rows,needsCompile:!1})}}if(null==C&&null==R&&null==$||(m=i.ow.concat(R??i.ow,$??i.ow,C??i.ow),H=!0),null!=A){let i;F=A.length-1,L=F,I=A[L],qd(t)?(i=e.t(),Sh(i,[e.wt(),e.qs(Ud),e.qs(Wd)])):(this.Fs(t,e),"TEMPLATE"===t.nodeName?i=t:(i=e.t(),Ch(i,t)));const r=i,o=e.Ms(null==m?[]:[m]);let a,d,p,f,g,v,w,y,b=!1,k=0,C=0,S=t.firstChild,T=!1;if(!1!==W)for(;null!==S;){if(d=$h(S)?S.getAttribute(cp):null,b=null!==d||l&&!u,a=S.nextSibling,b){if(!l)throw ro(706,d,h);S.removeAttribute?.(cp),T=xh(S)&&""===S.textContent.trim(),T||((s=f??(f={}))[n=d||hp]??(s[n]=[])).push(S),t.removeChild(S)}S=a}if(null!=f){for(d in p={},f){for(i=e.t(),g=f[d],k=0,C=g.length;C>k;++k)v=g[k],"TEMPLATE"===v.nodeName?v.attributes.length>0?Ch(i,v):Ch(i,v.content):Ch(i,v);y=e.Ms(),this.Cs(i.content,y),p[d]=sa.create({name:ua(),template:i,instructions:y.rows,needsCompile:!1})}R.projections=p}if(H&&(l&&(q||c.containerless)?this.Fs(t,e):this.Ps(t,e)),B=!l||!c.containerless&&!q&&!1!==W,B)if(t.nodeName===Vd)this.Cs(t.content,o);else for(S=t.firstChild;null!==S;)S=this.Cs(S,o);for(I.def=sa.create({name:ua(),template:r,instructions:o.rows,needsCompile:!1});L-- >0;)I=A[L],i=e.t(),w=e.wt(),Sh(i,[w,e.qs(Ud),e.qs(Wd)]),I.def=sa.create({name:ua(),template:i,needsCompile:!1,instructions:[[A[L+1]]]});e.rows.push([I])}else{null!=m&&e.rows.push(m);let s,i,n,a,d,p,f,g=t.firstChild,v=!1,w=null,y=!1,b=0,k=0;if(!1!==W)for(;null!==g;){if(i=$h(g)?g.getAttribute(cp):null,v=null!==i||l&&!u,s=g.nextSibling,v){if(!l)throw ro(706,i,h);g.removeAttribute?.(cp),y=xh(g)&&""===g.textContent.trim(),y||((r=n??(n={}))[o=i||hp]??(r[o]=[])).push(g),t.removeChild(g)}g=s}if(null!=n){for(i in w={},n){for(p=e.t(),a=n[i],b=0,k=a.length;k>b;++b)d=a[b],d.nodeName===Vd?d.attributes.length>0?Ch(p,d):Ch(p,d.content):Ch(p,d);f=e.Ms(),this.Cs(p.content,f),w[i]=sa.create({name:ua(),template:p,instructions:f.rows,needsCompile:!1})}R.projections=w}if(H&&(l&&(q||c.containerless)?this.Fs(t,e):this.Ps(t,e)),B=!l||!c.containerless&&!q&&!1!==W,B&&t.childNodes.length>0)for(g=t.firstChild;null!==g;)g=this.Cs(g,e)}return a}Es(t,e){const s=t.parentNode,i=e.ep.parse(t.textContent,xr),n=t.nextSibling;let r,o,a,h,c;if(null!==i){for(({parts:r,expressions:o}=i),(c=r[0])&&bh(s,e.Hs(c),t),a=0,h=o.length;h>a;++a)kh(s,t,[e.wt(),e.Hs(" ")]),(c=r[a+1])&&bh(s,e.Hs(c),t),e.rows.push([new Kh(o[a])]);s.removeChild(t)}return n}Rs(t,e,s,i){const n=Jd.from(s,!0),r=e.length,o=[];let a,h,c,l,u,d,p=0,f=0;for(let g=0;g<r;++g)if(f=e.charCodeAt(g),92===f)++g;else if(58===f){for(a=e.slice(p,g);e.charCodeAt(++g)<=32;);for(p=g;g<r;++g)if(f=e.charCodeAt(g),92===f)++g;else if(59===f){h=e.slice(p,g);break}if(void 0===h&&(h=e.slice(p)),l=i.Pe.parse(a,h),u=i.Ss(l),d=n.attrs[l.target],null==d)throw ro(707,l.target,s.name);for(null===u?(c=i.ep.parse(h,xr),o.push(null===c?new Dh(h,d.name):new Bh(c,d.name))):(Qd.node=t,Qd.attr=l,Qd.bindable=d,Qd.def=s,o.push(u.build(Qd,i.ep,i.m)));g<r&&e.charCodeAt(++g)<=32;);p=g,a=void 0,h=void 0}return Kd(),o}ks(t,e){const s=e.root.def.name,n=t,r=(0,i.qo)(n.querySelectorAll("template[as-custom-element]")),o=r.length;if(0===o)return;if(o===n.childElementCount)throw ro(708,s);const a=new Set,h=[];for(const t of r){if(t.parentNode!==n)throw ro(709,s);const r=sp(s,t,a),o=t.content,c=(0,i.qo)(o.querySelectorAll("bindable")),l=new Set,u=new Set,d=c.reduce(((t,e)=>{if(e.parentNode!==o)throw ro(710,r);const s=e.getAttribute("name");if(null===s)throw ro(711,e,r);const n=e.getAttribute("attribute");if(null!==n&&u.has(n)||l.has(s))throw ro(712,l,n);null!==n&&u.add(n),l.add(s);const a=(0,i.qo)(e.attributes).filter((t=>!tp.includes(t.name)));return a.length,e.remove(),t[s]={attribute:n??void 0,mode:ip(e)},t}),{});class p{}Cr(p,"name",{value:r}),h.push(p),e.Os(da({name:r,template:t,bindables:d},p)),n.removeChild(t)}const c=[...e.def.dependencies??i.ow,...h];for(const t of h)va(t).dependencies.push(c.filter((e=>e!==t)))}Ls(t,e){const s=t.nodeName;return"INPUT"===s&&1===Zd[t.type]||"SELECT"===s&&(t.hasAttribute("multiple")||e?.some((t=>t.type===Eh&&"multiple"===t.to)))}Ds(t,e){switch(t.nodeName){case"INPUT":{const t=e;let s,i,n,r=0;for(let e=0;e<t.length&&r<3;e++)switch(n=t[e],n.to){case"model":case"value":case"matcher":s=e,r++;break;case"checked":i=e,r++}void 0!==i&&void 0!==s&&i<s&&([t[s],t[i]]=[t[i],t[s]]);break}case"SELECT":{const t=e;let s,i=0,n=0,r=0;for(let e=0;e<t.length&&r<2;++e){switch(s=t[e],s.to){case"multiple":n=e,r++;break;case"value":i=e,r++}2===r&&i<n&&([t[n],t[i]]=[t[i],t[n]])}}}}Ps(t,e){return bh(t.parentNode,e.qs("au*"),t),t}Fs(t,e){if(qd(t))return t;const s=t.parentNode,i=e.wt();return kh(s,t,[i,e.qs(Ud),e.qs(Wd)]),s.removeChild(t),i}},Vn,ju],dp=[_l,ql,zl],pp=[ou,su,nu,iu,ru,au,pu,hu,cu,du,uu,lu,fu],fp=[yo,fo,go,vo,bo,Co,mo,jd,_u,Hu,Gu,ld,ud,pd,fd,gd,vd,md,wd,bd,kd,Cd,Uu,Wu,qu,Id,Td,Sd,lp,$d],gp=[dc,pc,lc,uc,rc,oc,ac,hc,cc,gc,bc,vc,mc,wc,yc,fc,kc],vp=mp(i.ZT);function mp(t){return{optionsProvider:t,register(e){const s={coercingOptions:{enableCoercion:!1,coerceNullish:!1}};return t(s),e.register(eo(qt,s.coercingOptions),...up,...fp,...dp,...pp,...gp)},customize:e=>mp(e??t)}}}},i={};function n(t){var e=i[t];if(void 0!==e)return e.exports;var r=i[t]={id:t,exports:{}};return s[t](r,r.exports,n),r.exports}n.m=s,n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var s in e)n.o(e,s)&&!n.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},n.f={},n.e=t=>Promise.all(Object.keys(n.f).reduce(((e,s)=>(n.f[s](t,e),e)),[])),n.u=t=>t+".19dfb7b506cb953755dc.bundle.js",n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),t={},e="plugins-demo:",n.l=(s,i,r,o)=>{if(t[s])t[s].push(i);else{var a,h;if(void 0!==r)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var u=c[l];if(u.getAttribute("src")==s||u.getAttribute("data-webpack")==e+r){a=u;break}}a||(h=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",e+r),a.src=s),t[s]=[i];var d=(e,i)=>{a.onerror=a.onload=null,clearTimeout(p);var n=t[s];if(delete t[s],a.parentNode&&a.parentNode.removeChild(a),n&&n.forEach((t=>t(i))),e)return e(i)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),h&&document.head.appendChild(a)}},n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var s=e.getElementsByTagName("script");if(s.length)for(var i=s.length-1;i>-1&&!t;)t=s[i--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})(),(()=>{var t={497:0};n.f.j=(e,s)=>{var i=n.o(t,e)?t[e]:void 0;if(0!==i)if(i)s.push(i[2]);else{var r=new Promise(((s,n)=>i=t[e]=[s,n]));s.push(i[2]=r);var o=n.p+n.u(e),a=new Error;n.l(o,(s=>{if(n.o(t,e)&&(0!==(i=t[e])&&(t[e]=void 0),i)){var r=s&&("load"===s.type?"missing":s.type),o=s&&s.target&&s.target.src;a.message="Loading chunk "+e+" failed.\n("+r+": "+o+")",a.name="ChunkLoadError",a.type=r,a.request=o,i[1](a)}}),"chunk-"+e,e)}};var e=(e,s)=>{var i,r,[o,a,h]=s,c=0;if(o.some((e=>0!==t[e]))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);h&&h(n)}for(e&&e(s);c<o.length;c++)r=o[c],n.o(t,r)&&t[r]&&t[r][0](),t[r]=0},s=self.webpackChunkplugins_demo=self.webpackChunkplugins_demo||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))})(),n.nc=void 0,(()=>{var t={};n.r(t),n.d(t,{default:()=>sg,dependencies:()=>ig,name:()=>tg,register:()=>rg,template:()=>eg});var e=n(788),s=n(742),i=n(573);n(878),n(934);const r=i.o.getOrCreate(globalThis);class o extends s.EQ_{constructor(t=function(){return e.DI.createContainer().register(e.YM.instance(s.TIm,r),s.BkS)}()){super(t)}static start(t){return(new o).start(t)}static app(t){return(new o).app(t)}static enhance(t,e){return(new o).enhance(t,e)}static register(...t){return(new o).register(...t)}app(t){if(s.b_N.isType(t)){const e=s.b_N.getDefinition(t);let i=document.querySelector(e.name);return null===i&&(i=document.body),super.app({host:i,component:t})}return super.app(t)}}var a=n(414);const h=String,c=a.SF.getOwn,l=a.SF.hasOwn,u=a.SF.define,d=t=>"function"==typeof t,p=t=>"string"==typeof t,f=()=>Object.create(null),g=(t,...e)=>new Error(`AUR${h(t).padStart(4,"0")}:${e.map(h)}`),v={},m=t=>{switch(typeof t){case"number":return t>=0&&(0|t)===t;case"string":{const e=v[t];if(void 0!==e)return e;const s=t.length;if(0===s)return v[t]=!1;let i=0,n=0;for(;n<s;++n)if(i=R(t,n),0===n&&48===i&&s>1||i<48||i>57)return v[t]=!1;return v[t]=!0}default:return!1}},w=function(){const t=Object.assign(f(),{0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0}),e=e=>""===e?0:e!==e.toUpperCase()?3:e!==e.toLowerCase()?2:!0===t[e]?1:0;return(t,s)=>{const i=t.length;if(0===i)return t;let n,r=!1,o="",a="",h=0,c=t.charAt(0),l=e(c),u=0;for(;u<i;++u)n=h,a=c,h=l,c=t.charAt(u+1),l=e(c),0===h?o.length>0&&(r=!0):(!r&&o.length>0&&2===h&&(r=3===n||3===l),o+=s(a,r),r=!1);return o}}(),y=function(){const t=f(),e=(t,e)=>e?t.toUpperCase():t.toLowerCase();return s=>{let i=t[s];return void 0===i&&(i=t[s]=w(s,e)),i}}(),b=function(){const t=f();return e=>{let s=t[e];return void 0===s&&(s=y(e),s.length>0&&(s=s[0].toUpperCase()+s.slice(1)),t[e]=s),s}}(),k=function(){const t=f(),e=(t,e)=>e?`-${t.toLowerCase()}`:t.toLowerCase();return s=>{let i=t[s];return void 0===i&&(i=t[s]=w(s,e)),i}}(),C=(t,e,s)=>({configurable:!0,enumerable:s.enumerable,get(){const t=s.value.bind(this);return Reflect.defineProperty(this,e,{value:t,writable:!0,configurable:!0,enumerable:s.enumerable}),t}}),S=(...t)=>{const e=[];let s=0;const i=t.length;let n,r=0,o=0;for(;o<i;++o)if(n=t[o],void 0!==n){r=n.length;let t=0;for(;t<r;++t)e[s++]=n[t]}return e},T=(...t)=>{const e=t.length;let s,i=0;for(;e>i;++i)if(s=t[i],void 0!==s)return s;throw g(20)},$=function(){const t=Function.prototype,e=Object.getPrototypeOf,s=new WeakMap;let i,n=t,r=0;return function(o){if(i=s.get(o),void 0===i)for(s.set(o,i=[n=o]),r=0;(n=e(n))!==t;)i[++r]=n;return i}}();function x(...t){return Object.assign(f(),...t)}const A=function(){const t=new WeakMap;let e=!1,s="",i=0;return n=>(e=t.get(n),void 0===e&&(s=n.toString(),i=s.length,e=i>=29&&i<=100&&125===R(s,i-1)&&R(s,i-2)<=32&&93===R(s,i-3)&&101===R(s,i-4)&&100===R(s,i-5)&&111===R(s,i-6)&&99===R(s,i-7)&&32===R(s,i-8)&&101===R(s,i-9)&&118===R(s,i-10)&&105===R(s,i-11)&&116===R(s,i-12)&&97===R(s,i-13)&&110===R(s,i-14)&&88===R(s,i-15),t.set(n,e)),e)}(),I=(t,e)=>t instanceof Promise?t.then(e):e(t),O=(...t)=>{let e,s,i,n=0,r=t.length;for(;n<r;++n)e=t[n],(e=t[n])instanceof Promise&&(void 0===s?s=e:void 0===i?i=[s,e]:i.push(e));return void 0===i?s:Promise.all(i)},R=(t,e)=>t.charCodeAt(e),E="au:annotation",P=(t,e)=>void 0===e?`${E}:${t}`:`${E}:${t}:${e}`,N=(t,e)=>{const s=c(E,t);void 0===s?u(E,[e],t):s.push(e)},M=Object.freeze({name:"au:annotation",appendTo:N,set(t,e,s){u(P(e),s,t)},get:(t,e)=>c(P(e),t),getKeys(t){let e=c(E,t);return void 0===e&&u(E,e=[],t),e},isKey:t=>t.startsWith(E),keyFor:P}),B="au:resource",j=t=>l(B,t),F=t=>{const e=c(B,t);return void 0===e?Et:e.map((e=>c(e,t)))},L=Object.freeze({name:B,appendTo(t,e){const s=c(B,t);void 0===s?u(B,[e],t):s.push(e)},has:j,getAll:F,getKeys(t){let e=c(B,t);return void 0===e&&u(B,e=[],t),e},isKey:t=>t.startsWith(B),keyFor:(t,e)=>void 0===e?`${B}:${t}`:`${B}:${t}:${e}`}),D={annotation:M,resource:L},V=Object.prototype.hasOwnProperty;function U(t,e,s,i){let n=c(P(t),s);return void 0===n?(n=e[t],void 0===n?(n=s[t],void 0!==n&&V.call(s,t)?n:i()):n):n}function W(t,e,s){let i=c(P(t),e);return void 0===i?(i=e[t],void 0!==i&&V.call(e,t)?i:s()):i}function q(t,e,s){const i=e[t];return void 0===i?s():i}const _=new Set("Array ArrayBuffer Boolean DataView Date Error EvalError Float32Array Float64Array Function Int8Array Int16Array Int32Array Map Number Object Promise RangeError ReferenceError RegExp Set SharedArrayBuffer String SyntaxError TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array URIError WeakMap WeakSet".split(" "));let H=0,K=null;class z{get depth(){return null===this.t?0:this.t.depth+1}get parent(){return this.t}constructor(t,e){if(this.t=t,this.config=e,this.id=++H,this.i=0,this.u=new Map,null===t)this.root=this,this.h=new Map,this.R=new Map,this.res={};else if(this.root=t.root,this.h=new Map,this.R=t.R,this.res={},e.inheritParentResources)for(const e in t.res)this.registerResolver(e,t.res[e]);this.h.set(wt,tt)}register(...t){if(100==++this.i)throw g(6,...t);let e,s,i,n,r,o=0,h=t.length;for(;o<h;++o)if(e=t[o],(0,a.Kn)(e))if(et(e))e.register(this);else if(j(e)){const t=F(e);if(1===t.length)t[0].register(this);else for(n=0,r=t.length;r>n;)t[n].register(this),++n}else if(it(e))Ot.singleton(e,e).register(this);else for(s=Object.keys(e),n=0,r=s.length;n<r;++n)i=e[s[n]],(0,a.Kn)(i)&&(et(i)?i.register(this):this.register(i));return--this.i,this}registerResolver(t,e,s=!1){X(t);const i=this.h,n=i.get(t);if(null==n){if(i.set(t,e),nt(t)){if(void 0!==this.res[t])throw g(7,t);this.res[t]=e}}else n instanceof At&&4===n.C?n._state.push(e):i.set(t,new At(t,4,[n,e]));return s&&this.u.set(t,e),e}registerTransformer(t,e){const s=this.getResolver(t);if(null==s)return!1;if(s.getFactory){const t=s.getFactory(this);return null!=t&&(t.registerTransformer(e),!0)}return!1}getResolver(t,e=!0){if(X(t),void 0!==t.resolve)return t;const s=K;let i,n,r=K=this;try{for(;null!=r;){if(i=r.h.get(t),null!=i)return i;if(null==r.t)return n=st(t)?this:r,e?this.L(t,n):null;r=r.t}}finally{K=s}return null}has(t,e=!1){return!!(this.h.has(t)||nt(t)&&t in this.res)||!(!e||null==this.t)&&this.t.has(t,!0)}get(t){if(X(t),t.$isResolver)return t.resolve(this,this);const e=K;let s,i,n=K=this;try{for(;null!=n;){if(s=n.h.get(t),null!=s)return s.resolve(n,this);if(null==n.t)return i=st(t)?this:n,s=this.L(t,i),s.resolve(n,this);n=n.t}}finally{K=e}throw g(8,t)}getAll(t,e=!1){X(t);const s=K,i=K=this;let n,r=i,o=Et;try{if(e){for(;null!=r;)n=r.h.get(t),null!=n&&(o=o.concat(J(n,r,i))),r=r.t;return o}for(;null!=r;){if(n=r.h.get(t),null!=n)return J(n,r,i);if(r=r.t,null==r)return Et}}finally{K=s}return Et}invoke(t,e){const s=K;K=this;try{if(A(t))throw g(15,t);return void 0===e?new t(...gt(t).map(Z,this)):new t(...gt(t).map(Z,this),...e)}finally{K=s}}hasFactory(t){return this.R.has(t)}getFactory(t){let e=this.R.get(t);if(void 0===e){if(A(t))throw g(15,t);this.R.set(t,e=new G(t,gt(t)))}return e}registerFactory(t,e){this.R.set(t,e)}createChild(t){return void 0===t&&this.config.inheritParentResources?this.config===dt.DEFAULT?new z(this,this.config):new z(this,dt.from({...this.config,inheritParentResources:!1})):new z(this,dt.from(t??this.config))}disposeResolvers(){const t=this.h,e=this.u;let s,i;for([i,s]of e.entries())s.dispose(),t.delete(i);e.clear()}find(t,e){const s=t.keyFrom(e);let i=this.res[s];if(void 0===i&&(i=this.root.res[s],void 0===i))return null;if(null===i)return null;if(d(i.getFactory)){const e=i.getFactory(this);if(null==e)return null;const s=c(t.name,e.Type);return void 0===s?null:s}return null}create(t,e){const s=t.keyFrom(e);let i=this.res[s];return void 0===i?(i=this.root.res[s],void 0===i?null:i.resolve(this.root,this)??null):i.resolve(this,this)??null}dispose(){this.u.size>0&&this.disposeResolvers(),this.h.clear()}L(t,e){if(!d(t))throw g(9,t);if(_.has(t.name))throw g(10,t);if(et(t)){const s=t.register(e,t);if(!(s instanceof Object)||null==s.resolve){const s=e.h.get(t);if(null!=s)return s;throw g(11,t)}return s}if(j(t)){const s=F(t);if(1===s.length)s[0].register(e);else{const t=s.length;for(let i=0;i<t;++i)s[i].register(e)}const i=e.h.get(t);if(null!=i)return i;throw g(11,t)}if(t.$isInterface)throw g(12,t.friendlyName);const s=this.config.defaultResolver(t,e);return e.h.set(t,s),s}}class G{constructor(t,e){this.Type=t,this.dependencies=e,this.transformers=null}construct(t,e){const s=K;let i;K=t;try{return i=void 0===e?new this.Type(...this.dependencies.map(Z,t)):new this.Type(...this.dependencies.map(Z,t),...e),null==this.transformers?i:this.transformers.reduce(Q,i)}finally{K=s}}registerTransformer(t){(this.transformers??(this.transformers=[])).push(t)}}function Q(t,e){return e(t)}function X(t){if(null==t)throw g(14)}function Z(t){return this.get(t)}function Y(...t){if(null==K)throw g(16,...t);return 1===t.length?K.get(t[0]):t.map(Z,K)}const J=(t,e,s)=>{if(t instanceof At&&4===t.C){const i=t._state,n=i.length,r=Array(n);let o=0;for(;o<n;++o)r[o]=i[o].resolve(e,s);return r}return[t.resolve(e,s)]},tt={$isResolver:!0,resolve:(t,e)=>e},et=t=>d(t.register),st=t=>(t=>et(t)&&"boolean"==typeof t.registerInRequestor)(t)&&t.registerInRequestor,it=t=>void 0!==t.prototype,nt=t=>p(t)&&t.indexOf(":")>0,rt=(t,e)=>new At(t,0,e),ot=(t,e)=>new At(t,1,e),at=new WeakMap,ht=t=>(e,s,i)=>{let n=at.get(e);if(void 0===n&&at.set(e,n=new WeakMap),n.has(i))return n.get(i);const r=t(e,s,i);return n.set(i,r),r};(0,a.RT)(Reflect,!1,!1);class ct{constructor(t,e){this.c=t,this.k=e}instance(t){return this.O(0,t)}singleton(t){return this.O(1,t)}transient(t){return this.O(2,t)}callback(t){return this.O(3,t)}cachedCallback(t){return this.O(3,ht(t))}aliasTo(t){return this.O(5,t)}O(t,e){const{c:s,k:i}=this;return this.c=this.k=void 0,s.registerResolver(i,new At(i,t,e))}}const lt=t=>{const e=t.slice(),s=Object.keys(t),i=s.length;let n;for(let r=0;r<i;++r)n=s[r],m(n)||(e[n]=t[n]);return e},ut={none(t){throw g(2,t)},singleton:t=>new At(t,1,t),transient:t=>new At(t,2,t)};class dt{constructor(t,e){this.inheritParentResources=t,this.defaultResolver=e}static from(t){return void 0===t||t===dt.DEFAULT?dt.DEFAULT:new dt(t.inheritParentResources??!1,t.defaultResolver??ut.singleton)}}dt.DEFAULT=dt.from({});const pt=t=>{const e=P("di:paramtypes");return c(e,t)},ft=t=>{const e=P("di:paramtypes");let s=c(e,t);return void 0===s&&(u(e,s=[],t),N(t,e)),s},gt=t=>{const e=P("di:dependencies");let s=c(e,t);if(void 0===s){const i=t.inject;if(void 0===i){const e=mt.getDesignParamtypes(t),i=pt(t);if(void 0===e)if(void 0===i){const e=Object.getPrototypeOf(t);s=d(e)&&e!==Function.prototype?lt(gt(e)):[]}else s=lt(i);else if(void 0===i)s=lt(e);else{s=lt(e);let t,n=i.length,r=0;for(;r<n;++r)t=i[r],void 0!==t&&(s[r]=t);const o=Object.keys(i);let a;for(r=0,n=o.length,r=0;r<n;++r)a=o[r],m(a)||(s[a]=i[a])}}else s=lt(i);u(e,s,t),N(t,e)}return s},vt=(t,e)=>{const s=d(t)?t:e,i=(p(t)?t:void 0)??"(anonymous)",n=function(t,e,s){if(null==t||void 0!==new.target)throw g(1,i);ft(t)[s]=n};return n.$isInterface=!0,n.friendlyName=i,null!=s&&(n.register=(t,e)=>s(new ct(t,e??n))),n.toString=()=>`InterfaceSymbol<${i}>`,n},mt={createContainer:t=>new z(null,dt.from(t)),getDesignParamtypes:t=>c("design:paramtypes",t),getAnnotationParamtypes:pt,getOrCreateAnnotationParamTypes:ft,getDependencies:gt,createInterface:vt,inject:(...t)=>(e,s,i)=>{if("number"==typeof i){const s=ft(e),n=t[0];void 0!==n&&(s[i]=n)}else if(s){const i=ft(e.constructor),n=t[0];void 0!==n&&(i[s]=n)}else if(i){const e=i.value,s=ft(e);let n,r=0;for(;r<t.length;++r)n=t[r],void 0!==n&&(s[r]=n)}else{const s=ft(e);let i,n=0;for(;n<t.length;++n)i=t[n],void 0!==i&&(s[n]=i)}},transient:t=>(t.register=function(e){return Ot.transient(t,t).register(e,t)},t.registerInRequestor=!1,t),singleton:(t,e=St)=>(t.register=function(e){return Ot.singleton(t,t).register(e,t)},t.registerInRequestor=e.scoped,t)},wt=vt("IContainer"),yt=wt;function bt(t){return function(e){const s=function(t,e,i){kt(s)(t,e,i)};return s.$isResolver=!0,s.resolve=function(s,i){return t(e,s,i)},s}}const kt=mt.inject;function Ct(t){return mt.transient(t)}const St={scoped:!1};mt.singleton;const Tt=(t,e=!1)=>{function s(t,e,i){kt(s)(t,e,i)}return s.$isResolver=!0,s.resolve=(s,i)=>i.getAll(t,e),s},$t=bt(((t,e,s)=>s.has(t,!0)?s.get(t):void 0)),xt=(t,e,s)=>{kt(xt)(t,e,s)};xt.$isResolver=!0,xt.resolve=()=>{};class At{constructor(t,e,s){this.resolving=!1,this.k=t,this.C=e,this._state=s}get $isResolver(){return!0}register(t,e){return t.registerResolver(e||this.k,this)}resolve(t,e){switch(this.C){case 0:return this._state;case 1:if(this.resolving)throw g(3,this._state.name);return this.resolving=!0,this._state=t.getFactory(this._state).construct(e),this.C=0,this.resolving=!1,this._state;case 2:{const s=t.getFactory(this._state);if(null===s)throw g(4,this.k);return s.construct(e)}case 3:return this._state(t,e,this);case 4:return this._state[0].resolve(t,e);case 5:return e.get(this._state);default:throw g(5,this.C)}}getFactory(t){switch(this.C){case 1:case 2:return t.getFactory(this._state);case 5:return t.getResolver(this._state)?.getFactory?.(t)??null;default:return null}}}class It{constructor(t,e){this.key=t,this.params=e}register(t){t.has(this.key,!0)?t.get(this.key).register(t,...this.params):t.register(...this.params.filter((t=>"object"==typeof t)))}}const Ot={instance:rt,singleton:ot,transient:(t,e)=>new At(t,2,e),callback:(t,e)=>new At(t,3,e),cachedCallback:(t,e)=>new At(t,3,ht(e)),aliasTo:(t,e)=>new At(e,5,t),defer:(t,...e)=>new It(t,e)};class Rt{get friendlyName(){return this.$}constructor(t,e){this.A=null,this.$=t,void 0!==e&&(this.A=e)}prepare(t){this.A=t}get $isResolver(){return!0}resolve(){if(null==this.A)throw g(13,this.$);return this.A}dispose(){this.A=null}}const Et=Object.freeze([]),Pt=Object.freeze({});function Nt(){}const Mt=vt("IPlatform");function Bt(t,e,s,i){var n,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,s,o):n(e,s))||o);return r>3&&o&&Object.defineProperty(e,s,o),o}var jt,Ft,Lt;(Lt=jt||(jt={}))[Lt.trace=0]="trace",Lt[Lt.debug=1]="debug",Lt[Lt.info=2]="info",Lt[Lt.warn=3]="warn",Lt[Lt.error=4]="error",Lt[Lt.fatal=5]="fatal",Lt[Lt.none=6]="none",function(t){t[t.noColors=0]="noColors",t[t.colors=1]="colors"}(Ft||(Ft={}));const Dt=vt("ILogConfig",(t=>t.instance(new Kt(0,3)))),Vt=vt("ISink"),Ut=vt("ILogEventFactory",(t=>t.singleton(Xt))),Wt=vt("ILogger",(t=>t.singleton(Zt))),qt=vt("ILogScope"),_t=Object.freeze({key:P("logger-sink-handles"),define(t,e){return u(this.key,e.handles,t.prototype),t},getHandles(t){return a.SF.get(this.key,t)}}),Ht=x({red:t=>`[31m${t}[39m`,green:t=>`[32m${t}[39m`,yellow:t=>`[33m${t}[39m`,blue:t=>`[34m${t}[39m`,magenta:t=>`[35m${t}[39m`,cyan:t=>`[36m${t}[39m`,white:t=>`[37m${t}[39m`,grey:t=>`[90m${t}[39m`});class Kt{constructor(t,e){this.colorOptions=t,this.level=e}}const zt=function(){const t=[x({TRC:"TRC",DBG:"DBG",INF:"INF",WRN:"WRN",ERR:"ERR",FTL:"FTL",QQQ:"???"}),x({TRC:Ht.grey("TRC"),DBG:Ht.grey("DBG"),INF:Ht.white("INF"),WRN:Ht.yellow("WRN"),ERR:Ht.red("ERR"),FTL:Ht.red("FTL"),QQQ:Ht.grey("???")})];return(e,s)=>e<=0?t[s].TRC:e<=1?t[s].DBG:e<=2?t[s].INF:e<=3?t[s].WRN:e<=4?t[s].ERR:e<=5?t[s].FTL:t[s].QQQ}(),Gt=(t,e)=>0===e?new Date(t).toISOString():Ht.grey(new Date(t).toISOString());class Qt{constructor(t,e,s,i,n,r){this.severity=t,this.message=e,this.optionalParams=s,this.scope=i,this.colorOptions=n,this.timestamp=r}toString(){const{severity:t,message:e,scope:s,colorOptions:i,timestamp:n}=this;return 0===s.length?`${Gt(n,i)} [${zt(t,i)}] ${e}`:`${Gt(n,i)} [${zt(t,i)} ${((t,e)=>0===e?t.join("."):t.map(Ht.cyan).join("."))(s,i)}] ${e}`}}class Xt{constructor(){this.config=Y(Dt)}createLogEvent(t,e,s,i){return new Qt(e,s,i,t.scope,this.config.colorOptions,Date.now())}}class Zt{constructor(t=Y(Dt),e=Y(Ut),s=Y(Tt(Vt)),i=Y($t(qt))??[],n=null){let r,o,a,h,c,l;if(this.scope=i,this.j=f(),this.config=t,this.f=e,this.sinks=s,null===n){this.root=this,this.parent=this,r=this.I=[],o=this.F=[],a=this.M=[],h=this.T=[],c=this._=[],l=this.P=[];for(const t of s){const e=_t.getHandles(t);(e?.includes(0)??1)&&r.push(t),(e?.includes(1)??1)&&o.push(t),(e?.includes(2)??1)&&a.push(t),(e?.includes(3)??1)&&h.push(t),(e?.includes(4)??1)&&c.push(t),(e?.includes(5)??1)&&l.push(t)}}else this.root=n.root,this.parent=n,r=this.I=n.I,o=this.F=n.F,a=this.M=n.M,h=this.T=n.T,c=this._=n._,l=this.P=n.P}trace(t,...e){this.config.level<=0&&this.K(this.I,0,t,e)}debug(t,...e){this.config.level<=1&&this.K(this.F,1,t,e)}info(t,...e){this.config.level<=2&&this.K(this.M,2,t,e)}warn(t,...e){this.config.level<=3&&this.K(this.T,3,t,e)}error(t,...e){this.config.level<=4&&this.K(this._,4,t,e)}fatal(t,...e){this.config.level<=5&&this.K(this.P,5,t,e)}scopeTo(t){const e=this.j;let s=e[t];return void 0===s&&(s=e[t]=new Zt(this.config,this.f,null,this.scope.concat(t),this)),s}K(t,e,s,i){const n=d(s)?s():s,r=this.f.createLogEvent(this,e,n,i);for(let e=0,s=t.length;e<s;++e)t[e].handleEvent(r)}}Bt([C],Zt.prototype,"trace",null),Bt([C],Zt.prototype,"debug",null),Bt([C],Zt.prototype,"info",null),Bt([C],Zt.prototype,"warn",null),Bt([C],Zt.prototype,"error",null),Bt([C],Zt.prototype,"fatal",null),x({create:({level:t=3,colorOptions:e=0,sinks:s=[]}={})=>x({register(i){i.register(rt(Dt,new Kt(e,t)));for(const t of s)d(t)?i.register(ot(Vt,t)):i.register(t);return i}})});class Yt{constructor(t,e){this.type=t,this.cb=e}handle(t){t instanceof this.type&&this.cb.call(null,t)}}const Jt=vt("IEventAggregator",(t=>t.singleton(te)));class te{constructor(){this.eventLookup={},this.messageHandlers=[]}publish(t,e){if(!t)throw g(18,t);if(p(t)){let s=this.eventLookup[t];if(void 0!==s){s=s.slice();let i=s.length;for(;i-- >0;)s[i](e,t)}}else{const e=this.messageHandlers.slice();let s=e.length;for(;s-- >0;)e[s].handle(t)}}subscribe(t,e){if(!t)throw g(19,t);let s,i;return p(t)?(void 0===this.eventLookup[t]&&(this.eventLookup[t]=[]),s=e,i=this.eventLookup[t]):(s=new Yt(t,e),i=this.messageHandlers),i.push(s),{dispose(){const t=i.indexOf(s);-1!==t&&i.splice(t,1)}}}subscribeOnce(t,e){const s=this.subscribe(t,((t,i)=>{s.dispose(),e(t,i)}));return s}}const ee=Object,se=ee.prototype.hasOwnProperty,ie=Reflect.defineProperty,ne=t=>"function"==typeof t,re=t=>t instanceof ee,oe=t=>t instanceof Array,ae=t=>t instanceof Set,he=t=>t instanceof Map,ce=ee.is;function le(t,e,s){return ie(t,e,{enumerable:!1,configurable:!0,writable:!0,value:s}),s}function ue(t,e,s){e in t||le(t,e,s)}const de=Object.assign,pe=String,fe=mt.createInterface,ge=()=>ee.create(null),ve=a.SF.getOwn;a.SF.hasOwn;const me=a.SF.define;var we;D.annotation.keyFor,D.resource.keyFor,D.resource.appendTo,function(t){t[t.AccessThis=0]="AccessThis",t[t.AccessGlobal=1]="AccessGlobal",t[t.AccessScope=2]="AccessScope",t[t.ArrayLiteral=3]="ArrayLiteral",t[t.ObjectLiteral=4]="ObjectLiteral",t[t.PrimitiveLiteral=5]="PrimitiveLiteral",t[t.Template=6]="Template",t[t.Unary=7]="Unary",t[t.CallScope=8]="CallScope",t[t.CallMember=9]="CallMember",t[t.CallFunction=10]="CallFunction",t[t.CallGlobal=11]="CallGlobal",t[t.AccessMember=12]="AccessMember",t[t.AccessKeyed=13]="AccessKeyed",t[t.TaggedTemplate=14]="TaggedTemplate",t[t.Binary=15]="Binary",t[t.Conditional=16]="Conditional",t[t.Assign=17]="Assign",t[t.ArrowFunction=18]="ArrowFunction",t[t.ValueConverter=19]="ValueConverter",t[t.BindingBehavior=20]="BindingBehavior",t[t.ArrayBindingPattern=21]="ArrayBindingPattern",t[t.ObjectBindingPattern=22]="ObjectBindingPattern",t[t.BindingIdentifier=23]="BindingIdentifier",t[t.ForOfStatement=24]="ForOfStatement",t[t.Interpolation=25]="Interpolation",t[t.ArrayDestructuring=26]="ArrayDestructuring",t[t.ObjectDestructuring=27]="ObjectDestructuring",t[t.DestructuringAssignmentLeaf=28]="DestructuringAssignmentLeaf",t[t.DestructuringAssignmentRestLeaf=29]="DestructuringAssignmentRestLeaf",t[t.Custom=30]="Custom"}(we||(we={}));class ye{constructor(t){this.value=t,this.$kind=30}evaluate(t,e,s){return this.value}assign(t,e,s){return s}bind(t,e){}unbind(t,e){}accept(t){}}class be{constructor(t,e,s){this.expression=t,this.name=e,this.args=s,this.$kind=20,this.key=`_bb_${e}`}}class ke{constructor(t,e,s){this.expression=t,this.name=e,this.args=s,this.$kind=19}}class Ce{constructor(t,e){this.target=t,this.value=e,this.$kind=17}}class Se{constructor(t,e,s){this.condition=t,this.yes=e,this.no=s,this.$kind=16}}class Te{constructor(t){this.name=t,this.$kind=1}}class $e{constructor(t=0){this.ancestor=t,this.$kind=0}}class xe{constructor(t,e=0){this.name=t,this.ancestor=e,this.$kind=2}}const Ae=t=>1===t.$kind||(12===t.$kind||13===t.$kind)&&t.accessGlobal;class Ie{constructor(t,e,s=!1){this.object=t,this.name=e,this.optional=s,this.$kind=12,this.accessGlobal=Ae(t)}}class Oe{constructor(t,e,s=!1){this.object=t,this.key=e,this.optional=s,this.$kind=13,this.accessGlobal=Ae(t)}}class Re{constructor(t,e,s=0,i=!1){this.name=t,this.args=e,this.ancestor=s,this.optional=i,this.$kind=8}}class Ee{constructor(t,e,s,i=!1,n=!1){this.object=t,this.name=e,this.args=s,this.optionalMember=i,this.optionalCall=n,this.$kind=9}}class Pe{constructor(t,e,s=!1){this.func=t,this.args=e,this.optional=s,this.$kind=10}}class Ne{constructor(t,e){this.name=t,this.args=e,this.$kind=11}}class Me{constructor(t,e,s){this.operation=t,this.left=e,this.right=s,this.$kind=15}}class Be{constructor(t,e){this.operation=t,this.expression=e,this.$kind=7}}class je{constructor(t){this.value=t,this.$kind=5}}je.$undefined=new je(void 0),je.$null=new je(null),je.$true=new je(!0),je.$false=new je(!1),je.$empty=new je("");class Fe{constructor(t){this.elements=t,this.$kind=3}}Fe.$empty=new Fe(Et);class Le{constructor(t,e){this.keys=t,this.values=e,this.$kind=4}}Le.$empty=new Le(Et,Et);class De{constructor(t,e=Et){this.cooked=t,this.expressions=e,this.$kind=6}}De.$empty=new De([""]);class Ve{constructor(t,e,s,i=Et){this.cooked=t,this.func=s,this.expressions=i,this.$kind=14,t.raw=e}}class Ue{constructor(t){this.elements=t,this.$kind=21}}class We{constructor(t,e){this.keys=t,this.values=e,this.$kind=22}}class qe{constructor(t){this.name=t,this.$kind=23}}class _e{constructor(t,e,s){this.declaration=t,this.iterable=e,this.semiIdx=s,this.$kind=24}}class He{constructor(t,e=Et){this.parts=t,this.expressions=e,this.$kind=25,this.isMulti=e.length>1,this.firstExpression=e[0]}}class Ke{constructor(t,e,s,i){this.$kind=t,this.list=e,this.source=s,this.initializer=i}}class ze{constructor(t,e,s){this.target=t,this.source=e,this.initializer=s,this.$kind=28}}class Ge{constructor(t,e,s=!1){this.args=t,this.body=e,this.rest=s,this.$kind=18}}const Qe=(t,...e)=>new Error(`AUR${pe(t).padStart(4,"0")}:${e.map(pe)}`);class Xe{constructor(t,e){void 0!==t&&(this[t]=e)}}class Ze{constructor(t,e,s,i){this.parent=t,this.bindingContext=e,this.overrideContext=s,this.isBoundary=i}static getContext(t,e,s){if(null==t)throw Qe(203);let i=t.overrideContext,n=t;if(s>0){for(;s>0;)if(s--,n=n.parent,null==n)return;return i=n.overrideContext,e in i?i:n.bindingContext}for(;null!=n&&!n.isBoundary&&!(e in n.overrideContext)&&!(e in n.bindingContext);)n=n.parent;return null==n?t.bindingContext:(i=n.overrideContext,e in i?i:n.bindingContext)}static create(t,e,s){if(null==t)throw Qe(204);return new Ze(null,t,null==e?new Ye:e,s??!1)}static fromParent(t,e){if(null==t)throw Qe(203);return new Ze(t,e,new Ye,!1)}}class Ye{}const Je=Ze.getContext;function ts(t,e,s,i){switch(t.$kind){case 0:{let s=e.overrideContext,i=e,n=t.ancestor;for(;n--&&s;)i=i.parent,s=i?.overrideContext??null;return n<1&&i?i.bindingContext:void 0}case 2:{const n=Je(e,t.name,t.ancestor);null!==i&&i.observe(n,t.name);const r=n[t.name];if(null==r&&"$host"===t.name)throw Qe(105);return s?.strict?s?.boundFn&&ne(r)?r.bind(n):r:null==r?"":s?.boundFn&&ne(r)?r.bind(n):r}case 1:return globalThis[t.name];case 11:{const n=globalThis[t.name];if(ne(n))return n(...t.args.map((t=>ts(t,e,s,i))));if(!s?.strictFnCall&&null==n)return;throw Qe(107)}case 3:return t.elements.map((t=>ts(t,e,s,i)));case 4:{const n={};for(let r=0;r<t.keys.length;++r)n[t.keys[r]]=ts(t.values[r],e,s,i);return n}case 5:return t.value;case 6:{let n=t.cooked[0];for(let r=0;r<t.expressions.length;++r)n+=String(ts(t.expressions[r],e,s,i)),n+=t.cooked[r+1];return n}case 7:switch(t.operation){case"void":return void ts(t.expression,e,s,i);case"typeof":return typeof ts(t.expression,e,s,i);case"!":return!ts(t.expression,e,s,i);case"-":return-ts(t.expression,e,s,i);case"+":return+ts(t.expression,e,s,i);default:throw Qe(109,t.operation)}case 8:{const n=t.args.map((t=>ts(t,e,s,i))),r=Je(e,t.name,t.ancestor),o=ns(s?.strictFnCall,r,t.name);return o?o.apply(r,n):void 0}case 9:{const n=ts(t.object,e,s,i),r=t.args.map((t=>ts(t,e,s,i))),o=ns(s?.strictFnCall,n,t.name);let a;return o&&(a=o.apply(n,r),oe(n)&&as.includes(t.name)&&i?.observeCollection(n)),a}case 10:{const n=ts(t.func,e,s,i);if(ne(n))return n(...t.args.map((t=>ts(t,e,s,i))));if(!s?.strictFnCall&&null==n)return;throw Qe(107)}case 18:{const n=(...n)=>{const r=t.args,o=t.rest,a=r.length-1,h=r.reduce(((t,e,s)=>(t[e.name]=o&&s===a?n.slice(s):n[s],t)),{}),c=Ze.fromParent(e,h);return ts(t.body,c,s,i)};return n}case 12:{const n=ts(t.object,e,s,i);let r;if(s?.strict){if(null==n)return;return null===i||t.accessGlobal||i.observe(n,t.name),r=n[t.name],s?.boundFn&&ne(r)?r.bind(n):r}return null!==i&&re(n)&&!t.accessGlobal&&i.observe(n,t.name),n?(r=n[t.name],s?.boundFn&&ne(r)?r.bind(n):r):""}case 13:{const n=ts(t.object,e,s,i),r=ts(t.key,e,s,i);return re(n)?(null===i||t.accessGlobal||i.observe(n,r),n[r]):null==n?void 0:n[r]}case 14:{const n=t.expressions.map((t=>ts(t,e,s,i))),r=ts(t.func,e,s,i);if(!ne(r))throw Qe(110);return r(t.cooked,...n)}case 15:{const n=t.left,r=t.right;switch(t.operation){case"&&":return ts(n,e,s,i)&&ts(r,e,s,i);case"||":return ts(n,e,s,i)||ts(r,e,s,i);case"??":return ts(n,e,s,i)??ts(r,e,s,i);case"==":return ts(n,e,s,i)==ts(r,e,s,i);case"===":return ts(n,e,s,i)===ts(r,e,s,i);case"!=":return ts(n,e,s,i)!=ts(r,e,s,i);case"!==":return ts(n,e,s,i)!==ts(r,e,s,i);case"instanceof":{const t=ts(r,e,s,i);return!!ne(t)&&ts(n,e,s,i)instanceof t}case"in":{const t=ts(r,e,s,i);return!!re(t)&&ts(n,e,s,i)in t}case"+":{const t=ts(n,e,s,i),o=ts(r,e,s,i);if(s?.strict)return t+o;if(!t||!o){if(rs(t)||rs(o))return(t||0)+(o||0);if(os(t)||os(o))return(t||"")+(o||"")}return t+o}case"-":return ts(n,e,s,i)-ts(r,e,s,i);case"*":return ts(n,e,s,i)*ts(r,e,s,i);case"/":return ts(n,e,s,i)/ts(r,e,s,i);case"%":return ts(n,e,s,i)%ts(r,e,s,i);case"<":return ts(n,e,s,i)<ts(r,e,s,i);case">":return ts(n,e,s,i)>ts(r,e,s,i);case"<=":return ts(n,e,s,i)<=ts(r,e,s,i);case">=":return ts(n,e,s,i)>=ts(r,e,s,i);default:throw Qe(108,t.operation)}}case 16:return ts(t.condition,e,s,i)?ts(t.yes,e,s,i):ts(t.no,e,s,i);case 17:return es(t.target,e,s,ts(t.value,e,s,i));case 19:{const n=s?.getConverter?.(t.name);if(null==n)throw Qe(103,t.name);return"toView"in n?n.toView(ts(t.expression,e,s,i),...t.args.map((t=>ts(t,e,s,i)))):ts(t.expression,e,s,i)}case 20:return ts(t.expression,e,s,i);case 23:return t.name;case 24:return ts(t.iterable,e,s,i);case 25:if(t.isMulti){let n=t.parts[0],r=0;for(;r<t.expressions.length;++r)n+=pe(ts(t.expressions[r],e,s,i)),n+=t.parts[r+1];return n}return`${t.parts[0]}${ts(t.firstExpression,e,s,i)}${t.parts[1]}`;case 28:return ts(t.target,e,s,i);case 26:return t.list.map((t=>ts(t,e,s,i)));case 21:case 22:case 27:default:return;case 30:return t.evaluate(e,s,i)}}function es(t,e,s,i){switch(t.$kind){case 2:if("$host"===t.name)throw Qe(106);return Je(e,t.name,t.ancestor)[t.name]=i;case 12:{const n=ts(t.object,e,s,null);return re(n)?"length"===t.name&&oe(n)&&!isNaN(i)?n.splice(i):n[t.name]=i:es(t.object,e,s,{[t.name]:i}),i}case 13:{const n=ts(t.object,e,s,null),r=ts(t.key,e,s,null);if(oe(n)){if("length"===r&&!isNaN(i))return n.splice(i),i;if(m(r))return n.splice(r,1,i),i}return n[r]=i}case 17:return es(t.value,e,s,i),es(t.target,e,s,i);case 19:{const n=s?.getConverter?.(t.name);if(null==n)throw Qe(103,t.name);return"fromView"in n&&(i=n.fromView(i,...t.args.map((t=>ts(t,e,s,null))))),es(t.expression,e,s,i)}case 20:return es(t.expression,e,s,i);case 26:case 27:{const n=t.list,r=n.length;let o,a;for(o=0;o<r;o++)switch(a=n[o],a.$kind){case 28:es(a,e,s,i);break;case 26:case 27:{if("object"!=typeof i||null===i)throw Qe(112);let t=ts(a.source,Ze.create(i),s,null);void 0===t&&a.initializer&&(t=ts(a.initializer,e,s,null)),es(a,e,s,t);break}}break}case 28:if(t instanceof ze){if(null==i)return;if("object"!=typeof i)throw Qe(112);let n=ts(t.source,Ze.create(i),s,null);void 0===n&&t.initializer&&(n=ts(t.initializer,e,s,null)),es(t.target,e,s,n)}else{if(null==i)return;if("object"!=typeof i)throw Qe(112);const n=t.indexOrProperties;let r;if(m(n)){if(!Array.isArray(i))throw Qe(112);r=i.slice(n)}else r=Object.entries(i).reduce(((t,[e,s])=>(n.includes(e)||(t[e]=s),t)),{});es(t.target,e,s,r)}break;case 30:return t.assign(e,s,i);default:return}}function ss(t,e,s){switch(t.$kind){case 20:{const i=t.name,n=t.key,r=s.getBehavior?.(i);if(null==r)throw Qe(101,i);if(void 0!==s[n])throw Qe(102,i);return s[n]=r,r.bind?.(e,s,...t.args.map((t=>ts(t,e,s,null)))),void ss(t.expression,e,s)}case 19:{const i=t.name,n=s.getConverter?.(i);if(null==n)throw Qe(103,i);const r=n.signals;if(null!=r){const t=s.getSignaler?.(),e=r.length;let i=0;for(;i<e;++i)t?.addSignalListener(r[i],s)}return void ss(t.expression,e,s)}case 24:ss(t.iterable,e,s);break;case 30:t.bind?.(e,s)}}function is(t,e,s){switch(t.$kind){case 20:{const i=t.key,n=s;void 0!==n[i]&&(n[i].unbind?.(e,s),n[i]=void 0),is(t.expression,e,s);break}case 19:{const i=s.getConverter?.(t.name);if(void 0===i?.signals)return;const n=s.getSignaler?.();let r=0;for(;r<i.signals.length;++r)n?.removeSignalListener(i.signals[r],s);is(t.expression,e,s);break}case 24:is(t.iterable,e,s);break;case 30:t.unbind?.(e,s)}}const ns=(t,e,s)=>{const i=null==e?null:e[s];if(ne(i))return i;if(!t&&null==i)return null;throw Qe(111,s)},rs=t=>{switch(typeof t){case"number":case"bigint":return!0;default:return!1}},os=t=>{switch(typeof t){case"string":return!0;case"object":return t instanceof Date;default:return!1}},as="at map filter includes indexOf lastIndexOf findIndex find flat flatMap join reduce reduceRight slice every some sort".split(" "),hs=mt.createInterface("ICoercionConfiguration");var cs,ls;function us(t=0){const e=Array(t);let s=0;for(;s<t;)e[s]=s++;return e.deletedIndices=[],e.deletedItems=[],e.isIndexMap=!0,e}!function(t){t[t.indexed=8]="indexed",t[t.keyed=4]="keyed",t[t.array=9]="array",t[t.map=6]="map",t[t.set=7]="set"}(cs||(cs={})),function(t){t[t.None=0]="None",t[t.Observer=1]="Observer",t[t.Node=2]="Node",t[t.Layout=4]="Layout"}(ls||(ls={}));new Map;function ds(t){return null==t?fs:fs(t)}const ps=new WeakSet;function fs(t){if(ps.has(t))return;ps.add(t);const e=t.prototype;ie(e,"subs",{get:vs}),ue(e,"subscribe",ms),ue(e,"unsubscribe",ws)}class gs{constructor(){this.count=0,this.t=[]}add(t){return!this.t.includes(t)&&(this.t[this.t.length]=t,++this.count,!0)}remove(t){const e=this.t.indexOf(t);return-1!==e&&(this.t.splice(e,1),--this.count,!0)}notify(t,e){const s=this.t.slice(0),i=s.length;let n=0;for(;n<i;++n)s[n].handleChange(t,e)}notifyCollection(t,e){const s=this.t.slice(0),i=s.length;let n=0;for(;n<i;++n)s[n].handleCollectionChange(t,e)}}function vs(){return le(this,"subs",new gs)}function ms(t){return this.subs.add(t)}function ws(t){return this.subs.remove(t)}class ys{constructor(t){this.owner=t,this.type=1,this.v=(this.o=t.collection).length}getValue(){return this.o.length}setValue(t){t!==this.v&&(Number.isNaN(t)||(this.o.splice(t),this.v=this.o.length))}handleCollectionChange(t,e){const s=this.v,i=this.o.length;(this.v=i)!==s&&this.subs.notify(this.v,s)}}class bs{constructor(t){this.owner=t,this.type=1,this.v=(this.o=t.collection).size}getValue(){return this.o.size}setValue(){throw Qe(220)}handleCollectionChange(t,e){const s=this.v,i=this.o.size;(this.v=i)!==s&&this.subs.notify(this.v,s)}}function ks(t){const e=t.prototype;ue(e,"subscribe",Cs),ue(e,"unsubscribe",Ss),ds(t)}function Cs(t){this.subs.add(t)&&1===this.subs.count&&this.owner.subscribe(this)}function Ss(t){this.subs.remove(t)&&0===this.subs.count&&this.owner.subscribe(this)}ks(ys),ks(bs);const Ts=Symbol.for("__au_arr_obs__"),$s=Array[Ts]??le(Array,Ts,new WeakMap);function xs(t,e){return t===e?0:(t=null===t?"null":t.toString())<(e=null===e?"null":e.toString())?-1:1}function As(t,e){return void 0===t?void 0===e?0:1:void 0===e?-1:0}function Is(t,e,s,i,n){let r,o,a,h,c,l,u;for(l=s+1;l<i;l++){for(r=t[l],o=e[l],u=l-1;u>=s&&(a=t[u],h=e[u],c=n(a,r),c>0);u--)t[u+1]=a,e[u+1]=h;t[u+1]=r,e[u+1]=o}}function Os(t,e,s,i,n){let r,o,a,h,c,l,u,d,p,f,g,v,m,w,y,b,k,C,S,T=0,$=0;for(;;){if(i-s<=10)return void Is(t,e,s,i,n);T=s+(i-s>>1),r=t[s],h=e[s],o=t[i-1],c=e[i-1],a=t[T],l=e[T],u=n(r,o),u>0&&(f=r,g=h,r=o,h=c,o=f,c=g),d=n(r,a),d>=0?(f=r,g=h,r=a,h=l,a=o,l=c,o=f,c=g):(p=n(o,a),p>0&&(f=o,g=c,o=a,c=l,a=f,l=g)),t[s]=r,e[s]=h,t[i-1]=a,e[i-1]=l,v=o,m=c,w=s+1,y=i-1,t[T]=t[w],e[T]=e[w],t[w]=v,e[w]=m;t:for($=w+1;$<y;$++)if(b=t[$],k=e[$],C=n(b,v),C<0)t[$]=t[w],e[$]=e[w],t[w]=b,e[w]=k,w++;else if(C>0){do{if(y--,y==$)break t;S=t[y],C=n(S,v)}while(C>0);t[$]=t[y],e[$]=e[y],t[y]=b,e[y]=k,C<0&&(b=t[$],k=e[$],t[$]=t[w],e[$]=e[w],t[w]=b,e[w]=k,w++)}i-y<w-s?(Os(t,e,y,i,n),i=w):(Os(t,e,s,w,n),s=y)}}const Rs=Array.prototype,Es=Rs.push,Ps=Rs.unshift,Ns=Rs.pop,Ms=Rs.shift,Bs=Rs.splice,js=Rs.reverse,Fs=Rs.sort,Ls=["push","unshift","pop","shift","splice","reverse","sort"],Ds={push:function(...t){const e=$s.get(this);if(void 0===e)return Es.apply(this,t);const s=this.length,i=t.length;if(0===i)return s;this.length=e.indexMap.length=s+i;let n=s;for(;n<this.length;)this[n]=t[n-s],e.indexMap[n]=-2,n++;return e.notify(),this.length},unshift:function(...t){const e=$s.get(this);if(void 0===e)return Ps.apply(this,t);const s=t.length,i=new Array(s);let n=0;for(;n<s;)i[n++]=-2;Ps.apply(e.indexMap,i);const r=Ps.apply(this,t);return e.notify(),r},pop:function(){const t=$s.get(this);if(void 0===t)return Ns.call(this);const e=t.indexMap,s=Ns.call(this),i=e.length-1;return e[i]>-1&&(e.deletedIndices.push(e[i]),e.deletedItems.push(s)),Ns.call(e),t.notify(),s},shift:function(){const t=$s.get(this);if(void 0===t)return Ms.call(this);const e=t.indexMap,s=Ms.call(this);return e[0]>-1&&(e.deletedIndices.push(e[0]),e.deletedItems.push(s)),Ms.call(e),t.notify(),s},splice:function(...t){const e=t[0],s=t[1],i=$s.get(this);if(void 0===i)return Bs.apply(this,t);const n=this.length,r=0|e,o=r<0?Math.max(n+r,0):Math.min(r,n),a=i.indexMap,h=t.length,c=0===h?0:1===h?n-o:s;let l=o;if(c>0){const t=l+c;for(;l<t;)a[l]>-1&&(a.deletedIndices.push(a[l]),a.deletedItems.push(this[l])),l++}if(l=0,h>2){const t=h-2,i=new Array(t);for(;l<t;)i[l++]=-2;Bs.call(a,e,s,...i)}else Bs.apply(a,t);const u=Bs.apply(this,t);return(c>0||l>0)&&i.notify(),u},reverse:function(){const t=$s.get(this);if(void 0===t)return js.call(this),this;const e=this.length,s=e/2|0;let i=0;for(;i!==s;){const s=e-i-1,n=this[i],r=t.indexMap[i],o=this[s],a=t.indexMap[s];this[i]=o,t.indexMap[i]=a,this[s]=n,t.indexMap[s]=r,i++}return t.notify(),this},sort:function(t){const e=$s.get(this);if(void 0===e)return Fs.call(this,t),this;let s=this.length;if(s<2)return this;Os(this,e.indexMap,0,s,As);let i=0;for(;i<s&&void 0!==this[i];)i++;void 0!==t&&ne(t)||(t=xs),Os(this,e.indexMap,0,i,t);let n=!1;for(i=0,s=e.indexMap.length;s>i;++i)if(e.indexMap[i]!==i){n=!0;break}return n&&e.notify(),this}};for(const t of Ls)ie(Ds[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let Vs=!1;const Us="__au_arr_on__";class Ws{constructor(t){this.type=1,Vs||(Vs=!0,function(){if(!ve(Us,Array)){me(Us,!0,Array);for(const t of Ls)!0!==Rs[t].observing&&le(Rs,t,Ds[t])}}()),this.indexObservers={},this.collection=t,this.indexMap=us(t.length),this.lenObs=void 0,$s.set(t,this)}notify(){this.subs;const t=this.indexMap;const e=this.collection,s=e.length;this.indexMap=us(s),this.subs.notifyCollection(e,t)}getLengthObserver(){return this.lenObs??(this.lenObs=new ys(this))}getIndexObserver(t){var e;return(e=this.indexObservers)[t]??(e[t]=new qs(this,t))}}class qs{constructor(t,e){this.owner=t,this.index=e,this.doNotCache=!0,this.value=this.getValue()}getValue(){return this.owner.collection[this.index]}setValue(t){if(t===this.getValue())return;const e=this.owner,s=this.index,i=e.indexMap;i[s]>-1&&i.deletedIndices.push(i[s]),i[s]=-2,e.collection[s]=t,e.notify()}handleCollectionChange(t,e){const s=this.index;if(e[s]===s)return;const i=this.value,n=this.value=this.getValue();i!==n&&this.subs.notify(n,i)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&this.owner.subscribe(this)}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.owner.unsubscribe(this)}}function _s(t){let e=$s.get(t);return void 0===e&&(e=new Ws(t)),e}ds(Ws),ds(qs);const Hs=Symbol.for("__au_set_obs__"),Ks=Set[Hs]??le(Set,Hs,new WeakMap),zs=Set.prototype,Gs=zs.add,Qs=zs.clear,Xs=zs.delete,Zs=["add","clear","delete"],Ys={add:function(t){const e=Ks.get(this);if(void 0===e)return Gs.call(this,t),this;const s=this.size;return Gs.call(this,t),this.size===s||(e.indexMap[s]=-2,e.notify()),this},clear:function(){const t=Ks.get(this);if(void 0===t)return Qs.call(this);if(this.size>0){const e=t.indexMap;let s=0;for(const t of this.keys())e[s]>-1&&(e.deletedIndices.push(e[s]),e.deletedItems.push(t)),s++;Qs.call(this),e.length=0,t.notify()}},delete:function(t){const e=Ks.get(this);if(void 0===e)return Xs.call(this,t);if(0===this.size)return!1;let s=0;const i=e.indexMap;for(const n of this.keys()){if(n===t){i[s]>-1&&(i.deletedIndices.push(i[s]),i.deletedItems.push(n)),i.splice(s,1);const r=Xs.call(this,t);return!0===r&&e.notify(),r}s++}return!1}},Js={writable:!0,enumerable:!1,configurable:!0};for(const t of Zs)ie(Ys[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let ti=!1;const ei="__au_set_on__";class si{constructor(t){this.type=1,ti||(ti=!0,function(){if(!ve(ei,Set)){me(ei,!0,Set);for(const t of Zs)!0!==zs[t].observing&&ie(zs,t,{...Js,value:Ys[t]})}}()),this.collection=t,this.indexMap=us(t.size),this.lenObs=void 0,Ks.set(t,this)}notify(){this.subs;const t=this.indexMap;const e=this.collection,s=e.size;this.indexMap=us(s),this.subs.notifyCollection(e,t)}getLengthObserver(){return this.lenObs??(this.lenObs=new bs(this))}}function ii(t){let e=Ks.get(t);return void 0===e&&(e=new si(t)),e}ds(si);const ni=Symbol.for("__au_map_obs__"),ri=Map[ni]??le(Map,ni,new WeakMap),oi=Map.prototype,ai=oi.set,hi=oi.clear,ci=oi.delete,li=["set","clear","delete"],ui={set:function(t,e){const s=ri.get(this);if(void 0===s)return ai.call(this,t,e),this;const i=this.get(t),n=this.size;if(ai.call(this,t,e),this.size===n){let e=0;for(const n of this.entries()){if(n[0]===t)return n[1]!==i&&(s.indexMap.deletedIndices.push(s.indexMap[e]),s.indexMap.deletedItems.push(n),s.indexMap[e]=-2,s.notify()),this;e++}return this}return s.indexMap[n]=-2,s.notify(),this},clear:function(){const t=ri.get(this);if(void 0===t)return hi.call(this);if(this.size>0){const e=t.indexMap;let s=0;for(const t of this.keys())e[s]>-1&&(e.deletedIndices.push(e[s]),e.deletedItems.push(t)),s++;hi.call(this),e.length=0,t.notify()}},delete:function(t){const e=ri.get(this);if(void 0===e)return ci.call(this,t);if(0===this.size)return!1;let s=0;const i=e.indexMap;for(const n of this.keys()){if(n===t){i[s]>-1&&(i.deletedIndices.push(i[s]),i.deletedItems.push(n)),i.splice(s,1);const r=ci.call(this,t);return!0===r&&e.notify(),r}++s}return!1}},di={writable:!0,enumerable:!1,configurable:!0};for(const t of li)ie(ui[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let pi=!1;const fi="__au_map_on__";class gi{constructor(t){this.type=1,pi||(pi=!0,function(){if(!ve(fi,Map)){me(fi,!0,Map);for(const t of li)!0!==oi[t].observing&&ie(oi,t,{...di,value:ui[t]})}}()),this.collection=t,this.indexMap=us(t.size),this.lenObs=void 0,ri.set(t,this)}notify(){const t=this.subs,e=this.indexMap;const s=this.collection,i=s.size;this.indexMap=us(i),t.notifyCollection(s,e)}getLengthObserver(){return this.lenObs??(this.lenObs=new bs(this))}}function vi(t){let e=ri.get(t);return void 0===e&&(e=new gi(t)),e}function mi(){return le(this,"obs",new Si(this))}function wi(t,e){this.obs.add(this.oL.getObserver(t,e))}function yi(t){let e;if(oe(t))e=_s(t);else if(ae(t))e=ii(t);else{if(!he(t))throw Qe(210,t);e=vi(t)}this.obs.add(e)}function bi(t){this.obs.add(t)}function ki(){throw Qe(99,"handleChange")}function Ci(){throw Qe(99,"handleCollectionChange")}ds(gi);class Si{constructor(t){this.version=0,this.count=0,this.o=new Map,this.b=t}add(t){this.o.has(t)||(t.subscribe(this.b),++this.count),this.o.set(t,this.version)}clear(){this.o.forEach($i,this),this.count=this.o.size}clearAll(){this.o.forEach(Ti,this),this.o.clear(),this.count=0}}function Ti(t,e){e.unsubscribe(this.b)}function $i(t,e){this.version!==t&&(e.unsubscribe(this.b),this.o.delete(e))}function xi(t){const e=t.prototype;return ue(e,"observe",wi),ue(e,"observeCollection",yi),ue(e,"subscribeTo",bi),ie(e,"obs",{get:mi}),ue(e,"handleChange",ki),ue(e,"handleCollectionChange",Ci),t}function Ai(t){return null==t?xi:xi(t)}const Ii=fe("IExpressionParser",(t=>t.singleton(Oi)));class Oi{constructor(){this.i=ge(),this.u=ge(),this.h=ge()}parse(t,e){let s;switch(e){case 32:return new ye(t);case 1:return s=this.h[t],void 0===s&&(s=this.h[t]=this.$parse(t,e)),s;case 2:return s=this.u[t],void 0===s&&(s=this.u[t]=this.$parse(t,e)),s;default:if(0===t.length){if((24&e)>0)return je.$empty;throw kn()}return s=this.i[t],void 0===s&&(s=this.i[t]=this.$parse(t,e)),s}}$parse(t,e){return Di=t,Vi=0,Ui=t.length,Wi=0,qi=0,_i=6291456,Hi="",Li=Zi(0),Ki=!0,zi=!1,Gi=!0,Qi=-1,tn(61,void 0===e?16:e)}}function Ri(t){switch(t){case 98:return 8;case 116:return 9;case 110:return 10;case 118:return 11;case 102:return 12;case 114:return 13;case 34:return 34;case 39:return 39;case 92:return 92;default:return t}}const Ei=je.$false,Pi=je.$true,Ni=je.$null,Mi=je.$undefined,Bi=new $e(0),ji=new $e(1);var Fi;!function(t){t[t.None=0]="None",t[t.Interpolation=1]="Interpolation",t[t.IsIterator=2]="IsIterator",t[t.IsChainable=4]="IsChainable",t[t.IsFunction=8]="IsFunction",t[t.IsProperty=16]="IsProperty",t[t.IsCustom=32]="IsCustom"}(Fi||(Fi={}));let Li,Di="",Vi=0,Ui=0,Wi=0,qi=0,_i=6291456,Hi="",Ki=!0,zi=!1,Gi=!0,Qi=-1;const Xi=String.fromCharCode,Zi=t=>Di.charCodeAt(t),Yi=()=>Di.slice(qi,Vi),Ji="Infinity NaN isFinite isNaN parseFloat parseInt decodeURI decodeURIComponent encodeURI encodeURIComponent Array BigInt Boolean Date Map Number Object RegExp Set String JSON Math Intl".split(" ");function tn(t,e){if(32===e)return new ye(Di);if(0===Vi){if(1&e)return function(){const t=[],e=[],s=Ui;let i="";for(;Vi<s;){switch(Li){case 36:if(123===Zi(Vi+1)){t.push(i),i="",Vi+=2,Li=Zi(Vi),hn();const s=tn(61,1);e.push(s);continue}i+="$";break;case 92:i+=Xi(Ri(cn()));break;default:i+=Xi(Li)}cn()}return e.length?(t.push(i),new He(t,e)):null}();if(hn(),4194304&_i)throw gn()}Ki=513>t,zi=!1,Gi=514>t;let s,i=!1,n=0;if(131072&_i){const t=Un[63&_i];hn(),s=new Be(t,tn(514,e)),Ki=!1}else{t:switch(_i){case 12294:n=Wi,Ki=!1,Gi=!1;do{switch(hn(),++n,_i){case 65545:if(hn(),0==(12288&_i))throw mn();break;case 10:case 11:throw mn();case 2162700:if(zi=!0,hn(),0==(12288&_i)){s=0===n?Bi:1===n?ji:new $e(n),i=!0;break t}break;default:if(2097152&_i){s=0===n?Bi:1===n?ji:new $e(n);break t}throw wn()}}while(12294===_i);case 4096:{const t=Hi;if(2&e)s=new qe(t);else if(Gi&&Ji.includes(t))s=new Te(t);else{if(Gi&&"import"===t)throw xn();s=new xe(t,n)}if(Ki=!zi,hn(),pn(50)){if(524296===_i)throw Dn();const e=zi,i=Wi;++Wi;const n=tn(62,0);zi=e,Wi=i,Ki=!1,s=new Ge([new qe(t)],n)}break}case 10:throw Vn();case 11:throw vn();case 12292:switch(Ki=!1,hn(),Wi){case 0:s=Bi;break;case 1:s=ji;break;default:s=new $e(Wi)}break;case 2688007:s=function(t){hn();const e=Vi,s=qi,i=_i,n=Li,r=Hi,o=Ki,a=zi,h=[];let c=1,l=!1;e:for(;;){if(11===_i){if(hn(),4096!==_i)throw mn();if(h.push(new qe(Hi)),hn(),6291471===_i)throw Ln();if(7340046!==_i)throw vn();if(hn(),50!==_i)throw vn();hn();const t=zi,e=Wi;++Wi;const s=tn(62,0);return zi=t,Wi=e,Ki=!1,new Ge(h,s,!0)}switch(_i){case 4096:h.push(new qe(Hi)),hn();break;case 7340046:hn();break e;case 524296:case 2688016:hn(),c=4;break;case 6291471:c=2,l=!0;break e;case 2688007:c=2;break e;default:hn(),c=2}switch(_i){case 6291471:if(hn(),l=!0,1===c)break;break e;case 7340046:hn();break e;case 4194349:1===c&&(c=3);break e;case 50:if(l)throw Bn();hn(),c=2;break e;default:1===c&&(c=2);break e}}if(50===_i){if(1===c){if(hn(),524296===_i)throw Dn();const t=zi,e=Wi;++Wi;const s=tn(62,0);return zi=t,Wi=e,Ki=!1,new Ge(h,s)}throw Bn()}if(1===c&&0===h.length)throw Rn();if(l)switch(c){case 2:throw Bn();case 3:throw jn();case 4:throw Fn()}Vi=e,qi=s,_i=i,Li=n,Hi=r,Ki=o,zi=a;const u=zi,d=tn(62,t);if(zi=u,fn(7340046),50===_i)switch(c){case 2:throw Bn();case 3:throw jn();case 4:throw Fn()}return d}(e);break;case 2688016:s=Di.search(/\s+of\s+/)>Vi?function(){const t=[],e=new Ke(26,t,void 0,void 0);let s="",i=!0,n=0;for(;i;)switch(hn(),_i){case 7340051:i=!1,r();break;case 6291471:r();break;case 4096:s=Yi();break;default:throw Pn()}return fn(7340051),e;function r(){""!==s?(t.push(new ze(new Ie(Bi,s),new Oe(Bi,new je(n++)),void 0)),s=""):n++}}():function(t){const e=zi;hn();const s=new Array;for(;7340051!==_i;)if(pn(6291471)){if(s.push(Mi),7340051===_i)break}else{if(s.push(tn(62,-3&t)),!pn(6291471))break;if(7340051===_i)break}return zi=e,fn(7340051),2&t?new Ue(s):(Ki=!1,new Fe(s))}(e);break;case 524296:s=function(t){const e=zi,s=new Array,i=new Array;for(hn();7340045!==_i;){if(s.push(Hi),49152&_i)hn(),fn(6291476),i.push(tn(62,-3&t));else{if(!(12288&_i))throw In();{const e=Li,s=_i,n=Vi;hn(),pn(6291476)?i.push(tn(62,-3&t)):(Li=e,_i=s,Vi=n,i.push(tn(515,-3&t)))}}7340045!==_i&&fn(6291471)}return zi=e,fn(7340045),2&t?new We(s,i):(Ki=!1,new Le(s,i))}(e);break;case 2163759:s=new De([Hi]),Ki=!1,hn();break;case 2163760:s=on(e,s,!1);break;case 16384:case 32768:s=new je(Hi),Ki=!1,hn();break;case 8194:case 8195:case 8193:case 8192:s=Un[63&_i],Ki=!1,hn();break;default:throw Vi>=Ui?yn():bn()}if(2&e)return function(t){if(0==(23&t.$kind))throw An();if(4204593!==_i)throw An();hn();const e=t,s=tn(61,4);return new _e(e,s,Qi)}(s);if(514<t)return s;if(10===_i||11===_i)throw mn();if(0===s.$kind)switch(_i){case 2162700:if(zi=!0,Ki=!1,hn(),0==(13312&_i))throw Nn();if(12288&_i)s=new xe(Hi,s.ancestor),hn();else if(2688007===_i)s=new Pe(s,en(),!0);else{if(2688016!==_i)throw Mn();s=sn(s,!0)}break;case 65545:if(Ki=!zi,hn(),0==(12288&_i))throw mn();s=new xe(Hi,s.ancestor),hn();break;case 10:case 11:throw mn();case 2688007:s=new Pe(s,en(),i);break;case 2688016:s=sn(s,i);break;case 2163759:s=an(s);break;case 2163760:s=on(e,s,!0)}for(;(65536&_i)>0;)switch(_i){case 2162700:s=nn(s);break;case 65545:if(hn(),0==(12288&_i))throw mn();s=rn(s,!1);break;case 10:case 11:throw mn();case 2688007:s=2===s.$kind?new Re(s.name,en(),s.ancestor,!1):12===s.$kind?new Ee(s.object,s.name,en(),s.optional,!1):1===s.$kind?new Ne(s.name,en()):new Pe(s,en(),!1);break;case 2688016:s=sn(s,!1);break;case 2163759:if(zi)throw Mn();s=an(s);break;case 2163760:if(zi)throw Mn();s=on(e,s,!0)}}if(10===_i||11===_i)throw mn();if(513<t)return s;for(;(262144&_i)>0;){const i=_i;if((960&i)<=t)break;hn(),s=new Me(Un[63&i],s,tn(960&i,e)),Ki=!1}if(63<t)return s;if(pn(6291478)){const t=tn(62,e);fn(6291476),s=new Se(s,t,tn(62,e)),Ki=!1}if(62<t)return s;if(pn(4194349)){if(!Ki)throw Cn();s=new Ce(s,tn(62,e))}if(61<t)return s;for(;pn(6291480);){if(6291456===_i)throw Sn();const t=Hi;hn();const i=new Array;for(;pn(6291476);)i.push(tn(62,e));s=new ke(s,t,i)}for(;pn(6291479);){if(6291456===_i)throw Tn();const t=Hi;hn();const i=new Array;for(;pn(6291476);)i.push(tn(62,e));s=new be(s,t,i)}if(6291456!==_i){if((1&e)>0&&7340045===_i)return s;if((4&e)>0&&6291477===_i){if(Vi===Ui)throw bn();return Qi=Vi-1,s}if("of"===Yi())throw $n();throw bn()}return s}function en(){const t=zi;hn();const e=[];for(;7340046!==_i&&(e.push(tn(62,0)),pn(6291471)););return fn(7340046),Ki=!1,zi=t,e}function sn(t,e){const s=zi;return hn(),t=new Oe(t,tn(62,0),e),fn(7340051),Ki=!s,zi=s,t}function nn(t){if(zi=!0,Ki=!1,hn(),0==(13312&_i))throw Nn();if(12288&_i)return rn(t,!0);if(2688007===_i)return 2===t.$kind?new Re(t.name,en(),t.ancestor,!0):12===t.$kind?new Ee(t.object,t.name,en(),t.optional,!0):new Pe(t,en(),!0);if(2688016===_i)return sn(t,!0);throw Mn()}function rn(t,e){const s=Hi;switch(_i){case 2162700:{zi=!0,Ki=!1;const i=Vi,n=qi,r=_i,o=Li,a=Hi,h=Ki,c=zi;if(hn(),0==(13312&_i))throw Nn();return 2688007===_i?new Ee(t,s,en(),e,!0):(Vi=i,qi=n,_i=r,Li=o,Hi=a,Ki=h,zi=c,new Ie(t,s,e))}case 2688007:return Ki=!1,new Ee(t,s,en(),e,!1);default:return Ki=!zi,hn(),new Ie(t,s,e)}}function on(t,e,s){const i=zi,n=[Hi];fn(2163760);const r=[tn(62,t)];for(;2163759!==(_i=dn());)n.push(Hi),fn(2163760),r.push(tn(62,t));return n.push(Hi),Ki=!1,zi=i,s?(hn(),new Ve(n,n,e,r)):(hn(),new De(n,r))}function an(t){Ki=!1;const e=[Hi];return hn(),new Ve(e,e,t)}function hn(){for(;Vi<Ui;)if(qi=Vi,null!=(_i=Gn[Li]()))return;_i=6291456}function cn(){return Li=Zi(++Vi)}function ln(t){let e=Li;if(!1===t){do{e=cn()}while(e<=57&&e>=48);if(46!==e)return Hi=parseInt(Yi(),10),32768;if(e=cn(),Vi>=Ui)return Hi=parseInt(Yi().slice(0,-1),10),32768}if(e<=57&&e>=48)do{e=cn()}while(e<=57&&e>=48);else Li=Zi(--Vi);return Hi=parseFloat(Yi()),32768}function un(){let t=!0,e="";for(;96!==cn();)if(36===Li){if(Vi+1<Ui&&123===Zi(Vi+1)){Vi++,t=!1;break}e+="$"}else if(92===Li)e+=Xi(Ri(cn()));else{if(Vi>=Ui)throw On();e+=Xi(Li)}return cn(),Hi=e,t?2163759:2163760}const dn=()=>{if(Vi>=Ui)throw On();return Vi--,un()},pn=t=>_i===t&&(hn(),!0),fn=t=>{if(_i!==t)throw Rn();hn()},gn=()=>Qe(151,Di),vn=()=>Qe(152,Di),mn=()=>Qe(153,Di),wn=()=>Qe(154,Di),yn=()=>Qe(155,Di),bn=()=>Qe(156,Yi(),Vi,Di),kn=()=>Qe(157),Cn=()=>Qe(158,Di),Sn=()=>Qe(159,Di),Tn=()=>Qe(160,Di),$n=()=>Qe(161,Di),xn=()=>Qe(162,Di),An=()=>Qe(163,Di),In=()=>Qe(164,Di),On=()=>Qe(166,Di),Rn=t=>Qe(167,Di),En=()=>{throw Qe(168,Di)};En.notMapped=!0;const Pn=()=>Qe(170,Di),Nn=()=>Qe(171,Di),Mn=()=>Qe(172,Di),Bn=()=>Qe(173,Di),jn=()=>Qe(174,Di),Fn=()=>Qe(175,Di),Ln=()=>Qe(176,Di),Dn=()=>Qe(178,Di),Vn=()=>Qe(179,Di),Un=[Ei,Pi,Ni,Mi,"$this",null,"$parent","(","{",".","..","...","?.","}",")",",","[","]",":",";","?","'",'"',"&","|","??","||","&&","==","!=","===","!==","<",">","<=",">=","in","instanceof","+","-","typeof","void","*","%","/","=","!",2163759,2163760,"of","=>"],Wn=de(Object.create(null),{true:8193,null:8194,false:8192,undefined:8195,$this:12292,$parent:12294,in:6562212,instanceof:6562213,typeof:139304,void:139305,of:4204593}),qn=[36,0,65,91,95,0,97,123,170,0,186,0,192,215,216,247,248,697,736,741,7424,7462,7468,7517,7522,7526,7531,7544,7545,7615,7680,7936,8305,0,8319,0,8336,8349,8490,8492,8498,0,8526,0,8544,8585,11360,11392,42786,42888,42891,42927,42928,42936,42999,43008,43824,43867,43868,43877,64256,64263,65313,65339,65345,65371],_n=[48,58],Hn=(t,e,s,i)=>{const n=s.length;for(let r=0;r<n;r+=2){const n=s[r];let o=s[r+1];if(o=o>0?o:n+1,t&&t.fill(i,n,o),e)for(let t=n;t<o;t++)e.add(t)}},Kn=t=>()=>(cn(),t);Hn(null,new Set,[36,0,48,58,65,91,95,0,97,123],!0);const zn=new Uint8Array(65535);Hn(zn,null,qn,1),Hn(zn,null,_n,1);const Gn=new Array(65535);Gn.fill(En,0,65535),Hn(Gn,null,[0,33,127,161],(()=>(cn(),null))),Hn(Gn,null,qn,(function(){for(;zn[cn()];);const t=Wn[Hi=Yi()];return void 0===t?4096:t})),Hn(Gn,null,_n,(()=>ln(!1))),Gn[34]=Gn[39]=()=>function(){const t=Li;cn();let e=0;const s=new Array;let i=Vi;for(;Li!==t;)if(92===Li)s.push(Di.slice(i,Vi)),cn(),e=Ri(Li),cn(),s.push(Xi(e)),i=Vi;else{if(Vi>=Ui)throw Qe(165,Di);cn()}const n=Di.slice(i,Vi);cn(),s.push(n);const r=s.join("");return Hi=r,16384}(),Gn[96]=()=>un(),Gn[33]=()=>61!==cn()?131118:61!==cn()?6553949:(cn(),6553951),Gn[61]=()=>62===cn()?(cn(),50):61!==Li?4194349:61!==cn()?6553948:(cn(),6553950),Gn[38]=()=>38!==cn()?6291479:(cn(),6553883),Gn[124]=()=>124!==cn()?6291480:(cn(),6553818),Gn[63]=()=>{if(46===cn()){const t=Zi(Vi+1);return t<=48||t>=57?(cn(),2162700):6291478}return 63!==Li?6291478:(cn(),6553753)},Gn[46]=()=>cn()<=57&&Li>=48?ln(!0):46===Li?46!==cn()?10:(cn(),11):65545,Gn[60]=()=>61!==cn()?6554016:(cn(),6554018),Gn[62]=()=>61!==cn()?6554017:(cn(),6554019),Gn[37]=Kn(6554155),Gn[40]=Kn(2688007),Gn[41]=Kn(7340046),Gn[42]=Kn(6554154),Gn[43]=Kn(2490854),Gn[44]=Kn(6291471),Gn[45]=Kn(2490855),Gn[47]=Kn(6554156),Gn[58]=Kn(6291476),Gn[59]=Kn(6291477),Gn[91]=Kn(2688016),Gn[93]=Kn(7340051),Gn[123]=Kn(524296),Gn[125]=Kn(7340045);let Qn=null;const Xn=[];let Zn=!1;function Yn(){return Qn}function Jn(t){if(null==t)throw Qe(206);if(null==Qn)return Qn=t,Xn[0]=Qn,void(Zn=!0);if(Qn===t)throw Qe(207);Xn.push(t),Qn=t,Zn=!0}function tr(t){if(null==t)throw Qe(208);if(Qn!==t)throw Qe(209);Xn.pop(),Qn=Xn.length>0?Xn[Xn.length-1]:null,Zn=null!=Qn}const er=Object.freeze({get current(){return Qn},get connecting(){return Zn},enter:Jn,exit:tr,pause:function(){Zn=!1},resume:function(){Zn=!0}}),sr=Reflect.get,ir=Object.prototype.toString,nr=new WeakMap,rr="__au_nw__";function or(t){switch(ir.call(t)){case"[object Object]":return!0!==t.constructor[rr];case"[object Array]":case"[object Map]":case"[object Set]":return!0;default:return!1}}const ar="__raw__";function hr(t){return or(t)?cr(t):t}function cr(t){return nr.get(t)??function(t){const e=oe(t)?fr:he(t)||ae(t)?Fr:pr,s=new Proxy(t,e);return nr.set(t,s),nr.set(s,s),s}(t)}function lr(t){return t[ar]??t}function ur(t){return or(t)&&t[ar]||t}function dr(t,e){return"constructor"===e||"__proto__"===e||"$observers"===e||e===Symbol.toPrimitive||e===Symbol.toStringTag||!0===t.constructor[`__au_nw_${pe(e)}__`]}const pr={get(t,e,s){if(e===ar)return t;const i=Yn();return!Zn||dr(t,e)||null==i?sr(t,e,s):(i.observe(t,e),hr(sr(t,e,s)))}},fr={get(t,e,s){if(e===ar)return t;if(!Zn||dr(t,e)||null==Qn)return sr(t,e,s);switch(e){case"length":return Qn.observe(t,"length"),t.length;case"map":return gr;case"includes":return wr;case"indexOf":return yr;case"lastIndexOf":return br;case"every":return vr;case"filter":return mr;case"find":return Cr;case"findIndex":return kr;case"flat":return Sr;case"flatMap":return Tr;case"join":return $r;case"push":return Ar;case"pop":return xr;case"reduce":return Br;case"reduceRight":return jr;case"reverse":return Er;case"shift":return Ir;case"unshift":return Or;case"slice":return Mr;case"splice":return Rr;case"some":return Pr;case"sort":return Nr;case"keys":return Hr;case"values":case Symbol.iterator:return Kr;case"entries":return zr}return Qn.observe(t,e),hr(sr(t,e,s))},ownKeys:t=>(Yn()?.observe(t,"length"),Reflect.ownKeys(t))};function gr(t,e){const s=lr(this),i=s.map(((s,i)=>ur(t.call(e,hr(s),i,this))));return Gr(Qn,s),hr(i)}function vr(t,e){const s=lr(this),i=s.every(((s,i)=>t.call(e,hr(s),i,this)));return Gr(Qn,s),i}function mr(t,e){const s=lr(this),i=s.filter(((s,i)=>ur(t.call(e,hr(s),i,this))));return Gr(Qn,s),hr(i)}function wr(t){const e=lr(this),s=e.includes(ur(t));return Gr(Qn,e),s}function yr(t){const e=lr(this),s=e.indexOf(ur(t));return Gr(Qn,e),s}function br(t){const e=lr(this),s=e.lastIndexOf(ur(t));return Gr(Qn,e),s}function kr(t,e){const s=lr(this),i=s.findIndex(((s,i)=>ur(t.call(e,hr(s),i,this))));return Gr(Qn,s),i}function Cr(t,e){const s=lr(this),i=s.find(((e,s)=>t(hr(e),s,this)),e);return Gr(Qn,s),hr(i)}function Sr(){const t=lr(this);return Gr(Qn,t),hr(t.flat())}function Tr(t,e){const s=lr(this);return Gr(Qn,s),cr(s.flatMap(((s,i)=>hr(t.call(e,hr(s),i,this)))))}function $r(t){const e=lr(this);return Gr(Qn,e),e.join(t)}function xr(){return hr(lr(this).pop())}function Ar(...t){return lr(this).push(...t)}function Ir(){return hr(lr(this).shift())}function Or(...t){return lr(this).unshift(...t)}function Rr(...t){return hr(lr(this).splice(...t))}function Er(...t){const e=lr(this),s=e.reverse();return Gr(Qn,e),hr(s)}function Pr(t,e){const s=lr(this),i=s.some(((s,i)=>ur(t.call(e,hr(s),i,this))));return Gr(Qn,s),i}function Nr(t){const e=lr(this),s=e.sort(t);return Gr(Qn,e),hr(s)}function Mr(t,e){const s=lr(this);return Gr(Qn,s),cr(s.slice(t,e))}function Br(t,e){const s=lr(this),i=s.reduce(((e,s,i)=>t(e,hr(s),i,this)),e);return Gr(Qn,s),hr(i)}function jr(t,e){const s=lr(this),i=s.reduceRight(((e,s,i)=>t(e,hr(s),i,this)),e);return Gr(Qn,s),hr(i)}const Fr={get(t,e,s){if(e===ar)return t;const i=Yn();if(!Zn||dr(t,e)||null==i)return sr(t,e,s);switch(e){case"size":return i.observe(t,"size"),t.size;case"clear":return qr;case"delete":return _r;case"forEach":return Lr;case"add":if(ae(t))return Wr;break;case"get":if(he(t))return Vr;break;case"set":if(he(t))return Ur;break;case"has":return Dr;case"keys":return Hr;case"values":return Kr;case"entries":return zr;case Symbol.iterator:return he(t)?zr:Kr}return hr(sr(t,e,s))}};function Lr(t,e){const s=lr(this);return Gr(Qn,s),s.forEach(((s,i)=>{t.call(e,hr(s),hr(i),this)}))}function Dr(t){const e=lr(this);return Gr(Qn,e),e.has(ur(t))}function Vr(t){const e=lr(this);return Gr(Qn,e),hr(e.get(ur(t)))}function Ur(t,e){return hr(lr(this).set(ur(t),ur(e)))}function Wr(t){return hr(lr(this).add(ur(t)))}function qr(){return hr(lr(this).clear())}function _r(t){return hr(lr(this).delete(ur(t)))}function Hr(){const t=lr(this);Gr(Qn,t);const e=t.keys();return{next(){const t=e.next(),s=t.value,i=t.done;return i?{value:void 0,done:i}:{value:hr(s),done:i}},[Symbol.iterator](){return this}}}function Kr(){const t=lr(this);Gr(Qn,t);const e=t.values();return{next(){const t=e.next(),s=t.value,i=t.done;return i?{value:void 0,done:i}:{value:hr(s),done:i}},[Symbol.iterator](){return this}}}function zr(){const t=lr(this);Gr(Qn,t);const e=t.entries();return{next(){const t=e.next(),s=t.value,i=t.done;return i?{value:void 0,done:i}:{value:[hr(s[0]),hr(s[1])],done:i}},[Symbol.iterator](){return this}}}const Gr=(t,e)=>t?.observeCollection(e),Qr=Object.freeze({getProxy:cr,getRaw:lr,wrap:hr,unwrap:ur,rawKey:ar});class Xr{constructor(t,e,s,i,n){this.type=1,this.v=void 0,this.ir=!1,this.D=!1,this.cb=void 0,this.C=void 0,this.A=void 0,this.o=t,this.O=n?hr(t):t,this.$get=e,this.$set=s,this.oL=i}init(t){this.v=t,this.D=!1}getValue(){return 0===this.subs.count?this.$get.call(this.o,this.o,this):(this.D&&(this.compute(),this.D=!1),this.v)}setValue(t){if(!ne(this.$set))throw Qe(221);void 0!==this.C&&(t=this.C.call(null,t,this.A)),ce(t,this.v)||(this.ir=!0,this.$set.call(this.o,t),this.ir=!1,this.run())}useCoercer(t,e){return this.C=t,this.A=e,!0}useCallback(t){return this.cb=t,!0}handleChange(){this.D=!0,this.subs.count>0&&this.run()}handleCollectionChange(){this.D=!0,this.subs.count>0&&this.run()}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.compute(),this.D=!1)}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&(this.D=!0,this.obs.clearAll())}run(){if(this.ir)return;const t=this.v,e=this.compute();this.D=!1,ce(e,t)||(this.cb?.(e,t),this.subs.notify(this.v,t))}compute(){this.ir=!0,this.obs.version++;try{return Jn(this),this.v=ur(this.$get.call(this.O,this.O,this))}finally{this.obs.clear(),this.ir=!1,tr(this)}}}Ai(Xr),ds(Xr);const Zr=fe("IDirtyChecker",void 0);class Yr{get doNotCache(){return!0}constructor(t,e){this.type=0,this.o=t,this.k=e}getValue(){return this.o[this.k]}setValue(){}subscribe(){}unsubscribe(){}}class Jr{constructor(){this.type=0}getValue(t,e){return t[e]}setValue(t,e,s){e[s]=t}}class to{constructor(t,e){this.type=1,this.v=void 0,this.iO=!1,this.cb=void 0,this.C=void 0,this.A=void 0,this.o=t,this.k=e}getValue(){return this.v}setValue(t){if(void 0!==this.C&&(t=this.C.call(void 0,t,this.A)),this.iO){if(ce(t,this.v))return;eo=this.v,this.v=t,this.cb?.(t,eo),this.subs.notify(t,eo)}else this.v=this.o[this.k]=t,this.cb?.(t,eo)}useCallback(t){return this.cb=t,this.start(),!0}useCoercer(t,e){return this.C=t,this.A=e,this.start(),!0}subscribe(t){!1===this.iO&&this.start(),this.subs.add(t)}start(){return!1===this.iO&&(this.iO=!0,this.v=this.o[this.k],ie(this.o,this.k,{enumerable:!0,configurable:!0,get:de((()=>this.getValue()),{getObserver:()=>this}),set:t=>{this.setValue(t)}})),this}stop(){return this.iO&&(ie(this.o,this.k,{enumerable:!0,configurable:!0,writable:!0,value:this.v}),this.iO=!1),this}}let eo;ds(to);const so=new Jr,io=fe("IObserverLocator",(t=>t.singleton(oo))),no=fe("INodeObserverLocator",(t=>t.cachedCallback((t=>new ro))));class ro{handles(){return!1}getObserver(){return so}getAccessor(){return so}}class oo{constructor(t,e){this.L=[],this.I=t,this.R=e}addAdapter(t){this.L.push(t)}getObserver(t,e){if(null==t)throw Qe(199,e);if(!re(t))return new Yr(t,ne(e)?"":e);if(ne(e))return new Xr(t,e,void 0,this,!0);const s=co(t);let i=s[e];return void 0===i&&(i=this.createObserver(t,e),i.doNotCache||(s[e]=i)),i}getAccessor(t,e){const s=t.$observers?.[e];return void 0!==s?s:this.R.handles(t,e,this)?this.R.getAccessor(t,e,this):so}getArrayObserver(t){return _s(t)}getMapObserver(t){return vi(t)}getSetObserver(t){return ii(t)}createObserver(t,e){if(this.R.handles(t,e,this))return this.R.getObserver(t,e,this);switch(e){case"length":if(oe(t))return _s(t).getLengthObserver();break;case"size":if(he(t))return vi(t).getLengthObserver();if(ae(t))return ii(t).getLengthObserver();break;default:if(oe(t)&&m(e))return _s(t).getIndexObserver(Number(e))}let s=ho(t,e);if(void 0===s){let i=ao(t);for(;null!==i&&(s=ho(i,e),void 0===s);)i=ao(i)}if(void 0!==s&&!se.call(s,"value")){let i=this.M(t,e,s);return null==i&&(i=(s.get?.getObserver??s.set?.getObserver)?.(t,this)),null==i?s.configurable?this._(t,e,s,!0):this.I.createProperty(t,e):i}return new to(t,e)}_(t,e,s,i){const n=new Xr(t,s.get,s.set,this,!!i);return ie(t,e,{enumerable:s.enumerable,configurable:!0,get:de((()=>n.getValue()),{getObserver:()=>n}),set:t=>{n.setValue(t)}}),n}M(t,e,s){if(this.L.length>0)for(const i of this.L){const n=i.getObserver(t,e,s,this);if(null!=n)return n}return null}}oo.inject=[Zr,no];const ao=Object.getPrototypeOf,ho=Object.getOwnPropertyDescriptor,co=t=>{let e=t.$observers;return void 0===e&&ie(t,"$observers",{enumerable:!1,value:e=ge()}),e};Ai(class{constructor(t,e){this.oL=t,this.fn=e,this.maxRunCount=10,this.queued=!1,this.running=!1,this.runCount=0,this.stopped=!1}handleChange(){this.queued=!0,this.run()}handleCollectionChange(){this.queued=!0,this.run()}run(){if(this.stopped)throw Qe(225);if(!this.running){++this.runCount,this.running=!0,this.queued=!1,++this.obs.version;try{Jn(this),this.fn(this)}finally{this.obs.clear(),this.running=!1,tr(this)}if(this.queued){if(this.runCount>this.maxRunCount)throw this.runCount=0,Qe(226);this.run()}else this.runCount=0}}stop(){this.stopped=!0,this.obs.clearAll()}});const lo=fe("ISignaler",(t=>t.singleton(uo)));class uo{constructor(){this.signals=ge()}dispatchSignal(t){const e=this.signals[t];if(void 0===e)return;let s;for(s of e.keys())s.handleChange(void 0,void 0)}addSignalListener(t,e){const s=this.signals,i=s[t];void 0===i?s[t]=new Set([e]):i.add(e)}removeSignalListener(t,e){this.signals[t]?.delete(e)}}new Map;class po extends Error{constructor(t){super("Task was canceled."),this.task=t}}var fo,go,vo;function mo(t,e,s,i){var n,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,s,o):n(e,s))||o);return r>3&&o&&Object.defineProperty(e,s,o),o}(vo=fo||(fo={}))[vo.pending=0]="pending",vo[vo.running=1]="running",vo[vo.completed=2]="completed",vo[vo.canceled=3]="canceled",function(t){t[t.render=0]="render",t[t.macroTask=1]="macroTask",t[t.postRender=2]="postRender"}(go||(go={})),new Map;const wo=a.SF.getOwn,yo=a.SF.hasOwn,bo=a.SF.define,{annotation:ko,resource:Co}=D,So=ko.keyFor,To=Co.keyFor,$o=Co.appendTo,xo=ko.appendTo,Ao=ko.getKeys,Io=Object,Oo=String,Ro=Io.prototype,Eo=()=>Io.create(null),Po=Ro.hasOwnProperty,No=Io.freeze,Mo=Io.assign,Bo=Io.getOwnPropertyNames,jo=Io.keys,Fo=Eo(),Lo=(t,e,s)=>{if(!0===Fo[e])return!0;if(!Wo(e))return!1;const i=e.slice(0,5);return Fo[e]="aria-"===i||"data-"===i||s.isStandardSvgAttribute(t,e)},Do=t=>t instanceof Promise,Vo=t=>t instanceof Array,Uo=t=>"function"==typeof t,Wo=t=>"string"==typeof t,qo=t=>{throw t},_o=Io.is,Ho=Reflect.defineProperty,Ko=(t,e,s)=>(Ho(t,e,{enumerable:!1,configurable:!0,writable:!0,value:s}),s),zo=(t,e,s)=>t.addSignalListener(e,s),Go=(t,e,s)=>t.removeSignalListener(e,s);function Qo(t,e){let s;function i(t,e){arguments.length>1&&(s.name=e),bo(Zo,Jo.create(e,t,s),t.constructor,e),xo(t.constructor,Yo.keyFrom(e))}return arguments.length>1?(s={},void i(t,e)):Wo(t)?(s={},i):(s=void 0===t?{}:t,i)}function Xo(t){return t.startsWith(Zo)}const Zo=So("bindable"),Yo=No({name:Zo,keyFrom:t=>`${Zo}:${t}`,from(t,...e){const s={},i=Array.isArray;function n(e){s[e]=Jo.create(e,t)}function r(e,i){s[e]=i instanceof Jo?i:Jo.create(e,t,i)}return e.forEach((function(t){i(t)?t.forEach(n):t instanceof Jo?s[t.name]=t:void 0!==t&&jo(t).forEach((e=>r(e,t[e])))})),s},getAll(t){const e=Zo.length+1,s=[],i=$(t);let n,r,o,a,h=i.length,c=0;for(;--h>=0;)for(o=i[h],n=Ao(o).filter(Xo),r=n.length,a=0;a<r;++a)s[c++]=wo(Zo,o,n[a].slice(e));return s}});class Jo{constructor(t,e,s,i,n,r){this.attribute=t,this.callback=e,this.mode=s,this.primary=i,this.name=n,this.set=r}static create(t,e,s={}){return new Jo(s.attribute??k(t),s.callback??`${t}Changed`,s.mode??2,s.primary??!1,s.name??t,s.set??function(t,e,s={}){const i=s.type??a.SF.get("design:type",e,t)??null;if(null==i)return Nt;let n;switch(i){case Number:case Boolean:case String:case BigInt:n=i;break;default:{const t=i.coerce;n="function"==typeof t?t.bind(i):ta.for(i)??Nt;break}}return n===Nt?n:function(t,e){return function(s,i){return i?.enableCoercion?(e??!i?.coerceNullish)&&null==s?s:t(s,i):s}}(n,s.nullable)}(t,e,s))}}const ta={key:So("coercer"),define(t,e){bo(ta.key,t[e].bind(t),t)},for:t=>wo(ta.key,t)},ea=t=>{function e(t,s,i){mt.inject(e)(t,s,i)}return e.$isResolver=!0,e.resolve=(e,s)=>s.has(t,!1)?s.get(t):s.root.get(t),e},sa=mt.createInterface,ia=Ot.singleton,na=Ot.aliasTo,ra=Ot.instance;Ot.callback;const oa=Ot.transient,aa=(t,e,s)=>t.registerResolver(e,s);function ha(t,e,s,i){for(let n=0,r=t.length;n<r;++n)Ot.aliasTo(s,e.keyFrom(t[n])).register(i)}const ca=(t,...e)=>new Error(`AUR${Oo(t).padStart(4,"0")}:${e.map(Oo)}`);function la(t){return function(e){return fa.define(t,e)}}class ua{constructor(t,e,s,i){this.Type=t,this.name=e,this.aliases=s,this.key=i}static create(t,e){let s,i;return Wo(t)?(s=t,i={name:s}):(s=t.name,i=t),new ua(e,T(pa(e,"name"),s),S(pa(e,"aliases"),i.aliases,e.aliases),fa.keyFrom(s))}register(t){const{Type:e,key:s,aliases:i}=this;ia(s,e).register(t),na(s,e).register(t),ha(i,fa,s,t)}}const da=To("binding-behavior"),pa=(t,e)=>wo(So(e),t),fa=No({name:da,keyFrom:t=>`${da}:${t}`,isType:t=>Uo(t)&&yo(da,t),define(t,e){const s=ua.create(t,e);return bo(da,s,s.Type),bo(da,s,s),$o(e,da),s.Type},getDefinition(t){const e=wo(da,t);if(void 0===e)throw ca(151,t);return e},annotate(t,e,s){bo(So(e),s,t)},getAnnotation:pa}),ga=new Map;class va{bind(t,e){ga.set(e,e.mode),e.mode=this.mode}unbind(t,e){e.mode=ga.get(e),ga.delete(e)}}la("oneTime")(class extends va{get mode(){return 1}}),la("toView")(class extends va{get mode(){return 2}}),la("fromView")(class extends va{get mode(){return 4}}),la("twoWay")(class extends va{get mode(){return 6}});const ma=new WeakMap;la("debounce")(class{constructor(){this.p=Y(Mt)}bind(t,e,s,i){const n={type:"debounce",delay:s??200,now:this.p.performanceNow,queue:this.p.taskQueue,signals:Wo(i)?[i]:i??Et},r=e.limit?.(n);null==r||ma.set(e,r)}unbind(t,e){ma.get(e)?.dispose(),ma.delete(e)}});la("signal")(class{constructor(){this.i=new Map,this.u=Y(lo)}bind(t,e,...s){if(!("handleChange"in e))throw ca(817);if(0===s.length)throw ca(818);let i;for(i of(this.i.set(e,s),s))zo(this.u,i,e)}unbind(t,e){const s=this.i.get(e);let i;for(i of(this.i.delete(e),s))Go(this.u,i,e)}});const wa=new WeakMap;la("throttle")(class{constructor(){({performanceNow:this.C,taskQueue:this.A}=Y(Mt))}bind(t,e,s,i){const n={type:"throttle",delay:s??200,now:this.C,queue:this.A,signals:Wo(i)?[i]:i??Et},r=e.limit?.(n);null==r||wa.set(e,r)}unbind(t,e){wa.get(e)?.dispose(),wa.delete(e)}});const ya=sa("IAppTask");class ba{constructor(t,e,s){this.c=void 0,this.slot=t,this.k=e,this.cb=s}register(t){return this.c=t.register(ra(ya,this))}run(){const t=this.k,e=this.cb;return null===t?e():e(this.c.get(t))}}const ka=No({creating:Ca("creating"),hydrating:Ca("hydrating"),hydrated:Ca("hydrated"),activating:Ca("activating"),activated:Ca("activated"),deactivating:Ca("deactivating"),deactivated:Ca("deactivated")});function Ca(t){return function(e,s){return Uo(s)?new ba(t,e,s):new ba(t,null,e)}}const Sa=Mt;class Ta{}function $a(t,e){return t.$au?.[e]??null}function xa(t,e,s){var i;((i=t).$au??(i.$au=new Ta))[e]=s}const Aa=sa("INode"),Ia=sa("IRenderLocation"),Oa=sa("CssModules"),Ra=new WeakMap;function Ea(t){if(Ra.has(t))return Ra.get(t);let e=0,s=t.nextSibling;for(;null!==s;){if(8===s.nodeType)switch(s.textContent){case"au-start":++e;break;case"au-end":if(0==e--)return s}s=s.nextSibling}if(null===t.parentNode&&11===t.nodeType){const e=dh(t);if(void 0===e)return null;if(2===e.mountTarget)return Ea(e.host)}return t.parentNode}function Pa(t){if(Na(t))return t;const e=t.ownerDocument.createComment("au-end"),s=e.$start=t.ownerDocument.createComment("au-start"),i=t.parentNode;return null!==i&&(i.replaceChild(e,t),i.insertBefore(s,e)),e}function Na(t){return"au-end"===t.textContent}class Ma{get firstChild(){return this.B}get lastChild(){return this._}constructor(t,e){this.platform=t,this.next=void 0,this.R=!1,this.T=!1,this.ref=null;const s=(this.f=e).querySelectorAll("au-m");let i,n,r=0,o=s.length,a=this.t=Array(o);for(;o>r;)n=s[r],i=n.nextSibling,n.remove(),8===i.nodeType&&(n=i,(i=i.nextSibling).$start=n),a[r]=i,++r;const h=e.childNodes,c=this.childNodes=Array(o=h.length);for(r=0;o>r;)c[r]=h[r],++r;this.B=e.firstChild,this._=e.lastChild}findTargets(){return this.t}insertBefore(t){if(this.T&&this.ref)this.addToLinked();else{const e=t.parentNode;if(this.R){let s,i=this.B;const n=this._;for(;null!=i&&(s=i.nextSibling,e.insertBefore(i,t),i!==n);)i=s}else this.R=!0,t.parentNode.insertBefore(this.f,t)}}appendTo(t,e=!1){if(this.R){let e,s=this.B;const i=this._;for(;null!=s&&(e=s.nextSibling,t.appendChild(s),s!==i);)s=e}else this.R=!0,e||t.appendChild(this.f)}remove(){if(this.R){this.R=!1;const t=this.f,e=this._;let s,i=this.B;for(;null!==i&&(s=i.nextSibling,t.appendChild(i),i!==e);)i=s}}addToLinked(){const t=this.ref,e=t.parentNode;if(this.R){let s,i=this.B;const n=this._;for(;null!=i&&(s=i.nextSibling,e.insertBefore(i,t),i!==n);)i=s}else this.R=!0,e.insertBefore(this.f,t)}unlink(){this.T=!1,this.next=void 0,this.ref=void 0}link(t){this.T=!0,Na(t)?this.ref=t:(this.next=t,this.I())}I(){void 0!==this.next?this.ref=this.next.firstChild:this.ref=void 0}}const Ba=sa("IWindow",(t=>t.callback((t=>t.get(Sa).window)))),ja=sa("ILocation",(t=>t.callback((t=>t.get(Ba).location)))),Fa=sa("IHistory",(t=>t.callback((t=>t.get(Ba).history)))),La=(t,e,s)=>(aa(t,e.HTMLElement,aa(t,e.Element,aa(t,Aa,new Rt("ElementResolver",s)))),t);function Da(t){return function(e){return Ka(t,e)}}function Va(t){return function(e){return Ka(Wo(t)?{isTemplateController:!0,name:t}:{isTemplateController:!0,...t},e)}}class Ua{get type(){return 2}constructor(t,e,s,i,n,r,o,a,h,c){this.Type=t,this.name=e,this.aliases=s,this.key=i,this.defaultBindingMode=n,this.isTemplateController=r,this.bindables=o,this.noMultiBindings=a,this.watches=h,this.dependencies=c}static create(t,e){let s,i;return Wo(t)?(s=t,i={name:s}):(s=t.name,i=t),new Ua(e,T(_a(e,"name"),s),S(_a(e,"aliases"),i.aliases,e.aliases),qa(s),T(_a(e,"defaultBindingMode"),i.defaultBindingMode,e.defaultBindingMode,2),T(_a(e,"isTemplateController"),i.isTemplateController,e.isTemplateController,!1),Yo.from(e,...Yo.getAll(e),_a(e,"bindables"),e.bindables,i.bindables),T(_a(e,"noMultiBindings"),i.noMultiBindings,e.noMultiBindings,!1),S(Za.getAnnotation(e),e.watches),S(_a(e,"dependencies"),i.dependencies,e.dependencies))}register(t){const{Type:e,key:s,aliases:i}=this;oa(s,e).register(t),na(s,e).register(t),ha(i,Ga,s,t)}toString(){return`au:ca:${this.name}`}}const Wa=To("custom-attribute"),qa=t=>`${Wa}:${t}`,_a=(t,e)=>wo(So(e),t),Ha=(t,e)=>$a(t,qa(e))??void 0,Ka=(t,e)=>{const s=Ua.create(t,e);return bo(Wa,s,s.Type),bo(Wa,s,s),$o(e,Wa),s.Type},za=t=>{const e=wo(Wa,t);if(void 0===e)throw ca(759,t);return e},Ga=No({name:Wa,keyFrom:qa,isType:t=>Uo(t)&&yo(Wa,t),for:Ha,define:Ka,getDefinition:za,annotate(t,e,s){bo(So(e),s,t)},getAnnotation:_a}),Qa=Et,Xa=So("watch"),Za=No({name:Xa,add(t,e){let s=wo(Xa,t);null==s&&bo(Xa,s=[],t),s.push(e)},getAnnotation:t=>wo(Xa,t)??Qa});function Ya(t){return function(e){return lh(t,e)}}const Ja=new WeakMap;class th{get type(){return 1}constructor(t,e,s,i,n,r,o,a,h,c,l,u,d,p,f,g,v,m,w){this.Type=t,this.name=e,this.aliases=s,this.key=i,this.cache=n,this.capture=r,this.template=o,this.instructions=a,this.dependencies=h,this.injectable=c,this.needsCompile=l,this.surrogates=u,this.bindables=d,this.containerless=p,this.shadowOptions=f,this.hasSlots=g,this.enhance=v,this.watches=m,this.processContent=w}static create(t,e=null){if(null===e){const s=t;if(Wo(s))throw ca(761,t);const i=q("name",s,ch);return e=Uo(s.Type)?s.Type:gh(b(i)),new th(e,i,S(s.aliases),q("key",s,(()=>hh(i))),q("cache",s,sh),q("capture",s,nh),q("template",s,ih),S(s.instructions),S(s.dependencies),q("injectable",s,ih),q("needsCompile",s,rh),S(s.surrogates),Yo.from(e,s.bindables),q("containerless",s,nh),q("shadowOptions",s,ih),q("hasSlots",s,nh),q("enhance",s,nh),q("watches",s,oh),W("processContent",e,ih))}if(Wo(t))return new th(e,t,S(ph(e,"aliases"),e.aliases),hh(t),W("cache",e,sh),W("capture",e,nh),W("template",e,ih),S(ph(e,"instructions"),e.instructions),S(ph(e,"dependencies"),e.dependencies),W("injectable",e,ih),W("needsCompile",e,rh),S(ph(e,"surrogates"),e.surrogates),Yo.from(e,...Yo.getAll(e),ph(e,"bindables"),e.bindables),W("containerless",e,nh),W("shadowOptions",e,ih),W("hasSlots",e,nh),W("enhance",e,nh),S(Za.getAnnotation(e),e.watches),W("processContent",e,ih));const s=q("name",t,ch);return new th(e,s,S(ph(e,"aliases"),t.aliases,e.aliases),hh(s),U("cache",t,e,sh),U("capture",t,e,nh),U("template",t,e,ih),S(ph(e,"instructions"),t.instructions,e.instructions),S(ph(e,"dependencies"),t.dependencies,e.dependencies),U("injectable",t,e,ih),U("needsCompile",t,e,rh),S(ph(e,"surrogates"),t.surrogates,e.surrogates),Yo.from(e,...Yo.getAll(e),ph(e,"bindables"),e.bindables,t.bindables),U("containerless",t,e,nh),U("shadowOptions",t,e,ih),U("hasSlots",t,e,nh),U("enhance",t,e,nh),S(t.watches,Za.getAnnotation(e),e.watches),U("processContent",t,e,ih))}static getOrCreate(t){if(t instanceof th)return t;if(Ja.has(t))return Ja.get(t);const e=th.create(t);return Ja.set(t,e),bo(ah,e,e.Type),e}register(t){const{Type:e,key:s,aliases:i}=this;t.has(s,!1)||(oa(s,e).register(t),na(s,e).register(t),ha(i,vh,s,t))}toString(){return`au:ce:${this.name}`}}const eh={name:void 0,searchParents:!1,optional:!1},sh=()=>0,ih=()=>null,nh=()=>!1,rh=()=>!0,oh=()=>Et,ah=To("custom-element"),hh=t=>`${ah}:${t}`,ch=(()=>{let t=0;return()=>"unnamed-"+ ++t})(),lh=(t,e)=>{const s=th.create(t,e);return bo(ah,s,s.Type),bo(ah,s,s),$o(s.Type,ah),s.Type},uh=t=>Uo(t)&&yo(ah,t),dh=(t,e=eh)=>{if(void 0===e.name&&!0!==e.searchParents){const s=$a(t,ah);if(null===s){if(!0===e.optional)return null;throw ca(762,t)}return s}if(void 0!==e.name){if(!0!==e.searchParents){const s=$a(t,ah);if(null===s)throw ca(763,t);return s.is(e.name)?s:void 0}let s=t,i=!1;for(;null!==s;){const t=$a(s,ah);if(null!==t&&(i=!0,t.is(e.name)))return t;s=Ea(s)}if(i)return;throw ca(764,t)}let s=t;for(;null!==s;){const t=$a(s,ah);if(null!==t)return t;s=Ea(s)}throw ca(765,t)},ph=(t,e)=>wo(So(e),t),fh=t=>{const e=wo(ah,t);if(void 0===e)throw ca(760,t);return e},gh=function(){const t={value:"",writable:!1,enumerable:!1,configurable:!0},e={};return function(s,i=e){const n=class{};return t.value=s,Ho(n,"name",t),i!==e&&Mo(n.prototype,i),n}}(),vh=No({name:ah,keyFrom:hh,isType:uh,for:dh,define:lh,getDefinition:fh,annotate:(t,e,s)=>{bo(So(e),s,t)},getAnnotation:ph,generateName:ch,createInjectable:()=>{const t=function(e,s,i){return mt.getOrCreateAnnotationParamTypes(e)[i]=t,e};return t.register=function(e){return{resolve:(e,s)=>s.has(t,!0)?s.get(t):null}},t},generateType:gh}),mh=(t,e,s,i)=>{t.addEventListener(e,s,i)},wh=(t,e,s,i)=>{t.removeEventListener(e,s,i)},yh=t=>{let e;const s=t.prototype;Ko(s,"subscribe",(function(t){if(this.subs.add(t)&&1===this.subs.count){for(e of this.cf.events)mh(this.P,e,this);this.L=!0,this.M?.()}})),Ko(s,"unsubscribe",(function(t){if(this.subs.remove(t)&&0===this.subs.count){for(e of this.cf.events)wh(this.P,e,this);this.L=!1,this.q?.()}})),Ko(s,"useConfig",(function(t){if(this.cf=t,this.L){for(e of this.cf.events)wh(this.P,e,this);for(e of this.cf.events)mh(this.P,e,this)}}))},bh=t=>{Ko(t.prototype,"subscribe",Nt),Ko(t.prototype,"unsubscribe",Nt)};class kh{get doNotCache(){return!0}constructor(t){this.obj=t,this.type=6,this.v="",this.F={},this.H=0}getValue(){return this.v}setValue(t){t!==this.v&&(this.v=t,this.O())}O(){const t=this.F,e=++this.H,s=this.obj.classList,i=Ch(this.v),n=i.length;let r,o=0;if(n>0)for(;o<n;o++)r=i[o],0!==r.length&&(t[r]=this.H,s.add(r));if(1!==e)for(r in t)t[r]!==e&&s.remove(r)}}function Ch(t){if(Wo(t))return Sh(t);if("object"!=typeof t)return Et;if(t instanceof Array){const e=t.length;if(e>0){const s=[];let i=0;for(;e>i;++i)s.push(...Ch(t[i]));return s}return Et}const e=[];let s;for(s in t)Boolean(t[s])&&(s.includes(" ")?e.push(...Sh(s)):e.push(s));return e}function Sh(t){const e=t.match(/\S+/g);return null===e?Et:e}bh(kh);const Th=sa("IShadowDOMStyles"),$h=sa("IShadowDOMGlobalStyles",(t=>t.instance({applyTo:Nt})));class xh{constructor(t,e,s,i){this.Type=t,this.name=e,this.aliases=s,this.key=i}static create(t,e){let s,i;return Wo(t)?(s=t,i={name:s}):(s=t.name,i=t),new xh(e,T(Ih(e,"name"),s),S(Ih(e,"aliases"),i.aliases,e.aliases),Oh.keyFrom(s))}register(t){const{Type:e,key:s,aliases:i}=this;Ot.singleton(s,e).register(t),Ot.aliasTo(s,e).register(t),ha(i,Oh,s,t)}}const Ah=To("value-converter"),Ih=(t,e)=>wo(So(e),t),Oh=No({name:Ah,keyFrom:t=>`${Ah}:${t}`,isType:t=>Uo(t)&&yo(Ah,t),define(t,e){const s=xh.create(t,e);return bo(Ah,s,s.Type),bo(Ah,s,s),$o(e,Ah),s.Type},getDefinition(t){const e=wo(Ah,t);if(void 0===e)throw ca(152,t);return e},annotate(t,e,s){bo(So(e),s,t)},getAnnotation:Ih});class Rh{constructor(t,e){this.v=void 0,this.b=t,this.N=e}flush(){this.b.updateSource(this.v)}handleChange(t,e){const s=this.b;t!==ts(s.ast,s.s,s,null)&&(this.v=t,this.N.add(this))}}const Eh=t=>{Ko(t.prototype,"useScope",(function(t){this.s=t}))},Ph=(t,e=!0)=>s=>{const i=s.prototype;null!=t&&Ho(i,"strict",{enumerable:!0,get:function(){return t}}),Ho(i,"strictFnCall",{enumerable:!0,get:function(){return e}}),Ko(i,"get",(function(t){return this.l.get(t)})),Ko(i,"getSignaler",(function(){return this.l.root.get(lo)})),Ko(i,"getConverter",(function(t){const e=Oh.keyFrom(t);let s=Nh.get(this);return null==s&&Nh.set(this,s=new Mh),s[e]??(s[e]=this.l.get(ea(e)))})),Ko(i,"getBehavior",(function(t){const e=fa.keyFrom(t);let s=Nh.get(this);return null==s&&Nh.set(this,s=new Mh),s[e]??(s[e]=this.l.get(ea(e)))}))},Nh=new WeakMap;class Mh{}const Bh=sa("IFlushQueue",(t=>t.singleton(jh)));class jh{constructor(){this.$=!1,this.W=new Set}get count(){return this.W.size}add(t){if(this.W.add(t),!this.$){this.$=!0;try{this.W.forEach(Fh)}finally{this.$=!1}}}clear(){this.W.clear(),this.$=!1}}function Fh(t,e,s){s.delete(t),t.flush()}const Lh=new WeakSet,Dh=(t,e)=>{Ko(t.prototype,"limit",(function(t){if(Lh.has(this))throw ca(9996);Lh.add(this);const s=e(this,t),i=t.signals,n=i.length>0?this.get(lo):null,r=this[s],o=(...t)=>r.call(this,...t),a="debounce"===t.type?Vh(t,o,this):Uh(t,o,this),h=n?{handleChange:a.flush}:null;return this[s]=a,n&&i.forEach((t=>zo(n,t,h))),{dispose:()=>{n&&i.forEach((t=>Go(n,t,h))),Lh.delete(this),a.dispose(),delete this[s]}}}))},Vh=(t,e,s)=>{let i,n,r,o=!1;const a=t.queue,h=()=>e(r),c=e=>{r=e,s.isBound?(n=i,i=a.queueTask(h,{delay:t.delay,reusable:!1}),n?.cancel()):h()},l=c.dispose=()=>{n?.cancel(),i?.cancel(),n=i=void 0};return c.flush=()=>{o=0===i?.status,l(),o&&h()},c},Uh=(t,e,s)=>{let i,n,r,o=0,a=0,h=!1;const c=t.queue,l=()=>t.now(),u=()=>e(r),d=e=>{r=e,s.isBound?(a=l()-o,n=i,a>t.delay?(o=l(),u()):i=c.queueTask((()=>{o=l(),u()}),{delay:t.delay-a,reusable:!1}),n?.cancel()):u()},p=d.dispose=()=>{n?.cancel(),i?.cancel(),n=i=void 0};return d.flush=()=>{h=0===i?.status,p(),h&&u()},d},{enter:Wh,exit:qh}=er,{wrap:_h,unwrap:Hh}=Qr;class Kh{get value(){return this.v}constructor(t,e,s,i,n){this.obj=t,this.$get=s,this.useProxy=n,this.isBound=!1,this.running=!1,this.v=void 0,this.cb=i,this.oL=e}handleChange(){this.run()}handleCollectionChange(){this.run()}bind(){this.isBound||(this.compute(),this.isBound=!0)}unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll())}run(){if(!this.isBound||this.running)return;const t=this.obj,e=this.v,s=this.compute();_o(s,e)||this.cb.call(t,s,e,t)}compute(){this.running=!0,this.obs.version++;try{return Wh(this),this.v=Hh(this.$get.call(void 0,this.useProxy?_h(this.obj):this.obj,this))}finally{this.obs.clear(),this.running=!1,qh(this)}}}class zh{get value(){return this.v}constructor(t,e,s,i,n){this.scope=t,this.l=e,this.oL=s,this.isBound=!1,this.boundFn=!1,this.obj=t.bindingContext,this.j=i,this.cb=n}handleChange(t){const e=this.j,s=this.obj,i=this.v;2===e.$kind&&1===this.obs.count||(this.obs.version++,t=ts(e,this.scope,this,this),this.obs.clear()),_o(t,i)||(this.v=t,this.cb.call(s,t,i,s))}bind(){this.isBound||(this.obs.version++,this.v=ts(this.j,this.scope,this,this),this.obs.clear(),this.isBound=!0)}unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll(),this.v=void 0)}}Ai(Kh),Ai(zh),Ph(!0)(zh);const Gh=sa("ILifecycleHooks");class Qh{constructor(t,e){this.definition=t,this.instance=e}}class Xh{constructor(t,e){this.Type=t,this.propertyNames=e}static create(t,e){const s=new Set;let i=e.prototype;for(;i!==Ro;){for(const t of Bo(i))"constructor"===t||t.startsWith("_")||s.add(t);i=Object.getPrototypeOf(i)}return new Xh(e,s)}register(t){ia(Gh,this.Type).register(t)}}const Zh=new WeakMap,Yh=So("lifecycle-hooks"),Jh=No({name:Yh,define(t,e){const s=Xh.create(t,e);return bo(Yh,s,e),$o(e,Yh),s.Type},resolve(t){let e=Zh.get(t);if(void 0===e){Zh.set(t,e=new tc);const s=t.root,i=s.id===t.id?t.getAll(Gh):t.has(Gh,!1)?s.getAll(Gh).concat(t.getAll(Gh)):s.getAll(Gh);let n,r,o,a,h;for(n of i)for(a of(r=wo(Yh,n.constructor),o=new Qh(r,n),r.propertyNames))h=e[a],void 0===h?e[a]=[o]:h.push(o)}return e}});class tc{}const ec={reusable:!1,preempt:!0};class sc{constructor(t,e,s,i,n,r,o,a,h){this.targetAttribute=o,this.targetProperty=a,this.mode=h,this.isBound=!1,this.s=void 0,this.U=null,this.v=void 0,this.boundFn=!1,this.l=e,this.ast=n,this.G=t,this.target=r,this.oL=s,this.A=i}updateTarget(t){const e=this.target,s=this.targetAttribute,i=this.targetProperty;switch(s){case"class":e.classList.toggle(i,!!t);break;case"style":{let s="",n=Oo(t);Wo(n)&&n.includes("!important")&&(s="important",n=n.replace("!important","")),e.style.setProperty(i,n,s);break}default:null==t?e.removeAttribute(s):e.setAttribute(s,Oo(t))}}handleChange(){if(!this.isBound)return;let t;this.obs.version++;const e=ts(this.ast,this.s,this,(2&this.mode)>0?this:null);this.obs.clear(),e!==this.v&&(this.v=e,1!==this.G.state?(t=this.U,this.U=this.A.queueTask((()=>{this.U=null,this.updateTarget(e)}),ec),t?.cancel()):this.updateTarget(e))}handleCollectionChange(){this.handleChange()}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,ss(this.ast,t,this),3&this.mode&&this.updateTarget(this.v=ts(this.ast,t,this,(2&this.mode)>0?this:null)),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,is(this.ast,this.s,this),this.s=void 0,this.v=void 0,this.U?.cancel(),this.U=null,this.obs.clearAll())}}Eh(sc),Dh(sc,(()=>"updateTarget")),Ai(sc),Ph(!0)(sc);const ic={reusable:!1,preempt:!0};class nc{constructor(t,e,s,i,n,r,o,a){this.ast=n,this.target=r,this.targetProperty=o,this.mode=a,this.isBound=!1,this.s=void 0,this.U=null,this.G=t,this.oL=s,this.A=i,this.X=s.getAccessor(r,o);const h=n.expressions,c=this.partBindings=Array(h.length),l=h.length;let u=0;for(;l>u;++u)c[u]=new rc(h[u],r,o,e,s,this)}K(){this.updateTarget()}updateTarget(){const t=this.partBindings,e=this.ast.parts,s=t.length;let i="",n=0;if(1===s)i=e[0]+t[0].v+e[1];else for(i=e[0];s>n;++n)i+=t[n].v+e[n+1];const r=this.X;let o;1!==this.G.state&&(4&r.type)>0?(o=this.U,this.U=this.A.queueTask((()=>{this.U=null,r.setValue(i,this.target,this.targetProperty)}),ic),o?.cancel(),o=null):r.setValue(i,this.target,this.targetProperty)}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t;const e=this.partBindings,s=e.length;let i=0;for(;s>i;++i)e[i].bind(t);this.updateTarget(),this.isBound=!0}unbind(){if(!this.isBound)return;this.isBound=!1,this.s=void 0;const t=this.partBindings,e=t.length;let s=0;for(;e>s;++s)t[s].unbind();this.U?.cancel(),this.U=null}}class rc{constructor(t,e,s,i,n,r){this.ast=t,this.target=e,this.targetProperty=s,this.owner=r,this.mode=2,this.task=null,this.isBound=!1,this.v="",this.boundFn=!1,this.l=i,this.oL=n}updateTarget(){this.owner.K()}handleChange(){if(!this.isBound)return;this.obs.version++;const t=ts(this.ast,this.s,this,(2&this.mode)>0?this:null);this.obs.clear(),t!=this.v&&(this.v=t,Vo(t)&&this.observeCollection(t),this.updateTarget())}handleCollectionChange(){this.updateTarget()}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,ss(this.ast,t,this),this.v=ts(this.ast,this.s,this,(2&this.mode)>0?this:null),Vo(this.v)&&this.observeCollection(this.v),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,is(this.ast,this.s,this),this.s=void 0,this.obs.clearAll())}}Eh(rc),Dh(rc,(()=>"updateTarget")),Ai(rc),Ph(!0)(rc);const oc={reusable:!1,preempt:!0};class ac{constructor(t,e,s,i,n,r,o){this.p=n,this.ast=r,this.target=o,this.isBound=!1,this.mode=2,this.U=null,this.v="",this.Y=!1,this.boundFn=!1,this.strict=!0,this.l=e,this.G=t,this.oL=s,this.A=i}updateTarget(t){const e=this.target,s=this.v;this.v=t,this.Y&&(s.parentNode?.removeChild(s),this.Y=!1),t instanceof this.p.Node&&(e.parentNode?.insertBefore(t,e),t="",this.Y=!0),e.textContent=Oo(t??"")}handleChange(){if(!this.isBound)return;this.obs.version++;const t=ts(this.ast,this.s,this,(2&this.mode)>0?this:null);if(this.obs.clear(),t===this.v)return this.U?.cancel(),void(this.U=null);1!==this.G.state?this.Z(t):this.updateTarget(t)}handleCollectionChange(){if(!this.isBound)return;this.obs.version++;const t=this.v=ts(this.ast,this.s,this,(2&this.mode)>0?this:null);this.obs.clear(),Vo(t)&&this.observeCollection(t),1!==this.G.state?this.Z(t):this.updateTarget(t)}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,ss(this.ast,t,this);const e=this.v=ts(this.ast,this.s,this,(2&this.mode)>0?this:null);Vo(e)&&this.observeCollection(e),this.updateTarget(e),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,is(this.ast,this.s,this),this.Y&&this.v.parentNode?.removeChild(this.v),this.s=void 0,this.obs.clearAll(),this.U?.cancel(),this.U=null)}Z(t){const e=this.U;this.U=this.A.queueTask((()=>{this.U=null,this.updateTarget(t)}),oc),e?.cancel()}}Eh(ac),Dh(ac,(()=>"updateTarget")),Ai()(ac),Ph(void 0,!1)(ac);class hc{constructor(t,e,s,i,n=!1){this.ast=s,this.targetProperty=i,this.isBound=!1,this.s=void 0,this.target=null,this.boundFn=!1,this.l=t,this.oL=e,this.J=n}updateTarget(){this.target[this.targetProperty]=this.v}handleChange(){this.isBound&&(this.obs.version++,this.v=ts(this.ast,this.s,this,this),this.obs.clear(),this.updateTarget())}handleCollectionChange(){this.handleChange()}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,this.target=this.J?t.bindingContext:t.overrideContext,ss(this.ast,t,this),this.v=ts(this.ast,this.s,this,this),this.updateTarget(),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,is(this.ast,this.s,this),this.s=void 0,this.obs.clearAll())}}Eh(hc),Dh(hc,(()=>"updateTarget")),Ai(hc),Ph(!0)(hc);class cc{constructor(t,e,s,i,n,r,o,a){this.ast=n,this.target=r,this.targetProperty=o,this.mode=a,this.isBound=!1,this.s=void 0,this.X=void 0,this.U=null,this.tt=null,this.boundFn=!1,this.l=e,this.G=t,this.A=i,this.oL=s}updateTarget(t){this.X.setValue(t,this.target,this.targetProperty)}updateSource(t){es(this.ast,this.s,this,t)}handleChange(){if(!this.isBound)return;this.obs.version++;const t=ts(this.ast,this.s,this,(2&this.mode)>0?this:null);this.obs.clear(),1!==this.G.state&&(4&this.X.type)>0?(lc=this.U,this.U=this.A.queueTask((()=>{this.updateTarget(t),this.U=null}),uc),lc?.cancel(),lc=null):this.updateTarget(t)}handleCollectionChange(){this.handleChange()}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,ss(this.ast,t,this);const e=this.oL,s=this.mode;let i=this.X;i||(i=4&s?e.getObserver(this.target,this.targetProperty):e.getAccessor(this.target,this.targetProperty),this.X=i);const n=(2&s)>0;3&s&&this.updateTarget(ts(this.ast,this.s,this,n?this:null)),4&s&&(i.subscribe(this.tt??(this.tt=new Rh(this,this.l.get(Bh)))),n||this.updateSource(i.getValue(this.target,this.targetProperty))),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,is(this.ast,this.s,this),this.s=void 0,this.tt&&(this.X.unsubscribe(this.tt),this.tt=null),this.U?.cancel(),this.U=null,this.obs.clearAll())}useTargetObserver(t){this.X?.unsubscribe(this),(this.X=t).subscribe(this)}useTargetSubscriber(t){if(null!=this.tt)throw ca(9995);this.tt=t}}Eh(cc),Dh(cc,(t=>4&t.mode?"updateSource":"updateTarget")),Ai(cc),Ph(!0,!1)(cc);let lc=null;const uc={reusable:!1,preempt:!0};class dc{constructor(t,e,s){this.ast=e,this.target=s,this.isBound=!1,this.s=void 0,this.l=t}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,ss(this.ast,t,this),es(this.ast,this.s,this,this.target),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,ts(this.ast,this.s,this,null)===this.target&&es(this.ast,this.s,this,null),is(this.ast,this.s,this),this.s=void 0)}}Ph(!1)(dc);class pc{constructor(t,e=!1){this.prevent=t,this.capture=e}}class fc{constructor(t,e,s,i,n){this.ast=e,this.target=s,this.targetEvent=i,this.isBound=!1,this.self=!1,this.boundFn=!0,this.l=t,this.et=n}callSource(t){const e=this.s.overrideContext;e.$event=t;let s=ts(this.ast,this.s,this,null);return delete e.$event,Uo(s)&&(s=s(t)),!0!==s&&this.et.prevent&&t.preventDefault(),s}handleEvent(t){this.self&&this.target!==t.composedPath()[0]||this.callSource(t)}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,ss(this.ast,t,this),this.target.addEventListener(this.targetEvent,this,this.et),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,is(this.ast,this.s,this),this.s=void 0,this.target.removeEventListener(this.targetEvent,this,this.et))}}Eh(fc),Dh(fc,(()=>"callSource")),Ph(!0,!0)(fc);const gc=sa("IViewFactory");class vc{constructor(t,e){this.isCaching=!1,this.it=null,this.st=-1,this.name=e.name,this.container=t,this.def=e}setCacheSize(t,e){t&&("*"===t?t=vc.maxCacheSize:Wo(t)&&(t=parseInt(t,10)),-1!==this.st&&e||(this.st=t)),this.st>0?this.it=[]:this.it=null,this.isCaching=this.st>0}canReturnToCache(t){return null!=this.it&&this.it.length<this.st}tryReturnToCache(t){return!!this.canReturnToCache(t)&&(this.it.push(t),!0)}create(t){const e=this.it;let s;return null!=e&&e.length>0?(s=e.pop(),s):(s=ml.$view(this,t),s)}}vc.maxCacheSize=65535;const mc=(t,e)=>t.document.createComment(e),wc=(t,e,s)=>{if(null===t)return;const i=s.length;let n=0;for(;i>n;)t.insertBefore(s[n],e),++n},yc=(t,e)=>new t.ownerDocument.defaultView.MutationObserver(e),bc=sa("IAuSlotsInfo");class kc{constructor(t){this.projectedSlots=t}}const Cc=sa("IAuSlotWatcher");class Sc{static create(t,e,s,i,n,r,o,a){const h=[],c=i.renderers,l=e=>{let s=e,i=t;for(;null!=i&&s>0;)i=i.parent,--s;if(null==i)throw ca(9999);return i},u=t=>{const i=l(t),d=new Sc(i),p=n.compileSpread(i.controller.definition,i.instruction?.captures??Et,i.controller.container,e,s);let f;for(f of p)switch(f.type){case"hs":u(t+1);break;case"hp":c[f.instructions.type].render(d,dh(e),f.instructions,r,o,a);break;default:c[f.type].render(d,e,f,r,o,a)}h.push(d)};return u(0),h}get container(){return this.locator}get definition(){return this.$controller.definition}get state(){return this.$controller.state}constructor(t){this.ht=t,this.isBound=!1,this.ct=[],this.$controller=t.controller,this.locator=this.$controller.container}get(t){return this.locator.get(t)}bind(t){if(this.isBound)return;this.isBound=!0;const e=this.scope=this.ht.controller.scope.parent??void 0;if(null==e)throw ca(9999);this.ct.forEach((t=>t.bind(e)))}unbind(){this.ct.forEach((t=>t.unbind())),this.isBound=!1}addBinding(t){this.ct.push(t)}addChild(t){if(1!==t.vmKind)throw ca(9998);this.$controller.addChild(t)}}var Tc;!function(t){t.hydrateElement="ra",t.hydrateAttribute="rb",t.hydrateTemplateController="rc",t.hydrateLetElement="rd",t.setProperty="re",t.interpolation="rf",t.propertyBinding="rg",t.letBinding="ri",t.refBinding="rj",t.iteratorBinding="rk",t.multiAttr="rl",t.textBinding="ha",t.listenerBinding="hb",t.attributeBinding="hc",t.stylePropertyBinding="hd",t.setAttribute="he",t.setClassAttribute="hf",t.setStyleAttribute="hg",t.spreadBinding="hs",t.spreadElementProp="hp"}(Tc||(Tc={}));const $c=sa("Instruction");class xc{constructor(t,e,s){this.from=t,this.to=e,this.mode=s,this.type="rg"}}class Ac{constructor(t,e,s){this.forOf=t,this.to=e,this.props=s,this.type="rk"}}class Ic{constructor(t,e){this.from=t,this.to=e,this.type="rj"}}class Oc{constructor(t,e,s){this.value=t,this.to=e,this.command=s,this.type="rl"}}class Rc{constructor(t,e,s,i){this.from=t,this.to=e,this.preventDefault=s,this.capture=i,this.type="hb"}}class Ec{constructor(t,e,s){this.attr=t,this.from=e,this.to=s,this.type="hc"}}class Pc{constructor(){this.type="hs"}}const Nc=sa("ITemplateCompiler"),Mc=sa("IRenderer");function Bc(t){return function(e){return e.register=function(t){ia(Mc,this).register(t)},Ho(e.prototype,"target",{configurable:!0,get:function(){return t}}),e}}function jc(t,e,s){return Wo(e)?t.parse(e,s):e}function Fc(t){return null!=t.viewModel?t.viewModel:t}let Lc=class{render(t,e,s){const i=Fc(e);void 0!==i.$observers?.[s.to]?i.$observers[s.to].setValue(s.value):i[s.to]=s.value}};Lc=mo([Bc("re")],Lc);let Dc=class{constructor(){this.r=Y(ul)}render(t,e,s,i,n,r){let o,a,h,c;const l=s.res,u=s.projections,d=t.container;if("string"==typeof l){if(o=d.find(vh,l),null==o)throw ca(752,s,t)}else o=l;const p=s.containerless||o.containerless?Pa(e):null,f=function(t,e,s,i,n,r){const o=e.container.createChild();return La(o,t,s),aa(o,xl,new Rt(el,e)),aa(o,$c,new Rt(sl,i)),aa(o,Ia,null==n?hl:new al(n)),aa(o,gc,cl),aa(o,bc,null==r?ll:new Rt(nl,r)),o}(i,t,e,s,p,null==u?void 0:new kc(jo(u)));a=o.Type,h=f.invoke(a),aa(f,a,new Rt(o.key,h)),c=ml.$el(f,h,e,s,o,p),xa(e,o.key,c);const g=this.r.renderers,v=s.props,m=v.length;let w,y=0;for(;m>y;)w=v[y],g[w.type].render(t,c,w,i,n,r),++y;t.addChild(c)}};Dc=mo([Bc("ra")],Dc);let Vc=class{constructor(){this.r=Y(ul)}render(t,e,s,i,n,r){let o,a=t.container;if("string"==typeof s.res){if(o=a.find(Ga,s.res),null==o)throw ca(753,s,t)}else o=s.res;const h=ol(i,o,t,e,s,void 0,void 0),c=ml.$attr(h.ctn,h.vm,e,o);xa(e,o.key,c);const l=this.r.renderers,u=s.props,d=u.length;let p,f=0;for(;d>f;)p=u[f],l[p.type].render(t,c,p,i,n,r),++f;t.addChild(c)}};Vc=mo([Bc("rb")],Vc);let Uc=class{constructor(){this.r=Y(ul)}render(t,e,s,i,n,r){let o,a=t.container;if("string"==typeof s.res){if(o=a.find(Ga,s.res),null==o)throw ca(754,s,t)}else o=s.res;const h=this.r.getViewFactory(s.def,a),c=Pa(e),l=ol(i,o,t,e,s,h,c),u=ml.$attr(l.ctn,l.vm,e,o);xa(c,o.key,u),l.vm.link?.(t,u,e,s);const d=this.r.renderers,p=s.props,f=p.length;let g,v=0;for(;f>v;)g=p[v],d[g.type].render(t,u,g,i,n,r),++v;t.addChild(u)}};Uc=mo([Bc("rc")],Uc);let Wc=class{render(t,e,s,i,n,r){e.remove();const o=s.instructions,a=s.toBindingContext,h=t.container,c=o.length;let l,u,d=0;for(;c>d;)l=o[d],u=jc(n,l.from,16),t.addBinding(new hc(h,r,u,l.to,a)),++d}};Wc=mo([Bc("rd")],Wc);let qc=class{render(t,e,s,i,n){t.addBinding(new dc(t.container,jc(n,s.from,16),function(t,e){if("element"===e)return t;switch(e){case"controller":return dh(t);case"view":throw ca(750);case"component":return dh(t).viewModel;default:{const s=Ha(t,e);if(void 0!==s)return s.viewModel;const i=dh(t,{name:e});if(void 0===i)throw ca(751,e);return i.viewModel}}}(e,s.to)))}};qc=mo([Bc("rj")],qc);let _c=class{render(t,e,s,i,n,r){t.addBinding(new nc(t,t.container,r,i.domWriteQueue,jc(n,s.from,1),Fc(e),s.to,2))}};_c=mo([Bc("rf")],_c);let Hc=class{render(t,e,s,i,n,r){t.addBinding(new cc(t,t.container,r,i.domWriteQueue,jc(n,s.from,16),Fc(e),s.to,s.mode))}};Hc=mo([Bc("rg")],Hc);let Kc=class{render(t,e,s,i,n,r){t.addBinding(new cc(t,t.container,r,i.domWriteQueue,jc(n,s.forOf,2),Fc(e),s.to,2))}};Kc=mo([Bc("rk")],Kc);let zc=class{render(t,e,s,i,n,r){t.addBinding(new ac(t,t.container,r,i.domWriteQueue,i,jc(n,s.from,16),e))}};zc=mo([Bc("ha")],zc);let Gc=class{render(t,e,s,i,n){t.addBinding(new fc(t.container,jc(n,s.from,8),e,s.to,new pc(s.preventDefault,s.capture)))}};Gc=mo([Bc("hb")],Gc);let Qc=class{render(t,e,s){e.setAttribute(s.to,s.value)}};Qc=mo([Bc("he")],Qc);let Xc=class{render(t,e,s){!function(t,e){const s=e.length;let i=0;for(let n=0;n<s;++n)32===e.charCodeAt(n)?(n!==i&&t.add(e.slice(i,n)),i=n+1):n+1===s&&t.add(e.slice(i))}(e.classList,s.value)}};Xc=mo([Bc("hf")],Xc);let Zc=class{render(t,e,s){e.style.cssText+=s.value}};Zc=mo([Bc("hg")],Zc);let Yc=class{render(t,e,s,i,n,r){t.addBinding(new cc(t,t.container,r,i.domWriteQueue,jc(n,s.from,16),e.style,s.to,2))}};Yc=mo([Bc("hd")],Yc);let Jc=class{render(t,e,s,i,n,r){const o=t.container,a=o.has(Oa,!1)?o.get(Oa):null;t.addBinding(new sc(t,o,r,i.domWriteQueue,jc(n,s.from,16),e,s.attr,null==a?s.to:s.to.split(/\s/g).map((t=>a[t]??t)).join(" "),2))}};Jc=mo([Bc("hc")],Jc);let tl=class{constructor(){this.ut=Y(Nc),this.r=Y(ul)}render(t,e,s,i,n,r){Sc.create(t.container.get(Al),e,void 0,this.r,this.ut,i,n,r).forEach((e=>t.addBinding(e)))}};tl=mo([Bc("hs")],tl);const el="IController",sl="IInstruction",il="IRenderLocation",nl="ISlotsInfo";class rl{get $isResolver(){return!0}constructor(t){this.f=t}resolve(){const t=this.f;if(null===t)throw ca(755);if(!Wo(t.name)||0===t.name.length)throw ca(756);return t}}function ol(t,e,s,i,n,r,o,a){const h=s instanceof ml?s:s.$controller,c=h.container.createChild();return La(c,t,i),aa(c,xl,new Rt(el,h)),aa(c,$c,new Rt(sl,n)),aa(c,Ia,null==o?hl:new Rt(il,o)),aa(c,gc,null==r?cl:new rl(r)),aa(c,bc,null==a?ll:new Rt(nl,a)),{vm:c.invoke(e.Type),ctn:c}}class al{get name(){return"IRenderLocation"}get $isResolver(){return!0}constructor(t){this.l=t}resolve(){return this.l}}const hl=new al(null),cl=new rl(null),ll=new Rt(nl,new kc(Et)),ul=sa("IRendering",(t=>t.singleton(dl)));class dl{get renderers(){return this.ft??(this.ft=this.dt.getAll(Mc,!1).reduce(((t,e)=>(t[e.target]=e,t)),Eo()))}constructor(){this.gt=new WeakMap,this.vt=new WeakMap;const t=this.dt=Y(wt).root;this.p=t.get(Sa),this.ep=t.get(Ii),this.oL=t.get(io),this.bt=new Ma(this.p,this.p.document.createDocumentFragment())}compile(t,e,s){if(!1!==t.needsCompile){const i=this.gt,n=e.get(Nc);let r=i.get(t);return null==r?i.set(t,r=n.compile(t,e,s)):e.register(...r.dependencies),r}return t}getViewFactory(t,e){return new vc(e,th.getOrCreate(t))}createNodes(t){if(!0===t.enhance)return new Ma(this.p,this.xt(t.template));let e,s=!1;const i=this.vt,n=this.p,r=n.document;if(i.has(t))e=i.get(t);else{const o=t.template;let a;null===o?e=null:o instanceof n.Node?"TEMPLATE"===o.nodeName?(e=o.content,s=!0):(e=r.createDocumentFragment()).appendChild(o.cloneNode(!0)):(a=r.createElement("template"),Wo(o)&&(a.innerHTML=o),e=a.content,s=!0),this.xt(e),i.set(t,e)}return null==e?this.bt:new Ma(this.p,s?r.importNode(e,!0):r.adoptNode(e.cloneNode(!0)))}render(t,e,s,i){const n=s.instructions,r=this.renderers,o=e.length;let a,h,c,l=0,u=0,d=n.length;if(o!==d)throw ca(757,o,d);if(o>0)for(;o>l;){for(a=n[l],c=e[l],u=0,d=a.length;d>u;)h=a[u],r[h.type].render(t,c,h,this.p,this.ep,this.oL),++u;++l}if(null!=i&&(a=s.surrogates,(d=a.length)>0))for(u=0;d>u;)h=a[u],r[h.type].render(t,i,h,this.p,this.ep,this.oL),++u}wt(){return this.p.document.createElement("au-m")}xt(t){if(null==t)return null;let e=t,s=e.firstChild,i=null;for(;null!=s;)if(8===s.nodeType&&"au*"===s.nodeValue&&(i=s.nextSibling,e.removeChild(s),e.insertBefore(this.wt(),i),s=8===i.nodeType?i.nextSibling:i),i=s?.firstChild,null==i)if(i=s?.nextSibling,null==i)for(s=e.nextSibling,e=e.parentNode;null==s&&null!=e;)s=e.nextSibling,e=e.parentNode;else s=i;else e=s,s=i;return t}}var pl;!function(t){t[t.none=0]="none",t[t.host=1]="host",t[t.shadowRoot=2]="shadowRoot",t[t.location=3]="location"}(pl||(pl={}));const fl={optional:!0},gl=(t=>Mo((function t(e,s,i){mt.inject(t)(e,s,i)}),{$isResolver:!0,resolve:(e,s)=>s.has(t,!1)?s.get(t):s.root.has(t,!1)?s.root.get(t):void 0}))(hs),vl=new WeakMap;class ml{get lifecycleHooks(){return this.yt}get isActive(){return(3&this.state)>0&&0==(4&this.state)}get name(){if(null===this.parent)switch(this.vmKind){case 1:return`[${this.definition.name}]`;case 0:return this.definition.name;case 2:return this.viewFactory.name}switch(this.vmKind){case 1:return`${this.parent.name}>[${this.definition.name}]`;case 0:return`${this.parent.name}>${this.definition.name}`;case 2:return this.viewFactory.name===this.parent.definition?.name?`${this.parent.name}[view]`:`${this.parent.name}[view:${this.viewFactory.name}]`}}get viewModel(){return this.kt}set viewModel(t){this.kt=t,this.Ct=null==t||2===this.vmKind?Cl.none:new Cl(t)}constructor(t,e,s,i,n,r,o){this.container=t,this.vmKind=e,this.definition=s,this.viewFactory=i,this.host=r,this.head=null,this.tail=null,this.next=null,this.parent=null,this.bindings=null,this.children=null,this.hasLockedScope=!1,this.scope=null,this.isBound=!1,this.At=!1,this.hostController=null,this.mountTarget=0,this.shadowRoot=null,this.nodes=null,this.location=null,this.yt=null,this.state=0,this.Bt=!1,this.$initiator=null,this.$resolve=void 0,this.$reject=void 0,this.$promise=void 0,this.St=0,this._t=0,this.Rt=0,this.kt=n,this.Ct=2===e?Cl.none:new Cl(n),this.location=o,this.r=t.root.get(ul),this.coercion=2===e?void 0:t.get(gl)}static getCached(t){return vl.get(t)}static getCachedOrThrow(t){const e=ml.getCached(t);if(void 0===e)throw ca(500,t);return e}static $el(t,e,s,i,n=void 0,r=null){if(vl.has(e))return vl.get(e);n=n??fh(e.constructor);const o=new ml(t,0,n,null,e,s,r),a=t.get($t(Al));return n.dependencies.length>0&&t.register(...n.dependencies),aa(t,Al,new Rt("IHydrationContext",new Il(o,i,a))),vl.set(e,o),null!=i&&!1===i.hydrate||o.hE(i,a),o}static $attr(t,e,s,i){if(vl.has(e))return vl.get(e);i=i??za(e.constructor);const n=new ml(t,1,i,null,e,s,null);return i.dependencies.length>0&&t.register(...i.dependencies),vl.set(e,n),n.Tt(),n}static $view(t,e=void 0){const s=new ml(t.container,2,null,t,null,null,null);return s.parent=e??null,s.It(),s}hE(t,e){const s=this.container,i=this.kt;let n=this.definition;if(this.scope=Ze.create(i,null,!0),n.watches.length>0&&kl(this,s,n,i),wl(this,n,i),this.Ct.Et){const t=i.define(this,e,n);void 0!==t&&t!==n&&(n=th.getOrCreate(t))}this.yt=Jh.resolve(s),n.register(s),null!==n.injectable&&aa(s,n.injectable,new Rt("definition.injectable",i)),null!=t&&!1===t.hydrate||(this.hS(t),this.hC())}hS(t){null!=this.yt.hydrating&&this.yt.hydrating.forEach(El,this),this.Ct.Pt&&this.kt.hydrating(this);const e=this.Lt=this.r.compile(this.definition,this.container,t),{shadowOptions:s,hasSlots:i,containerless:n}=e;let r=this.location;if(null!==(this.hostController=dh(this.host,fl))&&(this.host=this.container.root.get(Sa).document.createElement(this.definition.name),n&&null==r&&(r=this.location=Pa(this.host))),xa(this.host,ah,this),xa(this.host,this.definition.key,this),null!==s||i){if(null!=r)throw ca(501);xa(this.shadowRoot=this.host.attachShadow(s??Sl),ah,this),xa(this.shadowRoot,this.definition.key,this),this.mountTarget=2}else null!=r?(xa(r,ah,this),xa(r,this.definition.key,this),this.mountTarget=3):this.mountTarget=1;this.kt.$controller=this,this.nodes=this.r.createNodes(e),void 0!==this.yt.hydrated&&this.yt.hydrated.forEach(Pl,this),this.Ct.Dt&&this.kt.hydrated(this)}hC(){this.r.render(this,this.nodes.findTargets(),this.Lt,this.host),void 0!==this.yt.created&&this.yt.created.forEach(Rl,this),this.Ct.Mt&&this.kt.created(this)}Tt(){const t=this.definition,e=this.kt;t.watches.length>0&&kl(this,this.container,t,e),wl(this,t,e),e.$controller=this,this.yt=Jh.resolve(this.container),void 0!==this.yt.created&&this.yt.created.forEach(Rl,this),this.Ct.Mt&&this.kt.created(this)}It(){this.Lt=this.r.compile(this.viewFactory.def,this.container,null),this.r.render(this,(this.nodes=this.r.createNodes(this.Lt)).findTargets(),this.Lt,void 0)}activate(t,e,s){switch(this.state){case 0:case 8:if(null!==e&&!e.isActive)return;this.state=1;break;case 2:return;case 32:throw ca(502,this.name);default:throw ca(503,this.name,function(t){const e=[];return 1==(1&t)&&e.push("activating"),2==(2&t)&&e.push("activated"),4==(4&t)&&e.push("deactivating"),8==(8&t)&&e.push("deactivated"),16==(16&t)&&e.push("released"),32==(32&t)&&e.push("disposed"),0===e.length?"none":e.join("|")}(this.state))}switch(this.parent=e,this.vmKind){case 0:this.scope.parent=s??null;break;case 1:this.scope=s??null;break;case 2:if(null==s)throw ca(504,this.name);this.hasLockedScope||(this.scope=s)}let i;return this.$initiator=t,this.qt(),2!==this.vmKind&&null!=this.yt.binding&&(i=O(...this.yt.binding.map(Nl,this))),this.Ct.Ft&&(i=O(i,this.kt.binding(this.$initiator,this.parent))),Do(i)?(this.Ht(),i.then((()=>{this.At=!0,1!==this.state?this.Ot():this.bind()})).catch((t=>{this.Vt(t)})),this.$promise):(this.At=!0,this.bind(),this.$promise)}bind(){let t,e=0,s=0;if(null!==this.bindings)for(e=0,s=this.bindings.length;s>e;)this.bindings[e].bind(this.scope),++e;if(2!==this.vmKind&&null!=this.yt.bound&&(t=O(...this.yt.bound.map(Ml,this))),this.Ct.Nt&&(t=O(t,this.kt.bound(this.$initiator,this.parent))),Do(t))return this.Ht(),void t.then((()=>{this.isBound=!0,1!==this.state?this.Ot():this.$t()})).catch((t=>{this.Vt(t)}));this.isBound=!0,this.$t()}Wt(...t){switch(this.mountTarget){case 1:this.host.append(...t);break;case 2:this.shadowRoot.append(...t);break;case 3:{let e=0;for(;e<t.length;++e)this.location.parentNode.insertBefore(t[e],this.location);break}}}$t(){if(null!==this.hostController)switch(this.mountTarget){case 1:case 2:this.hostController.Wt(this.host);break;case 3:this.hostController.Wt(this.location.$start,this.location)}switch(this.mountTarget){case 1:this.nodes.appendTo(this.host,null!=this.definition&&this.definition.enhance);break;case 2:{const t=this.container;(t.has(Th,!1)?t.get(Th):t.get($h)).applyTo(this.shadowRoot),this.nodes.appendTo(this.shadowRoot);break}case 3:this.nodes.insertBefore(this.location)}let t,e=0;if(2!==this.vmKind&&null!=this.yt.attaching&&(t=O(...this.yt.attaching.map(Bl,this))),this.Ct.jt&&(t=O(t,this.kt.attaching(this.$initiator,this.parent))),Do(t)&&(this.Ht(),this.qt(),t.then((()=>{this.Ot()})).catch((t=>{this.Vt(t)}))),null!==this.children)for(;e<this.children.length;++e)this.children[e].activate(this.$initiator,this,this.scope);this.Ot()}deactivate(t,e){let s;switch(-17&this.state){case 2:this.state=4;break;case 1:this.state=4,s=this.$promise?.catch(Nt);break;case 0:case 8:case 32:case 40:return;default:throw ca(505,this.name,this.state)}this.$initiator=t,t===this&&this.zt();let i,n=0;if(null!==this.children)for(n=0;n<this.children.length;++n)this.children[n].deactivate(t,this);return I(s,(()=>{if(this.isBound&&(2!==this.vmKind&&null!=this.yt.detaching&&(i=O(...this.yt.detaching.map(Fl,this))),this.Ct.Ut&&(i=O(i,this.kt.detaching(this.$initiator,this.parent)))),Do(i)&&(this.Ht(),t.zt(),i.then((()=>{t.Gt()})).catch((e=>{t.Vt(e)}))),null===t.head?t.head=this:t.tail.next=this,t.tail=this,t===this)return this.Gt(),this.$promise}))}removeNodes(){switch(this.vmKind){case 0:case 2:this.nodes.remove(),this.nodes.unlink()}if(null!==this.hostController)switch(this.mountTarget){case 1:case 2:this.host.remove();break;case 3:this.location.$start.remove(),this.location.remove()}}unbind(){let t=0;if(null!==this.bindings)for(;t<this.bindings.length;++t)this.bindings[t].unbind();switch(this.parent=null,this.vmKind){case 1:this.scope=null;break;case 2:this.hasLockedScope||(this.scope=null),16!=(16&this.state)||this.viewFactory.tryReturnToCache(this)||this.$initiator!==this||this.dispose();break;case 0:this.scope.parent=null}this.state=8,this.$initiator=null,this.Xt()}Ht(){void 0===this.$promise&&(this.$promise=new Promise(((t,e)=>{this.$resolve=t,this.$reject=e})),this.$initiator!==this&&this.parent.Ht())}Xt(){void 0!==this.$promise&&(Dl=this.$resolve,this.$resolve=this.$reject=this.$promise=void 0,Dl(),Dl=void 0)}Vt(t){void 0!==this.$promise&&(Vl=this.$reject,this.$resolve=this.$reject=this.$promise=void 0,Vl(t),Vl=void 0),this.$initiator!==this&&this.parent.Vt(t)}qt(){++this.St,this.$initiator!==this&&this.parent.qt()}Ot(){if(1!==this.state)return--this.St,this.Xt(),void(this.$initiator!==this&&this.parent.Ot());if(0==--this.St){if(2!==this.vmKind&&null!=this.yt.attached&&(Ul=O(...this.yt.attached.map(jl,this))),this.Ct.Qt&&(Ul=O(Ul,this.kt.attached(this.$initiator))),Do(Ul))return this.Ht(),Ul.then((()=>{this.state=2,this.Xt(),this.$initiator!==this&&this.parent.Ot()})).catch((t=>{this.Vt(t)})),void(Ul=void 0);Ul=void 0,this.state=2,this.Xt()}this.$initiator!==this&&this.parent.Ot()}zt(){++this._t}Gt(){if(0==--this._t){this.Kt(),this.removeNodes();let t,e=this.$initiator.head;for(;null!==e;)e!==this&&(e.debug&&e.logger.trace("detach()"),e.removeNodes()),e.At&&(2!==e.vmKind&&null!=e.yt.unbinding&&(t=O(...e.yt.unbinding.map(Ll,e))),e.Ct.Yt&&(e.debug&&e.logger.trace("unbinding()"),t=O(t,e.viewModel.unbinding(e.$initiator,e.parent)))),Do(t)&&(this.Ht(),this.Kt(),t.then((()=>{this.Zt()})).catch((t=>{this.Vt(t)}))),t=void 0,e=e.next;this.Zt()}}Kt(){++this.Rt}Zt(){if(0==--this.Rt){let t=this.$initiator.head,e=null;for(;null!==t;)t!==this&&(t.At=!1,t.isBound=!1,t.unbind()),e=t.next,t.next=null,t=e;this.head=this.tail=null,this.At=!1,this.isBound=!1,this.unbind()}}addBinding(t){null===this.bindings?this.bindings=[t]:this.bindings[this.bindings.length]=t}addChild(t){null===this.children?this.children=[t]:this.children[this.children.length]=t}is(t){switch(this.vmKind){case 1:return za(this.kt.constructor).name===t;case 0:return fh(this.kt.constructor).name===t;case 2:return this.viewFactory.name===t}}lockScope(t){this.scope=t,this.hasLockedScope=!0}setHost(t){return 0===this.vmKind&&(xa(t,ah,this),xa(t,this.definition.key,this)),this.host=t,this.mountTarget=1,this}setShadowRoot(t){return 0===this.vmKind&&(xa(t,ah,this),xa(t,this.definition.key,this)),this.shadowRoot=t,this.mountTarget=2,this}setLocation(t){return 0===this.vmKind&&(xa(t,ah,this),xa(t,this.definition.key,this)),this.location=t,this.mountTarget=3,this}release(){this.state|=16}dispose(){32!=(32&this.state)&&(this.state|=32,this.Ct.Jt&&this.kt.dispose(),null!==this.children&&(this.children.forEach(Ol),this.children=null),this.hostController=null,this.scope=null,this.nodes=null,this.location=null,this.viewFactory=null,null!==this.kt&&(vl.delete(this.kt),this.kt=null),this.kt=null,this.host=null,this.shadowRoot=null,this.container.disposeResolvers())}accept(t){if(!0===t(this))return!0;if(this.Ct.te&&!0===this.kt.accept(t))return!0;if(null!==this.children){const{children:e}=this;for(let s=0,i=e.length;s<i;++s)if(!0===e[s].accept(t))return!0}}}function wl(t,e,s){const i=e.bindables,n=Bo(i),r=n.length,o=t.container.get(io);if(r>0)for(let e=0;e<r;++e){const r=n[e],a=i[r],h=a.callback,c=o.getObserver(s,r);if(a.set!==Nt&&!0!==c.useCoercer?.(a.set,t.coercion))throw ca(507,r);if(null!=s[h]||null!=s.propertyChanged){const e=(e,i)=>{t.isBound&&(s[h]?.(e,i),s.propertyChanged?.(r,e,i))};if(!0!==c.useCallback?.(e))throw ca(508,r)}}}const yl=new Map,bl=t=>{let e=yl.get(t);return null==e&&(e=new xe(t,0),yl.set(t,e)),e};function kl(t,e,s,i){const n=e.get(io),r=e.get(Ii),o=s.watches,a=0===t.vmKind?t.scope:Ze.create(i,null,!0),h=o.length;let c,l,u,d=0;for(;h>d;++d){if(({expression:c,callback:l}=o[d]),l=Uo(l)?l:Reflect.get(i,l),!Uo(l))throw ca(506,l);Uo(c)?t.addBinding(new Kh(i,n,c,l,!0)):(u=Wo(c)?r.parse(c,16):bl(c),t.addBinding(new zh(a,e,n,u,l)))}}class Cl{constructor(t){this.Et="define"in t,this.Pt="hydrating"in t,this.Dt="hydrated"in t,this.Mt="created"in t,this.Ft="binding"in t,this.Nt="bound"in t,this.jt="attaching"in t,this.Qt="attached"in t,this.Ut="detaching"in t,this.Yt="unbinding"in t,this.Jt="dispose"in t,this.te="accept"in t}}Cl.none=new Cl({});const Sl={mode:"open"};var Tl,$l;!function(t){t[t.customElement=0]="customElement",t[t.customAttribute=1]="customAttribute",t[t.synthetic=2]="synthetic"}(Tl||(Tl={})),function(t){t[t.none=0]="none",t[t.activating=1]="activating",t[t.activated=2]="activated",t[t.deactivating=4]="deactivating",t[t.deactivated=8]="deactivated",t[t.released=16]="released",t[t.disposed=32]="disposed"}($l||($l={}));const xl=sa("IController"),Al=sa("IHydrationContext");class Il{constructor(t,e,s){this.instruction=e,this.parent=s,this.controller=t}}function Ol(t){t.dispose()}function Rl(t){t.instance.created(this.kt,this)}function El(t){t.instance.hydrating(this.kt,this)}function Pl(t){t.instance.hydrated(this.kt,this)}function Nl(t){return t.instance.binding(this.kt,this.$initiator,this.parent)}function Ml(t){return t.instance.bound(this.kt,this.$initiator,this.parent)}function Bl(t){return t.instance.attaching(this.kt,this.$initiator,this.parent)}function jl(t){return t.instance.attached(this.kt,this.$initiator)}function Fl(t){return t.instance.detaching(this.kt,this.$initiator,this.parent)}function Ll(t){return t.instance.unbinding(this.kt,this.$initiator,this.parent)}let Dl,Vl,Ul;const Wl=sa("IAppRoot");class ql{constructor(t,e,s,i){if(this.chars=t,this.repeat=e,this.isSymbol=s,this.isInverted=i,i)switch(t.length){case 0:this.has=this.ue;break;case 1:this.has=this.fe;break;default:this.has=this.de}else switch(t.length){case 0:this.has=this.me;break;case 1:this.has=this.ge;break;default:this.has=this.pe}}equals(t){return this.chars===t.chars&&this.repeat===t.repeat&&this.isSymbol===t.isSymbol&&this.isInverted===t.isInverted}pe(t){return this.chars.includes(t)}ge(t){return this.chars===t}me(t){return!1}de(t){return!this.chars.includes(t)}fe(t){return this.chars!==t}ue(t){return!0}}class _l{constructor(){this.parts=Et,this.ve="",this.be={},this.xe={}}get pattern(){const t=this.ve;return""===t?null:t}set pattern(t){null==t?(this.ve="",this.parts=Et):(this.ve=t,this.parts=this.xe[t])}append(t,e){const s=this.be;void 0===s[t]?s[t]=e:s[t]+=e}next(t){const e=this.be;let s;void 0!==e[t]&&(s=this.xe,void 0===s[t]?s[t]=[e[t]]:s[t].push(e[t]),e[t]=void 0)}}class Hl{get ve(){return this.we?this.ye[0]:null}constructor(t,...e){this.charSpec=t,this.ke=[],this.Ce=null,this.we=!1,this.ye=e}findChild(t){const e=this.ke,s=e.length;let i=null,n=0;for(;n<s;++n)if(i=e[n],t.equals(i.charSpec))return i;return null}append(t,e){const s=this.ye;s.includes(e)||s.push(e);let i=this.findChild(t);return null==i&&(i=new Hl(t,e),this.ke.push(i),t.repeat&&i.ke.push(i)),i}findMatches(t,e){const s=[],i=this.ke,n=i.length;let r=0,o=null,a=0,h=0;for(;a<n;++a)if(o=i[a],o.charSpec.has(t))if(s.push(o),r=o.ye.length,h=0,o.charSpec.isSymbol)for(;h<r;++h)e.next(o.ye[h]);else for(;h<r;++h)e.append(o.ye[h],t);return s}}class Kl{constructor(t){this.text=t;const e=this.Ae=t.length,s=this.Be=[];let i=0;for(;e>i;++i)s.push(new ql(t[i],!1,!1,!1))}eachChar(t){const e=this.Ae,s=this.Be;let i=0;for(;e>i;++i)t(s[i])}}class zl{constructor(t){this.text="PART",this.Se=new ql(t,!0,!1,!0)}eachChar(t){t(this.Se)}}class Gl{constructor(t){this.text=t,this.Se=new ql(t,!1,!0,!1)}eachChar(t){t(this.Se)}}class Ql{constructor(){this.statics=0,this.dynamics=0,this.symbols=0}}const Xl=sa("ISyntaxInterpreter",(t=>t.singleton(Zl)));class Zl{constructor(){this._e=new Hl(null),this.Re=[this._e]}add(t){t=t.slice(0).sort(((t,e)=>t.pattern>e.pattern?1:-1));const e=t.length;let s,i,n,r,o,a,h,c,l=0;for(;e>l;){for(s=this._e,i=t[l],n=i.pattern,r=new Ql,o=this.Te(i,r),a=o.length,h=t=>s=s.append(t,n),c=0;a>c;++c)o[c].eachChar(h);s.Ce=r,s.we=!0,++l}}interpret(t){const e=new _l,s=t.length;let i,n=this.Re,r=0;for(;r<s&&(n=this.Ie(n,t.charAt(r),e),0!==n.length);++r);return n=n.filter(Yl),n.length>0&&(n.sort(Jl),i=n[0],i.charSpec.isSymbol||e.next(i.ve),e.pattern=i.ve),e}Ie(t,e,s){const i=[];let n=null;const r=t.length;let o=0;for(;o<r;++o)n=t[o],i.push(...n.findMatches(e,s));return i}Te(t,e){const s=[],i=t.pattern,n=i.length,r=t.symbols;let o=0,a=0,h="";for(;o<n;)h=i.charAt(o),0!==r.length&&r.includes(h)?o!==a?(s.push(new Kl(i.slice(a,o))),++e.statics,a=o):(s.push(new Gl(i.slice(a,o+1))),++e.symbols,a=++o):o===a&&"P"===h&&"PART"===i.slice(o,o+4)?(a=o+=4,s.push(new zl(r)),++e.dynamics):++o;return a!==o&&(s.push(new Kl(i.slice(a,o))),++e.statics),s}}function Yl(t){return t.we}function Jl(t,e){const s=t.Ce,i=e.Ce;return s.statics!==i.statics?i.statics-s.statics:s.dynamics!==i.dynamics?i.dynamics-s.dynamics:s.symbols!==i.symbols?i.symbols-s.symbols:0}class tu{constructor(t,e,s,i){this.rawName=t,this.rawValue=e,this.target=s,this.command=i}}const eu=sa("IAttributePattern"),su=sa("IAttributeParser",(t=>t.singleton(iu)));class iu{constructor(t,e){this.it={},this.Ee=t;const s=this.ye={},i=e.reduce(((t,e)=>{const i=hu(e.constructor);return i.forEach((t=>s[t.pattern]=e)),t.concat(i)}),Et);t.add(i)}parse(t,e){let s=this.it[t];null==s&&(s=this.it[t]=this.Ee.interpret(t));const i=s.pattern;return null==i?new tu(t,e,t,null):this.ye[i][i](t,e,s.parts)}}function nu(...t){return function(e){return cu.define(t,e)}}iu.inject=[Xl,Tt(eu)];class ru{constructor(t){this.Type=t,this.name=void 0}register(t){ia(eu,this.Type).register(t)}}const ou=To("attribute-pattern"),au="attribute-pattern-definitions",hu=t=>D.annotation.get(t,au),cu=No({name:ou,definitionAnnotationKey:au,define(t,e){const s=new ru(e);return bo(ou,s,e),$o(e,ou),D.annotation.set(e,au,t),xo(e,au),e},getPatternDefinitions:hu});let lu=class{"PART.PART"(t,e,s){return new tu(t,e,s[0],s[1])}"PART.PART.PART"(t,e,s){return new tu(t,e,`${s[0]}.${s[1]}`,s[2])}};lu=mo([nu({pattern:"PART.PART",symbols:"."},{pattern:"PART.PART.PART",symbols:"."})],lu);let uu=class{ref(t,e,s){return new tu(t,e,"element","ref")}"PART.ref"(t,e,s){let i=s[0];return"view-model"===i&&(i="component"),new tu(t,e,i,"ref")}};uu=mo([nu({pattern:"ref",symbols:""},{pattern:"PART.ref",symbols:"."})],uu);let du=class{":PART"(t,e,s){return new tu(t,e,s[0],"bind")}};du=mo([nu({pattern:":PART",symbols:":"})],du);let pu=class{"@PART"(t,e,s){return new tu(t,e,s[0],"trigger")}};pu=mo([nu({pattern:"@PART",symbols:"@"})],pu);let fu=class{"...$attrs"(t,e,s){return new tu(t,e,"","...$attrs")}};var gu;function vu(t){return function(e){return ku.define(t,e)}}fu=mo([nu({pattern:"...$attrs",symbols:""})],fu),function(t){t[t.None=0]="None",t[t.IgnoreAttr=1]="IgnoreAttr"}(gu||(gu={}));class mu{constructor(t,e,s,i,n){this.Type=t,this.name=e,this.aliases=s,this.key=i,this.type=n}static create(t,e){let s,i;return Wo(t)?(s=t,i={name:s}):(s=t.name,i=t),new mu(e,T(bu(e,"name"),s),S(bu(e,"aliases"),i.aliases,e.aliases),yu(s),T(bu(e,"type"),i.type,e.type,null))}register(t){const{Type:e,key:s,aliases:i}=this;ia(s,e).register(t),na(s,e).register(t),ha(i,ku,s,t)}}const wu=To("binding-command"),yu=t=>`${wu}:${t}`,bu=(t,e)=>wo(So(e),t),ku=No({name:wu,keyFrom:yu,define(t,e){const s=mu.create(t,e);return bo(wu,s,s.Type),bo(wu,s,s),$o(e,wu),s.Type},getAnnotation:bu});let Cu=class{get type(){return 0}build(t,e,s){let i=t.attr.target,n=t.attr.rawValue;return null==t.bindable?i=s.map(t.node,i)??y(i):(""===n&&1===t.def.type&&(n=y(i)),i=t.bindable.name),new xc(e.parse(n,16),i,1)}};Cu=mo([vu("one-time")],Cu);let Su=class{get type(){return 0}build(t,e,s){let i=t.attr.target,n=t.attr.rawValue;return null==t.bindable?i=s.map(t.node,i)??y(i):(""===n&&1===t.def.type&&(n=y(i)),i=t.bindable.name),new xc(e.parse(n,16),i,2)}};Su=mo([vu("to-view")],Su);let Tu=class{get type(){return 0}build(t,e,s){const i=t.attr;let n=i.target,r=i.rawValue;return null==t.bindable?n=s.map(t.node,n)??y(n):(""===r&&1===t.def.type&&(r=y(n)),n=t.bindable.name),new xc(e.parse(r,16),n,4)}};Tu=mo([vu("from-view")],Tu);let $u=class{get type(){return 0}build(t,e,s){const i=t.attr;let n=i.target,r=i.rawValue;return null==t.bindable?n=s.map(t.node,n)??y(n):(""===r&&1===t.def.type&&(r=y(n)),n=t.bindable.name),new xc(e.parse(r,16),n,6)}};$u=mo([vu("two-way")],$u);let xu=class{get type(){return 0}build(t,e,s){const i=t.attr,n=t.bindable;let r,o,a=i.target,h=i.rawValue;return null==n?(o=s.isTwoWay(t.node,a)?6:2,a=s.map(t.node,a)??y(a)):(""===h&&1===t.def.type&&(h=y(a)),r=t.def.defaultBindingMode,o=8===n.mode||null==n.mode?null==r||8===r?2:r:n.mode,a=n.name),new xc(e.parse(h,16),a,o)}};xu=mo([vu("bind")],xu);let Au=class{get type(){return 0}static get inject(){return[su]}constructor(t){this.Pe=t}build(t,e){const s=null===t.bindable?y(t.attr.target):t.bindable.name,i=e.parse(t.attr.rawValue,2);let n=Et;if(i.semiIdx>-1){const e=t.attr.rawValue.slice(i.semiIdx+1),s=e.indexOf(":");if(s>-1){const t=e.slice(0,s).trim(),i=e.slice(s+1).trim(),r=this.Pe.parse(t,i);n=[new Oc(i,r.target,r.command)]}}return new Ac(i,s,n)}};Au=mo([vu("for")],Au);let Iu=class{get type(){return 1}build(t,e){return new Rc(e.parse(t.attr.rawValue,8),t.attr.target,!0,!1)}};Iu=mo([vu("trigger")],Iu);let Ou=class{get type(){return 1}build(t,e){return new Rc(e.parse(t.attr.rawValue,8),t.attr.target,!1,!0)}};Ou=mo([vu("capture")],Ou);let Ru=class{get type(){return 1}build(t,e){return new Ec(t.attr.target,e.parse(t.attr.rawValue,16),t.attr.target)}};Ru=mo([vu("attr")],Ru);let Eu=class{get type(){return 1}build(t,e){return new Ec("style",e.parse(t.attr.rawValue,16),t.attr.target)}};Eu=mo([vu("style")],Eu);let Pu=class{get type(){return 1}build(t,e){return new Ec("class",e.parse(t.attr.rawValue,16),t.attr.target)}};Pu=mo([vu("class")],Pu);let Nu=class{get type(){return 1}build(t,e){return new Ic(e.parse(t.attr.rawValue,16),t.attr.target)}};Nu=mo([vu("ref")],Nu);let Mu=class{get type(){return 1}build(t){return new Pc}};Mu=mo([vu("...$attrs")],Mu);const Bu=sa("ISVGAnalyzer",(t=>t.singleton(ju)));class ju{isStandardSvgAttribute(t,e){return!1}}var Fu;!function(t){t[t.oneTime=1]="oneTime",t[t.toView=2]="toView",t[t.fromView=4]="fromView",t[t.twoWay=6]="twoWay",t[t.default=8]="default"}(Fu||(Fu={}));const Lu=Eo();class Du{static forNs(t){return Lu[t]??(Lu[t]=new Du(t))}constructor(t){this.ns=t,this.type=6}getValue(t,e){return t.getAttributeNS(this.ns,e)}setValue(t,e,s){null==t?e.removeAttributeNS(this.ns,s):e.setAttributeNS(this.ns,s,t)}}bh(Du);class Vu{constructor(){this.type=6}getValue(t,e){return t.getAttribute(e)}setValue(t,e,s){null==t?e.removeAttribute(s):e.setAttribute(s,t)}}bh(Vu);const Uu=new Vu,Wu={childList:!0,subtree:!0,characterData:!0};function qu(t,e){return t===e}class _u{constructor(t,e,s,i){this.type=7,this.v=void 0,this.ov=void 0,this.He=!1,this.Oe=void 0,this.Ve=void 0,this.iO=!1,this.L=!1,this.P=t,this.oL=i,this.cf=s}getValue(){return this.iO?this.v:this.P.multiple?function(t){const e=[];if(0===t.length)return e;const s=t.length;let i,n=0;for(;s>n;)i=t[n],i.selected&&(e[e.length]=Po.call(i,"model")?i.model:i.value),++n;return e}(this.P.options):this.P.value}setValue(t){this.ov=this.v,this.v=t,this.He=t!==this.ov,this.Ne(t instanceof Array?t:null),this.O()}O(){this.He&&(this.He=!1,this.syncOptions())}handleCollectionChange(){this.syncOptions()}syncOptions(){const t=this.v,e=this.P,s=Vo(t),i=e.matcher??qu,n=e.options;let r=n.length;for(;r-- >0;){const e=n[r],o=Po.call(e,"model")?e.model:e.value;e.selected=s?-1!==t.findIndex((t=>!!i(o,t))):!!i(o,t)}}syncValue(){const t=this.P,e=t.options,s=e.length,i=this.v;let n=0;if(t.multiple){if(!(i instanceof Array))return!0;let r;const o=t.matcher||qu,a=[];for(;n<s;)r=e[n],r.selected&&a.push(Po.call(r,"model")?r.model:r.value),++n;let h;for(n=0;n<i.length;)h=i[n],-1===a.findIndex((t=>!!o(h,t)))?i.splice(n,1):++n;for(n=0;n<a.length;)h=a[n],-1===i.findIndex((t=>!!o(h,t)))&&i.push(h),++n;return!1}let r,o=null;for(;n<s;){if(r=e[n],r.selected){o=Po.call(r,"model")?r.model:r.value;break}++n}return this.ov=this.v,this.v=o,!0}M(){(this.Ve=yc(this.P,this.$e.bind(this))).observe(this.P,Wu),this.Ne(this.v instanceof Array?this.v:null),this.iO=!0}q(){this.Ve.disconnect(),this.Oe?.unsubscribe(this),this.Ve=this.Oe=void 0,this.iO=!1}Ne(t){if(this.Oe?.unsubscribe(this),this.Oe=void 0,null!=t){if(!this.P.multiple)throw new Error("AUR0654");(this.Oe=this.oL.getArrayObserver(t)).subscribe(this)}}handleEvent(){this.syncValue()&&this.We()}$e(t){this.syncOptions(),this.syncValue()&&this.We()}We(){Hu=this.ov,this.ov=this.v,this.subs.notify(this.v,Hu)}}let Hu,Ku;yh(_u),ds(_u);class zu{constructor(t){this.obj=t,this.type=6,this.v="",this.ov="",this.styles={},this.version=0,this.He=!1}getValue(){return this.obj.style.cssText}setValue(t){this.v=t,this.He=t!==this.ov,this.O()}je(t){const e=[],s=/url\([^)]+$/;let i,n,r,o,a=0,h="";for(;a<t.length;)i=t.indexOf(";",a),-1===i&&(i=t.length),h+=t.substring(a,i),a=i+1,s.test(h)?h+=";":(n=h.indexOf(":"),r=h.substring(0,n).trim(),o=h.substring(n+1).trim(),e.push([r,o]),h="");return e}ze(t){let e,s;const i=[];for(s in t)if(e=t[s],null!=e)if(Wo(e)){if(s.startsWith("--")){i.push([s,e]);continue}i.push([k(s),e])}else i.push(...this.Ue(e));return i}Ge(t){const e=t.length;if(e>0){const s=[];let i=0;for(;e>i;++i)s.push(...this.Ue(t[i]));return s}return Et}Ue(t){return Wo(t)?this.je(t):t instanceof Array?this.Ge(t):t instanceof Object?this.ze(t):Et}O(){if(this.He){this.He=!1;const t=this.v,e=this.styles,s=this.Ue(t);let i,n,r,o,a=this.version;this.ov=t;let h=0;const c=s.length;for(;h<c;++h)n=s[h],r=n[0],o=n[1],this.setProperty(r,o),e[r]=a;if(this.styles=e,this.version+=1,0===a)return;for(i in a-=1,e)Po.call(e,i)&&e[i]===a&&this.obj.style.removeProperty(i)}}setProperty(t,e){let s="";null!=e&&Uo(e.indexOf)&&e.includes("!important")&&(s="important",e=e.replace("!important","")),this.obj.style.setProperty(t,e,s)}bind(){this.v=this.ov=this.obj.style.cssText}}bh(zu);class Gu{constructor(t,e,s){this.type=7,this.v="",this.ov="",this.He=!1,this.L=!1,this.P=t,this.k=e,this.cf=s}getValue(){return this.v}setValue(t){_o(t,this.v)||(this.ov=this.v,this.v=t,this.He=!0,this.cf.readonly||this.O())}O(){this.He&&(this.He=!1,this.P[this.k]=this.v??this.cf.default,this.We())}handleEvent(){this.ov=this.v,this.v=this.P[this.k],this.ov!==this.v&&(this.He=!1,this.We())}M(){this.v=this.ov=this.P[this.k]}We(){Ku=this.ov,this.ov=this.v,this.subs.notify(this.v,Ku)}}yh(Gu),ds(Gu);const Qu="http://www.w3.org/1999/xlink",Xu="http://www.w3.org/XML/1998/namespace",Zu="http://www.w3.org/2000/xmlns/",Yu=Mo(Eo(),{"xlink:actuate":["actuate",Qu],"xlink:arcrole":["arcrole",Qu],"xlink:href":["href",Qu],"xlink:role":["role",Qu],"xlink:show":["show",Qu],"xlink:title":["title",Qu],"xlink:type":["type",Qu],"xml:lang":["lang",Xu],"xml:space":["space",Xu],xmlns:["xmlns",Zu],"xmlns:xlink":["xlink",Zu]}),Ju=new Jr;Ju.type=6;class td{constructor(){this.allowDirtyCheck=!0,this.Xe=Eo(),this.Qe=Eo(),this.Ke=Eo(),this.Ye=Eo(),this.Ze=Y(yt),this.p=Y(Sa),this.Je=Y(Zr),this.svg=Y(Bu);const t=["change","input"],e={events:t,default:""};this.useConfig({INPUT:{value:e,valueAsNumber:{events:t,default:0},checked:{type:id,events:t},files:{events:t,readonly:!0}},SELECT:{value:{type:_u,events:["change"],default:""}},TEXTAREA:{value:e}});const s={events:["change","input","blur","keyup","paste"],default:""},i={events:["scroll"],default:0};this.useConfigGlobal({scrollTop:i,scrollLeft:i,textContent:s,innerHTML:s}),this.overrideAccessorGlobal("css","style","class"),this.overrideAccessor({INPUT:["value","checked","model"],SELECT:["value"],TEXTAREA:["value"]})}static register(t){na(no,td).register(t),ia(no,td).register(t)}handles(t,e){return t instanceof this.p.Node}useConfig(t,e,s){const i=this.Xe;let n;if(Wo(t))n=i[t]??(i[t]=Eo()),null==n[e]?n[e]=s:ed(t,e);else for(const s in t){n=i[s]??(i[s]=Eo());const r=t[s];for(e in r)null==n[e]?n[e]=r[e]:ed(s,e)}}useConfigGlobal(t,e){const s=this.Qe;if("object"==typeof t)for(const e in t)null==s[e]?s[e]=t[e]:ed("*",e);else null==s[t]?s[t]=e:ed("*",t)}getAccessor(t,e,s){if(e in this.Ye||e in(this.Ke[t.tagName]??Pt))return this.getObserver(t,e,s);switch(e){case"src":case"href":case"role":case"minLength":case"maxLength":case"placeholder":case"size":case"pattern":case"title":case"popovertarget":case"popovertargetaction":return Uu;default:{const s=Yu[e];return void 0!==s?Du.forNs(s[1]):Lo(t,e,this.svg)?Uu:Ju}}}overrideAccessor(t,e){var s,i;let n;if(Wo(t))n=(s=this.Ke)[t]??(s[t]=Eo()),n[e]=!0;else for(const e in t)for(const s of t[e])n=(i=this.Ke)[e]??(i[e]=Eo()),n[s]=!0}overrideAccessorGlobal(...t){for(const e of t)this.Ye[e]=!0}getNodeObserverConfig(t,e){return this.Xe[t.tagName]?.[e]??this.Qe[e]}getNodeObserver(t,e,s){const i=this.Xe[t.tagName]?.[e]??this.Qe[e];let n;return null!=i?(n=new(i.type??Gu)(t,e,i,s,this.Ze),n.doNotCache||(co(t)[e]=n),n):null}getObserver(t,e,s){switch(e){case"class":return new kh(t);case"css":case"style":return new zu(t)}const i=this.getNodeObserver(t,e,s);if(null!=i)return i;const n=Yu[e];if(void 0!==n)return Du.forNs(n[1]);if(Lo(t,e,this.svg))return Uu;if(e in t.constructor.prototype){if(this.allowDirtyCheck)return this.Je.createProperty(t,e);throw ca(652,e)}return new to(t,e)}}function ed(t,e){throw ca(653,t,e)}function sd(t,e){return t===e}td.inject=[yt,Sa,Zr,Bu];class id{constructor(t,e,s,i){this.type=7,this.v=void 0,this.ov=void 0,this.ti=void 0,this.ei=void 0,this.L=!1,this.P=t,this.oL=i,this.cf=s}getValue(){return this.v}setValue(t){const e=this.v;t!==e&&(this.v=t,this.ov=e,this.ii(),this.si(),this.We())}handleCollectionChange(){this.si()}handleChange(t,e){this.si()}si(){const t=this.v,e=this.P,s=Po.call(e,"model")?e.model:e.value,i="radio"===e.type,n=void 0!==e.matcher?e.matcher:sd;if(i)e.checked=!!n(t,s);else if(!0===t)e.checked=!0;else{let i=!1;if(Vo(t))i=-1!==t.findIndex((t=>!!n(t,s)));else if(t instanceof Set){for(const e of t)if(n(e,s)){i=!0;break}}else if(t instanceof Map)for(const e of t){const t=e[0],r=e[1];if(n(t,s)&&!0===r){i=!0;break}}e.checked=i}}handleEvent(){let t=this.ov=this.v;const e=this.P,s=Po.call(e,"model")?e.model:e.value,i=e.checked,n=void 0!==e.matcher?e.matcher:sd;if("checkbox"===e.type){if(Vo(t)){const e=t.findIndex((t=>!!n(t,s)));return void(i&&-1===e?t.push(s):i||-1===e||t.splice(e,1))}if(t instanceof Set){const e={};let r=e;for(const e of t)if(!0===n(e,s)){r=e;break}return void(i&&r===e?t.add(s):i||r===e||t.delete(r))}if(t instanceof Map){let e;for(const i of t){const t=i[0];if(!0===n(t,s)){e=t;break}}return void t.set(e,i)}t=i}else{if(!i)return;t=s}this.v=t,this.We()}M(){this.ii()}q(){this.ti?.unsubscribe(this),this.ei?.unsubscribe(this),this.ti=this.ei=void 0}We(){nd=this.ov,this.ov=this.v,this.subs.notify(this.v,nd)}ii(){const t=this.P;(this.ei??(this.ei=t.$observers?.model??t.$observers?.value))?.subscribe(this),this.ti?.unsubscribe(this),this.ti=void 0,"checkbox"===t.type&&(this.ti=function(t,e){return t instanceof Array?e.getArrayObserver(t):t instanceof Map?e.getMapObserver(t):t instanceof Set?e.getSetObserver(t):void 0}(this.v,this.oL))?.subscribe(this)}}let nd;yh(id),ds(id);la("attr")(class{bind(t,e){if(!(e instanceof cc))throw ca(9994,e);e.useTargetObserver(Uu)}});la("self")(class{bind(t,e){if(!(e instanceof fc))throw ca(801);e.self=!0}unbind(t,e){e.self=!1}});la("updateTrigger")(class{constructor(){this.oL=Y(io),this.ni=Y(no)}bind(t,e,...s){if(!(this.ni instanceof td))throw ca(9993);if(0===s.length)throw ca(802);if(!(e instanceof cc&&4&e.mode))throw ca(803);const i=this.ni.getNodeObserverConfig(e.target,e.targetProperty);if(null==i)throw ca(9992,e);const n=this.ni.getNodeObserver(e.target,e.targetProperty,this.oL);n.useConfig({readonly:i.readonly,default:i.default,events:s}),e.useTargetObserver(n)}});class rd{constructor(){this.elseFactory=void 0,this.elseView=void 0,this.ifView=void 0,this.view=void 0,this.value=!1,this.cache=!0,this.pending=void 0,this.ri=!1,this.oi=0,this.li=Y(gc),this.l=Y(Ia)}attaching(t,e){return this.hi(this.value)}detaching(t,e){return this.ri=!0,I(this.pending,(()=>{this.ri=!1,this.pending=void 0,this.view?.deactivate(t,this.$controller)}))}valueChanged(t,e){if(this.$controller.isActive)return(t=!!t)!=(e=!!e)?this.hi(t):void 0}hi(t){const e=this.view,s=this.$controller,i=this.oi++,n=()=>!this.ri&&this.oi===i+1;let r;return I(this.pending,(()=>this.pending=I(e?.deactivate(e,s),(()=>{if(n()&&(r=this.view=t?this.ifView=this.cache&&null!=this.ifView?this.ifView:this.li.create():this.elseView=this.cache&&null!=this.elseView?this.elseView:this.elseFactory?.create(),null!=r))return r.setLocation(this.l),I(r.activate(r,s,s.scope),(()=>{n()&&(this.pending=void 0)}))}))))}dispose(){this.ifView?.dispose(),this.elseView?.dispose(),this.ifView=this.elseView=this.view=void 0}accept(t){if(!0===this.view?.accept(t))return!0}}mo([Qo],rd.prototype,"value",void 0),mo([Qo({set:t=>""===t||!!t&&"false"!==t})],rd.prototype,"cache",void 0),Va("if")(rd);function od(t){t.dispose()}Va({name:"else"})(class{constructor(){this.f=Y(gc)}link(t,e,s,i){const n=t.children,r=n[n.length-1];if(r instanceof rd)r.elseFactory=this.f;else{if(!(r.viewModel instanceof rd))throw ca(810);r.viewModel.elseFactory=this.f}}});const ad=[20,19];class hd{constructor(t,e,s,i,n){this.views=[],this.ai=[],this.key=null,this.ui=new Map,this.fi=new Map,this.di=void 0,this.mi=!1,this.gi=!1,this.pi=null,this.vi=void 0,this.bi=!1;const r=t.props[0].props[0];if(void 0!==r){const{to:t,value:s,command:i}=r;if("key"!==t)throw ca(776,t);if(null===i)this.key=s;else{if("bind"!==i)throw ca(775,i);this.key=e.parse(s,16)}}this.l=s,this.xi=i,this.f=n}binding(t,e){const s=this.xi.bindings,i=s.length;let n,r,o=0;for(;i>o;++o)if(n=s[o],n.target===this&&"items"===n.targetProperty){r=this.forOf=n.ast,this.wi=n;let t=r.iterable;for(;null!=t&&ad.includes(t.$kind);)t=t.expression,this.mi=!0;this.pi=t;break}this.yi();const a=r.declaration;(this.bi=26===a.$kind||27===a.$kind)||(this.local=ts(a,this.$controller.scope,n,null))}attaching(t,e){return this.ki(),this.Ci(t)}detaching(t,e){return this.yi(),this.Ai(t)}unbinding(t,e){this.fi.clear(),this.ui.clear()}itemsChanged(){this.$controller.isActive&&(this.yi(),this.ki(),this.Bi(this.items,void 0))}handleCollectionChange(t,e){const s=this.$controller;if(s.isActive){if(this.mi){if(this.gi)return;return this.gi=!0,this.items=ts(this.forOf.iterable,s.scope,this.wi,null),void(this.gi=!1)}this.ki(),this.Bi(t,e)}}Bi(t,e){const s=this.views;this.ai=s.slice();const i=s.length,n=this.key,r=null!==n;if(r||void 0===e){const t=this.local,o=this.vi,a=o.length,h=this.forOf,c=h.declaration,l=this.wi,u=this.bi;e=us(a);let d=0;if(0===i)for(;d<a;++d)e[d]=-2;else if(0===a)if(u)for(d=0;d<i;++d)e.deletedIndices.push(d),e.deletedItems.push(ts(c,s[d].scope,l,null));else for(d=0;d<i;++d)e.deletedIndices.push(d),e.deletedItems.push(s[d].scope.bindingContext[t]);else{const p=Array(i);if(u)for(d=0;d<i;++d)p[d]=ts(c,s[d].scope,l,null);else for(d=0;d<i;++d)p[d]=s[d].scope.bindingContext[t];let f,g,v,m,w=0;const y=i-1,b=a-1,k=new Map,C=new Map,S=this.ui,T=this.fi,$=this.$controller.scope;d=0;t:{for(;;){if(r?(f=p[d],g=o[d],v=bd(S,n,f,kd(T,f,h,$,l,t,u),l),m=bd(S,n,g,kd(T,g,h,$,l,t,u),l)):(f=v=Cd(p[d],d),g=m=Cd(o[d],d)),v!==m){S.set(f,v),S.set(g,m);break}if(++d,d>y||d>b)break t}if(y===b)for(w=b;;){if(r?(f=p[w],g=o[w],v=bd(S,n,f,kd(T,f,h,$,l,t,u),l),m=bd(S,n,g,kd(T,g,h,$,l,t,u),l)):(f=v=Cd(p[d],d),g=m=Cd(o[d],d)),v!==m){S.set(f,v),S.set(g,m);break}if(--w,d>w)break t}}const x=d,A=d;for(d=A;d<=b;++d)S.has(g=r?o[d]:Cd(o[d],d))?m=S.get(g):(m=r?bd(S,n,g,kd(T,g,h,$,l,t,u),l):g,S.set(g,m)),C.set(m,d);for(d=x;d<=y;++d)v=S.has(f=r?p[d]:Cd(p[d],d))?S.get(f):r?bd(S,n,f,s[d].scope,l):f,k.set(v,d),C.has(v)?e[C.get(v)]=d:(e.deletedIndices.push(d),e.deletedItems.push(f));for(d=A;d<=b;++d)k.has(S.get(r?o[d]:Cd(o[d],d)))||(e[d]=-2);k.clear(),C.clear()}}if(void 0===e){const t=I(this.Ai(null),(()=>this.Ci(null)));Do(t)&&t.catch(qo)}else if(e.deletedIndices.length>0){const t=I(this.Si(e),(()=>this._i(i,e)));Do(t)&&t.catch(qo)}else this._i(i,e)}yi(){const t=this.$controller.scope;let e,s=this.Ri,i=this.mi;i&&(s=this.Ri=ts(this.pi,t,this.wi,null)??null,i=this.mi=!_o(this.items,s));const n=this.di;this.$controller.isActive?(e=this.di=(t=>{let e;return oe(t)?e=_s(t):he(t)?e=vi(t):ae(t)&&(e=ii(t)),e})(i?s:this.items),n!==e&&(n?.unsubscribe(this),e?.subscribe(this))):(n?.unsubscribe(this),this.di=void 0)}ki(){const{items:t}=this;if(Vo(t))return void(this.vi=t);const e=[];gd(t,((t,s)=>{e[s]=t})),this.vi=e}Ci(t){let e,s,i,n;const{$controller:r,f:o,local:a,l:h,items:c,fi:l,wi:u,forOf:d,bi:p}=this,f=r.scope,g=fd(c),v=this.views=Array(g);if(gd(c,((c,m)=>{i=v[m]=o.create().setLocation(h),i.nodes.unlink(),n=kd(l,c,d,f,u,a,p),dd(n.overrideContext,m,g),s=i.activate(t??i,r,n),Do(s)&&(e??(e=[])).push(s)})),void 0!==e)return 1===e.length?e[0]:Promise.all(e)}Ai(t){let e,s,i,n=0;const{views:r,$controller:o}=this,a=r.length;for(;a>n;++n)i=r[n],i.release(),s=i.deactivate(t??i,o),Do(s)&&(e??(e=[])).push(s);if(void 0!==e)return 1===e.length?e[0]:Promise.all(e)}Si(t){let e,s,i;const{$controller:n,views:r}=this,o=t.deletedIndices.slice().sort(Sd),a=o.length;let h=0;for(;a>h;++h)i=r[o[h]],i.release(),s=i.deactivate(i,n),Do(s)&&(e??(e=[])).push(s);for(h=0;a>h;++h)r.splice(o[h]-h,1);if(void 0!==e)return 1===e.length?e[0]:Promise.all(e)}_i(t,e){let s,i,n,r,o=0;const{$controller:a,f:h,local:c,vi:l,l:u,views:d,bi:p,wi:f,fi:g,ai:v,forOf:m}=this,w=e.length;for(;w>o;++o)-2===e[o]&&(n=h.create(),d.splice(o,0,n));if(d.length!==w)throw ca(814,[d.length,w]);const y=a.scope,b=e.length;let k=0;for(o=0;o<e.length;++o)-2!==(k=e[o])&&(d[o]=v[k]);const C=function(t){const e=t.length;e>cd&&(cd=e,ld=new Int32Array(e),ud=new Int32Array(e));let s=0,i=0,n=0,r=0,o=0,a=0,h=0,c=0;for(;r<e;r++)if(i=t[r],-2!==i){if(o=ld[s],n=t[o],-2!==n&&n<i){ud[r]=o,ld[++s]=r;continue}for(a=0,h=s;a<h;)c=a+h>>1,n=t[ld[c]],-2!==n&&n<i?a=c+1:h=c;n=t[ld[a]],(i<n||-2===n)&&(a>0&&(ud[r]=ld[a-1]),ld[a]=r)}r=++s;const l=new Int32Array(r);for(i=ld[s-1];s-- >0;)l[s]=i,i=ud[i];for(;r-- >0;)ld[r]=0;return l}(e),S=C.length,T=m.declaration;let $,x=S-1;for(o=b-1;o>=0;--o)n=d[o],$=d[o+1],n.nodes.link($?.nodes??u),-2===e[o]?(r=kd(g,l[o],m,y,f,c,p),dd(r.overrideContext,o,b),n.setLocation(u),i=n.activate(n,a,r),Do(i)&&(s??(s=[])).push(i)):x<0||1===S||o!==C[x]?(p?es(T,n.scope,f,l[o]):n.scope.bindingContext[c]=l[o],dd(n.scope.overrideContext,o,b),n.nodes.insertBefore(n.location)):(p?es(T,n.scope,f,l[o]):n.scope.bindingContext[c]=l[o],t!==b&&dd(n.scope.overrideContext,o,b),--x);if(void 0!==s)return 1===s.length?s[0]:Promise.all(s)}dispose(){this.views.forEach(od),this.views=void 0}accept(t){const{views:e}=this;if(void 0!==e)for(let s=0,i=e.length;s<i;++s)if(!0===e[s].accept(t))return!0}}hd.inject=[$c,Ii,Ia,xl,gc],mo([Qo],hd.prototype,"items",void 0),Va("repeat")(hd);let cd=16,ld=new Int32Array(cd),ud=new Int32Array(cd);const dd=(t,e,s)=>{const i=0===e,n=e===s-1,r=e%2==0;t.$index=e,t.$first=i,t.$last=n,t.$middle=!i&&!n,t.$even=r,t.$odd=!r,t.$length=s},pd=Ro.toString,fd=t=>{switch(pd.call(t)){case"[object Array]":return t.length;case"[object Map]":case"[object Set]":return t.size;case"[object Number]":return t;case"[object Null]":case"[object Undefined]":return 0;default:throw ca(778,t)}},gd=(t,e)=>{switch(pd.call(t)){case"[object Array]":return vd(t,e);case"[object Map]":return md(t,e);case"[object Set]":return wd(t,e);case"[object Number]":return yd(t,e);case"[object Null]":case"[object Undefined]":return;default:ca(777,t)}},vd=(t,e)=>{const s=t.length;let i=0;for(;i<s;++i)e(t[i],i,t)},md=(t,e)=>{let s,i=-0;for(s of t.entries())e(s,i++,t)},wd=(t,e)=>{let s,i=0;for(s of t.keys())e(s,i++,t)},yd=(t,e)=>{let s=0;for(;s<t;++s)e(s,s,t)},bd=(t,e,s,i,n)=>{let r=t.get(s);return void 0===r&&(r="string"==typeof e?s[e]:ts(e,i,n,null),t.set(s,r)),r},kd=(t,e,s,i,n,r,o)=>{let a=t.get(e);return void 0===a&&(o?es(s.declaration,a=Ze.fromParent(i,new Xe),n,e):a=Ze.fromParent(i,new Xe(r,e)),t.set(e,a)),a},Cd=(t,e)=>{const s=typeof t;switch(s){case"object":if(null!==t)return t;case"string":case"number":case"bigint":case"undefined":case"boolean":return`${e}${s}${t}`;default:return t}},Sd=(t,e)=>t-e;class Td{constructor(){this.view=Y(gc).create().setLocation(Y(Ia))}valueChanged(t,e){const s=this.$controller,i=this.view.bindings;let n,r=0,o=0;if(s.isActive&&null!=i)for(n=Ze.fromParent(s.scope,void 0===t?{}:t),o=i.length;o>r;++r)i[r].bind(n)}attaching(t,e){const{$controller:s,value:i}=this,n=Ze.fromParent(s.scope,void 0===i?{}:i);return this.view.activate(t,s,n)}detaching(t,e){return this.view.deactivate(t,this.$controller)}dispose(){this.view.dispose(),this.view=void 0}accept(t){if(!0===this.view?.accept(t))return!0}}mo([Qo],Td.prototype,"value",void 0),Va("with")(Td);let $d=class{constructor(){this.cases=[],this.activeCases=[],this.promise=void 0,this.f=Y(gc),this.l=Y(Ia)}link(t,e,s,i){this.view=this.f.create(this.$controller).setLocation(this.l)}attaching(t,e){const s=this.view,i=this.$controller;return this.queue((()=>s.activate(t,i,i.scope))),this.queue((()=>this.swap(t,this.value))),this.promise}detaching(t,e){return this.queue((()=>this.view.deactivate(t,this.$controller))),this.promise}dispose(){this.view?.dispose(),this.view=void 0}valueChanged(t,e){this.$controller.isActive&&this.queue((()=>this.swap(null,this.value)))}caseChanged(t){this.queue((()=>this.Ti(t)))}Ti(t){const e=t.isMatch(this.value),s=this.activeCases,i=s.length;if(!e)return i>0&&s[0].id===t.id?this.Ii(null):void 0;if(i>0&&s[0].id<t.id)return;const n=[];let r=t.fallThrough;if(r){const e=this.cases,s=e.indexOf(t);for(let t=s,i=e.length;t<i&&r;t++){const s=e[t];n.push(s),r=s.fallThrough}}else n.push(t);return I(this.Ii(null,n),(()=>(this.activeCases=n,this.Ei(null))))}swap(t,e){const s=[];let i=!1;for(const t of this.cases)if((i||t.isMatch(e))&&(s.push(t),i=t.fallThrough),s.length>0&&!i)break;const n=this.defaultCase;return 0===s.length&&void 0!==n&&s.push(n),I(this.activeCases.length>0?this.Ii(t,s):void 0,(()=>{if(this.activeCases=s,0!==s.length)return this.Ei(t)}))}Ei(t){const e=this.$controller;if(!e.isActive)return;const s=this.activeCases,i=s.length;if(0===i)return;const n=e.scope;return 1===i?s[0].activate(t,n):O(...s.map((e=>e.activate(t,n))))}Ii(t,e=[]){const s=this.activeCases,i=s.length;if(0!==i){if(1===i){const i=s[0];return e.includes(i)?void 0:(s.length=0,i.deactivate(t))}return I(O(...s.reduce(((s,i)=>(e.includes(i)||s.push(i.deactivate(t)),s)),[])),(()=>{s.length=0}))}}queue(t){const e=this.promise;let s;s=this.promise=I(I(e,t),(()=>{this.promise===s&&(this.promise=void 0)}))}accept(t){return!0===this.$controller.accept(t)||!!this.activeCases.some((e=>e.accept(t)))||void 0}};mo([Qo],$d.prototype,"value",void 0),$d=mo([Va("switch")],$d);let xd=0,Ad=class{constructor(){this.id=++xd,this.fallThrough=!1,this.view=void 0,this.f=Y(gc),this.Ze=Y(io),this.l=Y(Ia),this.Pi=Y(Wt).scopeTo(`${this.constructor.name}-#${this.id}`)}link(t,e,s,i){const n=t.parent,r=n?.viewModel;if(!(r instanceof $d))throw ca(815);this.$switch=r,this.linkToSwitch(r)}detaching(t,e){return this.deactivate(t)}isMatch(t){this.Pi.debug("isMatch()");const e=this.value;return Vo(e)?(void 0===this.di&&(this.di=this.Li(e)),e.includes(t)):e===t}valueChanged(t,e){Vo(t)?(this.di?.unsubscribe(this),this.di=this.Li(t)):void 0!==this.di&&this.di.unsubscribe(this),this.$switch.caseChanged(this)}handleCollectionChange(){this.$switch.caseChanged(this)}activate(t,e){let s=this.view;if(void 0===s&&(s=this.view=this.f.create().setLocation(this.l)),!s.isActive)return s.activate(t??s,this.$controller,e)}deactivate(t){const e=this.view;if(void 0!==e&&e.isActive)return e.deactivate(t??e,this.$controller)}dispose(){this.di?.unsubscribe(this),this.view?.dispose(),this.view=void 0}linkToSwitch(t){t.cases.push(this)}Li(t){const e=this.Ze.getArrayObserver(t);return e.subscribe(this),e}accept(t){return!0===this.$controller.accept(t)||this.view?.accept(t)}};mo([Qo],Ad.prototype,"value",void 0),mo([Qo({set:t=>{switch(t){case"true":return!0;case"false":return!1;default:return!!t}},mode:1})],Ad.prototype,"fallThrough",void 0),Ad=mo([Va("case")],Ad);let Id=class extends Ad{linkToSwitch(t){if(void 0!==t.defaultCase)throw ca(816);t.defaultCase=this}};Id=mo([Va("default-case")],Id);let Od=class{constructor(){this.preSettledTask=null,this.postSettledTask=null,this.f=Y(gc),this.l=Y(Ia),this.p=Y(Sa),this.logger=Y(Wt).scopeTo("promise.resolve")}link(t,e,s,i){this.view=this.f.create(this.$controller).setLocation(this.l)}attaching(t,e){const s=this.view,i=this.$controller;return I(s.activate(t,i,this.viewScope=Ze.fromParent(i.scope,{})),(()=>this.swap(t)))}valueChanged(t,e){this.$controller.isActive&&this.swap(null)}swap(t){const e=this.value;if(!Do(e))return;const s=this.p.domWriteQueue,i=this.fulfilled,n=this.rejected,r=this.pending,o=this.viewScope;let a;const h={reusable:!1},c=()=>{O(a=(this.preSettledTask=s.queueTask((()=>O(i?.deactivate(t),n?.deactivate(t),r?.activate(t,o))),h)).result.catch((t=>{if(!(t instanceof po))throw t})),e.then((c=>{if(this.value!==e)return;const l=()=>{this.postSettlePromise=(this.postSettledTask=s.queueTask((()=>O(r?.deactivate(t),n?.deactivate(t),i?.activate(t,o,c))),h)).result};1===this.preSettledTask.status?a.then(l):(this.preSettledTask.cancel(),l())}),(c=>{if(this.value!==e)return;const l=()=>{this.postSettlePromise=(this.postSettledTask=s.queueTask((()=>O(r?.deactivate(t),i?.deactivate(t),n?.activate(t,o,c))),h)).result};1===this.preSettledTask.status?a.then(l):(this.preSettledTask.cancel(),l())})))};1===this.postSettledTask?.status?this.postSettlePromise.then(c):(this.postSettledTask?.cancel(),c())}detaching(t,e){return this.preSettledTask?.cancel(),this.postSettledTask?.cancel(),this.preSettledTask=this.postSettledTask=null,this.view.deactivate(t,this.$controller)}dispose(){this.view?.dispose(),this.view=void 0}};mo([Qo],Od.prototype,"value",void 0),Od=mo([Va("promise")],Od);let Rd=class{constructor(){this.view=void 0,this.f=Y(gc),this.l=Y(Ia)}link(t,e,s,i){Nd(t).pending=this}activate(t,e){let s=this.view;if(void 0===s&&(s=this.view=this.f.create().setLocation(this.l)),!s.isActive)return s.activate(s,this.$controller,e)}deactivate(t){const e=this.view;if(void 0!==e&&e.isActive)return e.deactivate(e,this.$controller)}detaching(t){return this.deactivate(t)}dispose(){this.view?.dispose(),this.view=void 0}};mo([Qo({mode:2})],Rd.prototype,"value",void 0),Rd=mo([Va("pending")],Rd);let Ed=class{constructor(){this.view=void 0,this.f=Y(gc),this.l=Y(Ia)}link(t,e,s,i){Nd(t).fulfilled=this}activate(t,e,s){this.value=s;let i=this.view;if(void 0===i&&(i=this.view=this.f.create().setLocation(this.l)),!i.isActive)return i.activate(i,this.$controller,e)}deactivate(t){const e=this.view;if(void 0!==e&&e.isActive)return e.deactivate(e,this.$controller)}detaching(t,e){return this.deactivate(t)}dispose(){this.view?.dispose(),this.view=void 0}};mo([Qo({mode:4})],Ed.prototype,"value",void 0),Ed=mo([Va("then")],Ed);let Pd=class{constructor(){this.view=void 0,this.f=Y(gc),this.l=Y(Ia)}link(t,e,s,i){Nd(t).rejected=this}activate(t,e,s){this.value=s;let i=this.view;if(void 0===i&&(i=this.view=this.f.create().setLocation(this.l)),!i.isActive)return i.activate(i,this.$controller,e)}deactivate(t){const e=this.view;if(void 0!==e&&e.isActive)return e.deactivate(e,this.$controller)}detaching(t,e){return this.deactivate(t)}dispose(){this.view?.dispose(),this.view=void 0}};function Nd(t){const e=t.parent,s=e?.viewModel;if(s instanceof Od)return s;throw ca(813)}mo([Qo({mode:4})],Pd.prototype,"value",void 0),Pd=mo([Va("catch")],Pd);let Md=class{"promise.resolve"(t,e,s){return new tu(t,e,"promise","bind")}};Md=mo([nu({pattern:"promise.resolve",symbols:""})],Md);let Bd=class{then(t,e,s){return new tu(t,e,"then","from-view")}};Bd=mo([nu({pattern:"then",symbols:""})],Bd);let jd=class{catch(t,e,s){return new tu(t,e,"catch","from-view")}};jd=mo([nu({pattern:"catch",symbols:""})],jd);class Fd{constructor(){this.Di=!1,this.Mi=Y(Aa),this.p=Y(Sa)}binding(){this.valueChanged()}valueChanged(){this.$controller.isActive?this.qi():this.Di=!0}attached(){this.Di&&(this.Di=!1,this.qi()),this.Mi.addEventListener("focus",this),this.Mi.addEventListener("blur",this)}detaching(){const t=this.Mi;t.removeEventListener("focus",this),t.removeEventListener("blur",this)}handleEvent(t){"focus"===t.type?this.value=!0:this.Fi||(this.value=!1)}qi(){const t=this.Mi,e=this.Fi,s=this.value;s&&!e?t.focus():!s&&e&&t.blur()}get Fi(){return this.Mi===this.p.document.activeElement}}Fd.inject=[Aa,Sa],mo([Qo({mode:6})],Fd.prototype,"value",void 0),Da("focus")(Fd);class Ld{constructor(){this.position="beforeend",this.strict=!1;const t=Y(gc),e=Y(Ia),s=Y(Sa);this.p=s,this.Hi=s.document.createElement("div"),(this.view=t.create()).setLocation(this.Oi=(t=>{const e=mc(t,"au-end");return e.$start=mc(t,"au-start"),e})(s)),function(t,e){if(void 0===t.platform||t instanceof t.platform.Node)Ra.set(t,e);else{const s=t.childNodes;for(let t=0,i=s.length;t<i;++t)Ra.set(s[t],e)}}(this.view.nodes,e)}attaching(t){null==this.callbackContext&&(this.callbackContext=this.$controller.scope.bindingContext);const e=this.Hi=this.Vi();return this.Ni(e,this.position),this.$i(t,e)}detaching(t){return this.Wi(t,this.Hi)}targetChanged(){const{$controller:t}=this;if(!t.isActive)return;const e=this.Vi();if(this.Hi===e)return;this.Hi=e;const s=I(this.Wi(null,e),(()=>(this.Ni(e,this.position),this.$i(null,e))));Do(s)&&s.catch(qo)}positionChanged(){const{$controller:t,Hi:e}=this;if(!t.isActive)return;const s=I(this.Wi(null,e),(()=>(this.Ni(e,this.position),this.$i(null,e))));Do(s)&&s.catch(qo)}$i(t,e){const{activating:s,callbackContext:i,view:n}=this;return I(s?.call(i,e,n),(()=>this.ji(t,e)))}ji(t,e){const{$controller:s,view:i}=this;return null!==t?I(i.activate(t??i,s,s.scope),(()=>this.zi(e))):(i.nodes.insertBefore(this.Oi),this.zi(e))}zi(t){const{activated:e,callbackContext:s,view:i}=this;return e?.call(s,t,i)}Wi(t,e){const{deactivating:s,callbackContext:i,view:n}=this;return I(s?.call(i,e,n),(()=>this.Ui(t,e)))}Ui(t,e){const{$controller:s,view:i}=this;return null!==t?I(i.deactivate(t,s),(()=>this.Gi(e))):(i.nodes.remove(),this.Gi(e))}Gi(t){const{deactivated:e,callbackContext:s,view:i}=this;return e?.call(s,t,i)}Vi(){const t=this.p,e=t.document;let s=this.target,i=this.renderContext;if(""===s){if(this.strict)throw ca(811);return e.body}if(Wo(s)){let n=e;Wo(i)&&(i=e.querySelector(i)),i instanceof t.Node&&(n=i),s=n.querySelector(s)}if(s instanceof t.Node)return s;if(null==s){if(this.strict)throw ca(812);return e.body}return s}Ni(t,e){const s=this.Oi,i=s.$start,n=t.parentNode,r=[i,s];switch(e){case"beforeend":wc(t,null,r);break;case"afterbegin":wc(t,t.firstChild,r);break;case"beforebegin":wc(n,t,r);break;case"afterend":wc(n,t.nextSibling,r);break;default:throw new Error("Invalid portal insertion position")}}dispose(){this.view.dispose(),this.view=void 0,this.callbackContext=null}accept(t){if(!0===this.view?.accept(t))return!0}}mo([Qo({primary:!0})],Ld.prototype,"target",void 0),mo([Qo()],Ld.prototype,"position",void 0),mo([Qo({callback:"targetChanged"})],Ld.prototype,"renderContext",void 0),mo([Qo()],Ld.prototype,"strict",void 0),mo([Qo()],Ld.prototype,"deactivating",void 0),mo([Qo()],Ld.prototype,"activating",void 0),mo([Qo()],Ld.prototype,"deactivated",void 0),mo([Qo()],Ld.prototype,"activated",void 0),mo([Qo()],Ld.prototype,"callbackContext",void 0),Va("portal")(Ld);let Dd=class{constructor(){this.Xi=null,this.Qi=null,this.Qt=!1,this.expose=null,this.slotchange=null,this.Ki=new Set,this.di=null;const t=Y(Ia),e=Y($c),s=Y(Al),i=Y(ul),n=e.auSlot,r=s.instruction?.projections?.[n.name],o=s.controller;let a,h;this.name=n.name,null==r?(a=i.getViewFactory(n.fallback,o.container),this.Yi=!1):(h=s.parent.controller.container.createChild({inheritParentResources:!0}),aa(h,o.definition.Type,new Rt(void 0,o.viewModel)),a=i.getViewFactory(r,h),this.Yi=!0,this.Zi=o.container.getAll(Cc,!1)?.filter((t=>"*"===t.slotName||t.slotName===n.name))??Et),this.Ji=(this.Zi??(this.Zi=Et)).length>0,this.ts=s,this.view=a.create().setLocation(this.l=t)}get nodes(){const t=[],e=this.l;let s=e.$start.nextSibling;for(;null!=s&&s!==e;)8!==s.nodeType&&t.push(s),s=s.nextSibling;return t}subscribe(t){this.Ki.add(t)}unsubscribe(t){this.Ki.delete(t)}binding(t,e){let s;this.Xi=this.$controller.scope.parent,this.Yi&&(s=this.ts.controller.scope.parent,(this.Qi=Ze.fromParent(s,s.bindingContext)).overrideContext.$host=this.expose??this.Xi.bindingContext)}attaching(t,e){return I(this.view.activate(t,this.$controller,this.Yi?this.Qi:this.Xi),(()=>{this.Ji&&(this.Zi.forEach((t=>t.watch(this))),this.ii(),this.es(),this.Qt=!0)}))}detaching(t,e){return this.Qt=!1,this.ss(),this.Zi.forEach((t=>t.unwatch(this))),this.view.deactivate(t,this.$controller)}exposeChanged(t){this.Yi&&null!=this.Qi&&(this.Qi.overrideContext.$host=t)}dispose(){this.view.dispose(),this.view=void 0}accept(t){if(!0===this.view?.accept(t))return!0}ii(){if(null!=this.di)return;const t=this.l,e=t.parentElement;null!=e&&(this.di=yc(e,(e=>{Ud(t,e)&&this.es()}))).observe(e,{childList:!0})}ss(){this.di?.disconnect(),this.di=null}es(){const t=this.nodes,e=new Set(this.Ki);let s;for(s of(this.Qt&&this.slotchange?.call(void 0,this.name,t),e))s.handleSlotChange(this,t)}};mo([Qo],Dd.prototype,"expose",void 0),mo([Qo],Dd.prototype,"slotchange",void 0),Dd=mo([Ya({name:"au-slot",template:null,containerless:!0})],Dd);const Vd=(t,e)=>t.compareDocumentPosition(e),Ud=(t,e)=>{for(const{addedNodes:s,removedNodes:i,nextSibling:n}of e){let e,r=0,o=s.length;for(;r<o;++r)if(e=s[r],4===Vd(t.$start,e)&&2===Vd(t,e))return!0;if(i.length>0&&null!=n&&4===Vd(t.$start,n)&&2===Vd(t,n))return!0}};var Wd;!function(t){t[t.Element=1]="Element",t[t.Attribute=2]="Attribute"}(Wd||(Wd={}));class qd{constructor(){this.scopeBehavior="auto",this.rs=void 0,this.c=Y(wt),this.parent=Y(xl),this.host=Y(Aa),this.l=Y(Ia),this.p=Y(Sa),this.r=Y(ul),this.os=Y($c),this.ls=Y(function(t){return null==t?Ct:Ct(t)}(Hd)),this.ut=Y(Nc),this.ht=Y(Al),this.ep=Y(Ii),this.oL=Y(io)}get composing(){return this.cs}get composition(){return this.rs}attaching(t,e){return this.cs=I(this.queue(new Kd(this.template,this.component,this.model,void 0),t),(t=>{this.ls.us(t)&&(this.cs=void 0)}))}detaching(t){const e=this.rs,s=this.cs;return this.ls.invalidate(),this.rs=this.cs=void 0,I(s,(()=>e?.deactivate(t)))}propertyChanged(t){"composing"!==t&&"composition"!==t&&("model"!==t||null==this.rs?this.cs=I(this.cs,(()=>I(this.queue(new Kd(this.template,this.component,this.model,t),void 0),(t=>{this.ls.us(t)&&(this.cs=void 0)})))):this.rs.update(this.model))}queue(t,e){const s=this.ls,i=this.rs;return I(s.create(t),(t=>s.us(t)?I(this.compose(t),(n=>s.us(t)?I(n.activate(e),(()=>s.us(t)?(this.rs=n,I(i?.deactivate(e),(()=>t))):I(n.controller.deactivate(n.controller,this.$controller),(()=>(n.controller.dispose(),t))))):(n.controller.dispose(),t))):t))}compose(t){let e;const{ds:s,gs:i,ps:n}=t.change,{c:r,host:o,$controller:a,l:h,os:c}=this,l=this.getDef(i),u=r.createChild();let d;null!==l?(d=this.p.document.createElement(l.name),null==h?o.appendChild(d):h.parentNode.insertBefore(d,h),e=this.vs(u,i,d)):(d=h??o,e=this.vs(u,i,d));const p=()=>{if(null!==l){const s=c.captures??Et,i=l.capture,[n,r]=s.reduce(((t,e)=>(t[!(e.target in l.bindables)&&(!0===i||Uo(i)&&i(e.target))?0:1].push(e),t)),[[],[]]),o=l.containerless?Pa(d):null,h=ml.$el(u,e,d,{projections:c.projections,captures:n},l,o),p=new Il(a,{projections:null,captures:r},this.ht.parent),f=()=>{if(null==o)d.remove();else{let t=o.$start.nextSibling,e=null;for(;null!==t&&t!==o;)e=t.nextSibling,t.remove(),t=e;o.$start?.remove(),o.remove()}};return Sc.create(p,d,l,this.r,this.ut,this.p,this.ep,this.oL).forEach((t=>h.addBinding(t))),new Qd(h,(t=>h.activate(t??h,a,a.scope.parent)),(t=>I(h.deactivate(t??h,a),f)),(t=>e.activate?.(t)),t)}{const i=th.create({name:vh.generateName(),template:s}),n=this.r.getViewFactory(i,u),r=ml.$view(n,a),o="auto"===this.scopeBehavior?Ze.fromParent(this.parent.scope,e):Ze.create(e);return Na(d)?r.setLocation(d):r.setHost(d),new Qd(r,(t=>r.activate(t??r,a,o)),(t=>r.deactivate(t??r,a)),(t=>e.activate?.(t)),t)}};return"activate"in e?I(e.activate(n),(()=>p())):p()}vs(t,e,s){if(null==e)return new _d;if("object"==typeof e)return e;const i=this.p,n=Na(s);La(t,i,n?null:s),aa(t,Ia,new Rt("IRenderLocation",n?s:null));const r=t.invoke(e);return aa(t,e,new Rt("au-compose.component",r)),r}getDef(t){const e=Uo(t)?t:t?.constructor;return vh.isType(e)?vh.getDefinition(e):null}}mo([Qo],qd.prototype,"template",void 0),mo([Qo],qd.prototype,"component",void 0),mo([Qo],qd.prototype,"model",void 0),mo([Qo({set:t=>{if("scoped"===t||"auto"===t)return t;throw ca(805,t)}})],qd.prototype,"scopeBehavior",void 0),mo([Qo({mode:4})],qd.prototype,"composing",null),mo([Qo({mode:4})],qd.prototype,"composition",null),Ya({name:"au-compose",capture:!0})(qd);class _d{}class Hd{constructor(){this.id=0}us(t){return t.id===this.id}create(t){return I(t.load(),(t=>new Gd(++this.id,t)))}invalidate(){this.id++}}class Kd{constructor(t,e,s,i){this.ds=t,this.gs=e,this.ps=s,this.bs=i}load(){return Do(this.ds)||Do(this.gs)?Promise.all([this.ds,this.gs]).then((([t,e])=>new zd(t,e,this.ps,this.bs))):new zd(this.ds,this.gs,this.ps,this.bs)}}class zd{constructor(t,e,s,i){this.ds=t,this.gs=e,this.ps=s,this.bs=i}}class Gd{constructor(t,e){this.id=t,this.change=e}}class Qd{constructor(t,e,s,i,n){this.controller=t,this.start=e,this.stop=s,this.update=i,this.context=n,this.state=0}activate(t){if(0!==this.state)throw ca(807,this);return this.state=1,this.start(t)}deactivate(t){switch(this.state){case 1:return this.state=-1,this.stop(t);case-1:throw ca(808);default:this.state=-1}}}const Xd=sa("ISanitizer",(t=>t.singleton(class{sanitize(){throw ca(99,"sanitize")}})));!function(t){Oh.define("sanitize",t)}(class{constructor(){this.xs=Y(Xd)}toView(t){return null==t?null:this.xs.sanitize(t)}}),Mo(Eo(),{id:!0,name:!0,"au-slot":!0,"as-element":!0}),new WeakMap,No(["name","attribute","mode"]);const Zd=sa("ITemplateCompilerHooks"),Yd=new WeakMap,Jd=To("compiler-hooks");No({name:Jd,define(t){let e=Yd.get(t);return void 0===e&&(Yd.set(t,e=new tp(t)),bo(Jd,e,t),$o(t,Jd)),t}});class tp{get name(){return""}constructor(t){this.Type=t}register(t){t.register(ia(Zd,this.Type))}}class ep{constructor(){this.el=Y(Aa),this.p=Y(Sa),this.Vs=!1,this.U=null,this.$val="",this.$prio="",this.update=()=>{this.U=null,Boolean(this.value)!==this.Ns&&(this.Ns===this.$s?(this.Ns=!this.$s,this.$val=this.el.style.getPropertyValue("display"),this.$prio=this.el.style.getPropertyPriority("display"),this.el.style.setProperty("display","none","important")):(this.Ns=this.$s,this.el.style.setProperty("display",this.$val,this.$prio),""===this.el.getAttribute("style")&&this.el.removeAttribute("style")))};const t=Y($c);this.Ns=this.$s="hide"!==t.alias}binding(){this.Vs=!0,this.update()}detaching(){this.Vs=!1,this.U?.cancel(),this.U=null}valueChanged(){this.Vs&&null===this.U&&(this.U=this.p.domWriteQueue.queueTask(this.update))}}mo([Qo],ep.prototype,"value",void 0),function(...t){return function(e){const s=So("aliases"),i=wo(s,e);void 0===i?bo(s,t,e):i.push(...t)}}("hide")(ep),Da("show")(ep);class sp{constructor(t,e,s){this.name=t,this.isOptional=e,this.isStar=s}}class ip{constructor(t,e,s){this.path=t,this.caseSensitive=e,this.handler=s}}class np{get residualEndpoint(){return this.t}set residualEndpoint(t){if(null!==this.t)throw new Error("Residual endpoint is already set");this.t=t}constructor(t,e){this.route=t,this.params=e,this.t=null}equalsOrResidual(t){return null!=t&&this===t||this.t===t}}class rp{constructor(t,e){this.endpoint=t;const s=Object.create(null);for(const t in e){const i=e[t];s[t]=null!=i?decodeURIComponent(i):i}this.params=Object.freeze(s)}}class op{constructor(t,e,s,i){this.chars=t,this.states=e,this.skippedStates=s,this.result=i,this.head=e[e.length-1],this.endpoint=this.head?.endpoint}advance(t){const{chars:e,states:s,skippedStates:i,result:n}=this;let r=null,o=0;const a=s[s.length-1];function h(c,l){if(c.isMatch(t)&&(1==++o?r=c:n.add(new op(e.concat(t),s.concat(c),null===l?i:i.concat(l),n))),null===a.segment&&c.isOptional&&null!==c.nextStates){if(c.nextStates.length>1)throw vp(`${c.nextStates.length} nextStates`);const t=c.nextStates[0];if(!t.isSeparator)throw vp("Not a separator");if(null!==t.nextStates)for(const e of t.nextStates)h(e,c)}}if(a.isDynamic&&h(a,null),null!==a.nextStates)for(const t of a.nextStates)h(t,null);null!==r&&(s.push(this.head=r),e.push(t),null!==r.endpoint&&(this.endpoint=r.endpoint)),0===o&&n.remove(this)}finalize(){!function t(e,s){const i=s.nextStates;if(null!==i)if(1===i.length&&null===i[0].segment)t(e,i[0]);else for(const s of i)if(s.isOptional&&null!==s.endpoint){if(e.push(s),null!==s.nextStates)for(const i of s.nextStates)t(e,i);break}}(this.skippedStates,this.head)}getParams(){const{states:t,chars:e,endpoint:s}=this,i={};for(const t of s.params)i[t.name]=void 0;for(let s=0,n=t.length;s<n;++s){const n=t[s];if(n.isDynamic){const t=n.segment.name;void 0===i[t]?i[t]=e[s]:i[t]+=e[s]}}return i}compareTo(t){const e=this.states,s=t.states;for(let t=0,i=0,n=Math.max(e.length,s.length);t<n;++t){let n=e[t];if(void 0===n)return 1;let r=s[i];if(void 0===r)return-1;let o=n.segment,a=r.segment;if(null===o){if(null===a){++i;continue}if(void 0===(n=e[++t]))return 1;o=n.segment}else if(null===a){if(void 0===(r=s[++i]))return-1;a=r.segment}if(o.kind<a.kind)return 1;if(o.kind>a.kind)return-1;++i}const i=this.skippedStates,n=t.skippedStates,r=i.length,o=n.length;if(r<o)return 1;if(r>o)return-1;for(let t=0;t<r;++t){const e=i[t],s=n[t];if(e.length<s.length)return 1;if(e.length>s.length)return-1}return 0}}function ap(t){return null!==t.head.endpoint}function hp(t,e){return t.compareTo(e)}class cp{get isEmpty(){return 0===this.candidates.length}constructor(t){this.candidates=[],this.candidates=[new op([""],[t],[],this)]}getSolution(){const t=this.candidates.filter(ap);if(0===t.length)return null;for(const e of t)e.finalize();return t.sort(hp),t[0]}add(t){this.candidates.push(t)}remove(t){this.candidates.splice(this.candidates.indexOf(t),1)}advance(t){const e=this.candidates.slice();for(const s of e)s.advance(t)}}const lp="$$residue";class up{constructor(t,e,s){switch(this.prevState=t,this.segment=e,this.value=s,this.nextStates=null,this.endpoint=null,e?.kind){case 3:this.length=t.length+1,this.isSeparator=!1,this.isDynamic=!0,this.isOptional=e.optional;break;case 2:case 1:this.length=t.length+1,this.isSeparator=!1,this.isDynamic=!0,this.isOptional=!1;break;case 4:this.length=t.length+1,this.isSeparator=!1,this.isDynamic=!1,this.isOptional=!1;break;case void 0:this.length=null===t?0:t.length,this.isSeparator=!0,this.isDynamic=!1,this.isOptional=!1}}append(t,e){let s,i=this.nextStates;return null===i?(s=void 0,i=this.nextStates=[]):s=null===t?i.find((t=>t.value===e)):i.find((e=>e.segment?.equals(t))),void 0===s&&i.push(s=new up(this,t,e)),s}setEndpoint(t){if(null!==this.endpoint)throw vp(`Cannot add ambiguous route. The pattern '${t.route.path}' clashes with '${this.endpoint.route.path}'`);this.endpoint=t,this.isOptional&&(this.prevState.setEndpoint(t),this.prevState.isSeparator&&null!==this.prevState.prevState&&this.prevState.prevState.setEndpoint(t))}isMatch(t){const e=this.segment;switch(e?.kind){case 3:return!this.value.includes(t);case 2:case 1:return!0;case 4:case void 0:return this.value.includes(t)}}}function dp(t){return t.length>0}class pp{get kind(){return 4}constructor(t,e){this.value=t,this.caseSensitive=e}appendTo(t){const{value:e,value:{length:s}}=this;if(this.caseSensitive)for(let i=0;i<s;++i)t=t.append(this,e.charAt(i));else for(let i=0;i<s;++i){const s=e.charAt(i);t=t.append(this,s.toUpperCase()+s.toLowerCase())}return t}equals(t){return 4===t.kind&&t.caseSensitive===this.caseSensitive&&t.value===this.value}}class fp{get kind(){return 3}constructor(t,e){this.name=t,this.optional=e}appendTo(t){return t.append(this,"/")}equals(t){return 3===t.kind&&t.optional===this.optional&&t.name===this.name}}class gp{constructor(t,e){this.name=t,this.kind=e}appendTo(t){return t.append(this,"")}equals(t){return(2===t.kind||1===t.kind)&&t.name===this.name}}const vp=t=>new Error(t);class mp{constructor(t,e,s,i={}){this.router=t,this.name=e,this.connectedCE=s,this.options=i,this.contents=[],this.transitionAction="",this.path=null}getContent(){return this.contents[0]}getNextContent(){return this.contents.length>1?this.contents[this.contents.length-1]:null}getTimeContent(t=1/0){return this.getContent()}getNavigationContent(t){return t instanceof af&&(t=t.navigation),t instanceof Up?this.contents.find((e=>e.navigation===t))??null:null}get activeContent(){return this.getNextContent()??this.getContent()}get connectedScope(){return this.activeContent?.connectedScope}get scope(){return this.connectedScope.scope}get owningScope(){return this.connectedScope.owningScope}get connectedController(){return this.connectedCE?.$controller??null}get isViewport(){return this instanceof Hp}get isViewportScope(){return this instanceof Lp}get isEmpty(){return!1}get pathname(){return this.connectedScope.pathname}toString(){throw new Error("Method 'toString' needs to be implemented in all endpoints!")}setNextContent(t,e){throw new Error("Method 'setNextContent' needs to be implemented in all endpoints!")}setConnectedCE(t,e){throw new Error("Method 'setConnectedCE' needs to be implemented in all endpoints!")}transition(t){throw new Error("Method 'transition' needs to be implemented in all endpoints!")}finalizeContentChange(t,e){throw new Error("Method 'finalizeContentChange' needs to be implemented in all endpoints!")}cancelContentChange(t,e=null){throw new Error("Method 'cancelContentChange' needs to be implemented in all endpoints!")}getRoutes(){throw new Error("Method 'getRoutes' needs to be implemented in all endpoints!")}getTitle(t){throw new Error("Method 'getTitle' needs to be implemented in all endpoints!")}removeEndpoint(t,e){return this.contents.forEach((t=>t.delete())),!0}canUnload(t,e){return!0}canLoad(t,e){return!0}unload(t,e){}load(t,e){}}class wp{constructor(t,e,s,i,n=zp.create(""),r=Up.create({instruction:"",fullStateInstruction:""})){this.router=t,this.endpoint=e,this.instruction=n,this.navigation=r,this.completed=!1,this.connectedScope=new Jp(t,i,s,this),null!==this.router.rootScope&&(this.endpoint.connectedScope?.parent??this.router.rootScope.scope).addChild(this.connectedScope)}get isActive(){return this.endpoint.activeContent===this}delete(){this.connectedScope.parent?.removeChild(this.connectedScope)}}class yp{constructor(t=null,e="",s=[],i="",n={}){this.match=t,this.matching=e,this.instructions=s,this.remaining=i,this.params=n}get foundConfiguration(){return null!==this.match}get foundInstructions(){return this.instructions.some((t=>!t.component.none))}get hasRemaining(){return this.instructions.some((t=>t.hasNextScopeInstructions))}}function bp(t,e,s,i){var n,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,s,o):n(e,s))||o);return r>3&&o&&Object.defineProperty(e,s,o),o}function kp(t,e){return function(s,i){e(s,i,t)}}class Cp{static parse(t,e,s,i){if(!e)return{instructions:[],remaining:""};if(e.startsWith(t.sibling)&&!Cp.isAdd(t,e))throw new Error(`Instruction parser error: Unnecessary siblings separator ${t.sibling} in beginning of instruction part "${e}".`);const n=[];let r=1e3;for(;e.length&&r;)if(r--,e.startsWith(t.scope)){if(0===n.length)throw new Error(`Instruction parser error: Children without parent in instruction part "(${e}" is not allowed.`);i=!1;const r=(e=e.slice(t.scope.length)).startsWith(t.groupStart);r&&(e=e.slice(t.groupStart.length),s=!0);const{instructions:o,remaining:a}=Cp.parse(t,e,r,!1);n[n.length-1].nextScopeInstructions=o,e=a}else if(e.startsWith(t.groupStart)){e=e.slice(t.groupStart.length);const{instructions:s,remaining:r}=Cp.parse(t,e,!0,i);n.push(...s),e=r}else if(e.startsWith(t.groupEnd)){s&&(e=e.slice(t.groupEnd.length));let i=0;const r=e.length;for(;i<r;i++){if(e.slice(i,i+t.sibling.length)===t.sibling)return{instructions:n,remaining:e};if(e.slice(i,i+t.groupEnd.length)!==t.groupEnd){if(n.length>1)throw new Error(`Instruction parser error: Children below scope ${t.groupStart}${t.groupEnd} in instruction part "(${e}" is not allowed.`);e=e.slice(i);break}}if(i>=r)return{instructions:n,remaining:e}}else if(e.startsWith(t.sibling)&&!Cp.isAdd(t,e)){if(!s)return{instructions:n,remaining:e};e=e.slice(t.sibling.length)}else{const{instruction:s,remaining:i}=Cp.parseOne(t,e);n.push(s),e=i}return{instructions:n,remaining:e}}static isAdd(t,e){return e===t.add||e.startsWith(`${t.add}${t.viewport}`)}static parseOne(t,e){const s=[t.parameters,t.viewport,t.noScope,t.groupEnd,t.scope,t.sibling];let i,n,r,o,a,h=!0;const c=e,l=[t.add,t.clear];for(const n of l)if(e===n){i=e,e="",s.shift(),s.shift(),o=t.viewport;break}if(void 0===i)for(const n of l)if(e.startsWith(`${n}${t.viewport}`)){i=n,e=e.slice(`${n}${t.viewport}`.length),s.shift(),s.shift(),o=t.viewport;break}if(void 0===i&&(({token:o,pos:a}=Cp.findNextToken(e,s)),i=-1!==a?e.slice(0,a):e,e=-1!==a?e.slice(a+o.length):"",s.shift(),o===t.parameters&&(({token:o,pos:a}=Cp.findNextToken(e,[t.parametersEnd])),n=e.slice(0,a),e=e.slice(a+o.length),({token:o}=Cp.findNextToken(e,s)),e=e.slice(o.length)),s.shift()),o===t.viewport&&(({token:o,pos:a}=Cp.findNextToken(e,s)),r=-1!==a?e.slice(0,a):e,e=-1!==a?e.slice(a+o.length):""),s.shift(),o===t.noScope&&(h=!1),o!==t.groupEnd&&o!==t.scope&&o!==t.sibling||(e=`${o}${e}`),""===(i??""))throw new Error(`Instruction parser error: No component specified in instruction part "${e}".`);const u=zp.create(i,r,n,h);return u.unparsed=c,{instruction:u,remaining:e}}static findNextToken(t,e){const s={};for(const i of e)t.indexOf(i)>-1&&(s[i]=t.indexOf(i));const i=Math.min(...Object.values(s));for(const t in s)if(s[t]===i)return{token:t,pos:i};return{token:"",pos:-1}}}class Sp{constructor(t="${componentTitles}${appTitleSeparator}Aurelia",e=" | ",s="top-down",i=" > ",n=!0,r="app-",o){this.appTitle=t,this.appTitleSeparator=e,this.componentTitleOrder=s,this.componentTitleSeparator=i,this.useComponentNames=n,this.componentPrefix=r,this.transformTitle=o}static create(t={}){return new Sp((t="string"==typeof t?{appTitle:t}:t).appTitle,t.appTitleSeparator,t.componentTitleOrder,t.componentTitleSeparator,t.useComponentNames,t.componentPrefix,t.transformTitle)}static for(t){return xp.for(t).title}apply(t={}){t="string"==typeof t?{appTitle:t}:t,this.appTitle=t.appTitle??this.appTitle,this.appTitleSeparator=t.appTitleSeparator??this.appTitleSeparator,this.componentTitleOrder=t.componentTitleOrder??this.componentTitleOrder,this.componentTitleSeparator=t.componentTitleSeparator??this.componentTitleSeparator,this.useComponentNames=t.useComponentNames??this.useComponentNames,this.componentPrefix=t.componentPrefix??this.componentPrefix,this.transformTitle="transformTitle"in t?t.transformTitle:this.transformTitle}}class Tp{constructor(t="@",e="+",s="/",i="(",n=")",r="!",o="(",a=")",h=",",c="=",l="+",u="-",d="."){this.viewport=t,this.sibling=e,this.scope=s,this.groupStart=i,this.groupEnd=n,this.noScope=r,this.parameters=o,this.parametersEnd=a,this.parameterSeparator=h,this.parameterKeySeparator=c,this.add=l,this.clear=u,this.action=d}static create(t={}){return new Tp(t.viewport,t.sibling,t.scope,t.groupStart,t.groupEnd,t.noScope,t.parameters,t.parametersEnd,t.parameterSeparator,t.parameterKeySeparator,t.add,t.clear,t.action)}static for(t){return xp.for(t).separators}apply(t={}){this.viewport=t.viewport??this.viewport,this.sibling=t.sibling??this.sibling,this.scope=t.scope??this.scope,this.groupStart=t.groupStart??this.groupStart,this.groupEnd=t.groupEnd??this.groupEnd,this.noScope=t.noScope??this.noScope,this.parameters=t.parameters??this.parameters,this.parametersEnd=t.parametersEnd??this.parametersEnd,this.parameterSeparator=t.parameterSeparator??this.parameterSeparator,this.parameterKeySeparator=t.parameterKeySeparator??this.parameterKeySeparator,this.add=t.add??this.add,this.clear=t.clear??this.clear,this.action=t.action??this.action}}class $p{constructor(t="active",e="navigating"){this.loadActive=t,this.viewportNavigating=e}static create(t={}){return new $p(t.loadActive,t.viewportNavigating)}static for(t){return xp.for(t).indicators}apply(t={}){this.loadActive=t.loadActive??this.loadActive,this.viewportNavigating=t.viewportNavigating??this.viewportNavigating}}class xp{constructor(t=Tp.create(),e=$p.create(),s=!0,i=null,n=!0,r=0,o=!0,a=!0,h=!0,c=Sp.create(),l=["guardedUnload","swapped","completed"],u="attach-next-detach-current",d="",p="abort"){this.separators=t,this.indicators=e,this.useUrlFragmentHash=s,this.basePath=i,this.useHref=n,this.statefulHistoryLength=r,this.useDirectRouting=o,this.useConfiguredRoutes=a,this.additiveInstructionDefault=h,this.title=c,this.navigationSyncStates=l,this.swapOrder=u,this.fallback=d,this.fallbackAction=p,this.registrationHooks=[]}static create(t={}){return new xp(Tp.create(t.separators),$p.create(t.indicators),t.useUrlFragmentHash,t.basePath,t.useHref,t.statefulHistoryLength,t.useDirectRouting,t.useConfiguredRoutes,t.additiveInstructionDefault,Sp.create(t.title),t.navigationSyncStates,t.swapOrder,t.fallback,t.fallbackAction)}static for(t){return t instanceof Df?t.options:(t=t instanceof df?t.configuration:t.get(jf)).options}apply(t){t=t??{},this.separators.apply(t.separators),this.indicators.apply(t.indicators),this.useUrlFragmentHash=t.useUrlFragmentHash??this.useUrlFragmentHash,this.basePath=t.basePath??this.basePath,this.useHref=t.useHref??this.useHref,this.statefulHistoryLength=t.statefulHistoryLength??this.statefulHistoryLength,this.useDirectRouting=t.useDirectRouting??this.useDirectRouting,this.useConfiguredRoutes=t.useConfiguredRoutes??this.useConfiguredRoutes,this.additiveInstructionDefault=t.additiveInstructionDefault??this.additiveInstructionDefault,this.title.apply(t.title),this.navigationSyncStates=t.navigationSyncStates??this.navigationSyncStates,this.swapOrder=t.swapOrder??this.swapOrder,this.fallback=t.fallback??this.fallback,this.fallbackAction=t.fallbackAction??this.fallbackAction,Array.isArray(t.hooks)&&(void 0!==this.routerConfiguration?t.hooks.forEach((t=>this.routerConfiguration.addHook(t.hook,t.options))):this.registrationHooks=t.hooks)}setRouterConfiguration(t){this.routerConfiguration=t,this.registrationHooks.forEach((t=>this.routerConfiguration.addHook(t.hook,t.options))),this.registrationHooks.length=0}}var Ap;!function(t){t.none="none",t.string="string",t.array="array",t.object="object"}(Ap||(Ap={}));class Ip{constructor(){this.parametersString=null,this.parametersRecord=null,this.parametersList=null,this.parametersType="none"}get none(){return"none"===this.parametersType}static create(t){const e=new Ip;return e.set(t),e}static parse(t,e,s=!1){if(null==e||0===e.length)return[];const i=Tp.for(t),n=i.parameterSeparator,r=i.parameterKeySeparator;if("string"==typeof e){const t=[],i=e.split(n);for(const e of i){let i,n;[i,n]=e.split(r),void 0===n?(n=s?decodeURIComponent(i):i,i=void 0):s&&(i=decodeURIComponent(i),n=decodeURIComponent(n)),t.push({key:i,value:n})}return t}if(Array.isArray(e))return e.map((t=>({key:void 0,value:t})));const o=Object.keys(e);return o.sort(),o.map((t=>({key:t,value:e[t]})))}get typedParameters(){switch(this.parametersType){case"string":return this.parametersString;case"array":return this.parametersList;case"object":return this.parametersRecord;default:return null}}static stringify(t,e,s=!1){if(!Array.isArray(e)||0===e.length)return"";const i=Tp.for(t);return e.map((t=>{const e=void 0!==t.key&&s?encodeURIComponent(t.key):t.key,n=s?encodeURIComponent(t.value):t.value;return void 0!==e&&e!==n?e+i.parameterKeySeparator+n:n})).join(i.parameterSeparator)}static contains(t,e){return Object.keys(e).every((s=>e[s]===t[s]))}parameters(t){return Ip.parse(t,this.typedParameters)}set(t){this.parametersString=null,this.parametersList=null,this.parametersRecord=null,null==t||""===t?(this.parametersType="none",t=null):"string"==typeof t?(this.parametersType="string",this.parametersString=t):Array.isArray(t)?(this.parametersType="array",this.parametersList=t):(this.parametersType="object",this.parametersRecord=t)}get(t,e){if(void 0===e)return this.parameters(t);const s=this.parameters(t).filter((t=>t.key===e)).map((t=>t.value));return 0!==s.length?1===s.length?s[0]:s:void 0}addParameters(t){if("none"===this.parametersType)return this.set(t);if("object"!==this.parametersType)throw new Error("Can't add object parameters to existing non-object parameters!");this.set({...this.parametersRecord,...t})}toSpecifiedParameters(t,e){e=e??[];const s=this.parameters(t),i={};for(const t of e){let e=s.findIndex((e=>e.key===t));if(e>=0){const[n]=s.splice(e,1);i[t]=n.value}else if(e=s.findIndex((t=>void 0===t.key)),e>=0){const[n]=s.splice(e,1);i[t]=n.value}}for(const t of s.filter((t=>void 0!==t.key)))i[t.key]=t.value;let n=e.length;for(const t of s.filter((t=>void 0===t.key)))i[n++]=t.value;return i}toSortedParameters(t,e){e=e||[];const s=this.parameters(t),i=[];for(const t of e){let e=s.findIndex((e=>e.key===t));if(e>=0){const t={...s.splice(e,1)[0]};t.key=void 0,i.push(t)}else if(e=s.findIndex((t=>void 0===t.key)),e>=0){const t={...s.splice(e,1)[0]};i.push(t)}else i.push({value:void 0})}const n=s.filter((t=>void 0!==t.key));return n.sort(((t,e)=>(t.key||"")<(e.key||"")?1:(e.key||"")<(t.key||"")?-1:0)),i.push(...n),i.push(...s.filter((t=>void 0===t.key))),i}same(t,e,s){const i=null!==s?s.parameters:[],n=this.toSpecifiedParameters(t,i),r=e.toSpecifiedParameters(t,i);return Object.keys(n).every((t=>n[t]===r[t]))&&Object.keys(r).every((t=>r[t]===n[t]))}}class Op{constructor(){this.name=null,this.type=null,this.instance=null,this.promise=null,this.func=null}static create(t){const e=new Op;return e.set(t),e}static isName(t){return"string"==typeof t}static isDefinition(t){return vh.isType(t.Type)}static isType(t){return vh.isType(t)}static isInstance(t){return function(t){return(0,a.Kn)(t)&&uh(t.constructor)}(t)}static isAppelation(t){return Op.isName(t)||Op.isType(t)||Op.isInstance(t)}static getName(t){return Op.isName(t)?t:Op.isType(t)?vh.getDefinition(t).name:Op.getName(t.constructor)}static getType(t){return Op.isName(t)?null:Op.isType(t)?t:t.constructor}static getInstance(t){return Op.isName(t)||Op.isType(t)?null:t}set(t){let e=null,s=null,i=null,n=null,r=null;t instanceof Promise?n=t:Op.isName(t)?e=Op.getName(t):Op.isType(t)?(e=this.getNewName(t),s=Op.getType(t)):Op.isInstance(t)?(e=this.getNewName(Op.getType(t)),s=Op.getType(t),i=Op.getInstance(t)):"function"==typeof t&&(r=t),this.name=e,this.type=s,this.instance=i,this.promise=n,this.func=r}resolve(t){if(null!==this.func&&this.set(this.func(t)),this.promise instanceof Promise)return this.promise.then((t=>{if(Op.isAppelation(t))return void this.set(t);if(null!=t.default)return void this.set(t.default);const e=Object.keys(t).filter((t=>!t.startsWith("__")));if(0===e.length)throw new Error("Failed to load component Type from resolved Promise since no export was specified.");if(e.length>1)throw new Error("Failed to load component Type from resolved Promise since no 'default' export was specified when having multiple exports.");const s=e[0];this.set(t[s])}))}get none(){return!(this.isName()||this.isType()||this.isInstance()||this.isFunction()||this.isPromise())}isName(){return!!this.name&&!this.isType()&&!this.isInstance()}isType(){return null!==this.type&&!this.isInstance()}isInstance(){return null!==this.instance}isPromise(){return null!==this.promise}isFunction(){return null!==this.func}toType(t,e){if(this.resolve(e),null!==this.type)return this.type;if(null!==this.name&&"string"==typeof this.name){if(null===t)throw new Error(`No container available when trying to resolve component '${this.name}'!`);if(t.has(vh.keyFrom(this.name),!0)){const e=t.getResolver(vh.keyFrom(this.name));if(null!==e&&void 0!==e.getFactory){const s=e.getFactory(t);if(s)return s.Type}}}return null}toInstance(t,e,s,i){if(this.resolve(i),null!==this.instance)return this.instance;if(null==t)return null;const n=t.createChild(),r=this.isType()?n.get(this.type):n.get(function(t){const e=vh.keyFrom(t);return{$isResolver:!0,resolve:(s,i)=>i.has(e,!1)?i.get(e):i.root.has(e,!1)?i.root.get(e):(console.warn(`Detected resource traversal behavior. A custom element "${t}" is neither registered locally nor globally. This is not a supported behavior and will be removed in a future release`),i.get(e))}}(this.name));if(null==r)throw new Error(`Failed to create instance when trying to resolve component '${this.name}'!`);return ml.$el(n,r,s,null).parent=e,r}same(t,e=!1){return e?this.type===t.type:this.name===t.name}getNewName(t){return null===this.name?Op.getName(t):this.name}}function Rp(t,e){const s=[];let i=t.findIndex(e);for(;i>=0;)s.push(t.splice(i,1)[0]),i=t.findIndex(e);return s}function Ep(t,e=!1){return t.filter(((t,s,i)=>(e||null!=t)&&i.indexOf(t)===s))}class Pp{constructor(){this.isPending=!0,this.promise=new Promise(((t,e)=>{this.t=t,this.i=e}))}resolve(t){this.t(t),this.isPending=!1}reject(t){this.i(t),this.isPending=!1}}class Np{constructor(){this.isDone=!1,this.isCancelled=!1,this.isResolved=!1,this.isRejected=!1,this.isAsync=!1}static run(t,...e){if(0===(e?.length??0))return e?.[0];let s=!1;null===t&&(t=new Mp,s=!0);const i=new Mp(e.shift());return Np.connect(t,i,(t?.runParallel??!1)||s),e.length>0&&Np.add(i,!1,...e),s?(Np.process(t),t.result instanceof Promise&&this.runners.set(t.result,t),t.result):i}static runParallel(t,...e){if(0===(e?.length??0))return[];let s=!1;return null===t?(t=new Mp,s=!0):t=Np.connect(t,new Mp,!0),Np.add(t,!0,...e),s&&Np.process(t),t.result instanceof Promise&&this.runners.set(t.result,t),s?t.result??[]:t}static step(t){if(t instanceof Promise)return Np.runners.get(t)}static cancel(t){const e=Np.step(t);void 0!==e&&e.cancel()}static add(t,e,...s){let i=new Mp(s.shift(),e);null!==t&&(i=Np.connect(t,i,e));const n=i;for(;s.length>0;)i=Np.connect(i,new Mp(s.shift(),e),!1);return n}static connect(t,e,s){if(s){const s=t.child;t.child=e,e.parent=t,e.next=s,null!==s&&(s.parent=null,s.previous=e)}else{const s=t.next;t.next=e,e.previous=t,e.next=s,null!==s&&(s.previous=e,s.parent=null)}return e}static process(t){const e=t.root;for(;null!==t&&!t.isDoing&&!t.isDone;)if(e.current=t,t.isParallelParent){t.isDone=!0;let e=t.child;for(;null!==e;)Np.process(e),e=e.next}else{for(t.isDoing=!0,t.value=t.step;t.value instanceof Function&&!t.isCancelled&&!t.isExited&&!t.isDone;)t.value=t.value(t);if(!t.isCancelled)if(t.value instanceof Promise){const s=t.value;Np.ensurePromise(e),((t,e)=>{e.then((e=>{t.value=e,Np.settlePromise(t),t.isDone=!0,t.isDoing=!1;const s=t.nextToDo();null===s||t.isExited?(t.root.doneAll||t.isExited)&&Np.settlePromise(t.root):Np.process(s)})).catch((t=>{throw t}))})(t,s)}else t.isDone=!0,t.isDoing=!1,t=t.isExited?null:t.nextToDo()}e.isCancelled?Np.settlePromise(e,"reject"):(e.doneAll||e.isExited)&&Np.settlePromise(e)}static ensurePromise(t){return null===t.finally&&(t.finally=new Pp,t.promise=t.finally.promise,!0)}static settlePromise(t,e="resolve"){if(t.finally?.isPending)switch(t.promise=null,e){case"resolve":t.finally?.resolve(t.result);break;case"reject":t.finally?.reject(t.result)}}}Np.runners=new WeakMap,Np.roots={};class Mp{constructor(t=void 0,e=!1){this.step=t,this.runParallel=e,this.promise=null,this.previous=null,this.next=null,this.parent=null,this.child=null,this.current=null,this.finally=null,this.isDoing=!1,this.isDone=!1,this.isCancelled=!1,this.isExited=!1,this.exited=null,this.id="-1",this.id=""+Mp.id++}get isParallelParent(){return this.child?.runParallel??!1}get result(){if(null!==this.promise)return this.promise;if(null!==this.child){if(this.isParallelParent){const t=[];let e=this.child;for(;null!==e;)t.push(e.result),e=e.next;return t}return this===this.root&&null!==this.exited?this.exited.result:this.child?.tail?.result}let t=this.value;for(;t instanceof Mp;)t=t.result;return t}get asValue(){return this.result}get previousValue(){return this.runParallel?this.head.parent?.parent?.previous?.result:this.previous?.result}get name(){let t=`${this.id}`;return this.runParallel&&(t=`:${t}`),(this.value instanceof Promise||this.promise instanceof Promise)&&(t=`${t}*`),null!==this.finally&&(t=`${t}*`),null!==this.child&&(t=`${t}>`),this.isDone&&(t=`(${t})`),t}get root(){let t=this.head;for(;null!==t.parent;)t=t.parent.head;return t}get head(){let t=this;for(;null!==t.previous;)t=t.previous;return t}get tail(){let t=this;for(;null!==t.next;)t=t.next;return t}get done(){if(!this.isDone)return!1;let t=this.child;for(;null!==t;){if(!t.done)return!1;t=t.next}return!0}get doneAll(){return!(!this.isDone||null!==this.child&&!this.child.doneAll||null!==this.next&&!this.next.doneAll)}cancel(t=!0){return t?this.root.cancel(!1):!this.isCancelled&&(this.isCancelled=!0,this.child?.cancel(!1),this.next?.cancel(!1),!0)}exit(t=!0){return t?(this.root.exited=this,this.root.exit(!1)):!this.isExited&&(this.isExited=!0,this.child?.exit(!1),this.next?.exit(!1),!0)}nextToDo(){return null===this.child||this.child.isDoing||this.child.isDone?this.runParallel&&!this.head.parent.done?null:this.nextOrUp():this.child}nextOrUp(){let t=this.next;for(;null!==t;){if(!t.isDoing&&!t.isDone)return t;t=t.next}const e=this.head.parent??null;return null!==e&&e.done?e.nextOrUp():null}get path(){return`${this.head.parent?.path??""}/${this.name}`}get tree(){let t="",e=this.head,s=e.parent,i="";for(;null!==s;)i=`${s.path}${i}`,s=s.head.parent;do{if(t+=`${i}/${e.name}\n`,e===this)break;e=e.next}while(null!==e);return t}get report(){let t=`${this.path}\n`;return t+=this.child?.report??"",t+=this.next?.report??"",t}}Mp.id=0;class Bp{constructor(t,e,s,i,n,r,o,a){this.path=t,this.id=e,this.redirectTo=s,this.instructions=i,this.caseSensitive=n,this.title=r,this.reloadBehavior=o,this.data=a}static isConfigured(t){return a.SF.hasOwn(Bp.resourceKey,t)||"parameters"in t||"title"in t}static configure(t,e){const s=Bp.create(t,e);return a.SF.define(Bp.resourceKey,s,e),e}static getConfiguration(t){const e=a.SF.getOwn(Bp.resourceKey,t)??{};return Array.isArray(t.parameters)&&(e.parameters=t.parameters),"title"in t&&(e.title=t.title),e instanceof Bp?e:Bp.create(e,t)}static create(t,e=null){null!==e&&(t=Bp.transferTypeToComponent(t,e)),vh.isType(t)?t=Bp.getConfiguration(t):null===e&&(t={...t});const s=Bp.transferIndividualIntoInstructions(t);Bp.validateRouteConfiguration(s);let i=s.path;return Array.isArray(i)&&(i=i.join(",")),new Bp(s.path??"",s.id??i??null,s.redirectTo??null,s.instructions??null,s.caseSensitive??!1,s.title??null,s.reloadBehavior??null,s.data??null)}static transferTypeToComponent(t,e){if(vh.isType(t))throw new Error("Invalid route configuration: A component can't be specified in a component route configuration.");const s={...t}??{};if("component"in s||"instructions"in s)throw new Error("Invalid route configuration: The 'component' and 'instructions' properties can't be specified in a component route configuration.");return"redirectTo"in s||(s.component=e),"path"in s||"redirectTo"in s||(s.path=vh.getDefinition(e).name),s}static transferIndividualIntoInstructions(t){if(null==t)throw new Error("Invalid route configuration: expected an object.");if(null!==(t.component??null)||null!==(t.viewport??null)||null!==(t.parameters??null)||null!==(t.children??null)){if(null!=t.instructions)throw new Error("Invalid route configuration: The 'instructions' property can't be used together with the 'component', 'viewport', 'parameters' or 'children' properties.");t.instructions=[{component:t.component,viewport:t.viewport,parameters:t.parameters,children:t.children}]}return t}static validateRouteConfiguration(t){if(null===t.redirectTo&&null===t.instructions)throw new Error("Invalid route configuration: either 'redirectTo' or 'instructions' need to be specified.")}}Bp.resourceKey=D.resource.keyFor("route");const jp={name:D.resource.keyFor("routes"),isConfigured:t=>a.SF.hasOwn(jp.name,t)||"routes"in t,configure(t,e){const s=t.map((t=>Bp.create(t)));return a.SF.define(jp.name,s,e),e},getConfiguration(t){const e=t,s=[],i=a.SF.getOwn(jp.name,t);return Array.isArray(i)&&s.push(...i),Array.isArray(e.routes)&&s.push(...e.routes),s.map((t=>t instanceof Bp?t:Bp.create(t)))}};class Fp extends wp{}class Lp extends mp{constructor(t,e,s,i,n,r=null,o={catches:[],source:null}){super(t,e,s),this.rootComponentType=r,this.options=o,this.instruction=null,this.available=!0,this.sourceItem=null,this.sourceItemIndex=-1,this.remove=!1,this.add=!1,this.contents.push(new Fp(t,this,i,n)),this.catches.length>0&&(this.instruction=zp.create(this.catches[0],this.name))}get isEmpty(){return null===this.instruction}get passThroughScope(){return null===this.rootComponentType&&0===this.catches.length}get siblings(){const t=this.connectedScope.parent;return null===t?[this]:t.enabledChildren.filter((t=>t.isViewportScope&&t.endpoint.name===this.name)).map((t=>t.endpoint))}get source(){return this.options.source??null}get catches(){let t=this.options.catches??[];return"string"==typeof t&&(t=t.split(",")),t}get default(){if(this.catches.length>0)return this.catches[0]}toString(){const t=this.instruction?.component.name??"",e=this.getNextContent()?.instruction.component.name??"";return`vs:${this.name}[${t}->${e}]`}setNextContent(t,e){return t.endpoint.set(this),this.remove=t.isClear(this.router)||t.isClearAll(this.router),this.add=t.isAdd(this.router)&&Array.isArray(this.source),this.add&&(t.component.name=null),void 0!==this.default&&null===t.component.name&&(t.component.name=this.default),this.contents.push(new Fp(this.router,this,this.owningScope,this.scope.hasScope,t,e)),"swap"}transition(t){Np.run(null,(e=>t.setEndpointStep(this,e.root)),(()=>t.addEndpointState(this,"guardedUnload")),(()=>t.addEndpointState(this,"guardedLoad")),(()=>t.addEndpointState(this,"guarded")),(()=>t.addEndpointState(this,"loaded")),(()=>t.addEndpointState(this,"unloaded")),(()=>t.addEndpointState(this,"routed")),(()=>t.addEndpointState(this,"swapped")),(()=>t.addEndpointState(this,"completed")))}finalizeContentChange(t,e){const s=this.contents.findIndex((e=>e.navigation===t.navigation));let i=this.contents[s];if(this.remove){const t=new Fp(this.router,this,this.owningScope,this.scope.hasScope);this.contents.splice(s,1,t),i.delete(),i=t}i.completed=!0;let n=0;for(let t=0,e=s;t<e&&this.contents[0].navigation.completed;t++)n++;this.contents.splice(0,n),this.remove&&Array.isArray(this.source)&&this.removeSourceItem()}cancelContentChange(t,e=null){[...new Set(this.scope.children.map((t=>t.endpoint)))].forEach((s=>s.cancelContentChange(t,e)));const s=this.contents.findIndex((e=>e.navigation===t.navigation));if(!(s<0)&&(this.contents.splice(s,1),this.add)){const t=this.source.indexOf(this.sourceItem);this.source.splice(t,1),this.sourceItem=null}}acceptSegment(t){return null===t&&void 0===t||0===t.length||t===zp.clear(this.router)||t===zp.add(this.router)||t===this.name||0===this.catches.length||!!this.catches.includes(t)||!!this.catches.filter((t=>t.includes("*"))).length}binding(){(this.source||[]).length>0&&null===this.sourceItem&&(this.sourceItem=this.getAvailableSourceItem())}unbinding(){null!==this.sourceItem&&null!==this.source&&Rp(this.source,(t=>t===this.sourceItem)),this.sourceItem=null}getAvailableSourceItem(){if(null===this.source)return null;const t=this.siblings;for(const e of this.source)if(t.every((t=>t.sourceItem!==e)))return e;return null}addSourceItem(){const t={};return this.source.push(t),t}removeSourceItem(){this.sourceItemIndex=this.source.indexOf(this.sourceItem),this.sourceItemIndex>=0&&this.source.splice(this.sourceItemIndex,1)}getRoutes(){const t=[];if(null!==this.rootComponentType){const e=this.rootComponentType.constructor===this.rootComponentType.constructor.constructor?this.rootComponentType:this.rootComponentType.constructor;t.push(...jp.getConfiguration(e)??[])}return t}}class Dp{constructor(t={instruction:"",fullStateInstruction:""}){this.instruction=t.instruction,this.fullStateInstruction=t.fullStateInstruction,this.scope=t.scope,this.index=t.index,this.firstEntry=t.firstEntry,this.path=t.path,this.title=t.title,this.query=t.query,this.fragment=t.fragment,this.parameters=t.parameters,this.data=t.data}toStoredNavigation(){return{instruction:this.instruction,fullStateInstruction:this.fullStateInstruction,scope:this.scope,index:this.index,firstEntry:this.firstEntry,path:this.path,title:this.title,query:this.query,fragment:this.fragment,parameters:this.parameters,data:this.data}}}class Vp{constructor(){this.first=!1,this.new=!1,this.refresh=!1,this.forward=!1,this.back=!1,this.replace=!1}}class Up extends Dp{constructor(t={instruction:"",fullStateInstruction:""}){super(t),this.navigation=new Vp,this.repeating=!1,this.previous=null,this.fromBrowser=!1,this.origin=null,this.replacing=!1,this.refreshing=!1,this.untracked=!1,this.process=null,this.completed=!0,this.fromBrowser=t.fromBrowser??this.fromBrowser,this.origin=t.origin??this.origin,this.replacing=t.replacing??this.replacing,this.refreshing=t.refreshing??this.refreshing,this.untracked=t.untracked??this.untracked,this.historyMovement=t.historyMovement??this.historyMovement,this.process=null,this.timestamp=Date.now()}get useFullStateInstruction(){return(this.navigation.back??!1)||(this.navigation.forward??!1)||(this.navigation.refresh??!1)}static create(t={instruction:"",fullStateInstruction:""}){return new Up(t)}}class Wp{constructor(){this.map=new Map}set(t,e){const s=this.map.get(t);s instanceof Pp&&s.resolve(e),this.map.set(t,e)}delete(t){const e=this.map.get(t);e instanceof Pp&&e.reject(),this.map.delete(t)}await(t){if(!this.map.has(t)){const e=new Pp;return this.map.set(t,e),e.promise}const e=this.map.get(t);return e instanceof Pp?e.promise:e}has(t){return this.map.has(t)&&!(this.map.get(t)instanceof Pp)}clone(){const t=new Wp;return t.map=new Map(this.map),t}}class qp extends wp{constructor(t,e,s,i,n=zp.create(""),r=Up.create({instruction:"",fullStateInstruction:""}),o=null){super(t,e,s,i,n,r),this.router=t,this.instruction=n,this.navigation=r,this.contentStates=new Wp,this.fromCache=!1,this.fromHistory=!1,this.reload=!1,this.activatedResolve=null,this.instruction.component.isType()||null==o?.container||(this.instruction.component.type=this.toComponentType(o.container))}get componentInstance(){return this.instruction.component.instance}get reloadBehavior(){return this.instruction.route instanceof yp&&null!==this.instruction.route.match?.reloadBehavior?this.instruction.route.match?.reloadBehavior:null!==this.instruction.component.instance&&"reloadBehavior"in this.instruction.component.instance&&void 0!==this.instruction.component.instance.reloadBehavior?this.instruction.component.instance.reloadBehavior:"default"}get controller(){return this.instruction.component.instance?.$controller}equalComponent(t){return this.instruction.sameComponent(this.router,t.instruction)}equalParameters(t){return this.instruction.sameComponent(this.router,t.instruction,!0)&&(this.navigation.query??"")===(t.navigation.query??"")}isCacheEqual(t){return this.instruction.sameComponent(this.router,t.instruction,!0)}contentController(t){return ml.$el(t.container.createChild(),this.instruction.component.instance,t.element,null)}createComponent(t,e,s){if(!this.contentStates.has("created")){if(!this.fromCache&&!this.fromHistory)try{this.instruction.component.set(this.toComponentInstance(t.container,t.controller,t.element))}catch(i){if(!i.message.startsWith("AUR0009:"))throw i;if(""===(e??""))throw new Error(`'${this.instruction.component.name}' did not match any configured route or registered component name - did you forget to add the component '${this.instruction.component.name}' to the dependencies or to register it as a global dependency?`);"process-children"===s?this.instruction.parameters.set([this.instruction.component.name]):(this.instruction.parameters.set([this.instruction.unparsed??this.instruction.component.name]),this.instruction.nextScopeInstructions=null),this.instruction.component.set(e);try{this.instruction.component.set(this.toComponentInstance(t.container,t.controller,t.element))}catch(t){if(!t.message.startsWith("AUR0009:"))throw t;throw new Error(`'${this.instruction.component.name}' did not match any configured route or registered component name - did you forget to add the component '${this.instruction.component.name}' to the dependencies or to register it as a global dependency?`)}}this.contentStates.set("created",void 0)}}canLoad(){if(!this.contentStates.has("created")||this.contentStates.has("checkedLoad")&&!this.reload)return!0;const t=this.instruction.component.instance;if(null==t)return!0;this.contentStates.set("checkedLoad",void 0);const e=this.endpoint.parentViewport?.getTimeContent(this.navigation.timestamp)?.instruction?.typeParameters(this.router),s=this.instruction.typeParameters(this.router),i={...this.navigation.parameters,...e,...s},n=this.getLifecycleHooks(t,"canLoad").map((e=>s=>{const n=e(t,i,this.instruction,this.navigation);return"boolean"==typeof n?(!1===n&&s.exit(),n):"string"==typeof n?(s.exit(),n):n}));if(0!==n.length){const t=Np.run(null,...n);if(!0!==t)return!1!==t&&t}if(null==t.canLoad)return!0;return t.canLoad(i,this.instruction,this.navigation)}canUnload(t){if(this.contentStates.has("checkedUnload")&&!this.reload)return!0;if(this.contentStates.set("checkedUnload",void 0),!this.contentStates.has("loaded"))return!0;const e=this.instruction.component.instance;null===t&&(t=Up.create({instruction:"",fullStateInstruction:"",previous:this.navigation}));const s=this.getLifecycleHooks(e,"canUnload").map((s=>i=>{const n=s(e,this.instruction,t);return"boolean"==typeof n?(!1===n&&i.exit(),n):n}));if(0!==s.length){const t=Np.run(null,...s);if(!0!==t)return!1!==t&&t}if(!e.canUnload)return!0;const i=e.canUnload(this.instruction,t);if("boolean"!=typeof i&&!(i instanceof Promise))throw new Error(`Method 'canUnload' in component "${this.instruction.component.name}" needs to return true or false or a Promise resolving to true or false.`);return i}load(t){return Np.run(t,(()=>this.contentStates.await("checkedLoad")),(()=>{if(!this.contentStates.has("created")||this.contentStates.has("loaded")&&!this.reload)return;this.reload=!1,this.contentStates.set("loaded",void 0);const t=this.instruction.component.instance,e=this.endpoint.parentViewport?.getTimeContent(this.navigation.timestamp)?.instruction?.typeParameters(this.router),s=this.instruction.typeParameters(this.router),i={...this.navigation.parameters,...e,...s},n=this.getLifecycleHooks(t,"loading").map((e=>()=>e(t,i,this.instruction,this.navigation)));return n.push(...this.getLifecycleHooks(t,"load").map((e=>()=>(console.warn(`[Deprecated] Found deprecated hook name "load" in ${this.instruction.component.name}. Please use the new name "loading" instead.`),e(t,i,this.instruction,this.navigation))))),0!==n.length?("function"==typeof t.loading&&n.push((()=>t.loading(i,this.instruction,this.navigation))),"function"==typeof t.load&&(console.warn(`[Deprecated] Found deprecated hook name "load" in ${this.instruction.component.name}. Please use the new name "loading" instead.`),n.push((()=>t.load(i,this.instruction,this.navigation)))),Np.run(null,...n)):"function"==typeof t.loading?t.loading(i,this.instruction,this.navigation):"function"==typeof t.load?(console.warn(`[Deprecated] Found deprecated hook name "load" in ${this.instruction.component.name}. Please use the new name "loading" instead.`),t.load(i,this.instruction,this.navigation)):void 0}))}unload(t){if(!this.contentStates.has("loaded"))return;this.contentStates.delete("loaded");const e=this.instruction.component.instance;null===t&&(t=Up.create({instruction:"",fullStateInstruction:"",previous:this.navigation}));const s=this.getLifecycleHooks(e,"unloading").map((s=>()=>s(e,this.instruction,t)));return s.push(...this.getLifecycleHooks(e,"unload").map((s=>()=>(console.warn(`[Deprecated] Found deprecated hook name "unload" in ${this.instruction.component.name}. Please use the new name "unloading" instead.`),s(e,this.instruction,t))))),0!==s.length?("function"==typeof e.unloading&&s.push((()=>e.unloading(this.instruction,t))),"function"==typeof e.unload&&(console.warn(`[Deprecated] Found deprecated hook name "unload" in ${this.instruction.component.name}. Please use the new name "unloading" instead.`),s.push((()=>e.unload(this.instruction,t)))),Np.run(null,...s)):"function"==typeof e.unloading?e.unloading(this.instruction,t):"function"==typeof e.unload?(console.warn(`[Deprecated] Found deprecated hook name "unload" in ${this.instruction.component.name}. Please use the new name "unloading" instead.`),e.unload(this.instruction,t)):void 0}activateComponent(t,e,s,i,n,r){return Np.run(t,(()=>this.contentStates.await("loaded")),(()=>this.waitForParent(s)),(()=>{if(!this.contentStates.has("activating")&&!this.contentStates.has("activated"))return this.contentStates.set("activating",void 0),this.controller?.activate(e??this.controller,s,void 0)}),(()=>{this.contentStates.set("activated",void 0)}))}deactivateComponent(t,e,s,i,n=!1){if(this.contentStates.has("activated")||this.contentStates.has("activating"))return Np.run(t,(()=>{if(n&&null!==i.element){const t=Array.from(i.element.getElementsByTagName("*"));for(const e of t)(e.scrollTop>0||e.scrollLeft)&&e.setAttribute("au-element-scroll",`${e.scrollTop},${e.scrollLeft}`)}return this.contentStates.delete("activated"),this.contentStates.delete("activating"),this.controller?.deactivate(e??this.controller,s)}))}disposeComponent(t,e,s=!1){if(this.contentStates.has("created")&&null!=this.instruction.component.instance)return s?void e.push(this):(this.contentStates.delete("created"),this.controller?.dispose())}freeContent(t,e,s,i,n=!1){return Np.run(t,(()=>this.unload(s)),(t=>this.deactivateComponent(t,null,e.controller,e,n)),(()=>this.disposeComponent(e,i,n)))}toComponentName(){return this.instruction.component.name}toComponentType(t){return this.instruction.component.none?null:this.instruction.component.toType(t,this.instruction)}toComponentInstance(t,e,s){return this.instruction.component.none?null:this.instruction.component.toInstance(t,e,s,this.instruction)}waitForParent(t){if(null!==t)return t.isActive?void 0:new Promise((t=>{this.endpoint.activeResolve=t}))}getLifecycleHooks(t,e){return(t.$controller.lifecycleHooks[e]??[]).map((t=>t.instance[e].bind(t.instance)))}}class _p{constructor(t=!0,e=[],s="",i="",n="",r=!1,o=!1,a=!1,h=!1,c=!1){this.scope=t,this.usedBy=e,this.fallback=i,this.fallbackAction=n,this.noLink=r,this.noTitle=o,this.stateful=a,this.forceDescription=h,this.noHistory=c,this.default=void 0,this.default=s}static create(t){const e=new _p;return void 0!==t&&e.apply(t),e}apply(t){this.scope=t.scope??this.scope,this.usedBy=("string"==typeof t.usedBy?t.usedBy.split(",").filter((t=>t.length>0)):t.usedBy)??this.usedBy,this.default=t.default??this.default,this.fallback=t.fallback??this.fallback,this.fallbackAction=t.fallbackAction??this.fallbackAction,this.noLink=t.noLink??this.noLink,this.noTitle=t.noTitle??this.noTitle,this.stateful=t.stateful??this.stateful,this.forceDescription=t.forceDescription??this.forceDescription,this.noHistory=t.noHistory??this.noHistory}}class Hp extends mp{constructor(t,e,s,i,n,r){super(t,e,s),this.contents=[],this.forceRemove=!1,this.options=new _p,this.activeResolve=null,this.connectionResolve=null,this.clear=!1,this.coordinators=[],this.previousViewportState=null,this.cache=[],this.historyCache=[],this.contents.push(new qp(t,this,i,n)),this.contents[0].completed=!0,void 0!==r&&this.options.apply(r)}getContent(){if(1===this.contents.length)return this.contents[0];let t;for(let e=0,s=this.contents.length;e<s&&this.contents[e].completed;e++)t=this.contents[e];return t}getNextContent(){if(1===this.contents.length)return null;const t=this.contents.indexOf(this.getContent());return this.contents.length>t?this.contents[t+1]:null}getTimeContent(t){let e=null;for(let s=0,i=this.contents.length;s<i&&!(this.contents[s].navigation.timestamp>t);s++)e=this.contents[s];return e}getNavigationContent(t){return super.getNavigationContent(t)}get parentViewport(){let t=this.connectedScope;for(;null!=t?.parent;)if(t=t.parent,t.endpoint.isViewport)return t.endpoint;return null}get isEmpty(){return null===this.getContent().componentInstance}get doForceRemove(){let t=this.connectedScope;for(;null!==t;){if(t.isViewport&&t.endpoint.forceRemove)return!0;t=t.parent}return!1}isActiveNavigation(t){return this.coordinators[this.coordinators.length-1]===t}toString(){const t=this.getContent()?.instruction.component.name??"",e=this.getNextContent()?.instruction.component.name??"";return`v:${this.name}[${t}->${e}]`}setNextContent(t,e){t.endpoint.set(this),this.clear=t.isClear(this.router);const s=this.getContent(),i=new qp(this.router,this,this.owningScope,this.scope.hasScope,this.clear?void 0:t,e,this.connectedCE??null);if(this.contents.push(i),i.fromHistory=!(null===i.componentInstance||!e.navigation||!e.navigation.back&&!e.navigation.forward),this.options.stateful){const t=this.cache.find((t=>i.isCacheEqual(t)));void 0!==t?(this.contents.splice(this.contents.indexOf(i),1,t),i.fromCache=!0):this.cache.push(i)}return null!==i.componentInstance&&s.componentInstance===i.componentInstance?(i.delete(),this.contents.splice(this.contents.indexOf(i),1),this.transitionAction="skip"):!s.equalComponent(i)||e.navigation.refresh||"refresh"===s.reloadBehavior?this.transitionAction="swap":"disallow"===s.reloadBehavior?(i.delete(),this.contents.splice(this.contents.indexOf(i),1),this.transitionAction="skip"):"reload"===s.reloadBehavior?(s.reload=!0,i.instruction.component.set(s.componentInstance),i.contentStates=s.contentStates.clone(),i.reload=s.reload,this.transitionAction="reload"):this.options.stateful&&s.equalParameters(i)||s.equalParameters(i)?(i.delete(),this.contents.splice(this.contents.indexOf(i),1),this.transitionAction="skip"):this.transitionAction="swap"}setConnectedCE(t,e){e=e??{},this.connectedCE!==t&&(this.previousViewportState={...this},this.clearState(),this.connectedCE=t,this.options.apply(e),null!=this.connectionResolve&&this.connectionResolve());const s=(this.scope.parent?.endpoint.getRoutes()??[]).filter((t=>(Array.isArray(t.path)?t.path:[t.path]).includes(""))).length>0;if(null===this.getContent().componentInstance&&null==this.getNextContent()?.componentInstance&&(this.options.default||s)){const t=zp.parse(this.router,this.options.default??"");if(0===t.length&&s){const e=this.scope.parent?.findInstructions([zp.create("")],!1,this.router.configuration.options.useConfiguredRoutes);e?.foundConfiguration&&t.push(...e.instructions)}for(const e of t)e.endpoint.set(this),e.scope=this.owningScope,e.default=!0;this.router.load(t,{append:!0}).catch((t=>{throw t}))}}remove(t,e){return this.connectedCE===e&&Np.run(t,(t=>{if(null!==this.getContent().componentInstance)return this.getContent().freeContent(t,this.connectedCE,this.getNextContent()?.navigation??null,this.historyCache,!this.doForceRemove&&(this.router.statefulHistory||this.options.stateful))}),(t=>{if(this.doForceRemove){const e=[];for(const t of this.historyCache)e.push((e=>t.freeContent(e,null,null,this.historyCache,!1)));return e.push((()=>{this.historyCache=[]})),Np.run(t,...e)}return!0}))}async transition(t){const e=this.router.configuration.options.indicators.viewportNavigating;for(this.coordinators.push(t);this.coordinators[0]!==t;)await this.coordinators[0].waitForSyncState("completed");let s=this.parentViewport;null!==s&&"reload"!==s.transitionAction&&"swap"!==s.transitionAction&&(s=null);const i=[e=>{if(this.isActiveNavigation(t))return this.canUnload(t,e)},e=>{if(this.isActiveNavigation(t))if(e.previousValue){if(this.router.isRestrictedNavigation){const e=this.router.configuration.options;this.getNavigationContent(t).createComponent(this.connectedCE,this.options.fallback||e.fallback,this.options.fallbackAction||e.fallbackAction)}}else t.cancel();t.addEndpointState(this,"guardedUnload")},()=>t.waitForSyncState("guardedUnload",this),()=>null!==s?t.waitForEndpointState(s,"guardedLoad"):void 0,e=>{if(this.isActiveNavigation(t))return this.canLoad(t,e)},e=>{if(this.isActiveNavigation(t)){let s=e.previousValue;if("boolean"!=typeof s){if(this.getNavigationContent(t).instruction.nextScopeInstructions=null,"string"==typeof s){const t=this.scope,e=this.router.configuration.options;let i=zp.parse(this.router,s);const n=t.parent?.findInstructions(i,e.useDirectRouting,e.useConfiguredRoutes);(n?.foundConfiguration||n?.foundInstructions)&&(i=n.instructions);for(const e of i)e.endpoint.set(this),e.scope=t.owningScope;s=i}return Np.run(e,(e=>this.cancelContentChange(t,e)),(t=>(this.router.load(s,{append:!0}),t.exit())))}if(!s)return e.cancel(),t.cancel(),void(this.getNavigationContent(t).instruction.nextScopeInstructions=null)}t.addEndpointState(this,"guardedLoad"),t.addEndpointState(this,"guarded")}],n=[()=>t.waitForSyncState("guarded",this),e=>{if(this.isActiveNavigation(t))return this.unload(t,e)},()=>t.addEndpointState(this,"unloaded"),()=>t.waitForSyncState("unloaded",this),()=>null!==s?t.waitForEndpointState(s,"loaded"):void 0,e=>{if(this.isActiveNavigation(t))return this.load(t,e)},()=>t.addEndpointState(this,"loaded"),()=>t.addEndpointState(this,"routed")],r=[()=>t.waitForSyncState("routed",this),()=>t.waitForEndpointState(this,"routed")];switch(this.router.configuration.options.swapOrder){case"detach-current-attach-next":r.push((e=>{if(this.isActiveNavigation(t))return this.removeContent(e,t)}),(e=>{if(this.isActiveNavigation(t))return this.addContent(e,t)}));break;case"attach-next-detach-current":r.push((e=>{if(this.isActiveNavigation(t))return this.addContent(e,t)}),(e=>{if(this.isActiveNavigation(t))return this.removeContent(e,t)}));break;case"detach-attach-simultaneously":r.push((e=>Np.runParallel(e,(e=>{if(this.isActiveNavigation(t))return this.removeContent(e,t)}),(e=>{if(this.isActiveNavigation(t))return this.addContent(e,t)}))));break;case"attach-detach-simultaneously":r.push((e=>Np.runParallel(e,(e=>{if(this.isActiveNavigation(t))return this.addContent(e,t)}),(e=>{if(this.isActiveNavigation(t))return this.removeContent(e,t)}))))}r.push((()=>t.addEndpointState(this,"swapped"))),this.connectedCE?.setActivity?.(e,!0),this.connectedCE?.setActivity?.(t.navigation.navigation,!0);const o=Np.run(null,(e=>t.setEndpointStep(this,e.root)),...i,...n,...r,(()=>t.addEndpointState(this,"completed")),(()=>t.waitForSyncState("bound")),(()=>{this.connectedCE?.setActivity?.(e,!1),this.connectedCE?.setActivity?.(t.navigation.navigation,!1)}));o instanceof Promise&&o.catch((t=>{}))}canUnload(t,e){return Np.run(e,(e=>this.getContent().connectedScope.canUnload(t,e)),(e=>!!e.previousValue&&this.getContent().canUnload(t.navigation)))}canLoad(t,e){return!!this.clear||Np.run(e,(()=>this.waitForConnected()),(()=>{const e=this.router.configuration.options,s=this.getNavigationContent(t);return s.createComponent(this.connectedCE,this.options.fallback||e.fallback,this.options.fallbackAction||e.fallbackAction),s.canLoad()}))}load(t,e){if(!this.clear)return this.getNavigationContent(t).load(e)}addContent(t,e){return this.activate(t,null,this.connectedController,e)}removeContent(t,e){if(this.isEmpty)return;const s=this.router.statefulHistory||(this.options.stateful??!1);return Np.run(t,(()=>e.addEndpointState(this,"bound")),(()=>e.waitForSyncState("bound")),(t=>this.deactivate(t,null,this.connectedController)),(()=>s?this.dispose():void 0))}activate(t,e,s,i){if(null!==this.activeContent.componentInstance)return Np.run(t,(()=>this.activeContent.canLoad()),(t=>this.activeContent.load(t)),(t=>this.activeContent.activateComponent(t,e,s,this.connectedCE,(()=>i?.addEndpointState(this,"bound")),i?.waitForSyncState("bound"))))}deactivate(t,e,s){const i=this.getContent();if(null!=i?.componentInstance&&!i.reload&&i.componentInstance!==this.getNextContent()?.componentInstance)return i.deactivateComponent(t,e,s,this.connectedCE,this.router.statefulHistory||this.options.stateful)}unload(t,e){return Np.run(e,(e=>this.getContent().connectedScope.unload(t,e)),(()=>null!=this.getContent().componentInstance?this.getContent().unload(t.navigation??null):void 0))}dispose(){null===this.getContent().componentInstance||this.getContent().reload||this.getContent().componentInstance===this.getNextContent()?.componentInstance||this.getContent().disposeComponent(this.connectedCE,this.historyCache,this.router.statefulHistory||this.options.stateful)}finalizeContentChange(t,e){const s=this.contents.findIndex((e=>e.navigation===t.navigation));let i=this.contents[s];const n=this.contents[s-1];if(this.clear){const t=new qp(this.router,this,this.owningScope,this.scope.hasScope,void 0,i.navigation);this.contents.splice(s,1,t),i.delete(),i=t}else i.reload=!1;n.delete(),i.completed=!0,this.transitionAction="",i.contentStates.delete("checkedUnload"),i.contentStates.delete("checkedLoad"),this.previousViewportState=null;const r=this.router.configuration.options.indicators.viewportNavigating;this.connectedCE?.setActivity?.(r,!1),this.connectedCE?.setActivity?.(t.navigation.navigation,!1);let o=0;for(let t=0,e=s;t<e&&this.contents[0].navigation.completed;t++)o++;this.contents.splice(0,o),Rp(this.coordinators,(e=>e===t))}cancelContentChange(t,e=null){[...new Set(this.scope.children.map((t=>t.endpoint)))].forEach((s=>s.cancelContentChange(t,e)));const s=this.contents.findIndex((e=>e.navigation===t.navigation));if(s<0)return;const i=t.getEndpointStep(this)?.current??null,n=this.contents[s],r=this.contents[s-1];return n.instruction.cancelled=!0,Np.run(i,(t=>n.freeContent(t,this.connectedCE,n.navigation,this.historyCache,this.router.statefulHistory||this.options.stateful)),(()=>{this.previousViewportState&&Object.assign(this,this.previousViewportState),n?.delete(),null!==n&&this.contents.splice(this.contents.indexOf(n),1),this.transitionAction="",r?.contentStates.delete("checkedUnload"),r?.contentStates.delete("checkedLoad");const e=this.router.configuration.options.indicators.viewportNavigating;this.connectedCE?.setActivity?.(e,!1),this.connectedCE?.setActivity?.(t.navigation.navigation,!1),t.removeEndpoint(this),Rp(this.coordinators,(e=>e===t))}),(()=>{if(i!==e)return i?.exit()}))}wantComponent(t){return this.options.usedBy.includes(t)}acceptComponent(t){if("-"===t||null===t)return!0;const e=this.options.usedBy;return 0===e.length||!!e.includes(t)||!!e.filter((t=>t.includes("*"))).length}freeContent(t,e){const s=this.historyCache.find((t=>t.componentInstance===e));if(void 0!==s)return Np.run(t,(t=>(this.forceRemove=!0,s.freeContent(t,null,null,this.historyCache,!1))),(()=>{this.forceRemove=!1,Rp(this.historyCache,(t=>t===s))}))}getRoutes(){const t=[];let e=this.getComponentType();return null!=e&&(e=e.constructor===e.constructor.constructor?e:e.constructor,t.push(...jp.getConfiguration(e)??[])),t}getTitle(t){if(this.options.noTitle)return"";const e=this.getComponentType();if(null===e)return"";let s="";const i=e.title;if(void 0!==i)if("string"==typeof i)s=i;else{const e=this.getComponentInstance();s=i.call(e,e,t)}else if(this.router.configuration.options.title.useComponentNames){let t=this.getContentInstruction().component.name??"";const e=this.router.configuration.options.title.componentPrefix??"";t.startsWith(e)&&(t=t.slice(e.length)),t=t.replace("-"," "),s=t.slice(0,1).toLocaleUpperCase()+t.slice(1)}return s}getComponentType(){let t=this.getContentInstruction().component.type??null;return null===t&&(t=vh.for(this.connectedCE.element).container.componentType),t??null}getComponentInstance(){return this.getContentInstruction().component.instance??null}getContentInstruction(){return this.getNextContent()?.instruction??this.getContent().instruction??null}clearState(){this.options=_p.create();const t=this.owningScope,e=this.scope.hasScope;if(this.getContent().delete(),this.contents.shift(),this.contents.length<1)throw new Error("no content!");this.contents.push(new qp(this.router,this,t,e)),this.cache=[]}waitForConnected(){if(null===this.connectedCE)return new Promise((t=>{this.connectionResolve=t}))}}class Kp{constructor(){this.name=null,this.instance=null,this.scope=null}get none(){return null===this.name&&null===this.instance}get endpointType(){return this.instance instanceof Hp?"Viewport":this.instance instanceof Lp?"ViewportScope":null}static create(t){const e=new Kp;return e.set(t),e}static isName(t){return"string"==typeof t}static isInstance(t){return t instanceof mp}static getName(t){return Kp.isName(t)?t:t?t.name:null}static getInstance(t){return Kp.isName(t)?null:t}set(t){void 0!==t&&""!==t||(t=null),"string"==typeof t?(this.name=t,this.instance=null):(this.instance=t,null!==t&&(this.name=t.name,this.scope=t.owningScope))}toInstance(t){return null!==this.instance?this.instance:t.getEndpoint(this.endpointType,this.name)}same(t,e){return null!==this.instance&&null!==t.instance?this.instance===t.instance:!(null!==this.endpointType&&null!==t.endpointType&&this.endpointType!==t.endpointType||e&&this.scope!==t.scope||(null!==this.instance?this.instance.name:this.name)!==(null!==t.instance?t.instance.name:t.name))}}class zp{constructor(t,e,s){this.ownsScope=!0,this.nextScopeInstructions=null,this.scope=null,this.scopeModifier="",this.needsEndpointDescribed=!1,this.route=null,this.routeStart=!1,this.default=!1,this.topInstruction=!1,this.unparsed=null,this.cancelled=!1,this.component=Op.create(t),this.endpoint=Kp.create(e),this.parameters=Ip.create(s)}static create(t,e,s,i=!0,n=null){const r=new zp(t,e,s);return r.ownsScope=i,r.nextScopeInstructions=n,r}static createClear(t,e){return zp.create(zp.clear(t),e)}static from(t,e){Array.isArray(e)||(e=[e]);const s=[];for(const i of e)if("string"==typeof i)s.push(...zp.parse(t,i));else if(i instanceof zp)s.push(i);else if(i instanceof Promise)s.push(zp.create(i));else if(Op.isAppelation(i))s.push(zp.create(i));else if(Op.isDefinition(i))s.push(zp.create(i.Type));else if("component"in i||"id"in i){const e=i,n=zp.create(e.component,e.viewport,e.parameters);n.route=i.id??null,void 0!==e.children&&null!==e.children&&(n.nextScopeInstructions=zp.from(t,e.children)),s.push(n)}else if("object"==typeof i&&null!==i){const t=vh.define(i);s.push(zp.create(t))}else s.push(zp.create(i));return s}static clear(t){return Tp.for(t).clear}static add(t){return Tp.for(t).add}static parse(t,e){const s=Tp.for(t);let i="";const n=/^[./]+/.exec(e);Array.isArray(n)&&n.length>0&&(i=n[0],e=e.slice(i.length));const r=Cp.parse(s,e,!0,!0).instructions;for(const t of r)t.scopeModifier=i;return r}static stringify(t,e,s=!1,i=!1){return"string"==typeof e?e:e.map((e=>e.stringify(t,s,i))).filter((t=>t.length>0)).join(Tp.for(t).sibling)}static resolve(t){const e=t.filter((t=>t.isUnresolved)).map((t=>t.resolve())).filter((t=>t instanceof Promise));if(e.length>0)return Promise.all(e)}static containsSiblings(t,e){return null!==e&&(e.filter((e=>!e.isClear(t)&&!e.isClearAll(t))).length>1||e.some((e=>zp.containsSiblings(t,e.nextScopeInstructions))))}static flat(t){const e=[];for(const s of t)e.push(s),s.hasNextScopeInstructions&&e.push(...zp.flat(s.nextScopeInstructions));return e}static clone(t,e=!1,s=!1){return t.map((t=>t.clone(e,s)))}static contains(t,e,s,i){return s.every((s=>s.isIn(t,e,i)))}get viewport(){return this.endpoint.instance instanceof Hp||null===this.endpoint.endpointType?this.endpoint:null}get viewportScope(){return this.endpoint.instance instanceof Lp||null===this.endpoint.endpointType?this.endpoint:null}get previous(){return this.endpoint.instance?.getContent()?.instruction}isAdd(t){return this.component.name===Tp.for(t).add}isClear(t){return this.component.name===Tp.for(t).clear}isAddAll(t){return this.isAdd(t)&&0===(this.endpoint.name?.length??0)}isClearAll(t){return this.isClear(t)&&0===(this.endpoint.name?.length??0)}get hasNextScopeInstructions(){return(this.nextScopeInstructions?.length??0)>0}get isUnresolved(){return this.component.isFunction()||this.component.isPromise()}resolve(){return this.component.resolve(this)}typeParameters(t){return this.parameters.toSpecifiedParameters(t,this.component.type?.parameters??[])}sameRoute(t){const e=this.route?.match,s=t.route?.match;return null!=e&&null!=s&&("string"==typeof e||"string"==typeof s?e===s:e.id===s.id)}sameComponent(t,e,s=!1,i=!1){return!(s&&!this.sameParameters(t,e,i))&&this.component.same(e.component,i)}sameEndpoint(t,e){return this.endpoint.same(t.endpoint,e)}sameParameters(t,e,s=!1){return!!this.component.same(e.component,s)&&this.parameters.same(t,e.parameters,this.component.type)}stringify(t,e=!1,s=!1,i=!1){const n=Tp.for(t);let r=e,o=!1;if(s){const t=this.viewport?.instance??null;if(t?.options.noLink)return"";this.needsEndpointDescribed||t?.options.forceDescription&&null==this.viewportScope?.instance||(r=!0),t?.options.fallback===this.component.name&&(o=!0),t?.options.default===this.component.name&&(o=!0)}const a=this.nextScopeInstructions;let h=this.scopeModifier;if(this.route instanceof yp&&!this.routeStart)return!i&&Array.isArray(a)?zp.stringify(t,a,e,s):"";const c=this.stringifyShallow(t,r,o);if(h+=c.endsWith(n.scope)?c.slice(0,-n.scope.length):c,!i&&Array.isArray(a)&&a.length>0){const i=zp.stringify(t,a,e,s);i.length>0&&(h+=n.scope,h+=1===a.length?i:`${n.groupStart}${i}${n.groupEnd}`)}return h}clone(t=!1,e=!1,s=!1){const i=zp.create(this.component.func??this.component.promise??this.component.type??this.component.name,this.endpoint.name,null!==this.parameters.typedParameters?this.parameters.typedParameters:void 0);return t&&(i.component.set(this.component.instance??this.component.type??this.component.name),i.endpoint.set(this.endpoint.instance??this.endpoint.name)),i.component.name=this.component.name,i.needsEndpointDescribed=this.needsEndpointDescribed,i.route=this.route,i.routeStart=this.routeStart,i.default=this.default,e&&(i.scopeModifier=this.scopeModifier),i.scope=t?this.scope:null,this.hasNextScopeInstructions&&!s&&(i.nextScopeInstructions=zp.clone(this.nextScopeInstructions,t,e)),i}isIn(t,e,s){const i=e.filter((e=>{if(null!=this.route||null!=e.route){if(!e.sameRoute(this))return!1}else if(!e.sameComponent(t,this))return!1;const s=e.component.type??this.component.type,i=this.component.type??e.component.type,n=e.parameters.toSpecifiedParameters(t,s?.parameters),r=this.parameters.toSpecifiedParameters(t,i?.parameters);return!!Ip.contains(n,r)&&(this.endpoint.none||e.sameEndpoint(this,!1))}));return!(0===i.length||s&&this.hasNextScopeInstructions&&!i.some((e=>zp.contains(t,e.nextScopeInstructions??[],this.nextScopeInstructions,s))))}getTitle(t){if(this.route instanceof yp){const e=this.route.match?.title;if(null!=e)return this.routeStart?"string"==typeof e?e:e(this,t):""}return this.endpoint.instance.getTitle(t)}toJSON(){return{component:this.component.name??void 0,viewport:this.endpoint.name??void 0,parameters:this.parameters.parametersRecord??void 0,children:this.hasNextScopeInstructions?this.nextScopeInstructions:void 0}}stringifyShallow(t,e=!1,s=!1){if(null!=this.route)return(this.route instanceof yp?this.route.matching:this.route).split("/").map((e=>e.startsWith(":")?this.parameters.get(t,e.slice(1)):e)).join("/");const i=Tp.for(t);let n=s?"":this.component.name??"";const r=this.component.type?this.component.type.parameters:null,o=Ip.stringify(t,this.parameters.toSortedParameters(t,r));return o.length>0&&(n+=s?o:`${i.parameters}${o}${i.parametersEnd}`),null==this.endpoint.name||e||(n+=`${i.viewport}${this.endpoint.name}`),this.ownsScope||(n+=i.noScope),n||""}}class Gp{constructor(t,e){this.eventName=t,this.navigation=e}static create(t){return new Gp(Gp.eventName,t)}}Gp.eventName="au:router:navigation-navigate";let Qp=class{constructor(t,e){this.ea=t,this.container=e,this.lastNavigationIndex=-1,this.navigations=[],this.options={statefulHistoryLength:0},this.isActive=!1,this.uninitializedNavigation=Up.create({instruction:"NAVIGATOR UNINITIALIZED",fullStateInstruction:"",index:0,completed:!0}),this.lastNavigationIndex=-1}start(t){if(this.isActive)throw new Error("Navigator has already been started");this.isActive=!0,this.options={...t}}stop(){if(!this.isActive)throw new Error("Navigator has not been started");this.isActive=!1}navigate(t){t instanceof Up||(t=Up.create(t));const e=new Vp;return-1===this.lastNavigationIndex&&(this.loadState(),-1!==this.lastNavigationIndex?e.refresh=!0:(e.first=!0,e.new=!0,this.lastNavigationIndex=0,this.navigations=[Up.create({index:0,instruction:"",fullStateInstruction:""})])),void 0===t.index||t.replacing||t.refreshing?t.refreshing||e.refresh?((t=this.navigations[this.lastNavigationIndex]).replacing=!0,t.refreshing=!0):t.replacing?(e.replace=!0,e.new=!0,t.index=this.lastNavigationIndex):(e.new=!0,t.index=this.lastNavigationIndex+1,this.navigations[t.index]=t):(t.historyMovement=t.index-Math.max(this.lastNavigationIndex,0),t.instruction=null!=this.navigations[t.index]?this.navigations[t.index].fullStateInstruction:t.fullStateInstruction,t.replacing=!0,t.historyMovement>0?e.forward=!0:t.historyMovement<0&&(e.back=!0)),t.navigation=e,t.previous=this.navigations[Math.max(this.lastNavigationIndex,0)],t.process=new Pp,this.lastNavigationIndex=t.index,this.notifySubscribers(t),t.process.promise}async finalize(t,e){if(t.untracked)t.fromBrowser&&null!=this.options.store&&await this.options.store.popNavigatorState();else if(t.replacing)0===(t.historyMovement??0)&&(this.navigations[t.previous.index]=t),await this.saveState(t.index,!1);else{const s=t.index;if(e&&(this.navigations=this.navigations.slice(0,s)),this.navigations[s]=t,(this.options.statefulHistoryLength??0)>0){const t=this.navigations.length-(this.options.statefulHistoryLength??0);for(const e of this.navigations.slice(s))"string"==typeof e.instruction&&"string"==typeof e.fullStateInstruction||await this.serializeNavigation(e,this.navigations.slice(t,s))}await this.saveState(t.index,!t.fromBrowser)}}async cancel(t){null!=this.options.store&&(t.navigation?.new?t.fromBrowser&&await this.options.store.popNavigatorState():0!==(t.historyMovement??0)&&await this.options.store.go(-t.historyMovement,!0))}async go(t){let e=this.lastNavigationIndex+t;e=Math.min(e,this.navigations.length-1),await this.options.store.go(t,!0);const s=this.navigations[e];return this.navigate(s)}getState(){const t=null!=this.options.store?{...this.options.store.state}:{};return{navigations:t?.navigations??[],navigationIndex:t?.navigationIndex??-1}}loadState(){const{navigations:t,navigationIndex:e}=this.getState();this.navigations=t.map((t=>Up.create(t))),this.lastNavigationIndex=e}async saveState(t,e){for(let t=0;t<this.navigations.length;t++)this.navigations[t]=Up.create(this.navigations[t].toStoredNavigation());if((this.options.statefulHistoryLength??0)>0){const t=this.navigations.length-(this.options.statefulHistoryLength??0);for(let e=0;e<t;e++){const s=this.navigations[e];"string"==typeof s.instruction&&"string"==typeof s.fullStateInstruction||await this.serializeNavigation(s,this.navigations.slice(t))}}if(null==this.options.store)return Promise.resolve();const s={navigations:(this.navigations??[]).map((t=>this.toStoreableNavigation(t))),navigationIndex:t};return e?this.options?.store?.pushNavigatorState(s):this.options.store.replaceNavigatorState(s)}async refresh(){if(-1===this.lastNavigationIndex)return Promise.reject();const t=this.navigations[this.lastNavigationIndex];return t.replacing=!0,t.refreshing=!0,this.navigate(t)}notifySubscribers(t){this.ea.publish(Gp.eventName,Gp.create(t))}toStoreableNavigation(t){const e=t instanceof Up?t.toStoredNavigation():t;return e.instruction=zp.stringify(this.container,e.instruction),e.fullStateInstruction=zp.stringify(this.container,e.fullStateInstruction,!1,!0),"string"!=typeof e.scope&&(e.scope=null),e}async serializeNavigation(t,e){let s=[];for(const t of e)"string"!=typeof t.instruction&&s.push(...zp.flat(t.instruction).filter((t=>null!==t.endpoint.instance)).map((t=>t.component.instance))),"string"!=typeof t.fullStateInstruction&&s.push(...zp.flat(t.fullStateInstruction).filter((t=>null!==t.endpoint.instance)).map((t=>t.component.instance)));s=Ep(s);let i=[];"string"!=typeof t.fullStateInstruction&&(i.push(...t.fullStateInstruction),t.fullStateInstruction=zp.stringify(this.container,t.fullStateInstruction,!1,!0)),"string"!=typeof t.instruction&&(i.push(...t.instruction),t.instruction=zp.stringify(this.container,t.instruction)),i=i.filter(((t,e,s)=>null!=t.component.instance&&s.indexOf(t)===e));const n=[];for(const t of i)await this.freeInstructionComponents(t,s,n)}freeInstructionComponents(t,e,s){const i=t.component.instance,n=t.viewport?.instance??null;if(null!==i&&null!==n&&!s.some((t=>t===i))){if(!e.some((t=>t===i)))return Np.run(null,(t=>n.freeContent(t,i)),(()=>{s.push(i)}));if(t.hasNextScopeInstructions)for(const i of t.nextScopeInstructions)return this.freeInstructionComponents(i,e,s)}}};Qp=bp([kp(0,Jt),kp(1,wt)],Qp);const Xp=class{constructor(){this.rootState=new up(null,null,""),this.cache=new Map,this.endpointLookup=new Map}add(t,e=!1){let s,i;if(t instanceof Array)for(const n of t)i=this.$add(n,!1),s=i.params,e&&!s[s.length-1]?.isStar&&(i.residualEndpoint=this.$add({...n,path:`${n.path}/*${lp}`},!0));else i=this.$add(t,!1),s=i.params,e&&!s[s.length-1]?.isStar&&(i.residualEndpoint=this.$add({...t,path:`${t.path}/*${lp}`},!0));this.cache.clear()}$add(t,e){const s=t.path,i=this.endpointLookup;if(i.has(s))throw vp(`Cannot add duplicate path '${s}'.`);const n=new ip(s,!0===t.caseSensitive,t.handler),r=""===s?[""]:s.split("/").filter(dp),o=[];let a=this.rootState;for(const t of r)switch(a=a.append(null,"/"),t.charAt(0)){case":":{const e=t.endsWith("?"),s=e?t.slice(1,-1):t.slice(1);if(s===lp)throw new Error(`Invalid parameter name; usage of the reserved parameter name '${lp}' is used.`);o.push(new sp(s,e,!1)),a=new fp(s,e).appendTo(a);break}case"*":{const s=t.slice(1);let i;if(s===lp){if(!e)throw new Error(`Invalid parameter name; usage of the reserved parameter name '${lp}' is used.`);i=1}else i=2;o.push(new sp(s,!0,!0)),a=new gp(s,i).appendTo(a);break}default:a=new pp(t,n.caseSensitive).appendTo(a)}const h=new np(n,o);return a.setEndpoint(h),i.set(s,h),h}recognize(t){let e=this.cache.get(t);return void 0===e&&this.cache.set(t,e=this.$recognize(t)),e}$recognize(t){(t=decodeURI(t)).startsWith("/")||(t=`/${t}`),t.length>1&&t.endsWith("/")&&(t=t.slice(0,-1));const e=new cp(this.rootState);for(let s=0,i=t.length;s<i;++s){const i=t.charAt(s);if(e.advance(i),e.isEmpty)return null}const s=e.getSolution();if(null===s)return null;const{endpoint:i}=s,n=s.getParams();return new rp(i,n)}getEndpoint(t){return this.endpointLookup.get(t)??null}};class Zp extends Array{constructor(){super(...arguments),this.currentIndex=-1}next(){return this.length>this.currentIndex+1?this[++this.currentIndex]:(this.currentIndex=-1,null)}removeCurrent(){this.splice(this.currentIndex--,1)}remove(t){Rp(this,(e=>e===t))}}class Yp{static matchEndpoints(t,e,s,i=!1){const n=[],r=t.getOwnedRoutingScopes(1/0).map((t=>t.endpoint)).filter((t=>null!==t&&!s.some((e=>t===e.endpoint.instance&&!e.cancelled)))),o=new Zp(...e.slice());let a=null;for(Yp.matchKnownEndpoints(t.router,"ViewportScope",o,r,n,!1),i||Yp.matchKnownEndpoints(t.router,"Viewport",o,r,n,!1),Yp.matchViewportScopeSegment(t.router,t,o,r,n);null!==(a=o.next());)a.needsEndpointDescribed=!0;return Yp.matchViewportConfiguration(o,r,n),i||Yp.matchSpecifiedViewport(o,r,n,!1),Yp.matchLastViewport(o,r,n),i&&Yp.matchSpecifiedViewport(o,r,n,!1),{matchedInstructions:n,remainingInstructions:[...o]}}static matchKnownEndpoints(t,e,s,i,n,r=!1){let o;for(;null!==(o=s.next());)null===o.endpoint.instance||o.isAdd(t)||o.endpoint.endpointType!==e||(Yp.matchEndpoint(o,o.endpoint.instance,r),n.push(o),Rp(i,(t=>t===o.endpoint.instance)),s.removeCurrent())}static matchViewportScopeSegment(t,e,s,i,n){let r;for(;null!==(r=s.next());)for(let o of i)if(o instanceof Lp&&o.acceptSegment(r.component.name)){if(Array.isArray(o.source)){let s=i.find((t=>t instanceof Lp&&t.name===o.name));if(void 0===s||r.isAdd(t)){const t=o.addSourceItem();s=e.getOwnedScopes().filter((t=>t.isViewportScope)).map((t=>t.endpoint)).find((e=>e.sourceItem===t))}o=s}Yp.matchEndpoint(r,o,!1),n.push(r),Rp(i,(t=>t===r.endpoint.instance)),s.removeCurrent();break}}static matchViewportConfiguration(t,e,s){let i;for(;null!==(i=t.next());)for(const n of e)if(n instanceof Hp&&n?.wantComponent(i.component.name)){Yp.matchEndpoint(i,n,!0),s.push(i),Rp(e,(t=>t===i.endpoint.instance)),t.removeCurrent();break}}static matchSpecifiedViewport(t,e,s,i){let n;for(;null!==(n=t.next());){let r=n.endpoint.instance;if(null==r){const t=n.endpoint.name;if(0===(t?.length??0))continue;for(const s of e)if(s instanceof Hp&&t===s.name){r=s;break}}r?.acceptComponent(n.component.name)&&(Yp.matchEndpoint(n,r,i),s.push(n),Rp(e,(t=>t===n.endpoint.instance)),t.removeCurrent())}}static matchLastViewport(t,e,s){let i;for(;null!==(i=t.next());){const n=[];for(const t of e)t instanceof Hp&&t.acceptComponent(i.component.name)&&n.push(t);if(1===n.length){const r=n[0];Yp.matchEndpoint(i,r,!0),s.push(i),Rp(e,(t=>t===i.endpoint.instance)),t.removeCurrent()}}}static matchEndpoint(t,e,s){t.endpoint.set(e),s&&(t.needsEndpointDescribed=!1),t.hasNextScopeInstructions&&t.nextScopeInstructions.forEach((t=>{null===t.scope&&(t.scope=e instanceof Hp?e.scope:e.scope.scope)}))}}class Jp{constructor(t,e,s,i){this.router=t,this.hasScope=e,this.owningScope=s,this.endpointContent=i,this.id=-1,this.parent=null,this.children=[],this.id=++Jp.lastId,this.owningScope=s??this}static for(t,e){if(null==t)return{scope:null,instruction:e};if(t instanceof Jp||t instanceof Hp||t instanceof Lp)return{scope:t.scope,instruction:e};let s;if("res"in t)s=t;else if("container"in t)s=t.container;else if("$controller"in t)s=t.$controller.container;else{const e=vh.for(t,{searchParents:!0});s=e?.container}if(null==s)return{scope:null,instruction:e};const i=s.has(df.closestEndpointKey,!0)?s.get(df.closestEndpointKey):null;let n=i?.scope??null;if(null===n||void 0===e){const t=e??"";return{scope:n,instruction:t.startsWith("/")?t.slice(1):e}}if(e.startsWith("/"))return{scope:null,instruction:e.slice(1)};for(;e.startsWith(".");)if(e.startsWith("./"))e=e.slice(2);else{if(!e.startsWith("../"))break;n=n.parent??n,e=e.slice(3)}return{scope:n,instruction:e}}get scope(){return this.hasScope?this:this.owningScope.scope}get endpoint(){return this.endpointContent.endpoint}get isViewport(){return this.endpoint instanceof Hp}get isViewportScope(){return this.endpoint instanceof Lp}get type(){return this.isViewport?"Viewport":"ViewportScope"}get enabled(){return this.endpointContent.isActive}get passThroughScope(){return this.isViewportScope&&this.endpoint.passThroughScope}get pathname(){return`${this.owningScope!==this?this.owningScope.pathname:""}/${this.endpoint.name}`}get path(){return`${this.parent?.path??""}${this.routingInstruction?.stringify(this.router,!1,!0,!0)??""}${this.routingInstruction?Tp.for(this.router).scope:""}`}toString(t=!1){return`${this.owningScope!==this?this.owningScope.toString():""}/${this.enabled?"":"("}${this.endpoint.toString()}#${this.id}${this.enabled?"":")"}`+(t?"\n"+this.children.map((t=>t.toString(!0))).join(""):"")}toStringOwning(t=!1){return`${this.owningScope!==this?this.owningScope.toString():""}/${this.enabled?"":"("}${this.endpoint.toString()}#${this.id}${this.enabled?"":")"}`+(t?"\n"+this.ownedScopes.map((t=>t.toStringOwning(!0))).join(""):"")}get enabledChildren(){return this.children.filter((t=>t.enabled))}get hoistedChildren(){const t=this.enabledChildren;for(;t.some((t=>t.passThroughScope));)for(const e of t.slice())if(e.passThroughScope){const s=t.indexOf(e);t.splice(s,1,...e.enabledChildren)}return t}get ownedScopes(){return this.getOwnedScopes()}get routingInstruction(){return this.endpoint.isViewportScope?this.endpoint.instruction:this.isViewport?this.endpoint.activeContent.instruction:null}getOwnedScopes(t=!1){const e=this.allScopes(t).filter((t=>t.owningScope===this));for(const t of e.slice())if(t.passThroughScope){const s=e.indexOf(t);e.splice(s,1,...t.getOwnedScopes())}return e}async processInstructions(t,e,s,i,n=""){const r=this.router,o=r.configuration.options,a=t.filter((t=>!(t.route instanceof Bp)));if(a.length>0){const e=this.findInstructions(a,o.useDirectRouting,o.useConfiguredRoutes);!a.some((t=>!t.component.none||null!=t.route))||e.foundConfiguration||e.foundInstructions||this.unknownRoute(a),(t=[...t.filter((t=>t.route instanceof Bp)),...e.instructions]).some((t=>t.scope!==this))&&console.warn("Not the current scope for instruction(s)!",this,t),e.foundConfiguration&&(n=(n??"")+e.matching)}const h=zp.resolve(t);h instanceof Promise&&await h,o.additiveInstructionDefault||(t=this.ensureClearStateInstruction(t));let c=[];({clearEndpoints:c,instructions:t}=this.getClearAllEndpoints(t));for(const e of t.filter((t=>t.isAddAll(r))))e.endpoint.set(e.scope.endpoint.name),e.scope=e.scope.owningScope;let l=[],{matchedInstructions:u,remainingInstructions:d}=this.matchEndpoints(t,e),p=100;do{p--||r.unresolvedInstructionsError(s,d);const o=[],a=u.map((t=>t.endpoint.instance));u.push(...c.filter((t=>!a.includes(t))).map((t=>zp.createClear(r,t))));const h=await hf.invokeBeforeNavigation(u,s);if(!1===h)return r.cancelNavigation(s,i),[];if(!0!==h&&h!==u){const t=zp.flat(u);d=d.filter((e=>!t.includes(e))),u=h}for(const t of u){const a=t.endpoint.instance;if(null!==a){const h=a.setNextContent(t,s);"skip"!==h&&(o.push(a),i.addEndpoint(a));const d=[a];if("swap"===h&&d.push(...a.getContent().connectedScope.allScopes(!0).map((t=>t.endpoint))),Rp(c,(t=>d.includes(t))),Rp(u,(e=>e!==t&&e.isClear(r)&&d.includes(e.endpoint.instance))),!t.isClear(r)&&t.scope?.parent?.isViewportScope&&(Rp(c,(e=>e===t.scope.parent.endpoint)),Rp(u,(e=>e!==t&&e.isClear(r)&&e.endpoint.instance===t.scope.parent.endpoint))),"skip"!==h&&t.hasNextScopeInstructions)for(const e of t.nextScopeInstructions)e.scope=a.scope,e.endpoint.instance=null;"skip"!==h||t.hasNextScopeInstructions||l.push(...await a.scope.processInstructions([],e,s,i,n))}}const f=u.filter((t=>"skip"===t.endpoint.instance?.transitionAction)),g=f.filter((t=>t.hasNextScopeInstructions));if((0===f.length||0===g.length)&&(r.isRestrictedNavigation||i.finalEndpoint(),i.run(),i.hasAllEndpoints)){const t=i.waitForSyncState("guardedUnload");t instanceof Promise&&await t}if(i.cancelled)return r.cancelNavigation(s,i),[];for(const t of o)l.every((e=>e!==t))&&l.push(t);if(e.push(...u.splice(0)),d.length>0&&({matchedInstructions:u,remainingInstructions:d}=this.matchEndpoints(d,e)),!r.isRestrictedNavigation&&(u.length>0||d.length>0)&&i.running){const t=i.waitForSyncState("swapped");t instanceof Promise&&await t}if(0===u.length&&0===d.length){const r=[];for(const o of t){if(!o.hasNextScopeInstructions)continue;const t=o.endpoint.instance?.scope??o.endpoint.scope;r.push(t.processInstructions(o.nextScopeInstructions,e,s,i,n))}l.push(...(await Promise.all(r)).flat())}if(({matchedInstructions:u,remainingInstructions:d}=i.dequeueAppendedInstructions(u,e,d)),0===u.length&&0===d.length){const t=e.map((t=>t.endpoint.instance?.connectedCE.pendingPromise?.promise)).filter((t=>null!=t));t.length>0?(await Promise.any(t),({matchedInstructions:u,remainingInstructions:d}=i.dequeueAppendedInstructions(u,e,d))):u=c.map((t=>zp.createClear(r,t)))}const v=zp.resolve(u);v instanceof Promise&&await v,l=l.filter((t=>![...e].reverse().find((e=>e.endpoint.instance===t))?.cancelled))}while(u.length>0||d.length>0);return l}unknownRoute(t){const e=this.router.configuration.options,s=zp.stringify(this.router,t);throw null!=t[0].route?e.useConfiguredRoutes?new Error("No matching configured route found for '"+s+"'."):new Error("Can not match '"+s+"' since the router is configured to not use configured routes."):e.useConfiguredRoutes&&e.useDirectRouting?new Error("No matching configured route or component found for '"+s+"'."):e.useConfiguredRoutes?new Error("No matching configured route found for '"+s+"'."):new Error("No matching route/component found for '"+s+"'.")}ensureClearStateInstruction(t){const e=this.router;if(!t.some((t=>t.isClearAll(e)))){const s=zp.create(zp.clear(e));return s.scope=this,[s,...t]}return t}getClearAllEndpoints(t){const e=this.router;let s=[];return t.some((t=>(t.scope??this)===this&&t.isClearAll(e)))&&(s=this.enabledChildren.filter((t=>!t.endpoint.isEmpty)).map((t=>t.endpoint)),t=t.filter((t=>!((t.scope??this)===this&&t.isClearAll(e))))),{clearEndpoints:s,instructions:t}}findInstructions(t,e,s){const i=this.router;let n=new yp;if(s&&!zp.containsSiblings(i,t)){let s=t.filter((t=>t.isClear(i)||t.isClearAll(i)));const r=t.filter((t=>!t.isClear(i)&&!t.isClearAll(i)));if(r.length>0)for(const o of r){const r="string"==typeof o.route?o.route:o.unparsed??zp.stringify(i,[o]),a=this.findMatchingRoute(r,o.parameters.parametersRecord??{});if(a.foundConfiguration)n=a,n.instructions=[...s,...n.instructions],s=[];else{if(!e)throw new Error(`No route found for: ${zp.stringify(i,t)}!`);n.instructions=[...s,...n.instructions,o],s=[],n.remaining=zp.stringify(i,o.nextScopeInstructions??[])}}else n.instructions=[...s]}else{if(!e)throw new Error(`No way to process sibling viewport routes with direct routing disabled: ${zp.stringify(i,t)}!`);n.instructions.push(...t)}n.instructions=n.instructions.filter((t=>""!==t.component.name));for(const t of n.instructions)null===t.scope&&(t.scope=this);return n}matchEndpoints(t,e,s=!1){const i=[],n=t.filter((t=>(t.scope??this)===this)),r=t.filter((t=>(t.scope??this)!==this)),{matchedInstructions:o,remainingInstructions:a}=Yp.matchEndpoints(this,n,e,s);return i.push(...o),r.push(...a),{matchedInstructions:i,remainingInstructions:r}}addEndpoint(t,e,s,i={}){let n=this.getOwnedScopes().find((s=>s.type===t&&s.endpoint.name===e))?.endpoint??null;return null!=s&&null!=n?.connectedCE&&n.connectedCE!==s&&(n=this.getOwnedScopes(!0).find((i=>i.type===t&&i.endpoint.name===e&&i.endpoint.connectedCE===s))?.endpoint??null),null==n&&(n="Viewport"===t?new Hp(this.router,e,s,this.scope,!!i.scope,i):new Lp(this.router,e,s,this.scope,!0,null,i),this.addChild(n.connectedScope)),null!=s&&n.setConnectedCE(s,i),n}removeEndpoint(t,e,s){return!(null===(s??null)&&!e.removeEndpoint(t,s)||(this.removeChild(e.connectedScope),0))}addChild(t){this.children.some((e=>e===t))||(null!==t.parent&&t.parent.removeChild(t),this.children.push(t),t.parent=this)}removeChild(t){const e=this.children.indexOf(t);e>=0&&(this.children.splice(e,1),t.parent=null)}allScopes(t=!1){const e=t?this.children.slice():this.enabledChildren;for(const s of e.slice())e.push(...s.allScopes(t));return e}reparentRoutingInstructions(){const t=this.hoistedChildren.filter((t=>null!==t.routingInstruction&&t.routingInstruction.component.name));if(!t.length)return null;for(const e of t){const t=e.reparentRoutingInstructions();e.routingInstruction.nextScopeInstructions=null!==t&&t.length>0?t:null}return t.map((t=>t.routingInstruction))}getChildren(t){return this.children.map((e=>e.endpoint.getTimeContent(t))).filter((t=>null!==t)).map((t=>t.connectedScope))}getAllRoutingScopes(t){const e=this.getChildren(t);for(const s of e.slice())e.push(...s.getAllRoutingScopes(t));return e}getOwnedRoutingScopes(t){const e=this.getAllRoutingScopes(t).filter((t=>t.owningScope===this));for(const s of e.slice())if(s.passThroughScope){const i=e.indexOf(s);e.splice(i,1,...s.getOwnedRoutingScopes(t))}return Ep(e)}getRoutingInstructions(t){const e=Ep(this.getOwnedRoutingScopes(t).map((t=>t.endpoint))).map((e=>e.getTimeContent(t))).filter((t=>null!==t)),s=[];for(const i of e){const e=i.instruction.clone(!0,!1,!1);""!==(e.component.name??"")&&(e.nextScopeInstructions=i.connectedScope.getRoutingInstructions(t),s.push(e))}return s}canUnload(t,e){return Np.run(e,(e=>Np.runParallel(e,...this.children.map((e=>null!==e.endpoint?s=>e.endpoint.canUnload(t,s):s=>e.canUnload(t,s))))),(t=>t.previousValue.every((t=>t))))}unload(t,e){return Np.runParallel(e,...this.children.map((e=>null!==e.endpoint?s=>e.endpoint.unload(t,s):s=>e.unload(t,s))))}matchScope(t,e=!1){const s=[];for(const i of t)i.scope===this?s.push(i):e&&i.hasNextScopeInstructions&&s.push(...this.matchScope(i.nextScopeInstructions,e));return s}findMatchingRoute(t,e){let s=new yp;if(this.isViewportScope&&!this.passThroughScope)s=this.findMatchingRouteInRoutes(t,this.endpoint.getRoutes(),e);else if(this.isViewport)s=this.findMatchingRouteInRoutes(t,this.endpoint.getRoutes(),e);else for(const i of this.enabledChildren)if(s=i.findMatchingRoute(t,e),s.foundConfiguration)break;return s.foundConfiguration?s:null!=this.parent?this.parent.findMatchingRoute(t,e):s}findMatchingRouteInRoutes(t,e,s){const i=new yp;if(0===e.length)return i;e=e.map((t=>this.ensureProperRoute(t)));const n=[];for(const t of e){const e=Array.isArray(t.path)?t.path:[t.path];for(const s of e)n.push({...t,path:s,handler:t}),""!==s&&n.push({...t,path:`${s}/*remainingPath`,handler:t})}(t.startsWith("/")||t.startsWith("+"))&&(t=t.slice(1));const r=e.find((e=>e.id===t));let o={params:{},endpoint:{}};if(null!=r){o.endpoint={route:{handler:r}};const e=(t=Array.isArray(r.path)?r.path[0]:r.path).split("/").map((t=>{if(t.startsWith(":")){const e=t.slice(1).replace(/\?$/,""),i=s[e];return o.params[e]=i,i}return t}));t=e.join("/")}else{const e=new Xp;e.add(n),o=e.recognize(t)}if(null!=o){i.match=o.endpoint.route.handler,i.matching=t;const n={...o.params};if(null!=n.remainingPath&&(i.remaining=n.remainingPath,Reflect.deleteProperty(n,"remainingPath"),i.matching=i.matching.slice(0,i.matching.indexOf(i.remaining))),i.params=n,null!=i.match?.redirectTo){let t=i.match?.redirectTo;return(i.remaining??"").length>0&&(t+=`/${i.remaining}`),this.findMatchingRouteInRoutes(t,e,s)}}if(i.foundConfiguration){i.instructions=zp.clone(i.match.instructions,!1,!0);const t=i.instructions.slice();for(;t.length>0;){const e=t.shift();e.parameters.addParameters(i.params),e.route=i,e.hasNextScopeInstructions&&t.unshift(...e.nextScopeInstructions)}i.instructions.length>0&&(i.instructions[0].routeStart=!0);const e=zp.parse(this.router,i.remaining);if(e.length>0){let t=i.instructions[0];for(;t.hasNextScopeInstructions;)t=t.nextScopeInstructions[0];t.nextScopeInstructions=e}}return i}ensureProperRoute(t){return void 0===t.id&&(t.id=Array.isArray(t.path)?t.path.join(","):t.path),void 0===t.instructions&&(t.instructions=[{component:t.component,viewport:t.viewport,parameters:t.parameters,children:t.children}]),null===t.redirectTo&&(t.instructions=zp.from(this.router,t.instructions)),t}}Jp.lastId=0;class tf{constructor(t,e,s=0){this.taskQueue=t,this.item=e,this.cost=s,this.done=!1,this.promise=new Promise(((t,e)=>{this.resolve=()=>{this.taskQueue.resolve(this,t)},this.reject=t=>{this.taskQueue.reject(this,e,t)}}))}async execute(){"execute"in this.item?await this.item.execute(this):await this.item(this)}wait(){return this.promise}}class ef{get isActive(){return null!==this.task}constructor(t){this.callback=t,this.pending=[],this.processing=null,this.allowedExecutionCostWithinTick=null,this.currentExecutionCostInCurrentTick=0,this.platform=null,this.task=null,this.dequeue=t=>{null===this.processing&&(void 0!==t&&(this.currentExecutionCostInCurrentTick=0),0!==this.pending.length&&(null!==this.allowedExecutionCostWithinTick&&void 0===t&&this.currentExecutionCostInCurrentTick+(this.pending[0].cost||0)>this.allowedExecutionCostWithinTick||(this.processing=this.pending.shift()||null,this.processing&&(this.currentExecutionCostInCurrentTick+=this.processing.cost??0,void 0!==this.callback?this.callback(this.processing):this.processing.execute().catch((t=>{throw t}))))))}}get length(){return this.pending.length}start(t){this.platform=t.platform,this.allowedExecutionCostWithinTick=t.allowedExecutionCostWithinTick,this.task=this.platform.domWriteQueue.queueTask(this.dequeue,{persistent:!0})}stop(){this.task.cancel(),this.task=null,this.allowedExecutionCostWithinTick=null,this.clear()}enqueue(t,e){const s=Array.isArray(t),i=s?t:[t],n=i.map(((t,s)=>Array.isArray(e)?e[s]:e)).map((t=>void 0!==t?t:1)),r=[];for(const t of i)r.push(t instanceof tf?t:this.createQueueTask(t,n.shift()));return this.pending.push(...r),this.dequeue(),s?r:r[0]}createQueueTask(t,e){return new tf(this,t,e)}clear(){this.pending.length=0}resolve(t,e){e(),this.processing=null,this.dequeue()}reject(t,e,s){e(s),this.processing=null,this.dequeue()}}let sf=class{constructor(t,e,s,i,n){this.platform=t,this.window=e,this.history=s,this.location=i,this.ea=n,this.allowedExecutionCostWithinTick=2,this.isActive=!1,this.options={useUrlFragmentHash:!0},this.forwardedState={eventTask:null,suppressPopstate:!1},this.pendingCalls=new ef}start(t){if(this.isActive)throw new Error("Browser navigation has already been started");this.isActive=!0,null!=t.useUrlFragmentHash&&(this.options.useUrlFragmentHash=t.useUrlFragmentHash),this.pendingCalls.start({platform:this.platform,allowedExecutionCostWithinTick:this.allowedExecutionCostWithinTick}),this.window.addEventListener("popstate",this)}stop(){if(!this.isActive)throw new Error("Browser navigation has not been started");this.window.removeEventListener("popstate",this),this.pendingCalls.stop(),this.options={useUrlFragmentHash:!0},this.isActive=!1}get length(){return this.history.length}get state(){return this.history.state}get viewerState(){const{pathname:t,search:e,hash:s}=this.location,i=this.options.useUrlFragmentHash?s.slice(1):`${t}${e}`,n=this.options.useUrlFragmentHash?s.slice(1).includes("#")?s.slice(s.slice(1).indexOf("#",1)):"":s.slice(1);return new nf(t,e.slice(1),n,i)}async go(t,e=!1){const s=this.pendingCalls.createQueueTask((t=>t.resolve()),1);return this.pendingCalls.enqueue([t=>{const i=s,n=e;this.forwardState({eventTask:i,suppressPopstate:n}),t.resolve()},e=>{const s=this.history,i=t;s.go(i),e.resolve()}],[0,1]),s.wait()}async pushNavigatorState(t){const{title:e,path:s}=t.navigations[t.navigationIndex],i=this.options.useUrlFragmentHash?"#/":"";return this.pendingCalls.enqueue((n=>{const r=this.history,o=t,a=e||"",h=`${i}${s}`;try{r.pushState(o,a,h),this.setTitle(a)}catch(t){const e=this.tryCleanState(o,"push",t);r.pushState(e,a,h),this.setTitle(a)}n.resolve()}),1).wait()}async replaceNavigatorState(t,e,s){const i=t.navigations[t.navigationIndex];e??(e=i.title),s??(s=i.path);const n=this.options.useUrlFragmentHash?"#/":"";return this.pendingCalls.enqueue((i=>{const r=this.history,o=t,a=e||"",h=`${n}${s}`;try{r.replaceState(o,a,h),this.setTitle(a)}catch(t){const e=this.tryCleanState(o,"replace",t);r.replaceState(e,a,h),this.setTitle(a)}i.resolve()}),1).wait()}async popNavigatorState(){const t=this.pendingCalls.createQueueTask((t=>t.resolve()),1);return this.pendingCalls.enqueue((async e=>{const s=t;await this.popState(s),e.resolve()}),1),t.wait()}setTitle(t){this.window.document.title=t}handleEvent(t){this.handlePopStateEvent(t)}handlePopStateEvent(t){const{eventTask:e,suppressPopstate:s}=this.forwardedState;this.forwardedState={eventTask:null,suppressPopstate:!1},this.pendingCalls.enqueue((async i=>{s||this.notifySubscribers(t),null!==e&&await e.execute(),i.resolve()}),1)}notifySubscribers(t){this.ea.publish(rf.eventName,rf.create(this.viewerState,t,this.history.state))}async popState(t){await this.go(-1,!0);const e=this.history.state,s=e?.navigations?.[e?.navigationIndex??0];null==s||s.firstEntry||(await this.go(-1,!0),await this.pushNavigatorState(e)),await t.execute()}forwardState(t){this.forwardedState=t}tryCleanState(t,e,s){try{return JSON.parse(JSON.stringify(t))}catch(t){throw new Error(`Failed to ${e} state, probably due to unserializable data and/or parameters: ${t}${s}`)}}};sf=bp([kp(0,Sa),kp(1,Ba),kp(2,Fa),kp(3,ja),kp(4,Jt)],sf);class nf{constructor(t,e,s,i){this.path=t,this.query=e,this.hash=s,this.instruction=i}}class rf{constructor(t,e,s,i){this.eventName=t,this.viewerState=e,this.event=s,this.state=i}static create(t,e,s){return new rf(rf.eventName,t,e,s)}}rf.eventName="au:router:navigation-state-change";class of{constructor(t){this.endpoint=t,this.running=!1,this.states=new Map,this.checkedStates=[],this.syncingState=null,this.syncPromise=null,this.step=null}hasReachedState(t){return this.states.has(t)&&null===this.states.get(t)}}class af{constructor(t,e){this.router=t,this.navigation=e,this.running=!1,this.completed=!1,this.cancelled=!1,this.hasAllEndpoints=!1,this.appendedInstructions=[],this.entities=[],this.syncStates=new Map,this.checkedSyncStates=new Set}static create(t,e,s){const i=new af(t,e);return s.syncStates.forEach((t=>i.addSyncState(t))),i}run(){if(!this.running){this.running=!0;for(const t of this.entities)t.running||(t.running=!0,t.endpoint.transition(this))}}addSyncState(t){const e=new Pp;this.syncStates.set(t,e)}addEndpoint(t){const e=new of(t);return this.entities.push(e),this.recheckSyncStates(),this.running&&e.endpoint.transition(this),e}removeEndpoint(t){const e=this.entities.find((e=>e.endpoint===t));void 0!==e&&Rp(this.entities,(t=>t===e))}setEndpointStep(t,e){let s=this.entities.find((e=>e.endpoint===t));void 0===s&&(s=this.addEndpoint(t)),s.step=e}getEndpointStep(t){const e=this.entities.find((e=>e.endpoint===t));return e?.step??null}addEndpointState(t,e){let s=this.entities.find((e=>e.endpoint===t));void 0===s&&(s=this.addEndpoint(t));const i=s.states.get(e);i instanceof Pp&&i.resolve(),s.states.set(e,null),this.checkSyncState(e)}waitForSyncState(t,e=null){if(0===this.entities.length)return;const s=this.syncStates.get(t);if(void 0!==s){if(null!==e){const i=this.entities.find((t=>t.endpoint===e));if(null===i?.syncPromise&&s.isPending)return i.syncingState=t,i.syncPromise=new Pp,i.checkedStates.push(t),this.checkedSyncStates.add(t),Promise.resolve().then((()=>{this.checkSyncState(t)})).catch((t=>{throw t})),i.syncPromise.promise}return s.isPending?s.promise:void 0}}waitForEndpointState(t,e){if(!this.syncStates.has(e))return;let s=this.entities.find((e=>e.endpoint===t));if(null==s&&(s=this.addEndpoint(t)),s.hasReachedState(e))return;let i=s.states.get(e);return null==i&&(i=new Pp,s.states.set(e,i)),i.promise}finalEndpoint(){this.hasAllEndpoints=!0,this.syncStates.forEach(((t,e)=>this.checkSyncState(e)))}finalize(){this.entities.forEach((t=>t.endpoint.finalizeContentChange(this,null))),this.completed=!0,this.navigation.completed=!0}cancel(){this.cancelled=!0,this.entities.forEach((t=>{const e=t.endpoint.cancelContentChange(this);e instanceof Promise&&e.catch((t=>{throw t}))})),this.router.navigator.cancel(this.navigation).then((()=>{this.navigation.process?.resolve(!1)})).catch((t=>{throw t})),this.completed=!0,this.navigation.completed=!0}enqueueAppendedInstructions(t){this.appendedInstructions.push(...t)}dequeueAppendedInstructions(t,e,s){let i=[...this.appendedInstructions];t=[...t],s=[...s];const n=i.filter((t=>!t.default)),r=i.filter((t=>t.default));for(i=n.length>0?[...n]:[...r];i.length>0;){const n=i.shift();Rp(this.appendedInstructions,(t=>t===n));const r=e.some((t=>!t.cancelled&&t.sameEndpoint(n,!0))),o=t.find((t=>t.sameEndpoint(n,!0))),a=s.find((t=>t.sameEndpoint(n,!0)));n.default&&(r||void 0!==o&&!o.default||void 0!==a&&!a.default)||(void 0!==o&&Rp(t,(t=>t===o)),void 0!==a&&Rp(s,(t=>t===a)),null!==n.endpoint.instance?t.push(n):s.push(n))}return{matchedInstructions:t,remainingInstructions:s}}checkSyncState(t){const e=this.syncStates.get(t);if(void 0!==e&&this.hasAllEndpoints&&e.isPending&&this.entities.every((e=>e.hasReachedState(t)))&&(!this.checkedSyncStates.has(t)||this.entities.every((e=>e.checkedStates.includes(t))))){for(const e of this.entities)e.syncingState===t&&(e.syncPromise?.resolve(),e.syncPromise=null,e.syncingState=null);e.resolve()}}recheckSyncStates(){this.syncStates.forEach(((t,e)=>{t.isPending||this.entities.every((t=>t.hasReachedState(e)))||this.addSyncState(e)}))}}class hf{constructor(t,e,s){this.hook=t,this.id=s,this.type="beforeNavigation",this.includeTargets=[],this.excludeTargets=[],void 0!==e.type&&(this.type=e.type);for(const t of e.include??[])this.includeTargets.push(new cf(t));for(const t of e.exclude??[])this.excludeTargets.push(new cf(t))}static add(t,e){const s=new hf(t,e??{},++this.lastIdentity);return this.hooks[s.type].push(s),this.lastIdentity}static remove(t){for(const e in this.hooks)if(Object.prototype.hasOwnProperty.call(this.hooks,e)){const s=this.hooks[e].findIndex((e=>e.id===t));s>=0&&this.hooks[e].splice(s,1)}}static removeAll(){for(const t in this.hooks)this.hooks[t]=[]}static async invokeBeforeNavigation(t,e){return this.invoke("beforeNavigation",e,t)}static async invokeTransformFromUrl(t,e){return this.invoke("transformFromUrl",e,t)}static async invokeTransformToUrl(t,e){return this.invoke("transformToUrl",e,t)}static async invokeTransformTitle(t,e){return this.invoke("transformTitle",e,t)}static async invoke(t,e,s){let i=s;for(const n of this.hooks[t])if(!n.wantsMatch||n.matches(s))if(i=await n.invoke(e,s),"boolean"==typeof i){if(!i)return!1}else s=i;return i}get wantsMatch(){return this.includeTargets.length>0||this.excludeTargets.length>0}matches(t){return!(this.includeTargets.length&&!this.includeTargets.some((e=>e.matches(t)))||this.excludeTargets.length&&this.excludeTargets.some((e=>e.matches(t))))}invoke(t,e){return this.hook(e,t)}}hf.hooks={beforeNavigation:[],transformFromUrl:[],transformToUrl:[],transformTitle:[]},hf.lastIdentity=0;class cf{constructor(t){if(this.componentType=null,this.componentName=null,this.viewport=null,this.viewportName=null,"string"==typeof t)this.componentName=t;else if(Op.isType(t))this.componentType=t,this.componentName=Op.getName(t);else{const e=t;null!=e.component&&(this.componentType=Op.isType(e.component)?Op.getType(e.component):null,this.componentName=Op.getName(e.component)),null!=e.viewport&&(this.viewport=Kp.isInstance(e.viewport)?e.viewport:null,this.viewportName=Kp.getName(e.viewport))}}matches(t){const e=t.slice();e.length||e.push(zp.create(""));for(const t of e)if(null!==this.componentName&&this.componentName===t.component.name||null!==this.componentType&&this.componentType===t.component.type||null!==this.viewportName&&this.viewportName===t.endpoint.name||null!==this.viewport&&this.viewport===t.endpoint.instance)return!0;return!1}}class lf{static async getTitle(t,e,s){let i=await hf.invokeTransformTitle(t,e);if("string"!=typeof i){const t=lf.stringifyTitles(i,e,s);i=s.appTitle,i=i.replace(/\${componentTitles}/g,t),i=i.replace(/\${appTitleSeparator}/g,""!==t?s.appTitleSeparator:"")}return i=await hf.invokeTransformTitle(i,e),i}static stringifyTitles(t,e,s){return t.map((t=>lf.stringifyTitle(t,e,s))).filter((t=>(t?.length??0)>0)).join(" + ")}static stringifyTitle(t,e,s){const i=t.nextScopeInstructions;let n=lf.resolveTitle(t,e,s);if(Array.isArray(i)&&i.length>0){let t=lf.stringifyTitles(i,e,s);t.length>0&&(1!==i.length&&(t=`[ ${t} ]`),n=n.length>0?"top-down"===s.componentTitleOrder?n+s.componentTitleSeparator+t:t+s.componentTitleSeparator+n:t)}return n}static resolveTitle(t,e,s){let i=t.getTitle(e);return null!=s.transformTitle&&(i=s.transformTitle(i,t,e)),i}}const uf=mt.createInterface("IRouter",(t=>t.singleton(df)));class df{static get inject(){return[wt,Jt,Qp,sf,sf,jf]}constructor(t,e,s,i,n,r){this.container=t,this.ea=e,this.navigator=s,this.viewer=i,this.store=n,this.configuration=r,this.rootScope=null,this.activeComponents=[],this.appendedInstructions=[],this.isActive=!1,this.coordinators=[],this.loadedFirst=!1,this.handleNavigatorNavigateEvent=t=>{this.processNavigation(t.navigation).catch((t=>{throw t}))},this.handleNavigatorStateChangeEvent=t=>{if(null!=t.state?.navigationIndex){const e=Up.create(t.state.navigations[t.state.navigationIndex]);e.instruction=t.viewerState.instruction,e.fromBrowser=!0,this.navigator.navigate(e).catch((t=>{throw t}))}else this.load(t.viewerState.instruction,{fromBrowser:!0}).catch((t=>{throw t}))},this.processNavigation=async t=>{this.loadedFirst=!0;const e=this.configuration.options,s=af.create(this,t,{syncStates:this.configuration.options.navigationSyncStates});this.coordinators.push(s),s.appendedInstructions.push(...this.appendedInstructions.splice(0)),this.ea.publish(mf.eventName,mf.create(t));let i="string"!=typeof t.instruction||t.useFullStateInstruction?t.useFullStateInstruction?t.fullStateInstruction:t.instruction:await hf.invokeTransformFromUrl(t.instruction,s.navigation);const n=e.basePath;null!==n&&"string"==typeof i&&i.startsWith(n)&&!e.useUrlFragmentHash&&(i=i.slice(n.length)),"/"===i&&(i=""),"string"==typeof i&&(i=""===i?[new zp("")]:zp.parse(this,i)),t.scope??(t.scope=this.rootScope.scope);const r=await t.scope.processInstructions(i,[],t,s);return Np.run(null,(()=>(s.finalEndpoint(),s.waitForSyncState("completed"))),(()=>(s.finalize(),this.updateNavigation(t))),(()=>{t.navigation.new&&!t.navigation.first&&!t.repeating&&r.every((t=>t.options.noHistory))&&(t.untracked=!0)}),(async()=>{for(;this.coordinators.length>0&&this.coordinators[0].completed;){const t=this.coordinators.shift();await this.navigator.finalize(t.navigation,!1),this.ea.publish(bf.eventName,bf.create(t.navigation)),this.ea.publish(wf.eventName,wf.create(t.navigation)),t.navigation.process?.resolve(!0)}}))}}get isNavigating(){return this.coordinators.length>0}get isRestrictedNavigation(){const t=this.configuration.options.navigationSyncStates;return t.includes("guardedLoad")||t.includes("unloaded")||t.includes("loaded")||t.includes("guarded")||t.includes("routed")}get statefulHistory(){return void 0!==this.configuration.options.statefulHistoryLength&&this.configuration.options.statefulHistoryLength>0}start(){if(this.isActive)throw new Error("Router has already been started");this.isActive=!0;const t=this.container.get(Wl);this.rootScope=new Lp(this,"rootScope",t.controller.viewModel,null,!0,t.config.component);const e=this.configuration.options;if(null===e.basePath){const s=new URL(t.host.baseURI);e.basePath=s.pathname}e.basePath.endsWith("/")&&(e.basePath=e.basePath.slice(0,-1)),this.navigator.start({store:this.store,viewer:this.viewer,statefulHistoryLength:this.configuration.options.statefulHistoryLength}),this.navigatorStateChangeEventSubscription=this.ea.subscribe(rf.eventName,this.handleNavigatorStateChangeEvent),this.navigatorNavigateEventSubscription=this.ea.subscribe(Gp.eventName,this.handleNavigatorNavigateEvent),this.viewer.start({useUrlFragmentHash:this.configuration.options.useUrlFragmentHash}),this.ea.publish(ff.eventName,ff.create())}stop(){if(!this.isActive)throw new Error("Router has not been started");this.ea.publish(gf.eventName,gf.create()),this.navigator.stop(),this.viewer.stop(),this.navigatorStateChangeEventSubscription.dispose(),this.navigatorNavigateEventSubscription.dispose()}async initialLoad(){const{instruction:t,hash:e}=this.viewer.viewerState,s=this.load(t,{fragment:e,replacing:!0,fromBrowser:!1});return this.loadedFirst=!0,s}getEndpoint(t,e){return this.allEndpoints(t).find((t=>t.name===e))??null}allEndpoints(t,e=!1){return this.rootScope.scope.allScopes(e).filter((e=>null===t||e.type===t)).map((t=>t.endpoint))}addEndpoint(t,...e){throw new Error("Not implemented")}connectEndpoint(t,e,s,i,n){const r=s.container,o=(r.has(df.closestEndpointKey,!0)?r.get(df.closestEndpointKey):this.rootScope).connectedScope;return null===t&&(t=o.addEndpoint(e,i,s,n),Ot.instance(df.closestEndpointKey,t).register(r)),t}disconnectEndpoint(t,e,s){if(!e.connectedScope.parent.removeEndpoint(t,e,s))throw new Error("Router failed to remove endpoint: "+e.name)}async load(t,e){e=e??{},t=this.extractFragment(t,e),t=this.extractQuery(t,e);let s=null;if(({instructions:t,scope:s}=this.applyLoadOptions(t,e)),e.append&&(!this.loadedFirst||this.isNavigating))return t=zp.from(this,t),this.appendInstructions(t,s),Promise.resolve();const i=Up.create({instruction:t,fullStateInstruction:"",scope:s,title:e.title,data:e.data,query:e.query,fragment:e.fragment,parameters:e.parameters,replacing:(e.replacing??!1)||e.replace,repeating:e.append,fromBrowser:e.fromBrowser??!1,origin:e.origin,completed:!1});return this.navigator.navigate(i)}applyLoadOptions(t,e,s=!0){"origin"in(e=e??{})&&!("context"in e)&&(e.context=e.origin);const{scope:i,instruction:n}=Jp.for(e.context??null,"string"==typeof t?t:void 0);if("string"==typeof t)if(s)t=n;else{t=zp.from(this,n);for(const e of t)null===e.scope&&(e.scope=i)}else{t=zp.from(this,t);for(const e of t)null===e.scope&&(e.scope=i)}return{instructions:t,scope:i}}refresh(){return this.navigator.refresh()}back(){return this.navigator.go(-1)}forward(){return this.navigator.go(1)}go(t){return this.navigator.go(t)}checkActive(t,e){if("string"==typeof t)throw new Error(`Parameter instructions to checkActivate can not be a string ('${t}')!`);e=e??{},({instructions:t}=this.applyLoadOptions(t,e)),t.forEach((t=>t.scope??(t.scope=this.rootScope.scope)));const s=Ep(t.map((t=>t.scope)));for(const e of s){const s=e.matchScope(t,!1),i=e.matchScope(this.activeComponents,!0);if(!zp.contains(this,i,s,!0))return!1}return!0}unresolvedInstructionsError(t,e){throw this.ea.publish(kf.eventName,kf.create(t)),this.ea.publish(wf.eventName,wf.create(t)),function(t){const e=new Error(`${t.length} remaining instructions after 100 iterations; there is likely an infinite loop.`);return e.remainingInstructions=t,console.log(e,e.remainingInstructions),e}(e)}cancelNavigation(t,e){e.cancel(),this.ea.publish(yf.eventName,yf.create(t)),this.ea.publish(wf.eventName,wf.create(t))}appendInstructions(t,e=null){null===e&&(e=this.rootScope.scope);for(const s of t)null===s.scope&&(s.scope=e);let s=null;for(let t=this.coordinators.length-1;t>=0;t--)if(!this.coordinators[t].completed){s=this.coordinators[t];break}if(null===s){if(this.loadedFirst)throw Error("Router failed to append routing instructions to coordinator");this.appendedInstructions.push(...t)}s?.enqueueAppendedInstructions(t)}async updateNavigation(t){this.rootScope.scope.reparentRoutingInstructions();const e=this.rootScope.scope.getRoutingInstructions(t.timestamp);let{matchedInstructions:s}=this.rootScope.scope.matchEndpoints(e,[],!0),i=100;for(;s.length>0;){if(0==i--)throw new Error("Router failed to find viewport when updating viewer paths.");s=s.map((t=>{const{matchedInstructions:e}=t.endpoint.instance.scope.matchEndpoints(t.nextScopeInstructions??[],[],!0);return e})).flat()}t.timestamp>=(this.activeNavigation?.timestamp??0)&&(this.activeNavigation=t,this.activeComponents=e);let n=await hf.invokeTransformToUrl(e,t);if("string"!=typeof n&&(n=zp.stringify(this,n,!1,!0)),n=await hf.invokeTransformToUrl(n,t),null==t.query&&null!=t.parameters){const e=new URLSearchParams;for(let[s,i]of Object.entries(t.parameters)){s=encodeURIComponent(s),Array.isArray(i)||(i=[i]);for(const t of i)e.append(s,encodeURIComponent(t))}t.query=e.toString()}let r=`${this.configuration.options.basePath}/`;(null===r||""!==n&&"/"===n[0]||this.configuration.options.useUrlFragmentHash)&&(r="");const o=(t.query?.length??0)>0?"?"+t.query:"",a=(t.fragment?.length??0)>0?"#"+t.fragment:"";t.path=r+n+o+a;const h=[zp.create(zp.clear(this))];if(h.push(...zp.clone(e,this.statefulHistory)),t.fullStateInstruction=h,null===(t.title??null)){const s=await lf.getTitle(e,t,this.configuration.options.title);null!==s&&(t.title=s)}return Promise.resolve()}extractFragment(t,e){if("string"==typeof t&&null==e.fragment){const[s,i]=t.split("#");t=s,e.fragment=i}return t}extractQuery(t,e){if("string"==typeof t&&null==e.query){const[s,i]=t.split("?");t=s,e.query=i}return"string"==typeof e.parameters&&null==e.query&&(e.query=e.parameters,e.parameters=void 0),"string"==typeof e.query&&e.query.length>0&&(e.parameters??(e.parameters={}),new URLSearchParams(e.query).forEach(((t,s)=>{s=decodeURIComponent(s),t=decodeURIComponent(t),s in e.parameters?(Array.isArray(e.parameters[s])||(e.parameters[s]=[e.parameters[s]]),e.parameters[s].push(t)):e.parameters[s]=t}))),t}}df.closestEndpointKey=D.annotation.keyFor("closest-endpoint");class pf{constructor(t){this.eventName=t}}class ff extends pf{static create(){return new ff(this.eventName)}}ff.eventName="au:router:router-start";class gf extends pf{static create(){return new gf(this.eventName)}}gf.eventName="au:router:router-stop";class vf{constructor(t,e){this.eventName=t,this.navigation=e}}class mf extends vf{static create(t){return new mf(this.eventName,t)}}mf.eventName="au:router:navigation-start";class wf extends vf{static create(t){return new wf(this.eventName,t)}}wf.eventName="au:router:navigation-end";class yf extends vf{static create(t){return new yf(this.eventName,t)}}yf.eventName="au:router:navigation-cancel";class bf extends vf{static create(t){return new bf(this.eventName,t)}}bf.eventName="au:router:navigation-complete";class kf extends vf{static create(t){return new kf(this.eventName,t)}}kf.eventName="au:router:navigation-error";const Cf=mt.createInterface("ILinkHandler",(t=>t.singleton(Sf)));let Sf=class{constructor(t,e){this.window=t,this.router=e}handleEvent(t){this.handleClick(t)}handleClick(t){if(0!==t.button||t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)return;const e=t.currentTarget;if(e.hasAttribute("external"))return;const s=e.getAttribute("target")??"";if(s.length>0&&s!==this.window.name&&"_self"!==s)return;const i=Ga.for(e,"load"),n=void 0!==i?i.viewModel.value:null,r=this.router.configuration.options.useHref&&e.hasAttribute("href")?e.getAttribute("href"):null;if(!(null!==n&&0!==n.length||null!==r&&0!==r.length))return;t.preventDefault();let o=n??r??"";"string"==typeof o&&o.startsWith("#")&&(o=o.slice(1),o.startsWith("/")||(o=`/${o}`)),this.router.load(o,{origin:e}).catch((t=>{throw t}))}};var Tf;function $f(t,e,s,i,n=!1){if(n)return""===e;if(s)return e;const r=i.getAttribute(t)??"";return r.length>0?r:e}function xf(t,e){if(!t.isActive)return new Promise((t=>{const s=e.subscribe(ff.eventName,(()=>{t(),s.dispose()}))}))}function Af(t,e,s,i){let n=Ga.for(s,"considered-active")?.viewModel?.value;void 0===n&&(n=i);const r=t.applyLoadOptions(n,{context:e}),o=zp.from(t,r.instructions);for(const t of o)null===t.scope&&(t.scope=r.scope);return o}function If(t){let e=t.parentElement;for(;null!=e;){if("AU-VIEWPORT"===e.tagName){e=null;break}if(e.hasAttribute("load-active"))break;e=e.parentElement}return e??(e=t),e}Sf=bp([kp(0,Ba),kp(1,uf)],Sf),function(t){t.default="default",t.disallow="disallow",t.reload="reload",t.refresh="refresh"}(Tf||(Tf={}));const Of=vh.createInjectable();let Rf=class{constructor(t,e,s,i,n,r){this.router=t,this.element=e,this.container=s,this.ea=i,this.parentViewport=n,this.instruction=r,this.name="default",this.usedBy="",this.default="",this.fallback="",this.fallbackAction="",this.noScope=!1,this.noLink=!1,this.noTitle=!1,this.noHistory=!1,this.stateful=!1,this.endpoint=null,this.pendingChildren=[],this.pendingPromise=null,this.isBound=!1}hydrated(t){this.controller=t,this.container=t.container;const e=this.instruction.props.filter((t=>"default"===t.to)).length>0;return e&&null!=this.parentViewport&&(this.parentViewport.pendingChildren.push(this),null===this.parentViewport.pendingPromise&&(this.parentViewport.pendingPromise=new Pp)),Np.run(null,(()=>xf(this.router,this.ea)),(()=>{this.router.isRestrictedNavigation&&this.connect()}))}binding(t,e){return this.isBound=!0,Np.run(null,(()=>xf(this.router,this.ea)),(()=>{this.router.isRestrictedNavigation||this.connect()}),(()=>{null!=this.endpoint?.activeResolve&&(this.endpoint.activeResolve(),this.endpoint.activeResolve=null)}),(()=>{if(null!==this.endpoint&&null===this.endpoint.getNextContent())return this.endpoint.activate(null,t,this.controller,void 0)?.asValue}))}detaching(t,e){if(null!==this.endpoint)return this.isBound=!1,this.endpoint.deactivate(null,t,e)}unbinding(t,e){if(null!==this.endpoint)return this.disconnect(null)}dispose(){this.endpoint?.dispose(),this.endpoint=null}connect(){const{isBound:t,element:e}=this,s=$f("name",this.name,t,e),i={};i.scope=!$f("no-scope",this.noScope,!1,e,!0),i.usedBy=$f("used-by",this.usedBy,t,e),i.default=$f("default",this.default,t,e),i.fallback=$f("fallback",this.fallback,t,e),i.fallbackAction=$f("fallback-action",this.fallbackAction,t,e),i.noLink=$f("no-link",this.noLink,t,e,!0),i.noTitle=$f("no-title",this.noTitle,t,e,!0),i.noHistory=$f("no-history",this.noHistory,t,e,!0),i.stateful=$f("stateful",this.stateful,t,e,!0),Object.keys(i).forEach((t=>{void 0===i[t]&&delete i[t]})),this.endpoint=this.router.connectEndpoint(this.endpoint,"Viewport",this,s,i);const n=this.parentViewport;null!=n&&(Rp(n.pendingChildren,(t=>t===this)),0===n.pendingChildren.length&&null!==n.pendingPromise&&(n.pendingPromise.resolve(),n.pendingPromise=null))}disconnect(t){null!==this.endpoint&&this.router.disconnectEndpoint(t,this.endpoint,this)}setActivity(t,e){const s=this.router.configuration.options.indicators.viewportNavigating;if("string"==typeof t)this.element.classList.toggle(t,e);else for(const i in t)this.element.classList.toggle(`${s}-${i}`,e&&t[i])}};bp([Qo],Rf.prototype,"name",void 0),bp([Qo],Rf.prototype,"usedBy",void 0),bp([Qo],Rf.prototype,"default",void 0),bp([Qo],Rf.prototype,"fallback",void 0),bp([Qo],Rf.prototype,"fallbackAction",void 0),bp([Qo],Rf.prototype,"noScope",void 0),bp([Qo],Rf.prototype,"noLink",void 0),bp([Qo],Rf.prototype,"noTitle",void 0),bp([Qo],Rf.prototype,"noHistory",void 0),bp([Qo],Rf.prototype,"stateful",void 0),Rf=bp([Ya({name:"au-viewport",injectable:Of}),kp(0,uf),kp(1,Aa),kp(2,wt),kp(3,Jt),kp(4,Of),kp(5,$c)],Rf);const Ef=vh.createInjectable();let Pf=class{constructor(t,e,s,i,n){this.router=t,this.element=e,this.container=s,this.parent=i,this.parentController=n,this.name="default",this.catches="",this.collection=!1,this.source=null,this.viewportScope=null,this.isBound=!1}hydrated(t){this.controller=t}bound(t,e){this.isBound=!0,this.$controller.scope=this.parentController.scope,this.connect(),null!==this.viewportScope&&this.viewportScope.binding()}unbinding(t,e){return null!==this.viewportScope&&this.viewportScope.unbinding(),Promise.resolve()}connect(){if(null===this.router.rootScope)return;const t=this.getAttribute("name",this.name),e={};let s=this.getAttribute("catches",this.catches);void 0!==s&&(e.catches=s),s=this.getAttribute("collection",this.collection,!0),void 0!==s&&(e.collection=s),e.source=this.source||null,this.viewportScope=this.router.connectEndpoint(this.viewportScope,"ViewportScope",this,t,e)}disconnect(){this.viewportScope&&this.router.disconnectEndpoint(null,this.viewportScope,this),this.viewportScope=null}getAttribute(t,e,s=!1){if(this.isBound)return e;if(this.element.hasAttribute(t)){if(s)return!0;if((e=this.element.getAttribute(t)).length>0)return e}}};bp([Qo],Pf.prototype,"name",void 0),bp([Qo],Pf.prototype,"catches",void 0),bp([Qo],Pf.prototype,"collection",void 0),bp([Qo],Pf.prototype,"source",void 0),Pf=bp([Ya({name:"au-viewport-scope",template:"<template></template>",containerless:!1,injectable:Ef}),kp(0,uf),kp(1,Aa),kp(2,wt),kp(3,Ef),kp(4,xl)],Pf);let Nf=class{constructor(t,e,s,i){this.element=t,this.router=e,this.linkHandler=s,this.ea=i,this.h=!1,this.hasHref=null,this.navigationEndHandler=t=>{this.updateActive()},this.activeClass=this.router.configuration.options.indicators.loadActive}binding(){null==this.value&&(this.h=!0),this.element.addEventListener("click",this.linkHandler),this.updateValue(),this.updateActive(),this.routerNavigationSubscription=this.ea.subscribe(wf.eventName,this.navigationEndHandler)}unbinding(){this.element.removeEventListener("click",this.linkHandler),this.routerNavigationSubscription.dispose()}valueChanged(t){this.updateValue(),this.updateActive()}updateValue(){if(this.h&&(this.value={component:this.component,parameters:this.parameters,viewport:this.viewport,id:this.id}),null===this.hasHref&&(this.hasHref=this.element.hasAttribute("href")),!this.hasHref){let t=this.value;if("string"!=typeof t){const e=zp.from(this.router,t).shift(),s=this.u(t);s.foundConfiguration&&(e.route=s.matching),t=zp.stringify(this.router,[e])}const{scope:e,instruction:s}=Jp.for(this.element,t);t=`${e?.path??""}${s??""}`,this.router.configuration.options.useUrlFragmentHash&&!t.startsWith("#")&&(t=`#/${t}`),this.element.setAttribute("href",t)}}async updateActive(){const t=Ga.for(this.element,"load").parent,e="string"==typeof this.value?{id:this.value,path:this.value}:this.value,s=this.u(e),i=s.foundConfiguration?s.instructions:Af(this.router,t,this.element,this.value);If(this.element).classList.toggle(this.activeClass,this.router.checkActive(i,{context:t}))}u(t){if("string"==typeof t)return new yp;const e=Jp.for(this.element).scope??this.router.rootScope.scope;if(null!=t.id)return e.findMatchingRoute(t.id,t.parameters??{});const s=t.path;return null!=s?e.findMatchingRoute(s,t.parameters??{}):new yp}};bp([Qo({mode:2})],Nf.prototype,"value",void 0),bp([Qo],Nf.prototype,"component",void 0),bp([Qo],Nf.prototype,"parameters",void 0),bp([Qo],Nf.prototype,"viewport",void 0),bp([Qo],Nf.prototype,"id",void 0),Nf=bp([Da("load"),kp(0,Aa),kp(1,uf),kp(2,Cf),kp(3,Jt)],Nf);let Mf=class{constructor(t,e,s,i){this.element=t,this.router=e,this.linkHandler=s,this.ea=i,this.navigationEndHandler=t=>{this.updateActive()},this.activeClass=this.router.configuration.options.indicators.loadActive}binding(){!this.router.configuration.options.useHref||this.hasLoad()||this.element.hasAttribute("external")||(this.element.addEventListener("click",this.linkHandler),this.routerNavigationSubscription=this.ea.subscribe(wf.eventName,this.navigationEndHandler)),this.updateValue(),this.updateActive()}unbinding(){this.element.removeEventListener("click",this.linkHandler),this.routerNavigationSubscription?.dispose()}valueChanged(){this.updateValue(),this.updateActive()}updateValue(){this.element.setAttribute("href",this.value)}updateActive(){if(this.router.configuration.options.useHref&&!this.hasLoad()&&!this.element.hasAttribute("external")){const t=Ga.for(this.element,"href").parent,e=Af(this.router,t,this.element,this.value);If(this.element).classList.toggle(this.activeClass,this.router.checkActive(e,{context:t}))}}hasLoad(){const t=this.$controller.parent.children;return t?.some((t=>1===t.vmKind&&t.viewModel instanceof Nf))??!1}};bp([Qo({mode:2})],Mf.prototype,"value",void 0),Mf=bp([Da({name:"href",noMultiBindings:!0}),kp(0,Aa),kp(1,uf),kp(2,Cf),kp(3,Jt)],Mf);let Bf=class{};bp([Qo({mode:2})],Bf.prototype,"value",void 0),Bf=bp([Da("considered-active")],Bf);const jf=mt.createInterface("IRouterConfiguration",(t=>t.singleton(Df))),Ff=[uf],Lf=[Rf,Pf,Nf,Mf,Bf];class Df{static register(t){const e=t.get(jf);return e.options=Df.options,e.options.setRouterConfiguration(e),Df.options=xp.create(),t.register(...Ff,...Lf,ka.activating(uf,Df.configurationCall),ka.activated(uf,(t=>t.initialLoad())),ka.deactivated(uf,(t=>t.stop())))}static customize(t){return void 0===t?(Df.options=xp.create(),Df.configurationCall=t=>{t.start()}):t instanceof Function?Df.configurationCall=t:(Df.options=xp.create(),Df.options.apply(t)),Df}static createContainer(){return this.register(mt.createContainer())}static for(t){return t instanceof df?t.configuration:t.get(jf)}apply(t,e=!1){e&&(this.options=xp.create()),this.options.apply(t)}addHook(t,e){return hf.add(t,e)}removeHook(t){return hf.remove(t)}removeAllHooks(){return hf.removeAll()}}Df.options=xp.create(),Df.configurationCall=t=>{t.start()};var Vf=n(62),Uf=n.n(Vf),Wf=n(36),qf=n.n(Wf),_f=n(793),Hf=n.n(_f),Kf=n(892),zf=n.n(Kf),Gf=n(173),Qf=n.n(Gf),Xf=n(464),Zf=n.n(Xf),Yf=n(355),Jf={};Jf.styleTagTransform=Zf(),Jf.setAttributes=zf(),Jf.insert=Hf().bind(null,"head"),Jf.domAPI=qf(),Jf.insertStyleElement=Qf(),Uf()(Yf.Z,Jf),Yf.Z&&Yf.Z.locals&&Yf.Z.locals;const tg="my-app",eg='<div>My APP</div>\r\n<button click.trigger="fetch()">FETCH DATA</button>\r\n\r\n\r\n\x3c!-- <nav>\r\n    <a load="/">Home</a>\r\n    <a load="/next">Next</a>\r\n</nav>\r\n\r\n<au-viewport></au-viewport> --\x3e',sg=eg,ig=[];let ng;function rg(t){ng||(ng=vh.define({name:tg,template:eg,dependencies:ig})),t.register(ng)}function og(t){return"object"==typeof t&&null!==t||"function"==typeof t}function ag(t){return null==t}let hg=new WeakMap;const cg=(t,e,s,i,n)=>new TypeError(`${t}(${e.map(String).join(",")}) - Expected '${s}' to be of type ${n}, but got: ${Object.prototype.toString.call(i)} (${String(i)})`);function lg(t){switch(typeof t){case"undefined":case"string":case"symbol":return t;default:return`${t}`}}function ug(t,e,s){let i=hg.get(t);if(void 0===i){if(!s)return;i=new Map,hg.set(t,i)}let n=i.get(e);if(void 0===n){if(!s)return;n=new Map,i.set(e,n)}return n}function dg(t,e,s){const i=ug(e,s,!1);return void 0!==i&&i.has(t)}function pg(t,e,s){if(dg(t,e,s))return!0;const i=Ng(e);return null!==i&&pg(t,i,s)}function fg(t,e,s){const i=ug(e,s,!1);if(void 0!==i)return i.get(t)}function gg(t,e,s){if(dg(t,e,s))return fg(t,e,s);const i=Ng(e);return null!==i?gg(t,i,s):void 0}function vg(t,e,s,i){ug(s,i,!0).set(t,e)}function mg(t,e){const s=[],i=ug(t,e,!1);if(void 0===i)return s;const n=i.keys();let r=0;for(const t of n)s[r]=t,++r;return s}function wg(t,e){const s=mg(t,e),i=Ng(t);if(null===i)return s;const n=wg(i,e),r=s.length;if(0===r)return n;const o=n.length;if(0===o)return s;const a=new Set,h=[];let c,l=0;for(let t=0;t<r;++t)c=s[t],a.has(c)||(a.add(c),h[l]=c,++l);for(let t=0;t<o;++t)c=n[t],a.has(c)||(a.add(c),h[l]=c,++l);return h}function yg(t,e){return function(s,i){if(!og(s))throw cg("@metadata",[t,e,s,i],"target",s,"Object or Function");vg(t,e,s,function(t){switch(typeof t){case"undefined":case"string":case"symbol":return t;default:throw new TypeError(`Invalid metadata propertyKey: ${t}.`)}}(i))}}function bg(t,e,s,i){if(void 0!==s){if(!Array.isArray(t))throw cg("Metadata.decorate",[t,e,s,i],"decorators",t,"Array");if(!og(e))throw cg("Metadata.decorate",[t,e,s,i],"target",e,"Object or Function");if(!og(i)&&!ag(i))throw cg("Metadata.decorate",[t,e,s,i],"attributes",i,"Object, Function, null, or undefined");return null===i&&(i=void 0),s=function(t){switch(typeof t){case"string":case"symbol":return t;default:return`${t}`}}(s),function(t,e,s,i){for(let n=t.length-1;n>=0;--n){const r=(0,t[n])(e,s,i);if(!ag(r)){if(!og(r))throw cg("DecorateProperty",[t,e,s,i],"decorated",r,"Object, Function, null, or undefined");i=r}}return i}(t,e,s,i)}if(!Array.isArray(t))throw cg("Metadata.decorate",[t,e,s,i],"decorators",t,"Array");if("function"!=typeof e)throw cg("Metadata.decorate",[t,e,s,i],"target",e,"Function");return function(t,e){for(let s=t.length-1;s>=0;--s){const i=(0,t[s])(e);if(!ag(i)){if("function"!=typeof i)throw cg("DecorateConstructor",[t,e],"decorated",i,"Function, null, or undefined");e=i}}return e}(t,e)}function kg(t,e,s,i){if(!og(s))throw cg("Metadata.define",[t,e,s,i],"target",s,"Object or Function");return vg(t,e,s,lg(i))}function Cg(t,e,s){if(!og(e))throw cg("Metadata.has",[t,e,s],"target",e,"Object or Function");return pg(t,e,lg(s))}function Sg(t,e,s){if(!og(e))throw cg("Metadata.hasOwn",[t,e,s],"target",e,"Object or Function");return dg(t,e,lg(s))}function Tg(t,e,s){if(!og(e))throw cg("Metadata.get",[t,e,s],"target",e,"Object or Function");return gg(t,e,lg(s))}function $g(t,e,s){if(!og(e))throw cg("Metadata.getOwn",[t,e,s],"target",e,"Object or Function");return fg(t,e,lg(s))}function xg(t,e){if(!og(t))throw cg("Metadata.getKeys",[t,e],"target",t,"Object or Function");return wg(t,lg(e))}function Ag(t,e){if(!og(t))throw cg("Metadata.getOwnKeys",[t,e],"target",t,"Object or Function");return mg(t,lg(e))}function Ig(t,e,s){if(!og(e))throw cg("Metadata.delete",[t,e,s],"target",e,"Object or Function");return function(t,e,s){const i=ug(t,s,!1);return void 0!==i&&i.delete(e)}(e,t,lg(s))}const Og={define:kg,has:Cg,hasOwn:Sg,get:Tg,getOwn:$g,getKeys:xg,getOwnKeys:Ag,delete:Ig},Rg="[[$au]]",Eg=(t,e,s)=>[[Rg,hg],["metadata",yg],["decorate",bg],["defineMetadata",kg],["hasMetadata",Cg],["hasOwnMetadata",Sg],["getMetadata",Tg],["getOwnMetadata",$g],["getMetadataKeys",xg],["getOwnMetadataKeys",Ag],["deleteMetadata",Ig]].forEach((([i,n])=>((t,e,s,i,n)=>{if(!Reflect.defineProperty(t,e,{writable:i,enumerable:!1,configurable:n,value:s}))throw Pg(`AUR1000:${e}`)})(t,i,n,e,s))),Pg=t=>new Error(t),Ng=Object.getPrototypeOf,Mg=Object.freeze,Bg=String,jg=Og.getOwn,Fg=Og.hasOwn,Lg=Og.define,Dg=t=>"function"==typeof t,Vg=t=>"string"==typeof t,Ug=()=>Object.create(null),Wg=(t,...e)=>new Error(`AUR${Bg(t).padStart(4,"0")}:${e.map(Bg)}`),qg={},_g=t=>{switch(typeof t){case"number":return t>=0&&(0|t)===t;case"string":{const e=qg[t];if(void 0!==e)return e;const s=t.length;if(0===s)return qg[t]=!1;let i=0,n=0;for(;n<s;++n)if(i=Gg(t,n),0===n&&48===i&&s>1||i<48||i>57)return qg[t]=!1;return qg[t]=!0}default:return!1}},Hg=(t,e,s)=>({configurable:!0,enumerable:s.enumerable,get(){const t=s.value.bind(this);return Reflect.defineProperty(this,e,{value:t,writable:!0,configurable:!0,enumerable:s.enumerable}),t}});function Kg(...t){return Object.assign(Ug(),...t)}const zg=function(){const t=new WeakMap;let e=!1,s="",i=0;return n=>(e=t.get(n),void 0===e&&(s=n.toString(),i=s.length,e=i>=29&&i<=100&&125===Gg(s,i-1)&&Gg(s,i-2)<=32&&93===Gg(s,i-3)&&101===Gg(s,i-4)&&100===Gg(s,i-5)&&111===Gg(s,i-6)&&99===Gg(s,i-7)&&32===Gg(s,i-8)&&101===Gg(s,i-9)&&118===Gg(s,i-10)&&105===Gg(s,i-11)&&116===Gg(s,i-12)&&97===Gg(s,i-13)&&110===Gg(s,i-14)&&88===Gg(s,i-15),t.set(n,e)),e)}(),Gg=(t,e)=>t.charCodeAt(e),Qg="au:annotation",Xg=(t,e)=>void 0===e?`${Qg}:${t}`:`${Qg}:${t}:${e}`,Zg=(t,e)=>{const s=jg(Qg,t);void 0===s?Lg(Qg,[e],t):s.push(e)},Yg="au:resource",Jg=t=>Fg(Yg,t),tv=t=>{const e=jg(Yg,t);return void 0===e?jv:e.map((e=>jg(e,t)))};Object.prototype.hasOwnProperty;const ev=new Set("Array ArrayBuffer Boolean DataView Date Error EvalError Float32Array Float64Array Function Int8Array Int16Array Int32Array Map Number Object Promise RangeError ReferenceError RegExp Set SharedArrayBuffer String SyntaxError TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array URIError WeakMap WeakSet".split(" "));let sv=0,iv=null;class nv{get depth(){return null===this.t?0:this.t.depth+1}get parent(){return this.t}constructor(t,e){if(this.id=++sv,this.i=0,this.u=new Map,this.t=t,this.config=e,this.h=new Map,this.res={},null===t)this.root=this,this.R=new Map;else if(this.root=t.root,this.R=t.R,e.inheritParentResources)for(const e in t.res)this.registerResolver(e,t.res[e]);this.h.set(Av,uv)}register(...t){if(100==++this.i)throw Wg(6,...t);let e,s,i,n,r,o=0,a=t.length;for(;o<a;++o)if(e=t[o],og(e))if(dv(e))e.register(this);else if(Jg(e)){const t=tv(e);if(1===t.length)t[0].register(this);else for(n=0,r=t.length;r>n;)t[n].register(this),++n}else if(fv(e))Bv.singleton(e,e).register(this);else for(s=Object.keys(e),n=0,r=s.length;n<r;++n)i=e[s[n]],og(i)&&(dv(i)?i.register(this):this.register(i));return--this.i,this}registerResolver(t,e,s=!1){av(t);const i=this.h,n=i.get(t);if(null==n){if(i.set(t,e),gv(t)){if(void 0!==this.res[t])throw Wg(7,t);this.res[t]=e}}else n instanceof Nv&&4===n.C?n._state.push(e):i.set(t,new Nv(t,4,[n,e]));return s&&this.u.set(t,e),e}registerTransformer(t,e){const s=this.getResolver(t);if(null==s)return!1;if(s.getFactory){const t=s.getFactory(this);return null!=t&&(t.registerTransformer(e),!0)}return!1}getResolver(t,e=!0){if(av(t),void 0!==t.resolve)return t;const s=iv;let i,n,r=iv=this;try{for(;null!=r;){if(i=r.h.get(t),null!=i)return i;if(null==r.t)return n=pv(t)?this:r,e?this.L(t,n):null;r=r.t}}finally{iv=s}return null}has(t,e=!1){return!!(this.h.has(t)||gv(t)&&t in this.res)||!(!e||null==this.t)&&this.t.has(t,!0)}get(t){if(av(t),t.$isResolver)return t.resolve(this,this);const e=iv;let s,i,n=iv=this;try{for(;null!=n;){if(s=n.h.get(t),null!=s)return s.resolve(n,this);if(null==n.t)return i=pv(t)?this:n,s=this.L(t,i),s.resolve(n,this);n=n.t}}finally{iv=e}throw Wg(8,t)}getAll(t,e=!1){av(t);const s=iv,i=iv=this;let n,r=i,o=jv;try{if(e){for(;null!=r;)n=r.h.get(t),null!=n&&(o=o.concat(lv(n,r,i))),r=r.t;return o}for(;null!=r;){if(n=r.h.get(t),null!=n)return lv(n,r,i);if(r=r.t,null==r)return jv}}finally{iv=s}return jv}invoke(t,e){const s=iv;iv=this;try{if(zg(t))throw Wg(15,t);return void 0===e?new t(...Tv(t).map(hv,this)):new t(...Tv(t).map(hv,this),...e)}finally{iv=s}}hasFactory(t){return this.R.has(t)}getFactory(t){let e=this.R.get(t);if(void 0===e){if(zg(t))throw Wg(15,t);this.R.set(t,e=new rv(t,Tv(t)))}return e}registerFactory(t,e){this.R.set(t,e)}createChild(t){return void 0===t&&this.config.inheritParentResources?this.config===kv.DEFAULT?new nv(this,this.config):new nv(this,kv.from({...this.config,inheritParentResources:!1})):new nv(this,kv.from(t??this.config))}disposeResolvers(){const t=this.h,e=this.u;let s,i;for([i,s]of e.entries())s.dispose(),t.delete(i);e.clear()}useResources(t){const e=t.res;for(const t in e)this.registerResolver(t,e[t])}find(t,e){const s=t.keyFrom(e);let i=this.res[s];if(void 0===i&&(i=this.root.res[s],void 0===i))return null;if(null===i)return null;if(Dg(i.getFactory)){const e=i.getFactory(this);if(null==e)return null;const s=jg(t.name,e.Type);return void 0===s?null:s}return null}create(t,e){const s=t.keyFrom(e);let i=this.res[s];return void 0===i?(i=this.root.res[s],void 0===i?null:i.resolve(this.root,this)??null):i.resolve(this,this)??null}dispose(){this.u.size>0&&this.disposeResolvers(),this.h.clear()}L(t,e){if(!Dg(t))throw Wg(9,t);if(ev.has(t.name))throw Wg(10,t);if(dv(t)){const s=t.register(e,t);if(!(s instanceof Object)||null==s.resolve){const s=e.h.get(t);if(null!=s)return s;throw Wg(11,t)}return s}if(Jg(t)){const s=tv(t);if(1===s.length)s[0].register(e);else{const t=s.length;for(let i=0;i<t;++i)s[i].register(e)}const i=e.h.get(t);if(null!=i)return i;throw Wg(11,t)}if(t.$isInterface)throw Wg(12,t.friendlyName);const s=this.config.defaultResolver(t,e);return e.h.set(t,s),s}}class rv{constructor(t,e){this.Type=t,this.dependencies=e,this.transformers=null}construct(t,e){const s=iv;let i;iv=t;try{return i=void 0===e?new this.Type(...this.dependencies.map(hv,t)):new this.Type(...this.dependencies.map(hv,t),...e),null==this.transformers?i:this.transformers.reduce(ov,i)}finally{iv=s}}registerTransformer(t){(this.transformers??(this.transformers=[])).push(t)}}function ov(t,e){return e(t)}function av(t){if(null==t)throw Wg(14)}function hv(t){return this.get(t)}function cv(...t){if(null==iv)throw Wg(16,...t);return 1===t.length?iv.get(t[0]):t.map(hv,iv)}const lv=(t,e,s)=>{if(t instanceof Nv&&4===t.C){const i=t._state,n=i.length,r=Array(n);let o=0;for(;o<n;++o)r[o]=i[o].resolve(e,s);return r}return[t.resolve(e,s)]},uv={$isResolver:!0,resolve:(t,e)=>e},dv=t=>Dg(t.register),pv=t=>(t=>dv(t)&&"boolean"==typeof t.registerInRequestor)(t)&&t.registerInRequestor,fv=t=>void 0!==t.prototype,gv=t=>Vg(t)&&t.indexOf(":")>0,vv=new WeakMap,mv=t=>(e,s,i)=>{let n=vv.get(e);if(void 0===n&&vv.set(e,n=new WeakMap),n.has(i))return n.get(i);const r=t(e,s,i);return n.set(i,r),r};((t,e=!0,s=!1,i=!0,n=!0)=>{if((t=>Rg in t)(t)){if(t[Rg]===hg)return;if(t[Rg]instanceof WeakMap)return void(hg=t[Rg]);throw Pg("AUR1001")}const r="metadata decorate defineMetadata hasMetadata hasOwnMetadata getMetadata getOwnMetadata getMetadataKeys getOwnMetadataKeys deleteMetadata".split(" ").filter((t=>t in Reflect));if(r.length>0){if(e){const t=r.map((function(t){return`${t}:\n${Reflect[t].toString().slice(0,100)}...`})).join("\n\n");throw Pg(`AUR1002:${t}`)}s&&Eg(t,i,n)}else Eg(t,i,n)})(Reflect,!1,!1);class wv{constructor(t,e){this.c=t,this.k=e}instance(t){return this.$(0,t)}singleton(t){return this.$(1,t)}transient(t){return this.$(2,t)}callback(t){return this.$(3,t)}cachedCallback(t){return this.$(3,mv(t))}aliasTo(t){return this.$(5,t)}$(t,e){const{c:s,k:i}=this;return this.c=this.k=void 0,s.registerResolver(i,new Nv(i,t,e))}}const yv=t=>{const e=t.slice(),s=Object.keys(t),i=s.length;let n;for(let r=0;r<i;++r)n=s[r],_g(n)||(e[n]=t[n]);return e},bv={none(t){throw Wg(2,t)},singleton:t=>new Nv(t,1,t),transient:t=>new Nv(t,2,t)};class kv{constructor(t,e){this.inheritParentResources=t,this.defaultResolver=e}static from(t){return void 0===t||t===kv.DEFAULT?kv.DEFAULT:new kv(t.inheritParentResources??!1,t.defaultResolver??bv.singleton)}}kv.DEFAULT=kv.from({});const Cv=t=>{const e=Xg("di:paramtypes");return jg(e,t)},Sv=t=>{const e=Xg("di:paramtypes");let s=jg(e,t);return void 0===s&&(Lg(e,s=[],t),Zg(t,e)),s},Tv=t=>{const e=Xg("di:dependencies");let s=jg(e,t);if(void 0===s){const i=t.inject;if(void 0===i){const e=xv.getDesignParamtypes(t),i=Cv(t);if(void 0===e)if(void 0===i){const e=Object.getPrototypeOf(t);s=Dg(e)&&e!==Function.prototype?yv(Tv(e)):[]}else s=yv(i);else if(void 0===i)s=yv(e);else{s=yv(e);let t,n=i.length,r=0;for(;r<n;++r)t=i[r],void 0!==t&&(s[r]=t);const o=Object.keys(i);let a;for(r=0,n=o.length,r=0;r<n;++r)a=o[r],_g(a)||(s[a]=i[a])}}else s=yv(i);Lg(e,s,t),Zg(t,e)}return s},$v=(t,e)=>{const s=Dg(t)?t:e,i=(Vg(t)?t:void 0)??"(anonymous)",n=function(t,e,s){if(null==t||void 0!==new.target)throw Wg(1,i);Sv(t)[s]=n};return n.$isInterface=!0,n.friendlyName=i,null!=s&&(n.register=(t,e)=>s(new wv(t,e??n))),n.toString=()=>`InterfaceSymbol<${i}>`,n},xv={createContainer:t=>new nv(null,kv.from(t)),getDesignParamtypes:t=>jg("design:paramtypes",t),getAnnotationParamtypes:Cv,getOrCreateAnnotationParamTypes:Sv,getDependencies:Tv,createInterface:$v,inject:(...t)=>(e,s,i)=>{if("number"==typeof i){const s=Sv(e),n=t[0];void 0!==n&&(s[i]=n)}else if(s){const i=Sv(e.constructor),n=t[0];void 0!==n&&(i[s]=n)}else if(i){const e=i.value,s=Sv(e);let n,r=0;for(;r<t.length;++r)n=t[r],void 0!==n&&(s[r]=n)}else{const s=Sv(e);let i,n=0;for(;n<t.length;++n)i=t[n],void 0!==i&&(s[n]=i)}},transient:t=>(t.register=function(e){return Bv.transient(t,t).register(e,t)},t.registerInRequestor=!1,t),singleton:(t,e=Rv)=>(t.register=function(e){return Bv.singleton(t,t).register(e,t)},t.registerInRequestor=e.scoped,t)},Av=$v("IContainer");function Iv(t){return function(e){function s(t,e,i){Ov(s)(t,e,i)}return s.$isResolver=!0,s.resolve=function(s,i){return t(e,s,i)},s}}const Ov=xv.inject,Rv={scoped:!1};xv.singleton;const Ev=Iv(((t,e,s)=>s.has(t,!0)?s.get(t):void 0)),Pv=(t,e,s)=>{Ov(Pv)(t,e,s)};Pv.$isResolver=!0,Pv.resolve=()=>{};class Nv{constructor(t,e,s){this.resolving=!1,this.k=t,this.C=e,this._state=s}get $isResolver(){return!0}register(t,e){return t.registerResolver(e||this.k,this)}resolve(t,e){switch(this.C){case 0:return this._state;case 1:if(this.resolving)throw Wg(3,this._state.name);return this.resolving=!0,this._state=t.getFactory(this._state).construct(e),this.C=0,this.resolving=!1,this._state;case 2:{const s=t.getFactory(this._state);if(null===s)throw Wg(4,this.k);return s.construct(e)}case 3:return this._state(t,e,this);case 4:return this._state[0].resolve(t,e);case 5:return e.get(this._state);default:throw Wg(5,this.C)}}getFactory(t){switch(this.C){case 1:case 2:return t.getFactory(this._state);case 5:return t.getResolver(this._state)?.getFactory?.(t)??null;default:return null}}}class Mv{constructor(t,e){this.key=t,this.params=e}register(t){t.has(this.key,!0)?t.get(this.key).register(t,...this.params):t.register(...this.params.filter((t=>"object"==typeof t)))}}const Bv={instance:(t,e)=>new Nv(t,0,e),singleton:(t,e)=>new Nv(t,1,e),transient:(t,e)=>new Nv(t,2,e),callback:(t,e)=>new Nv(t,3,e),cachedCallback:(t,e)=>new Nv(t,3,mv(e)),aliasTo:(t,e)=>new Nv(e,5,t),defer:(t,...e)=>new Mv(t,e)},jv=Mg([]);function Fv(t,e,s,i){var n,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,s,o):n(e,s))||o);return r>3&&o&&Object.defineProperty(e,s,o),o}Mg({}),Mg({trace:0,debug:1,info:2,warn:3,error:4,fatal:5,none:6});const Lv=$v("ILogConfig",(t=>t.instance(new _v("no-colors",3)))),Dv=$v("ISink"),Vv=$v("ILogEventFactory",(t=>t.singleton(Qv))),Uv=$v("ILogScope"),Wv=Mg({key:Xg("logger-sink-handles"),define(t,e){return Lg(this.key,e.handles,t.prototype),t},getHandles(t){return Og.get(this.key,t)}}),qv=Kg({red:t=>`[31m${t}[39m`,green:t=>`[32m${t}[39m`,yellow:t=>`[33m${t}[39m`,blue:t=>`[34m${t}[39m`,magenta:t=>`[35m${t}[39m`,cyan:t=>`[36m${t}[39m`,white:t=>`[37m${t}[39m`,grey:t=>`[90m${t}[39m`});class _v{constructor(t,e){this.colorOptions=t,this.level=e}}const Hv=function(){const t={"no-colors":Kg({TRC:"TRC",DBG:"DBG",INF:"INF",WRN:"WRN",ERR:"ERR",FTL:"FTL",QQQ:"???"}),colors:Kg({TRC:qv.grey("TRC"),DBG:qv.grey("DBG"),INF:qv.white("INF"),WRN:qv.yellow("WRN"),ERR:qv.red("ERR"),FTL:qv.red("FTL"),QQQ:qv.grey("???")})};return(e,s)=>e<=0?t[s].TRC:e<=1?t[s].DBG:e<=2?t[s].INF:e<=3?t[s].WRN:e<=4?t[s].ERR:e<=5?t[s].FTL:t[s].QQQ}(),Kv=(t,e)=>"no-colors"===e?t.join("."):t.map(qv.cyan).join("."),zv=(t,e)=>"no-colors"===e?new Date(t).toISOString():qv.grey(new Date(t).toISOString());class Gv{constructor(t,e,s,i,n,r){this.severity=t,this.message=e,this.optionalParams=s,this.scope=i,this.colorOptions=n,this.timestamp=r}toString(){const{severity:t,message:e,scope:s,colorOptions:i,timestamp:n}=this;return 0===s.length?`${zv(n,i)} [${Hv(t,i)}] ${e}`:`${zv(n,i)} [${Hv(t,i)} ${Kv(s,i)}] ${e}`}getFormattedLogInfo(t=!1){const{severity:e,message:s,scope:i,colorOptions:n,timestamp:r,optionalParams:o}=this;let a=null,h="";t&&s instanceof Error?a=s:h=s;const c=0===i.length?"":` ${Kv(i,n)}`;let l=`${zv(r,n)} [${Hv(e,n)}${c}] ${h}`;if(void 0===o||0===o.length)return null===a?[l]:[l,a];let u=0;for(;l.includes("%s");)l=l.replace("%s",String(o[u++]));return null!==a?[l,a,...o.slice(u)]:[l,...o.slice(u)]}}class Qv{constructor(){this.config=cv(Lv)}createLogEvent(t,e,s,i){return new Gv(e,s,i,t.scope,this.config.colorOptions,Date.now())}}class Xv{constructor(t=cv(Lv),e=cv(Vv),s=cv(((t,e=!1)=>{function s(t,e,i){Ov(s)(t,e,i)}return s.$isResolver=!0,s.resolve=(s,i)=>i.getAll(t,e),s})(Dv)),i=cv(Ev(Uv))??[],n=null){let r,o,a,h,c,l;if(this.scope=i,this.I=Ug(),this.config=t,this.f=e,this.sinks=s,null===n){this.root=this,this.parent=this,r=this.F=[],o=this.M=[],a=this.T=[],h=this.j=[],c=this._=[],l=this.P=[];for(const t of s){const e=Wv.getHandles(t);(e?.includes(0)??1)&&r.push(t),(e?.includes(1)??1)&&o.push(t),(e?.includes(2)??1)&&a.push(t),(e?.includes(3)??1)&&h.push(t),(e?.includes(4)??1)&&c.push(t),(e?.includes(5)??1)&&l.push(t)}}else this.root=n.root,this.parent=n,r=this.F=n.F,o=this.M=n.M,a=this.T=n.T,h=this.j=n.j,c=this._=n._,l=this.P=n.P}trace(t,...e){this.config.level<=0&&this.K(this.F,0,t,e)}debug(t,...e){this.config.level<=1&&this.K(this.M,1,t,e)}info(t,...e){this.config.level<=2&&this.K(this.T,2,t,e)}warn(t,...e){this.config.level<=3&&this.K(this.j,3,t,e)}error(t,...e){this.config.level<=4&&this.K(this._,4,t,e)}fatal(t,...e){this.config.level<=5&&this.K(this.P,5,t,e)}scopeTo(t){const e=this.I;let s=e[t];return void 0===s&&(s=e[t]=new Xv(this.config,this.f,null,this.scope.concat(t),this)),s}K(t,e,s,i){const n=Dg(s)?s():s,r=this.f.createLogEvent(this,e,n,i);for(let e=0,s=t.length;e<s;++e)t[e].handleEvent(r)}}Fv([Hg],Xv.prototype,"trace",null),Fv([Hg],Xv.prototype,"debug",null),Fv([Hg],Xv.prototype,"info",null),Fv([Hg],Xv.prototype,"warn",null),Fv([Hg],Xv.prototype,"error",null),Fv([Hg],Xv.prototype,"fatal",null);const Zv={maxRetries:3,interval:1e3,strategy:0};class Yv{constructor(t){if(this.retryConfig={...Zv,...void 0!==t?t:{}},2===this.retryConfig.strategy&&this.retryConfig.interval<=1e3)throw new Error("An interval less than or equal to 1 second is not allowed when using the exponential retry strategy")}request(t){return t.retryConfig||(t.retryConfig={...this.retryConfig},t.retryConfig.counter=0),t.retryConfig.requestClone=t.clone(),t}response(t,e){return Reflect.deleteProperty(e,"retryConfig"),t}responseError(t,e,s){const{retryConfig:i}=e,{requestClone:n}=i;return Promise.resolve().then((()=>{if(i.counter<i.maxRetries){const r=void 0===i.doRetry||i.doRetry(t,e);return Promise.resolve(r).then((r=>{if(r){i.counter++;const t=function(t){const{interval:e,strategy:s,minRandomInterval:i,maxRandomInterval:n,counter:r}=t;if("function"==typeof s)return t.strategy(r);switch(s){case 0:return Jv[0](e);case 1:return Jv[1](r,e);case 2:return Jv[2](r,e);case 3:return Jv[3](r,e,i,n);default:throw new Error("Unrecognized retry strategy")}}(i);return new Promise((e=>setTimeout(e,isNaN(t)?0:t))).then((()=>{const t=n.clone();return"function"==typeof i.beforeRetry?i.beforeRetry(t,s):t})).then((t=>{const e={...t,retryConfig:i};return s.fetch(e)}))}throw Reflect.deleteProperty(e,"retryConfig"),t}))}throw Reflect.deleteProperty(e,"retryConfig"),t}))}}const Jv=[t=>t,(t,e)=>e*t,(t,e)=>1===t?e:e**t/1e3,(t,e,s=0,i=6e4)=>Math.random()*(i-s)+s];class tm{constructor(){this.baseUrl="",this.defaults={},this.interceptors=[],this.dispatcher=null}withBaseUrl(t){return this.baseUrl=t,this}withDefaults(t){return this.defaults=t,this}withInterceptor(t){return this.interceptors.push(t),this}useStandardConfiguration(){return Object.assign(this.defaults,{credentials:"same-origin"},this.defaults),this.rejectErrorResponses()}rejectErrorResponses(){return this.withInterceptor({response:em})}withRetry(t){const e=new Yv(t);return this.withInterceptor(e)}withDispatcher(t){return this.dispatcher=t,this}}function em(t){if(!t.ok)throw t;return t}const sm=/^([a-z][a-z0-9+\-.]*:)?\/\//i,im=xv.createInterface("IHttpClient",(t=>t.singleton(nm)));class nm{constructor(){this.dispatcher=null,this.activeRequestCount=0,this.isRequesting=!1,this.isConfigured=!1,this.baseUrl="",this.defaults=null,this.interceptors=[]}configure(t){let e;if("object"==typeof t)e={defaults:t};else{if("function"!=typeof t)throw new Error("invalid config");{e=new tm,e.baseUrl=this.baseUrl,e.defaults={...this.defaults},e.interceptors=this.interceptors,e.dispatcher=this.dispatcher;const s=t(e);Object.prototype.isPrototypeOf.call(tm.prototype,s)&&(e=s)}}const s=e.defaults;if(void 0!==s&&Object.prototype.isPrototypeOf.call(Headers.prototype,s.headers))throw new Error("Default headers must be a plain object.");const i=e.interceptors;if(void 0!==i&&i.length){if(i.filter((t=>Object.prototype.isPrototypeOf.call(Yv.prototype,t))).length>1)throw new Error("Only one RetryInterceptor is allowed.");const t=i.findIndex((t=>Object.prototype.isPrototypeOf.call(Yv.prototype,t)));if(t>=0&&t!==i.length-1)throw new Error("The retry interceptor must be the last interceptor defined.")}return this.baseUrl=e.baseUrl,this.defaults=s,this.interceptors=void 0!==e.interceptors?e.interceptors:[],this.dispatcher=e.dispatcher,this.isConfigured=!0,this}fetch(t,e){this.trackRequestStart();let s=this.buildRequest(t,e);return this.processRequest(s,this.interceptors).then((t=>{let e;if(Object.prototype.isPrototypeOf.call(Response.prototype,t))e=Promise.resolve(t);else{if(!Object.prototype.isPrototypeOf.call(Request.prototype,t))throw new Error(`An invalid result was returned by the interceptor chain. Expected a Request or Response instance, but got [${t}]`);s=t,e=fetch(s)}return this.processResponse(e,this.interceptors,s)})).then((t=>Object.prototype.isPrototypeOf.call(Request.prototype,t)?this.fetch(t):t)).then((t=>(this.trackRequestEnd(),t)),(t=>{throw this.trackRequestEnd(),t}))}buildRequest(t,e){const s=null!==this.defaults?this.defaults:{};let i,n,r;const o=function(t){const e={},s=void 0!==t?t:{};for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&(e[t]="function"==typeof s[t]?s[t]():s[t]);return e}(s.headers);if(Object.prototype.isPrototypeOf.call(Request.prototype,t))i=t,r=new Headers(i.headers).get("Content-Type");else{e||(e={}),n=e.body;const o=void 0!==n?{body:n}:null,a={...s,headers:{},...e,...o};r=new Headers(a.headers).get("Content-Type"),i=new Request(function(t,e){return sm.test(e)?e:(void 0!==t?t:"")+e}(this.baseUrl,t),a)}return r||(new Headers(o).has("content-type")?i.headers.set("Content-Type",new Headers(o).get("content-type")):void 0!==n&&function(t){try{JSON.parse(t)}catch(t){return!1}return!0}(n)&&i.headers.set("Content-Type","application/json")),function(t,e){const s=void 0!==e?e:{};for(const e in s)Object.prototype.hasOwnProperty.call(s,e)&&!t.has(e)&&t.set(e,s[e])}(i.headers,o),void 0!==n&&Object.prototype.isPrototypeOf.call(Blob.prototype,n)&&n.type&&i.headers.set("Content-Type",n.type),i}get(t,e){return this.fetch(t,e)}post(t,e,s){return this.callFetch(t,e,s,"POST")}put(t,e,s){return this.callFetch(t,e,s,"PUT")}patch(t,e,s){return this.callFetch(t,e,s,"PATCH")}delete(t,e,s){return this.callFetch(t,e,s,"DELETE")}trackRequestStart(){if(this.isRequesting=!!++this.activeRequestCount,this.isRequesting&&null!==this.dispatcher){const t=new this.dispatcher.ownerDocument.defaultView.CustomEvent("aurelia-fetch-client-request-started",{bubbles:!0,cancelable:!0});setTimeout((()=>{this.dispatcher.dispatchEvent(t)}),1)}}trackRequestEnd(){if(this.isRequesting=!! --this.activeRequestCount,!this.isRequesting&&null!==this.dispatcher){const t=new this.dispatcher.ownerDocument.defaultView.CustomEvent("aurelia-fetch-client-requests-drained",{bubbles:!0,cancelable:!0});setTimeout((()=>{this.dispatcher.dispatchEvent(t)}),1)}}processRequest(t,e){return this.applyInterceptors(t,e,"request","requestError",this)}processResponse(t,e,s){return this.applyInterceptors(t,e,"response","responseError",s,this)}applyInterceptors(t,e,s,i,...n){return(void 0!==e?e:[]).reduce(((t,e)=>{const r=e[s],o=e[i];return t.then(r?t=>r.call(e,t,...n):rm,o?t=>o.call(e,t,...n):om)}),Promise.resolve(t))}callFetch(t,e,s,i){return s||(s={}),s.method=i,e&&(s.body=e),this.fetch(t,s)}}function rm(t){return t}function om(t){throw t}let am=class{constructor(t){this.httpClient=t}async fetch(){const t=await this.httpClient.get("https://api.github.com/users");console.log(t);const e=await t.json();console.log(e)}};var hm,cm,lm;am=function(t,e,s,i){var n,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,s,o):n(e,s))||o);return r>3&&o&&Object.defineProperty(e,s,o),o}([Ya(t),(hm=0,cm=im,function(t,e){cm(t,e,hm)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],am),function(t){t.github="github"}(lm||(lm={})),o.register(Df.customize({fallback:n.e(811).then(n.bind(n,811)),useHref:!1})).app(am).start()})()})();
(()=>{"use strict";var t,e,s={183:(t,e,s)=>{s.d(e,{A:()=>a});var i=s(758),n=s.n(i),r=s(935),o=s.n(r)()(n());o.push([t.id,"nav {\n    background: #eee;\n    display: flex;\n  }\n  \n  a {\n    padding: 10px;\n    text-decoration: none;\n    color: black;\n  }\n  \n  a:hover {\n    background-color: darkgray;\n  }\n  \n  .active {\n    background-color: lightgray;\n  }",""]);const a=o},935:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var s="",i=void 0!==e[5];return e[4]&&(s+="@supports (".concat(e[4],") {")),e[2]&&(s+="@media ".concat(e[2]," {")),i&&(s+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),s+=t(e),i&&(s+="}"),e[2]&&(s+="}"),e[4]&&(s+="}"),s})).join("")},e.i=function(t,s,i,n,r){"string"==typeof t&&(t=[[null,t,void 0]]);var o={};if(i)for(var a=0;a<this.length;a++){var h=this[a][0];null!=h&&(o[h]=!0)}for(var c=0;c<t.length;c++){var l=[].concat(t[c]);i&&o[l[0]]||(void 0!==r&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=r),s&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=s):l[2]=s),n&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=n):l[4]="".concat(n)),e.push(l))}},e}},758:t=>{t.exports=function(t){return t[1]}},591:t=>{var e=[];function s(t){for(var s=-1,i=0;i<e.length;i++)if(e[i].identifier===t){s=i;break}return s}function i(t,i){for(var r={},o=[],a=0;a<t.length;a++){var h=t[a],c=i.base?h[0]+i.base:h[0],l=r[c]||0,u="".concat(c," ").concat(l);r[c]=l+1;var d=s(u),p={css:h[1],media:h[2],sourceMap:h[3],supports:h[4],layer:h[5]};if(-1!==d)e[d].references++,e[d].updater(p);else{var f=n(p,i);i.byIndex=a,e.splice(a,0,{identifier:u,updater:f,references:1})}o.push(u)}return o}function n(t,e){var s=e.domAPI(e);return s.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;s.update(t=e)}else s.remove()}}t.exports=function(t,n){var r=i(t=t||[],n=n||{});return function(t){t=t||[];for(var o=0;o<r.length;o++){var a=s(r[o]);e[a].references--}for(var h=i(t,n),c=0;c<r.length;c++){var l=s(r[c]);0===e[l].references&&(e[l].updater(),e.splice(l,1))}r=h}}},128:t=>{var e={};t.exports=function(t,s){var i=function(t){if(void 0===e[t]){var s=document.querySelector(t);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(t){s=null}e[t]=s}return e[t]}(t);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(s)}},51:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},855:(t,e,s)=>{t.exports=function(t){var e=s.nc;e&&t.setAttribute("nonce",e)}},740:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(s){!function(t,e,s){var i="";s.supports&&(i+="@supports (".concat(s.supports,") {")),s.media&&(i+="@media ".concat(s.media," {"));var n=void 0!==s.layer;n&&(i+="@layer".concat(s.layer.length>0?" ".concat(s.layer):""," {")),i+=s.css,n&&(i+="}"),s.media&&(i+="}"),s.supports&&(i+="}");var r=s.sourceMap;r&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleTagTransform(i,t,e.options)}(e,t,s)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},656:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},529:(t,e,s)=>{s.d(e,{DC:()=>b,JW:()=>K,fU:()=>R,lJ:()=>H});var i=s(452);const n="AccessThis",r="AccessGlobal",o="AccessScope",a="AccessMember",h="AccessKeyed",c="ArrayBindingPattern",l="ObjectBindingPattern",u="BindingIdentifier",d="ArrayDestructuring";class p{constructor(t){this.value=t,this.$kind="Custom"}evaluate(...t){return this.value}assign(...t){return t}bind(...t){}unbind(...t){}accept(t){}}class f{constructor(t,e,s){this.expression=t,this.name=e,this.args=s,this.$kind="BindingBehavior",this.key=`_bb_${e}`}}class g{constructor(t,e,s){this.expression=t,this.name=e,this.args=s,this.$kind="ValueConverter"}}class m{constructor(t,e,s="="){this.target=t,this.value=e,this.op=s,this.$kind="Assign"}}class v{constructor(t,e,s){this.condition=t,this.yes=e,this.no=s,this.$kind="Conditional"}}class w{constructor(t){this.name=t,this.$kind=r}}class y{constructor(t=0){this.ancestor=t,this.$kind=n}}class b{constructor(t,e=0){this.name=t,this.ancestor=e,this.$kind=o}}const S=t=>t.$kind===r||(t.$kind===a||t.$kind===h)&&t.accessGlobal;class C{constructor(t,e,s=!1){this.object=t,this.name=e,this.optional=s,this.$kind=a,this.accessGlobal=S(t)}}class k{constructor(t,e,s=!1){this.object=t,this.key=e,this.optional=s,this.$kind=h,this.accessGlobal=S(t)}}class T{constructor(t,e,s=0,i=!1){this.name=t,this.args=e,this.ancestor=s,this.optional=i,this.$kind="CallScope"}}class x{constructor(t,e,s,i=!1,n=!1){this.object=t,this.name=e,this.args=s,this.optionalMember=i,this.optionalCall=n,this.$kind="CallMember"}}class I{constructor(t,e,s=!1){this.func=t,this.args=e,this.optional=s,this.$kind="CallFunction"}}class A{constructor(t,e){this.name=t,this.args=e,this.$kind="CallGlobal"}}class ${constructor(t,e,s){this.operation=t,this.left=e,this.right=s,this.$kind="Binary"}}class E{constructor(t,e,s=0){this.operation=t,this.expression=e,this.pos=s,this.$kind="Unary"}}class R{constructor(t){this.value=t,this.$kind="PrimitiveLiteral"}}R.$undefined=new R(void 0),R.$null=new R(null),R.$true=new R(!0),R.$false=new R(!1),R.$empty=new R("");class N{constructor(t){this.elements=t,this.$kind="ArrayLiteral"}}N.$empty=new N(i.tR);class P{constructor(t,e){this.keys=t,this.values=e,this.$kind="ObjectLiteral"}}P.$empty=new P(i.tR,i.tR);class O{constructor(t,e=i.tR){this.cooked=t,this.expressions=e,this.$kind="Template"}}O.$empty=new O([""]);class L{constructor(t,e,s,n=i.tR){this.cooked=t,this.func=s,this.expressions=n,this.$kind="TaggedTemplate",t.raw=e}}class B{constructor(t){this.elements=t,this.$kind=c}}class M{constructor(t,e){this.keys=t,this.values=e,this.$kind=l}}class j{constructor(t){this.name=t,this.$kind=u}}class F{constructor(t,e,s){this.declaration=t,this.iterable=e,this.semiIdx=s,this.$kind="ForOfStatement"}}class D{constructor(t,e=i.tR){this.parts=t,this.expressions=e,this.$kind="Interpolation",this.isMulti=e.length>1,this.firstExpression=e[0]}}class V{constructor(t,e,s,i){this.$kind=t,this.list=e,this.source=s,this.initializer=i}}class H{constructor(t,e,s){this.target=t,this.source=e,this.initializer=s,this.$kind="DestructuringAssignmentLeaf"}}class q{constructor(t,e,s=!1){this.args=t,this.body=e,this.rest=s,this.$kind="ArrowFunction"}}const U=String,_=()=>Object.create(null),W=(t,...e)=>new Error(`AUR${U(t).padStart(4,"0")}:${e.map(U)}`),K=i.DI.createInterface("IExpressionParser",(t=>t.singleton(Q)));class Q{constructor(){this.t=_(),this.i=_(),this.h=_()}parse(t,e){let s;switch(e){case ht:return new p(t);case it:return s=this.h[t],void 0===s&&(s=this.h[t]=this.$parse(t,e)),s;case nt:return s=this.i[t],void 0===s&&(s=this.i[t]=this.$parse(t,e)),s;default:if(0===t.length){if(e===ot||e===at)return R.$empty;throw Qt()}return s=this.t[t],void 0===s&&(s=this.t[t]=this.$parse(t,e)),s}}$parse(t,e){return lt=t,ut=0,dt=t.length,pt=0,ft=0,gt=6291456,mt="",ct=Ct(0),vt=!0,wt=!1,yt=!0,bt=-1,xt(61,void 0===e?at:e)}}function z(t){switch(t){case 98:return 8;case 116:return 9;case 110:return 10;case 118:return 11;case 102:return 12;case 114:return 13;case 34:return 34;case 39:return 39;case 92:return 92;default:return t}}const J=R.$false,G=R.$true,Y=R.$null,Z=R.$undefined,X=new y(0),tt=new y(1),et=new class{constructor(){this.$kind="AccessBoundary"}},st="None",it="Interpolation",nt="IsIterator",rt="IsChainable",ot="IsFunction",at="IsProperty",ht="IsCustom";let ct,lt="",ut=0,dt=0,pt=0,ft=0,gt=6291456,mt="",vt=!0,wt=!1,yt=!0,bt=-1;const St=String.fromCharCode,Ct=t=>lt.charCodeAt(t),kt=()=>lt.slice(ft,ut),Tt="Infinity NaN isFinite isNaN parseFloat parseInt decodeURI decodeURIComponent encodeURI encodeURIComponent Array BigInt Boolean Date Map Number Object RegExp Set String JSON Math Intl".split(" ");function xt(t,e){if(e===ht)return new p(lt);if(0===ut){if(e===it)return function(){const t=[],e=[],s=dt;let i="";for(;ut<s;){switch(ct){case 36:if(123===Ct(ut+1)){t.push(i),i="",ut+=2,ct=Ct(ut),Ot();const s=xt(61,it);e.push(s);continue}i+="$";break;case 92:i+=St(z(Lt()));break;default:i+=St(ct)}Lt()}return e.length?(t.push(i),new D(t,e)):null}();if(Ot(),4194304&gt)throw Ht()}vt=513>t,wt=!1,yt=514>t;let s,i=!1,h=0;if(131072&gt){const t=de[63&gt];Ot(),s=new E(t,xt(514,e)),vt=!1}else{t:switch(gt){case 12295:h=pt,vt=!1,yt=!1;do{switch(Ot(),++h,gt){case 65546:if(Ot(),!(12288&gt))throw Ut();break;case 11:case 12:throw Ut();case 2162701:if(wt=!0,Ot(),!(12288&gt)){s=0===h?X:1===h?tt:new y(h),i=!0;break t}break;default:if(2097152&gt){s=0===h?X:1===h?tt:new y(h);break t}throw _t()}}while(12295===gt);case 4096:{const t=mt;if(e===nt)s=new j(t);else if(yt&&Tt.includes(t))s=new w(t);else{if(yt&&"import"===t)throw Zt();s=new b(t,h)}if(vt=!wt,Ot(),Dt(51)){if(524297===gt)throw le();const e=wt,i=pt;++pt;const n=xt(62,st);wt=e,pt=i,vt=!1,s=new q([new j(t)],n)}break}case 11:throw ue();case 12:throw qt();case 12292:switch(vt=!1,Ot(),pt){case 0:s=X;break;case 1:s=tt;break;default:s=new y(pt)}break;case 12293:vt=!1,Ot(),s=et;break;case 2688008:s=function(t){Ot();const e=ut,s=ft,i=gt,n=ct,r=mt,o=wt,a=[];let h=1,c=!1;e:for(;;){if(12===gt){if(Ot(),4096!==gt)throw Ut();if(a.push(new j(mt)),Ot(),6291472===gt)throw ce();if(7340047!==gt)throw qt();if(Ot(),51!==gt)throw qt();Ot();const t=wt,e=pt;++pt;const s=xt(62,st);return wt=t,pt=e,vt=!1,new q(a,s,!0)}switch(gt){case 4096:a.push(new j(mt)),Ot();break;case 7340047:Ot();break e;case 524297:case 2688019:Ot(),h=4;break;case 6291472:h=2,c=!0;break e;case 2688008:h=2;break e;default:Ot(),h=2}switch(gt){case 6291472:if(Ot(),c=!0,1===h)break;break e;case 7340047:Ot();break e;case 4194350:1===h&&(h=3);break e;case 51:if(c)throw oe();Ot(),h=2;break e;default:1===h&&(h=2);break e}}if(51===gt){if(1===h){if(Ot(),524297===gt)throw le();const t=wt,e=pt;++pt;const s=xt(62,st);return wt=t,pt=e,vt=!1,new q(a,s)}throw oe()}if(1===h&&0===a.length)throw se();if(c)switch(h){case 2:throw oe();case 3:throw ae();case 4:throw he()}ut=e,ft=s,gt=i,ct=n,mt=r,wt=o;const l=wt,u=xt(62,t);if(wt=l,Vt(7340047),51===gt)switch(h){case 2:throw oe();case 3:throw ae();case 4:throw he()}return u}(e);break;case 2688019:s=lt.search(/\s+of\s+/)>ut?function(){const t=[],e=new V(d,t,void 0,void 0);let s="",i=!0,n=0;for(;i;)switch(Ot(),gt){case 7340052:i=!1,r();break;case 6291472:r();break;case 4096:s=kt();break;default:throw ie()}return Vt(7340052),e;function r(){""!==s?(t.push(new H(new C(X,s),new k(X,new R(n++)),void 0)),s=""):n++}}():function(t){const e=wt;Ot();const s=new Array;for(;7340052!==gt;)if(Dt(6291472)){if(s.push(Z),7340052===gt)break}else{if(s.push(xt(62,t===nt?st:t)),!Dt(6291472))break;if(7340052===gt)break}return wt=e,Vt(7340052),t===nt?new B(s):(vt=!1,new N(s))}(e);break;case 524297:s=function(t){const e=wt,s=new Array,i=new Array;for(Ot();7340046!==gt;){if(s.push(mt),49152&gt)Ot(),Vt(6291477),i.push(xt(62,t===nt?st:t));else{if(!(12288&gt))throw te();{const e=ct,s=gt,n=ut;Ot(),Dt(6291477)?i.push(xt(62,t===nt?st:t)):(ct=e,gt=s,ut=n,i.push(xt(515,t===nt?st:t)))}}7340046!==gt&&Vt(6291472)}return wt=e,Vt(7340046),t===nt?new M(s,i):(vt=!1,new P(s,i))}(e);break;case 2163760:s=new O([mt]),vt=!1,Ot();break;case 2163761:s=Nt(e,s,!1);break;case 16384:case 32768:s=new R(mt),vt=!1,Ot();break;case 8194:case 8195:case 8193:case 8192:s=de[63&gt],vt=!1,Ot();break;default:throw ut>=dt?Wt():Kt()}if(e===nt)return function(t){if(!Rt.includes(t.$kind))throw Xt(t.$kind);if(4204594!==gt)throw Xt(t.$kind);Ot();const e=t,s=xt(61,rt);return new F(e,s,bt)}(s);switch(gt){case 2228280:case 2228281:s=new E(de[63&gt],s,1),Ot(),vt=!1}if(514<t)return s;if(11===gt||12===gt)throw Ut();if(s.$kind===n)switch(gt){case 2162701:if(wt=!0,vt=!1,Ot(),!(13312&gt))throw ne();if(12288&gt)s=new b(mt,s.ancestor),Ot();else if(2688008===gt)s=new I(s,It(),!0);else{if(2688019!==gt)throw re();s=At(s,!0)}break;case 65546:if(vt=!wt,Ot(),!(12288&gt))throw Ut();s=new b(mt,s.ancestor),Ot();break;case 11:case 12:throw Ut();case 2688008:s=new I(s,It(),i);break;case 2688019:s=At(s,i);break;case 2163760:s=Pt(s);break;case 2163761:s=Nt(e,s,!0)}for(;(65536&gt)>0;)switch(gt){case 2162701:s=$t(s);break;case 65546:if(Ot(),!(12288&gt))throw Ut();s=Et(s,!1);break;case 11:case 12:throw Ut();case 2688008:s=s.$kind===o?new T(s.name,It(),s.ancestor,!1):s.$kind===a?new x(s.object,s.name,It(),s.optional,!1):s.$kind===r?new A(s.name,It()):new I(s,It(),!1);break;case 2688019:s=At(s,!1);break;case 2163760:if(wt)throw re();s=Pt(s);break;case 2163761:if(wt)throw re();s=Nt(e,s,!0)}}if(11===gt||12===gt)throw Ut();if(513<t)return s;for(;(262144&gt)>0;){const i=gt;if((960&i)<=t)break;Ot(),s=new $(de[63&i],s,xt(960&i,e)),vt=!1}if(63<t)return s;if(Dt(6291479)){const t=xt(62,e);Vt(6291477),s=new v(s,t,xt(62,e)),vt=!1}if(62<t)return s;switch(gt){case 4194350:case 4194356:case 4194357:case 4194358:case 4194359:{if(!vt)throw zt();const t=de[63&gt];Ot(),s=new m(s,xt(62,e),t);break}}if(61<t)return s;for(;Dt(6291481);){if(6291456===gt)throw Jt();const t=mt;Ot();const i=new Array;for(;Dt(6291477);)i.push(xt(62,e));s=new g(s,t,i)}for(;Dt(6291480);){if(6291456===gt)throw Gt();const t=mt;Ot();const i=new Array;for(;Dt(6291477);)i.push(xt(62,e));s=new f(s,t,i)}if(6291456!==gt){if(e===it&&7340046===gt)return s;if(e===rt&&6291478===gt){if(ut===dt)throw Kt();return bt=ut-1,s}if("of"===kt())throw Yt();throw Kt()}return s}function It(){const t=wt;Ot();const e=[];for(;7340047!==gt&&(e.push(xt(62,st)),Dt(6291472)););return Vt(7340047),vt=!1,wt=t,e}function At(t,e){const s=wt;return Ot(),t=new k(t,xt(62,st),e),Vt(7340052),vt=!s,wt=s,t}function $t(t){if(wt=!0,vt=!1,Ot(),!(13312&gt))throw ne();if(12288&gt)return Et(t,!0);if(2688008===gt)return t.$kind===o?new T(t.name,It(),t.ancestor,!0):t.$kind===a?new x(t.object,t.name,It(),t.optional,!0):new I(t,It(),!0);if(2688019===gt)return At(t,!0);throw re()}function Et(t,e){const s=mt;switch(gt){case 2162701:{wt=!0,vt=!1;const i=ut,n=ft,r=gt,o=ct,a=mt,h=vt,c=wt;if(Ot(),!(13312&gt))throw ne();return 2688008===gt?new x(t,s,It(),e,!0):(ut=i,ft=n,gt=r,ct=o,mt=a,vt=h,wt=c,new C(t,s,e))}case 2688008:return vt=!1,new x(t,s,It(),e,!1);default:return vt=!wt,Ot(),new C(t,s,e)}}const Rt=[c,l,u,d,"ObjectDestructuring"];function Nt(t,e,s){const i=wt,n=[mt];Vt(2163761);const r=[xt(62,t)];for(;2163760!==(gt=Ft());)n.push(mt),Vt(2163761),r.push(xt(62,t));return n.push(mt),vt=!1,wt=i,s?(Ot(),new L(n,n,e,r)):(Ot(),new O(n,r))}function Pt(t){vt=!1;const e=[mt];return Ot(),new L(e,e,t)}function Ot(){for(;ut<dt;)if(ft=ut,null!=(gt=fe[ct]()))return;gt=6291456}function Lt(){return ct=Ct(++ut)}function Bt(){for(;ge[Lt()];);const t=pe[mt=kt()];return void 0===t?4096:t}function Mt(t){let e=ct;if(!1===t){do{e=Lt()}while(e<=57&&e>=48);if(46!==e)return mt=parseInt(kt(),10),32768;if(e=Lt(),ut>=dt)return mt=parseInt(kt().slice(0,-1),10),32768}if(e<=57&&e>=48)do{e=Lt()}while(e<=57&&e>=48);else ct=Ct(--ut);return mt=parseFloat(kt()),32768}function jt(){let t=!0,e="";for(;96!==Lt();)if(36===ct){if(ut+1<dt&&123===Ct(ut+1)){ut++,t=!1;break}e+="$"}else if(92===ct)e+=St(z(Lt()));else{if(ut>=dt)throw ee();e+=St(ct)}return Lt(),mt=e,t?2163760:2163761}const Ft=()=>{if(ut>=dt)throw ee();return ut--,jt()},Dt=t=>gt===t&&(Ot(),!0),Vt=t=>{if(gt!==t)throw se();Ot()},Ht=()=>W(151,lt),qt=()=>W(152,lt),Ut=()=>W(153,lt),_t=()=>W(154,lt),Wt=()=>W(155,lt),Kt=()=>W(156,kt(),ut,lt),Qt=()=>W(157),zt=()=>W(158,lt),Jt=()=>W(159,lt),Gt=()=>W(160,lt),Yt=()=>W(161,lt),Zt=()=>W(162,lt),Xt=t=>W(163,lt,t),te=()=>W(164,lt),ee=()=>W(166,lt),se=t=>W(167,lt),ie=()=>W(170,lt),ne=()=>W(171,lt),re=()=>W(172,lt),oe=()=>W(173,lt),ae=()=>W(174,lt),he=()=>W(175,lt),ce=()=>W(176,lt),le=()=>W(178,lt),ue=()=>W(179,lt),de=[J,G,Y,Z,"this","$this",null,"$parent","(","{",".","..","...","?.","}",")",",","[","]",":",";","?","'",'"',"&","|","??","||","&&","==","!=","===","!==","<",">","<=",">=","in","instanceof","+","-","typeof","void","*","%","/","=","!",2163760,2163761,"of","=>","+=","-=","*=","/=","++","--"],pe=Object.assign(_(),{true:8193,null:8194,false:8192,undefined:8195,this:12293,$this:12292,$parent:12295,in:6562213,instanceof:6562214,typeof:139305,void:139306,of:4204594}),{CharScanners:fe,IdParts:ge}=(()=>{const t=()=>{throw W(168,lt)};t.notMapped=!0;const e=[36,0,65,91,95,0,97,123,170,0,186,0,192,215,216,247,248,697,736,741,7424,7462,7468,7517,7522,7526,7531,7544,7545,7615,7680,7936,8305,0,8319,0,8336,8349,8490,8492,8498,0,8526,0,8544,8585,11360,11392,42786,42888,42891,42927,42928,42936,42999,43008,43824,43867,43868,43877,64256,64263,65313,65339,65345,65371],s=[48,58],i=(t,e,s,i)=>{const n=s.length;for(let r=0;r<n;r+=2){const n=s[r];let o=s[r+1];if(o=o>0?o:n+1,t&&t.fill(i,n,o),e)for(let t=n;t<o;t++)e.add(t)}},n=(t=>(i(t,null,e,1),i(t,null,s,1),t))(new Uint8Array(65535)),r=t=>()=>(Lt(),t),o=new Array(65535);return o.fill(t,0,65535),i(o,null,[0,33,127,161],(()=>(Lt(),null))),i(o,null,e,Bt),i(o,null,s,(()=>Mt(!1))),o[34]=o[39]=()=>function(){const t=ct;Lt();let e=0;const s=new Array;let i=ut;for(;ct!==t;)if(92===ct)s.push(lt.slice(i,ut)),Lt(),e=z(ct),Lt(),s.push(St(e)),i=ut;else{if(ut>=dt)throw W(165,lt);Lt()}const n=lt.slice(i,ut);Lt(),s.push(n);const r=s.join("");return mt=r,16384}(),o[96]=()=>jt(),o[33]=()=>61!==Lt()?131119:61!==Lt()?6553950:(Lt(),6553952),o[61]=()=>62===Lt()?(Lt(),51):61!==ct?4194350:61!==Lt()?6553949:(Lt(),6553951),o[38]=()=>38!==Lt()?6291480:(Lt(),6553884),o[124]=()=>124!==Lt()?6291481:(Lt(),6553819),o[63]=()=>{if(46===Lt()){const t=Ct(ut+1);return t<=48||t>=57?(Lt(),2162701):6291479}return 63!==ct?6291479:(Lt(),6553754)},o[46]=()=>Lt()<=57&&ct>=48?Mt(!0):46===ct?46!==Lt()?11:(Lt(),12):65546,o[60]=()=>61!==Lt()?6554017:(Lt(),6554019),o[62]=()=>61!==Lt()?6554018:(Lt(),6554020),o[37]=r(6554156),o[40]=r(2688008),o[41]=r(7340047),o[42]=()=>61!==Lt()?6554155:(Lt(),4194358),o[43]=()=>43===Lt()?(Lt(),2228280):61!==ct?2490855:(Lt(),4194356),o[44]=r(6291472),o[45]=()=>45===Lt()?(Lt(),2228281):61!==ct?2490856:(Lt(),4194357),o[47]=()=>61!==Lt()?6554157:(Lt(),4194359),o[58]=r(6291477),o[59]=r(6291478),o[91]=r(2688019),o[93]=r(7340052),o[123]=r(524297),o[125]=r(7340046),{CharScanners:o,IdParts:n}})()},452:(t,e,s)=>{s.d(e,{$r:()=>x,BL:()=>v,DI:()=>Tt,E8:()=>V,Et:()=>m,Gv:()=>p,HN:()=>Ut,JF:()=>Nt,Kg:()=>g,M6:()=>G,Nt:()=>It,P9:()=>Vt,Q7:()=>Ft,Ri:()=>Y,TR:()=>A,Tn:()=>f,ZV:()=>Ht,Zc:()=>qt,Zn:()=>b,Zs:()=>K,c4:()=>$,cH:()=>D,cy:()=>l,do:()=>$t,eA:()=>E,fL:()=>k,ff:()=>_t,fv:()=>J,gF:()=>Xt,hd:()=>ct,jY:()=>O,jh:()=>d,kW:()=>T,lQ:()=>Bt,lq:()=>Dt,n_:()=>_,nf:()=>z,p7:()=>xt,pn:()=>Wt,r$:()=>W,r_:()=>Mt,t7:()=>w,tR:()=>Ot,ui:()=>P,vB:()=>Lt,vM:()=>u,xQ:()=>C,xe:()=>ue,yL:()=>c});var i=s(220);const n=Object.freeze,r=Object.assign,o=String,a=i.OS.get;i.OS.has;const h=i.OS.define,c=t=>t instanceof Promise,l=t=>t instanceof Array,u=t=>t instanceof Set,d=t=>t instanceof Map,p=t=>t instanceof Object,f=t=>"function"==typeof t,g=t=>"string"==typeof t,m=t=>"number"==typeof t,v=()=>Object.create(null),w=Object.is,y=(t,...e)=>new Error(`AUR${o(t).padStart(4,"0")}:${e.map(o)}`),b=(()=>{const t={};let e=!1,s=0,i=0,n=0;return r=>{switch(typeof r){case"number":return r>=0&&(0|r)===r;case"string":if(e=t[r],void 0!==e)return e;if(s=r.length,0===s)return t[r]=!1;for(i=0,n=0;n<s;++n)if(i=r.charCodeAt(n),0===n&&48===i&&s>1||i<48||i>57)return t[r]=!1;return t[r]=!0;default:return!1}}})(),S=function(){const t=r(v(),{0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0}),e=e=>""===e?0:e!==e.toUpperCase()?3:e!==e.toLowerCase()?2:!0===t[e]?1:0;return(t,s)=>{const i=t.length;if(0===i)return t;let n,r=!1,o="",a="",h=0,c=t.charAt(0),l=e(c),u=0;for(;u<i;++u)n=h,a=c,h=l,c=t.charAt(u+1),l=e(c),0===h?o.length>0&&(r=!0):(!r&&o.length>0&&2===h&&(r=3===n||3===l),o+=s(a,r),r=!1);return o}}(),C=function(){const t=v(),e=(t,e)=>e?t.toUpperCase():t.toLowerCase();return s=>{let i=t[s];return void 0===i&&(i=t[s]=S(s,e)),i}}(),k=function(){const t=v();return e=>{let s=t[e];return void 0===s&&(s=C(e),s.length>0&&(s=s[0].toUpperCase()+s.slice(1)),t[e]=s),s}}(),T=function(){const t=v(),e=(t,e)=>e?`-${t.toLowerCase()}`:t.toLowerCase();return s=>{let i=t[s];return void 0===i&&(i=t[s]=S(s,e)),i}}(),x=t=>{const e=t.length,s=Array(e);let i=0;for(;i<e;++i)s[i]=t[i];return s},I=(t,e)=>{const s=e.name;e.addInitializer((function(){Reflect.defineProperty(this,s,{value:t.bind(this),writable:!0,configurable:!0,enumerable:!1})}))},A=(...t)=>{const e=[];let s=0;const i=t.length;let n,r=0,o=0;for(;o<i;++o)if(n=t[o],void 0!==n){r=n.length;let t=0;for(;t<r;++t)e[s++]=n[t]}return e},$=(...t)=>{const e=t.length;let s,i=0;for(;e>i;++i)if(s=t[i],void 0!==s)return s;throw y(20)},E=function(){const t=Function.prototype,e=Object.getPrototypeOf,s=new WeakMap;let i,n=t,r=0;return function(o){if(i=s.get(o),void 0===i)for(s.set(o,i=[n=o]),r=0;(n=e(n))!==t;)i[++r]=n;return i}}();function R(...t){return r(v(),...t)}const N=(()=>{const t=new WeakMap;let e=!1,s="",i=0;return n=>(e=t.get(n),null==e&&(i=(s=n.toString()).length,e=i>28&&s.indexOf("[native code] }")===i-15,t.set(n,e)),e)})(),P=(t,e)=>c(t)?t.then(e):e(t),O=(...t)=>{let e,s,i,n=0,r=t.length;for(;n<r;++n)e=t[n],c(e=t[n])&&(void 0===s?s=e:void 0===i?i=[s,e]:i.push(e));return void 0===i?s:Promise.all(i)},L=(t,e)=>new Rt(t,1,e),B=(t,e)=>new Rt(t,2,e),M=(t,e)=>new Rt(e,5,t),j=new WeakMap,F=t=>(e,s,i)=>{let n=j.get(e);if(void 0===n&&j.set(e,n=new WeakMap),n.has(i))return n.get(i);const r=t(e,s,i);return n.set(i,r),r},D={instance:(t,e)=>new Rt(t,0,e),singleton:L,transient:B,callback:(t,e)=>new Rt(t,3,e),cachedCallback:(t,e)=>new Rt(t,3,F(e)),aliasTo:M,defer:(t,...e)=>new Pt(t,e)},V=function(t){return function(e){e.register(L(this,this),M(this,t))}},H="au:annotation",q=(t,e)=>void 0===e?`${H}:${t}`:`${H}:${t}:${e}`,U=n({name:"au:annotation",appendTo:(t,e)=>{const s=a(H,t);void 0===s?h([e],t,H):s.push(e)},set(t,e,s){h(s,t,q(e))},get:(t,e)=>a(q(e),t),getKeys(t){let e=a(H,t);return void 0===e&&h(e=[],t,H),e},isKey:t=>t.startsWith(H),keyFor:q}),_="au:resource",W=(t,e,s)=>null==e?`${_}:${t}`:null==s?`${_}:${t}:${e}`:`${_}:${t}:${e}:${s}`,K={annotation:U},Q=Object.prototype.hasOwnProperty;function z(t,e,s,i){let n=a(q(t),s);return void 0===n?(n=e[t],void 0===n?(n=s[t],void 0!==n&&Q.call(s,t)?n:i()):n):n}function J(t,e,s){let i=a(q(t),e);return void 0===i?(i=e[t],void 0!==i&&Q.call(e,t)?i:s()):i}function G(t,e,s){const i=e[t];return void 0===i?s():i}const Y=Symbol.for("au:registrable"),Z={none(t){throw y(2,t)},singleton:t=>new Rt(t,1,t),transient:t=>new Rt(t,2,t)};class X{constructor(t,e){this.inheritParentResources=t,this.defaultResolver=e}static from(t){return void 0===t||t===X.DEFAULT?X.DEFAULT:new X(t.inheritParentResources??!1,t.defaultResolver??Z.singleton)}}X.DEFAULT=X.from({});const tt=t=>new nt(null,X.from(t)),et=new Set("Array ArrayBuffer Boolean DataView Date Error EvalError Float32Array Float64Array Function Int8Array Int16Array Int32Array Map Number Object Promise RangeError ReferenceError RegExp Set SharedArrayBuffer String SyntaxError TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array URIError WeakMap WeakSet".split(" "));let st=0,it=null;class nt{get depth(){return null===this.t?0:this.t.depth+1}get parent(){return this.t}constructor(t,e){if(this.id=++st,this.i=0,this.u=new Map,this.t=t,this.config=e,this.h=new Map,this.res={},null===t)this.root=this,this.R=new Map;else if(this.root=t.root,this.R=t.R,e.inheritParentResources)for(const e in t.res)this.registerResolver(e,t.res[e]);this.h.set(xt,ut)}register(...t){if(100==++this.i)throw y(6,...t);let e,s,n,r,o,h,c=0,l=t.length;for(;c<l;++c)if(e=t[c],(0,i.Gv)(e))if(dt(e))e.register(this);else if(null!=(h=a(_,e)))h.register(this);else if(ft(e)){const t=e[Symbol.metadata]?.[Y];if(dt(t))t.register(this);else if(g(e.$au?.type)){const t=e.$au,s=(e.aliases??Ot).concat(t.aliases??Ot);let i=`${_}:${t.type}:${t.name}`;if(this.has(i,!1))continue;for(M(e,i).register(this),this.has(e,!1)||L(e,e).register(this),r=0,o=s.length;r<o;++r)i=`${_}:${t.type}:${s[r]}`,this.has(i,!1)||M(e,i).register(this)}else L(e,e).register(this)}else for(s=Object.keys(e),r=0,o=s.length;r<o;++r)n=e[s[r]],(0,i.Gv)(n)&&(dt(n)?n.register(this):this.register(n));return--this.i,this}registerResolver(t,e,s=!1){at(t);const i=this.h,n=i.get(t);if(null==n){if(i.set(t,e),gt(t)){if(void 0!==this.res[t])throw y(7,t);this.res[t]=e}}else n instanceof Rt&&4===n.$?n._state.push(e):i.set(t,new Rt(t,4,[n,e]));return s&&this.u.set(t,e),e}deregister(t){at(t);const e=this.h.get(t);null!=e&&(this.h.delete(t),gt(t)&&delete this.res[t],this.u.has(t)&&(e.dispose(),this.u.delete(t)))}registerTransformer(t,e){const s=this.getResolver(t);if(null==s)return!1;if(s.getFactory){const t=s.getFactory(this);return null!=t&&(t.registerTransformer(e),!0)}return!1}getResolver(t,e=!0){if(at(t),void 0!==t.resolve)return t;const s=it;let i,n,r=it=this;try{for(;null!=r;){if(i=r.h.get(t),null!=i)return i;if(null==r.t)return n=pt(t)?this:r,e?this.C(t,n):null;r=r.t}}finally{it=s}return null}has(t,e=!1){return this.h.has(t)||gt(t)&&t in this.res||((e&&this.t?.has(t,!0))??!1)}get(t){if(at(t),t.$isResolver)return t.resolve(this,this);const e=it;let s,i,n=it=this;try{for(;null!=n;){if(s=n.h.get(t),null!=s)return s.resolve(n,this);if(null==n.t)return i=pt(t)?this:n,s=this.C(t,i),s.resolve(n,this);n=n.t}}finally{it=e}throw y(8,t)}getAll(t,e=!1){at(t);const s=it,i=it=this;let n,r=i,o=Ot;try{if(e){for(;null!=r;)n=r.h.get(t),null!=n&&(o=o.concat(lt(n,r,i))),r=r.t;return o}for(;null!=r;){if(n=r.h.get(t),null!=n)return lt(n,r,i);if(r=r.t,null==r)return Ot}}finally{it=s}return Ot}invoke(t,e){if(N(t))throw y(15,t);const s=it;it=this;try{return void 0===e?new t(...St(t).map(ht,this)):new t(...St(t).map(ht,this),...e)}finally{it=s}}hasFactory(t){return this.R.has(t)}getFactory(t){let e=this.R.get(t);if(void 0===e){if(N(t))throw y(15,t);this.R.set(t,e=new rt(t,St(t)))}return e}registerFactory(t,e){this.R.set(t,e)}createChild(t){return void 0===t&&this.config.inheritParentResources?this.config===X.DEFAULT?new nt(this,this.config):new nt(this,X.from({...this.config,inheritParentResources:!1})):new nt(this,X.from(t??this.config))}disposeResolvers(){const t=this.h,e=this.u;let s,i;for([i,s]of e.entries())s.dispose?.(),t.delete(i);e.clear()}useResources(t){const e=t.res;for(const t in e)this.registerResolver(t,e[t])}find(t,e){const s=g(e)?`${_}:${t}:${e}`:t;let i=this,n=i.res[s];return null==n&&(i=i.root,n=i.res[s]),null==n?null:n.getFactory?.(i)?.Type??null}dispose(){this.u.size>0&&this.disposeResolvers(),this.h.clear(),this.root===this&&(this.R.clear(),this.res={})}C(t,e){const s=dt(t);if(!f(t)&&!s)throw y(9,t);if(et.has(t.name))throw y(10,t);if(s){const s=t.register(e,t);if(!(s instanceof Object)||null==s.resolve){const s=e.h.get(t);if(null!=s)return s;throw y(11,t)}return s}if(t.$isInterface)throw y(12,t.friendlyName);const i=this.config.defaultResolver(t,e);return e.h.set(t,i),i}}class rt{constructor(t,e){this.Type=t,this.dependencies=e,this.transformers=null}construct(t,e){const s=it;let i;it=t;try{return i=void 0===e?new this.Type(...this.dependencies.map(ht,t)):new this.Type(...this.dependencies.map(ht,t),...e),null==this.transformers?i:this.transformers.reduce(ot,i)}finally{it=s}}registerTransformer(t){(this.transformers??=[]).push(t)}}function ot(t,e){return e(t)}function at(t){if(null==t)throw y(14)}function ht(t){return this.get(t)}function ct(...t){if(null==it)throw y(16,...t);return 1===t.length?it.get(t[0]):t.map(ht,it)}const lt=(t,e,s)=>{if(t instanceof Rt&&4===t.$){const i=t._state,n=i.length,r=Array(n);let o=0;for(;o<n;++o)r[o]=i[o].resolve(e,s);return r}return[t.resolve(e,s)]},ut={$isResolver:!0,resolve:(t,e)=>e},dt=t=>f(t?.register),pt=t=>(t=>dt(t)&&"boolean"==typeof t.registerInRequestor)(t)&&t.registerInRequestor,ft=t=>void 0!==t.prototype,gt=t=>g(t)&&t.indexOf(":")>0;class mt{constructor(t,e){this.c=t,this.k=e}instance(t){return this.O(0,t)}singleton(t){return this.O(1,t)}transient(t){return this.O(2,t)}callback(t){return this.O(3,t)}cachedCallback(t){return this.O(3,F(t))}aliasTo(t){return this.O(5,t)}O(t,e){const{c:s,k:i}=this;return this.c=this.k=void 0,s.registerResolver(i,new Rt(i,t,e))}}const vt=t=>{const e=t.slice(),s=Object.keys(t),i=s.length;let n;for(let r=0;r<i;++r)n=s[r],b(n)||(e[n]=t[n]);return e},wt=q("di:paramtypes"),yt=t=>a("design:paramtypes",t),bt=t=>t.metadata[wt]??=[],St=t=>{const e=q("di:dependencies");let s=a(e,t);if(void 0===s){const i=t.inject;if(void 0===i){const e=yt(t),i=(t=>a(wt,t))(t);if(void 0===e)if(void 0===i){const e=Object.getPrototypeOf(t);s=f(e)&&e!==Function.prototype?vt(St(e)):[]}else s=vt(i);else if(void 0===i)s=vt(e);else{s=vt(e);let t,n=i.length,r=0;for(;r<n;++r)t=i[r],void 0!==t&&(s[r]=t);const o=Object.keys(i);let a;for(r=0,n=o.length,r=0;r<n;++r)a=o[r],b(a)||(s[a]=i[a])}}else s=vt(i);h(s,t,e)}return s},Ct=(t,e)=>{const s=f(t)?t:e,i=(g(t)?t:void 0)??"(anonymous)",n={$isInterface:!0,friendlyName:i,toString:()=>`InterfaceSymbol<${i}>`,register:null!=s?(t,e)=>s(new mt(t,e??n)):void 0};return n},kt=(...t)=>(e,s)=>{switch(s.kind){case"class":{const e=bt(s);let i,n=0;for(;n<t.length;++n)i=t[n],void 0!==i&&(e[n]=i);break}case"field":{const e=bt(s),i=t[0];void 0!==i&&(e[s.name]=i);break}default:throw y(22,String(s.name),s.kind)}},Tt=(()=>((0,i.b8)(),{createContainer:tt,getDesignParamtypes:yt,getDependencies:St,createInterface:Ct,inject:kt,transient:t=>(t.register=function(e){return B(t,t).register(e,t)},t.registerInRequestor=!1,t),singleton:(t,e=Et)=>(t.register=function(e){return L(t,t).register(e,t)},t.registerInRequestor=e.scoped,t)}))(),xt=Ct("IContainer"),It=xt;function At(t,e){return Tt.transient(t)}function $t(t,e){return null==t?At:At(t)}const Et={scoped:!1};Tt.singleton;class Rt{get $isResolver(){return!0}constructor(t,e,s){this.I=!1,this.A=null,this.k=t,this.$=e,this._state=s}register(t,e){return t.registerResolver(e||this.k,this)}resolve(t,e){switch(this.$){case 0:return this._state;case 1:if(this.I)throw y(3,this._state.name);return this.I=!0,this._state=(this.A=t.getFactory(this._state)).construct(e),this.$=0,this.I=!1,this._state;case 2:{const s=t.getFactory(this._state);if(null===s)throw y(4,this.k);return s.construct(e)}case 3:return this._state(t,e,this);case 4:return this._state[0].resolve(t,e);case 5:return e.get(this._state);default:throw y(5,this.$)}}getFactory(t){switch(this.$){case 1:case 2:return t.getFactory(this._state);case 5:return t.getResolver(this._state)?.getFactory?.(t)??null;case 0:return this.A;default:return null}}}class Nt{get friendlyName(){return this.L}constructor(t,e=null,s=null){this.L=t,this.j=e,this.F=s}prepare(t){this.j=t}get $isResolver(){return!0}resolve(){if(null==this.j)throw y(13,this.L);return this.j}getFactory(t){return null==this.F?null:t.getFactory(this.F)}dispose(){this.j=null}}class Pt{constructor(t,e){this.key=t,this.params=e}register(t){t.has(this.key,!0)?t.get(this.key).register(t,...this.params):t.register(...this.params.filter((t=>"object"==typeof t)))}}const Ot=n([]),Lt=n({});function Bt(){}const Mt=Ct("IPlatform");function jt(t){return function(e){function s(t,e){kt(s)(t,e)}return s.$isResolver=!0,s.resolve=function(s,i){return t(e,s,i)},s}}const Ft=(t,e=!1)=>{function s(t,e){kt(s)(t,e)}return s.$isResolver=!0,s.resolve=(s,i)=>i.getAll(t,e),s},Dt=jt(((t,e,s)=>s.has(t,!0)?s.get(t):void 0)),Vt=jt(((t,e,s)=>(...i)=>e.getFactory(t).construct(s,i))),Ht=jt(((t,e,s)=>s.has(t,!1)?s.get(t):void 0)),qt=jt(((t,e,s)=>s.has(t,!1)?s.get(t):s.root.get(t))),Ut=jt(((t,e,s)=>s.has(t,!1)?s.get(t):s.root.has(t,!1)?s.root.get(t):void 0)),_t=jt(((t,e,s)=>s===s.root?s.getAll(t,!1):s.has(t,!1)?s.getAll(t,!1).concat(s.root.getAll(t,!1)):s.root.getAll(t,!1))),Wt=jt(((t,e,s)=>Kt(t,e,s))),Kt=(t,e,s)=>{if(e.hasFactory(t))return e.getFactory(t).construct(s);if(Qt(t)){const i=f(t.register),n=e.getResolver(t,!1);let r;if(null==n?(i&&(r=(zt??=tt()).getResolver(t,!0)?.getFactory?.(e)),zt.dispose()):r=n.getFactory?.(e),null!=r)return r.construct(s);throw y(17,t)}return e.getFactory(t).construct(s)},Qt=t=>!0===t?.$isInterface;let zt;function Jt(t,e,s,i,n,r){function o(t){if(void 0!==t&&"function"!=typeof t)throw new TypeError("Function expected");return t}for(var a,h=i.kind,c="getter"===h?"get":"setter"===h?"set":"value",l=!e&&t?i.static?t:t.prototype:null,u=e||(l?Object.getOwnPropertyDescriptor(l,i.name):{}),d=!1,p=s.length-1;p>=0;p--){var f={};for(var g in i)f[g]="access"===g?{}:i[g];for(var g in i.access)f.access[g]=i.access[g];f.addInitializer=function(t){if(d)throw new TypeError("Cannot add initializers after decoration has completed");r.push(o(t||null))};var m=(0,s[p])("accessor"===h?{get:u.get,set:u.set}:u[c],f);if("accessor"===h){if(void 0===m)continue;if(null===m||"object"!=typeof m)throw new TypeError("Object expected");(a=o(m.get))&&(u.get=a),(a=o(m.set))&&(u.set=a),(a=o(m.init))&&n.unshift(a)}else(a=o(m))&&("field"===h?n.unshift(a):u[c]=a)}l&&Object.defineProperty(l,i.name,u),d=!0}"function"==typeof SuppressedError&&SuppressedError,n({trace:0,debug:1,info:2,warn:3,error:4,fatal:5,none:6});const Gt=Ct("ILogConfig",(t=>t.instance(new ie("no-colors",3)))),Yt=Ct("ISink"),Zt=Ct("ILogEventFactory",(t=>t.singleton(he))),Xt=Ct("ILogger",(t=>t.singleton(ce))),te=Ct("ILogScope"),ee=n({key:q("logger-sink-handles"),define(t,e){h(e.handles,t,this.key)},getHandles(t){return a(this.key,t.constructor)}}),se=R({red:t=>`[31m${t}[39m`,green:t=>`[32m${t}[39m`,yellow:t=>`[33m${t}[39m`,blue:t=>`[34m${t}[39m`,magenta:t=>`[35m${t}[39m`,cyan:t=>`[36m${t}[39m`,white:t=>`[37m${t}[39m`,grey:t=>`[90m${t}[39m`});class ie{constructor(t,e){this.colorOptions=t,this.level=e}}const ne=function(){const t={"no-colors":R({TRC:"TRC",DBG:"DBG",INF:"INF",WRN:"WRN",ERR:"ERR",FTL:"FTL",QQQ:"???"}),colors:R({TRC:se.grey("TRC"),DBG:se.grey("DBG"),INF:se.white("INF"),WRN:se.yellow("WRN"),ERR:se.red("ERR"),FTL:se.red("FTL"),QQQ:se.grey("???")})};return(e,s)=>e<=0?t[s].TRC:e<=1?t[s].DBG:e<=2?t[s].INF:e<=3?t[s].WRN:e<=4?t[s].ERR:e<=5?t[s].FTL:t[s].QQQ}(),re=(t,e)=>"no-colors"===e?t.join("."):t.map(se.cyan).join("."),oe=(t,e)=>"no-colors"===e?new Date(t).toISOString():se.grey(new Date(t).toISOString());class ae{constructor(t,e,s,i,n,r){this.severity=t,this.message=e,this.optionalParams=s,this.scope=i,this.colorOptions=n,this.timestamp=r}toString(){const{severity:t,message:e,scope:s,colorOptions:i,timestamp:n}=this;return 0===s.length?`${oe(n,i)} [${ne(t,i)}] ${e}`:`${oe(n,i)} [${ne(t,i)} ${re(s,i)}] ${e}`}getFormattedLogInfo(t=!1){const{severity:e,message:s,scope:i,colorOptions:n,timestamp:r,optionalParams:o}=this;let a=null,h="";t&&s instanceof Error?a=s:h=s;const c=0===i.length?"":` ${re(i,n)}`;let l=`${oe(r,n)} [${ne(e,n)}${c}] ${h}`;if(void 0===o||0===o.length)return null===a?[l]:[l,a];let u=0;for(;l.includes("%s");)l=l.replace("%s",String(o[u++]));return null!==a?[l,a,...o.slice(u)]:[l,...o.slice(u)]}}class he{constructor(){this.config=ct(Gt)}createLogEvent(t,e,s,i){return new ae(e,s,i,t.scope,this.config.colorOptions,Date.now())}}let ce=(()=>{var t;let e,s,i,n,r,o,a=[];return t=class{constructor(t=ct(Gt),e=ct(Zt),s=ct(Ft(Yt)),i=ct(Dt(te))??[],n=null){let r,o,h,c,l,u;if(this.scope=(function(t,e,s){for(var i=arguments.length>2,n=0;n<e.length;n++)s=i?e[n].call(t,s):e[n].call(t)}(this,a),i),this._=v(),this.config=t,this.f=e,this.sinks=s,null===n){this.root=this,this.parent=this,r=this.M=[],o=this.T=[],h=this.P=[],c=this.K=[],l=this.N=[],u=this.G=[];for(const t of s){const e=ee.getHandles(t);(e?.includes(0)??1)&&r.push(t),(e?.includes(1)??1)&&o.push(t),(e?.includes(2)??1)&&h.push(t),(e?.includes(3)??1)&&c.push(t),(e?.includes(4)??1)&&l.push(t),(e?.includes(5)??1)&&u.push(t)}}else this.root=n.root,this.parent=n,r=this.M=n.M,o=this.T=n.T,h=this.P=n.P,c=this.K=n.K,l=this.N=n.N,u=this.G=n.G}trace(t,...e){this.config.level<=0&&this.W(this.M,0,t,e)}debug(t,...e){this.config.level<=1&&this.W(this.T,1,t,e)}info(t,...e){this.config.level<=2&&this.W(this.P,2,t,e)}warn(t,...e){this.config.level<=3&&this.W(this.K,3,t,e)}error(t,...e){this.config.level<=4&&this.W(this.N,4,t,e)}fatal(t,...e){this.config.level<=5&&this.W(this.G,5,t,e)}scopeTo(e){const s=this._;let i=s[e];return void 0===i&&(i=s[e]=new t(this.config,this.f,null,this.scope.concat(e),this)),i}W(t,e,s,i){const n=f(s)?s():s,r=this.f.createLogEvent(this,e,n,i);for(let e=0,s=t.length;e<s;++e)t[e].handleEvent(r)}},(()=>{const h="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;e=[I],s=[I],i=[I],n=[I],r=[I],o=[I],Jt(t,null,e,{kind:"method",name:"trace",static:!1,private:!1,access:{has:t=>"trace"in t,get:t=>t.trace},metadata:h},null,a),Jt(t,null,s,{kind:"method",name:"debug",static:!1,private:!1,access:{has:t=>"debug"in t,get:t=>t.debug},metadata:h},null,a),Jt(t,null,i,{kind:"method",name:"info",static:!1,private:!1,access:{has:t=>"info"in t,get:t=>t.info},metadata:h},null,a),Jt(t,null,n,{kind:"method",name:"warn",static:!1,private:!1,access:{has:t=>"warn"in t,get:t=>t.warn},metadata:h},null,a),Jt(t,null,r,{kind:"method",name:"error",static:!1,private:!1,access:{has:t=>"error"in t,get:t=>t.error},metadata:h},null,a),Jt(t,null,o,{kind:"method",name:"fatal",static:!1,private:!1,access:{has:t=>"fatal"in t,get:t=>t.fatal},metadata:h},null,a),h&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:h})})(),t})();class le{constructor(t,e){this.type=t,this.cb=e}handle(t){t instanceof this.type&&this.cb.call(null,t)}}const ue=Ct("IEventAggregator",(t=>t.singleton(de)));class de{constructor(){this.eventLookup={},this.messageHandlers=[]}publish(t,e){if(!t)throw y(18,t);if(g(t)){let s=this.eventLookup[t];if(void 0!==s){s=s.slice();let i=s.length;for(;i-- >0;)s[i](e,t)}}else{const e=this.messageHandlers.slice();let s=e.length;for(;s-- >0;)e[s].handle(t)}}subscribe(t,e){if(!t)throw y(19,t);let s,i;return g(t)?(void 0===this.eventLookup[t]&&(this.eventLookup[t]=[]),s=e,i=this.eventLookup[t]):(s=new le(t,e),i=this.messageHandlers),i.push(s),{dispose(){const t=i.indexOf(s);-1!==t&&i.splice(t,1)}}}subscribeOnce(t,e){const s=this.subscribe(t,((t,i)=>{s.dispose(),e(t,i)}));return s}}},220:(t,e,s)=>{function i(){Symbol.metadata??=Symbol.for("Symbol.metadata")}function n(t){return"object"==typeof t&&null!==t||"function"==typeof t}s.d(e,{Gv:()=>n,OS:()=>r,b8:()=>i});const r={get:(t,e)=>e[Symbol.metadata]?.[t],define(t,e,...s){let i=Object.getOwnPropertyDescriptor(e,Symbol.metadata)?.value;null==i&&Object.defineProperty(e,Symbol.metadata,{value:i=Object.create(null),enumerable:!0,configurable:!0,writable:!0});const n=s.length;switch(n){case 0:throw new Error("At least one key must be provided");case 1:return void(i[s[0]]=t);case 2:return void(i[s[0]]=i[s[1]]=t);default:for(let e=0;e<n;++e)i[s[e]]=t;return}},has(t,e){const s=e[Symbol.metadata];return null!=s&&t in s},delete(t,e){const s=e[Symbol.metadata];null!=s&&Reflect.deleteProperty(s,t)}}},303:(t,e,s)=>{s.d(e,{s:()=>n});var i=s(410);class n extends i.OD{static getOrCreate(t,e={}){let s=n.t.get(t);return void 0===s&&n.t.set(t,s=new n(t,e)),s}static set(t,e){n.t.set(t,e)}get domWriteQueue(){return this.domQueue}get domReadQueue(){return this.domQueue}constructor(t,e={}){super(t,e),"Node Element HTMLElement CustomEvent CSSStyleSheet ShadowRoot MutationObserver window document customElements".split(" ").forEach((s=>this[s]=s in e?e[s]:t[s])),"fetch requestAnimationFrame cancelAnimationFrame".split(" ").forEach((s=>this[s]=s in e?e[s]:t[s]?.bind(t)??(t=>()=>{throw new Error(`The PLATFORM did not receive a valid reference to the global function '${t}'.`)})(s))),this.domQueue=(()=>{let t=!1,e=-1;const s=()=>{e=-1,!0===t&&(t=!1,n.flush())},n=new i.Pq(this,(()=>{t=!0,-1===e&&(e=this.requestAnimationFrame(s))}),(()=>{t=!1,e>-1&&(this.cancelAnimationFrame(e),e=-1)}));return n})()}}n.t=new WeakMap},410:(t,e,s)=>{s.d(e,{OD:()=>c,Pq:()=>l,mE:()=>u});const i="pending",n="running",r="completed",o="canceled",a=new Map,h=t=>()=>{throw k(`AUR1005:${t}`)};class c{constructor(t,e={}){this.macroTaskRequested=!1,this.macroTaskHandle=-1,this.globalThis=t,"decodeURI decodeURIComponent encodeURI encodeURIComponent Date Reflect console".split(" ").forEach((s=>{this[s]=s in e?e[s]:t[s]})),"clearInterval clearTimeout queueMicrotask setInterval setTimeout".split(" ").forEach((s=>{this[s]=s in e?e[s]:t[s]?.bind(t)??h(s)})),this.performanceNow="performanceNow"in e?e.performanceNow:t.performance?.now?.bind(t.performance)??h("performance.now"),this.flushMacroTask=this.flushMacroTask.bind(this),this.taskQueue=new l(this,this.requestMacroTask.bind(this),this.cancelMacroTask.bind(this))}static getOrCreate(t,e={}){let s=a.get(t);return void 0===s&&a.set(t,s=new c(t,e)),s}static set(t,e){a.set(t,e)}requestMacroTask(){this.macroTaskRequested=!0,-1===this.macroTaskHandle&&(this.macroTaskHandle=this.setTimeout(this.flushMacroTask,0))}cancelMacroTask(){this.macroTaskRequested=!1,this.macroTaskHandle>-1&&(this.clearTimeout(this.macroTaskHandle),this.macroTaskHandle=-1)}flushMacroTask(){this.macroTaskHandle=-1,!0===this.macroTaskRequested&&(this.macroTaskRequested=!1,this.taskQueue.flush())}}class l{get isEmpty(){return 0===this.t&&0===this.i.length&&0===this.h.length&&0===this.u.length}get T(){return 0===this.t&&this.i.every(b)&&this.h.every(b)&&this.u.every(b)}constructor(t,e,s){this.platform=t,this.$request=e,this.$cancel=s,this.$=void 0,this.t=0,this.i=[],this.h=[],this.u=[],this.R=!1,this.A=void 0,this.M=0,this.P=0,this.U=()=>{this.R||(this.R=!0,this.M=this.q(),this.$request())},this.q=t.performanceNow,this.I=new f(t.console)}flush(t=this.q()){if(this.R=!1,this.P=t,void 0===this.$){let e,s;if(this.h.length>0&&(this.i.push(...this.h),this.h.length=0),this.u.length>0)for(let s=0;s<this.u.length;++s)e=this.u[s],e.queueTime<=t&&(this.i.push(e),this.u.splice(s--,1));for(;this.i.length>0;)if((s=this.i.shift()).run(),s.status===n){if(!0===s.suspend)return this.$=s,void this.U();++this.t}if(this.h.length>0&&(this.i.push(...this.h),this.h.length=0),this.u.length>0)for(let s=0;s<this.u.length;++s)e=this.u[s],e.queueTime<=t&&(this.i.push(e),this.u.splice(s--,1));if((this.i.length>0||this.u.length>0||this.t>0)&&this.U(),void 0!==this.A&&this.T){const t=this.A;this.A=void 0,t.resolve()}}else this.U()}cancel(){this.R&&(this.$cancel(),this.R=!1)}async yield(){this.isEmpty||(void 0===this.A&&(this.A=y()),await this.A)}queueTask(t,e){const{delay:s,preempt:i,persistent:n,suspend:r}={...g,...e};if(i){if(s>0)throw S();if(n)throw C()}0===this.i.length&&this.U();const o=this.q(),a=new p(this.I,this,o,o+s,i,n,r,t);return i?this.i[this.i.length]=a:0===s?this.h[this.h.length]=a:this.u[this.u.length]=a,a}remove(t){let e=this.i.indexOf(t);if(e>-1)this.i.splice(e,1);else if(e=this.h.indexOf(t),e>-1)this.h.splice(e,1);else{if(e=this.u.indexOf(t),!(e>-1))throw k(`Task #${t.id} could not be found`);this.u.splice(e,1)}}_(t){t.reset(this.q()),t.createdTime===t.queueTime?this.h[this.h.length]=t:this.u[this.u.length]=t}C(t){if(!0===t.suspend){if(this.$!==t)throw k(`Async task completion mismatch: suspenderTask=${this.$?.id}, task=${t.id}`);this.$=void 0}else--this.t;if(void 0!==this.A&&this.T){const t=this.A;this.A=void 0,t.resolve()}this.isEmpty&&this.cancel()}}class u extends Error{constructor(t){super("Task was canceled."),this.task=t}}let d=0;class p{get result(){const t=this.N;if(void 0===t)switch(this.j){case i:{const t=this.N=y();return this.F=t.resolve,this.O=t.reject,t}case n:throw k("Trying to await task from within task will cause a deadlock.");case r:return this.N=Promise.resolve();case o:return this.N=Promise.reject(new u(this))}return t}get status(){return this.j}constructor(t,e,s,n,r,o,a,h){this.taskQueue=e,this.createdTime=s,this.queueTime=n,this.preempt=r,this.persistent=o,this.suspend=a,this.callback=h,this.id=++d,this.F=void 0,this.O=void 0,this.N=void 0,this.j=i,this.I=t}run(t=this.taskQueue.platform.performanceNow()){if(this.j!==i)throw k(`Cannot run task in ${this.j} state`);const{persistent:e,taskQueue:s,callback:a,F:h,O:c,createdTime:l}=this;let u;this.j=n;try{u=a(t-l),u instanceof Promise?u.then((t=>{this.persistent?s._(this):(this.j=e?o:r,this.dispose()),s.C(this),void 0!==h&&h(t)})).catch((t=>{if(this.persistent||this.dispose(),s.C(this),void 0===c)throw t;c(t)})):(this.persistent?s._(this):(this.j=e?o:r,this.dispose()),void 0!==h&&h(u))}catch(t){if(this.persistent||this.dispose(),void 0===c)throw t;c(t)}}cancel(){if(this.j===i){const t=this.taskQueue,e=this.O;return t.remove(this),t.isEmpty&&t.cancel(),this.j=o,this.dispose(),void 0!==e&&e(new u(this)),!0}return!(this.j!==n||!this.persistent||(this.persistent=!1,0))}reset(t){const e=this.queueTime-this.createdTime;this.createdTime=t,this.queueTime=t+e,this.j=i,this.F=void 0,this.O=void 0,this.N=void 0}dispose(){this.callback=void 0,this.F=void 0,this.O=void 0,this.N=void 0}}class f{constructor(t){this.console=t,this.enabled=!1,this.depth=0}enter(t,e){this.log(`${"  ".repeat(this.depth++)}> `,t,e)}leave(t,e){this.log(`${"  ".repeat(--this.depth)}< `,t,e)}trace(t,e){this.log(`${"  ".repeat(this.depth)}- `,t,e)}log(t,e,s){if(e instanceof l){const i=`processing=${e.i.length} pending=${e.h.length} delayed=${e.u.length} flushReq=${e.R} susTask=${!!e.$}`;this.console.log(`${t}[Q.${s}] ${i}`)}else{const i=e.id,n=Math.round(10*e.createdTime)/10,r=Math.round(10*e.queueTime)/10,o=e.preempt,a=e.persistent,h=e.suspend,c=`id=${i} created=${n} queue=${r} preempt=${o} persistent=${a} status=${e.j} suspend=${h}`;this.console.log(`${t}[T.${s}] ${c}`)}}}const g={delay:0,preempt:!1,persistent:!1,suspend:!1};let m,v;const w=(t,e)=>{m=t,v=e},y=()=>{const t=new Promise(w);return t.resolve=m,t.reject=v,t},b=t=>t.persistent,S=()=>k("AUR1006"),C=()=>k("AUR1007"),k=t=>new Error(t)},273:(t,e,s)=>{s.d(e,{NMh:()=>ms,KIi:()=>Xr,xIk:()=>An,I6R:()=>$s,K94:()=>Jr,DEw:()=>Gr,MH3:()=>Xn,YFW:()=>Er,PyP:()=>$r,w3g:()=>wr,r_:()=>ws,mYM:()=>Ar,yrA:()=>Ea,EMX:()=>Nr,_CO:()=>Vn});var i=s(529),n=s(452),r=s(220);const o=Object.prototype.hasOwnProperty,a=Reflect.defineProperty;function h(t,e,s){return a(t,e,{enumerable:!1,configurable:!0,writable:!0,value:s}),s}function c(t,e,s){e in t||h(t,e,s)}const l=Object.assign,u=Object.freeze,d=String,p=n.DI.createInterface,f=r.OS.get,g=r.OS.define,m=n.DI.createInterface("ICoercionConfiguration"),v=u({None:0,Observer:1,Node:2,Layout:4});function w(t=0){const e=Array(t);let s=0;for(;s<t;)e[s]=s++;return e.deletedIndices=[],e.deletedItems=[],e.isIndexMap=!0,e}new Map;const y=(()=>{function t(){return h(this,"subs",new r)}function e(t){return this.subs.add(t)}function s(t){return this.subs.remove(t)}const i=new WeakSet;function n(n,r){if(!i.has(n)){i.add(n);const r=n.prototype;a(r,"subs",{get:t}),c(r,"subscribe",e),c(r,"unsubscribe",s)}return n}class r{constructor(){this.count=0,this.t=[],this.i=[],this.u=!1}add(t){return!this.t.includes(t)&&(this.t[this.t.length]=t,"handleDirty"in t&&(this.i[this.i.length]=t,this.u=!0),++this.count,!0)}remove(t){let e=this.t.indexOf(t);return-1!==e&&(this.t.splice(e,1),e=this.i.indexOf(t),-1!==e&&(this.i.splice(e,1),this.u=this.i.length>0),--this.count,!0)}notify(t,e){for(const s of this.t.slice(0))s.handleChange(t,e)}notifyCollection(t,e){const s=this.t.slice(0),i=s.length;let n=0;for(;n<i;++n)s[n].handleCollectionChange(t,e)}notifyDirty(){if(this.u)for(const t of this.i.slice(0))t.handleDirty()}}return function(t,e){return null==t?n:n(t)}})(),b=(t,...e)=>new Error(`AUR${d(t).padStart(4,"0")}:${e.map(d)}`);class S{constructor(t){this.owner=t,this.type=1,this.v=(this.o=t.collection).length}getValue(){return this.o.length}setValue(t){t!==this.v&&(Number.isNaN(t)||(this.o.splice(t),this.v=this.o.length))}handleDirty(){this.v!==this.o.length&&this.subs.notifyDirty()}handleCollectionChange(t,e){const s=this.v,i=this.o.length;(this.v=i)!==s&&(this.subs.notifyDirty(),this.subs.notify(this.v,s))}}k(S);class C{constructor(t){this.owner=t,this.type=1,this.v=(this.o=t.collection).size}getValue(){return this.o.size}setValue(){throw b(220)}handleDirty(){this.v!==this.o.size&&this.subs.notifyDirty()}handleCollectionChange(t,e){const s=this.v,i=this.o.size;(this.v=i)!==s&&this.subs.notify(this.v,s)}}function k(t){const e=t.prototype;return c(e,"subscribe",T),c(e,"unsubscribe",x),y(t,null)}function T(t){this.subs.add(t)&&1===this.subs.count&&this.owner.subscribe(this)}function x(t){this.subs.remove(t)&&0===this.subs.count&&this.owner.subscribe(this)}k(C);const I=(()=>{const t=Symbol.for("__au_arr_obs__"),e=Array[t]??h(Array,t,new WeakMap);function s(t,e){return t===e?0:(t=null===t?"null":t.toString())<(e=null===e?"null":e.toString())?-1:1}function i(t,e){return void 0===t?void 0===e?0:1:void 0===e?-1:0}function r(t,e,s,i,n){let r,o,a,h,c,l,u;for(l=s+1;l<i;l++){for(r=t[l],o=e[l],u=l-1;u>=s&&(a=t[u],h=e[u],c=n(a,r),c>0);u--)t[u+1]=a,e[u+1]=h;t[u+1]=r,e[u+1]=o}}function o(t,e,s,i,n){let a,h,c,l,u,d,p,f,g,m,v,w,y,b,S,C,k,T,x,I=0,A=0;for(;;){if(i-s<=10)return void r(t,e,s,i,n);I=s+(i-s>>1),a=t[s],l=e[s],h=t[i-1],u=e[i-1],c=t[I],d=e[I],p=n(a,h),p>0&&(m=a,v=l,a=h,l=u,h=m,u=v),f=n(a,c),f>=0?(m=a,v=l,a=c,l=d,c=h,d=u,h=m,u=v):(g=n(h,c),g>0&&(m=h,v=u,h=c,u=d,c=m,d=v)),t[s]=a,e[s]=l,t[i-1]=c,e[i-1]=d,w=h,y=u,b=s+1,S=i-1,t[I]=t[b],e[I]=e[b],t[b]=w,e[b]=y;t:for(A=b+1;A<S;A++)if(C=t[A],k=e[A],T=n(C,w),T<0)t[A]=t[b],e[A]=e[b],t[b]=C,e[b]=k,b++;else if(T>0){do{if(S--,S==A)break t;x=t[S],T=n(x,w)}while(T>0);t[A]=t[S],e[A]=e[S],t[S]=C,e[S]=k,T<0&&(C=t[A],k=e[A],t[A]=t[b],e[A]=e[b],t[b]=C,e[b]=k,b++)}i-S<b-s?(o(t,e,S,i,n),i=b):(o(t,e,s,b,n),s=S)}}const c=Array.prototype,l=["push","unshift","pop","shift","splice","reverse","sort"];let u,d=!1;const p="__au_arr_on__";function m(){if(void 0===u&&function(){const t=c.push,r=c.unshift,h=c.pop,d=c.shift,p=c.splice,f=c.reverse,g=c.sort;u={push:function(...s){const i=e.get(this);if(void 0===i)return t.apply(this,s);const n=this.length,r=s.length;if(0===r)return n;this.length=i.indexMap.length=n+r;let o=n;for(;o<this.length;)this[o]=s[o-n],i.indexMap[o]=-2,o++;return i.notify(),this.length},unshift:function(...t){const s=e.get(this);if(void 0===s)return r.apply(this,t);const i=t.length,n=new Array(i);let o=0;for(;o<i;)n[o++]=-2;r.apply(s.indexMap,n);const a=r.apply(this,t);return s.notify(),a},pop:function(){const t=e.get(this);if(void 0===t)return h.call(this);const s=t.indexMap,i=h.call(this),n=s.length-1;return s[n]>-1&&(s.deletedIndices.push(s[n]),s.deletedItems.push(i)),h.call(s),t.notify(),i},shift:function(){const t=e.get(this);if(void 0===t)return d.call(this);const s=t.indexMap,i=d.call(this);return s[0]>-1&&(s.deletedIndices.push(s[0]),s.deletedItems.push(i)),d.call(s),t.notify(),i},splice:function(...t){const s=t[0],i=t[1],n=e.get(this);if(void 0===n)return p.apply(this,t);const r=this.length,o=0|s,a=o<0?Math.max(r+o,0):Math.min(o,r),h=n.indexMap,c=t.length,l=0===c?0:1===c?r-a:i;let u=a;if(l>0){const t=u+l;for(;u<t;)h[u]>-1&&(h.deletedIndices.push(h[u]),h.deletedItems.push(this[u])),u++}if(u=0,c>2){const t=c-2,e=new Array(t);for(;u<t;)e[u++]=-2;p.call(h,s,i,...e)}else p.apply(h,t);const d=p.apply(this,t);return(l>0||u>0)&&n.notify(),d},reverse:function(){const t=e.get(this);if(void 0===t)return f.call(this),this;const s=this.length,i=s/2|0;let n=0;for(;n!==i;){const e=s-n-1,i=this[n],r=t.indexMap[n],o=this[e],a=t.indexMap[e];this[n]=o,t.indexMap[n]=a,this[e]=i,t.indexMap[e]=r,n++}return t.notify(),this},sort:function(t){const r=e.get(this);if(void 0===r)return g.call(this,t),this;let a=this.length;if(a<2)return this;o(this,r.indexMap,0,a,i);let h=0;for(;h<a&&void 0!==this[h];)h++;void 0!==t&&(0,n.Tn)(t)||(t=s),o(this,r.indexMap,0,h,t);let c=!1;for(h=0,a=r.indexMap.length;a>h;++h)if(r.indexMap[h]!==h){c=!0;break}return c&&r.notify(),this}};for(const t of l)a(u[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1})}(),!f(p,Array)){g(!0,Array,p);for(const t of l)!0!==c[t].observing&&h(c,t,u[t])}}class v{constructor(t){this.type=1,d||(d=!0,m()),this.indexObservers={},this.collection=t,this.indexMap=w(t.length),this.lenObs=void 0,e.set(t,this)}notify(){const t=this.subs;t.notifyDirty();const e=this.indexMap;const s=this.collection,i=s.length;this.indexMap=w(i),t.notifyCollection(s,e)}getLengthObserver(){return this.lenObs??=new S(this)}getIndexObserver(t){return this.indexObservers[t]??=new b(this,t)}}y(v,null);class b{constructor(t,e){this.owner=t,this.index=e,this.doNotCache=!0,this.value=this.getValue()}getValue(){return this.owner.collection[this.index]}setValue(t){if(t===this.getValue())return;const e=this.owner,s=this.index,i=e.indexMap;i[s]>-1&&i.deletedIndices.push(i[s]),i[s]=-2,e.collection[s]=t,e.notify()}handleDirty(){this.value!==this.getValue()&&this.subs.notifyDirty()}handleCollectionChange(t,e){const s=this.index;if(e[s]===s)return;const i=this.value,n=this.value=this.getValue();i!==n&&this.subs.notify(n,i)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&this.owner.subscribe(this)}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.owner.unsubscribe(this)}}return y(b,null),function(t){let s=e.get(t);return void 0===s&&(e.set(t,s=new v(t)),m()),s}})(),A=(()=>{const t=Symbol.for("__au_set_obs__"),e=Set[t]??h(Set,t,new WeakMap),{add:s,clear:i,delete:n}=Set.prototype,r=["add","clear","delete"],o={add:function(t){const i=e.get(this);if(void 0===i)return s.call(this,t),this;const n=this.size;return s.call(this,t),this.size===n||(i.indexMap[n]=-2,i.notify()),this},clear:function(){const t=e.get(this);if(void 0===t)return i.call(this);if(this.size>0){const e=t.indexMap;let s=0;for(const t of this.keys())e[s]>-1&&(e.deletedIndices.push(e[s]),e.deletedItems.push(t)),s++;i.call(this),e.length=0,t.notify()}},delete:function(t){const s=e.get(this);if(void 0===s)return n.call(this,t);if(0===this.size)return!1;let i=0;const r=s.indexMap;for(const e of this.keys()){if(e===t){r[i]>-1&&(r.deletedIndices.push(r[i]),r.deletedItems.push(e)),r.splice(i,1);const o=n.call(this,t);return!0===o&&s.notify(),o}i++}return!1}};class a{constructor(t){this.type=1,this.collection=t,this.indexMap=w(t.size),this.lenObs=void 0}notify(){const t=this.subs;t.notifyDirty();const e=this.indexMap;const s=this.collection,i=s.size;this.indexMap=w(i),t.notifyCollection(s,e)}getLengthObserver(){return this.lenObs??=new C(this)}}return y(a,null),function(t){let s=e.get(t);return void 0===s&&(e.set(t,s=new a(t)),function(t){for(const e of r)h(t,e,o[e])}(t)),s}})(),$=(()=>{const t=Symbol.for("__au_map_obs__"),e=Map[t]??h(Map,t,new WeakMap),{set:s,clear:i,delete:n}=Map.prototype,r=["set","clear","delete"],o={set:function(t,i){const n=e.get(this);if(void 0===n)return s.call(this,t,i),this;const r=this.get(t),o=this.size;if(s.call(this,t,i),this.size===o){let e=0;for(const s of this.entries()){if(s[0]===t)return s[1]!==r&&(n.indexMap.deletedIndices.push(n.indexMap[e]),n.indexMap.deletedItems.push(s),n.indexMap[e]=-2,n.notify()),this;e++}return this}return n.indexMap[o]=-2,n.notify(),this},clear:function(){const t=e.get(this);if(void 0===t)return i.call(this);if(this.size>0){const e=t.indexMap;let s=0;for(const t of this.keys())e[s]>-1&&(e.deletedIndices.push(e[s]),e.deletedItems.push(t)),s++;i.call(this),e.length=0,t.notify()}},delete:function(t){const s=e.get(this);if(void 0===s)return n.call(this,t);if(0===this.size)return!1;let i=0;const r=s.indexMap;for(const e of this.keys()){if(e===t){r[i]>-1&&(r.deletedIndices.push(r[i]),r.deletedItems.push(e)),r.splice(i,1);const o=n.call(this,t);return!0===o&&s.notify(),o}++i}return!1}};class a{constructor(t){this.type=1,this.collection=t,this.indexMap=w(t.size),this.lenObs=void 0}notify(){const t=this.subs;t.notifyDirty();const e=this.indexMap;const s=this.collection,i=s.size;this.indexMap=w(i),t.notifyCollection(s,e)}getLengthObserver(){return this.lenObs??=new C(this)}}return y(a,null),function(t){let s=e.get(t);return void 0===s&&(e.set(t,s=new a(t)),function(t){for(const e of r)h(t,e,o[e])}(t)),s}})(),E=(()=>{class t{constructor(t){this.version=0,this.count=0,this.o=new Map,this.b=t}add(t){this.o.has(t)||(t.subscribe(this.b),++this.count),this.o.set(t,this.version)}clear(){this.o.forEach(s,this),this.count=this.o.size}clearAll(){this.o.forEach(e,this),this.o.clear(),this.count=0}}function e(t,e){e.unsubscribe(this.b)}function s(t,e){this.version!==t&&(e.unsubscribe(this.b),this.o.delete(e))}function i(){return h(this,"obs",new t(this))}function r(t,e){this.obs.add(this.oL.getObserver(t,e))}function o(t){let e;if((0,n.cy)(t))e=I(t);else if((0,n.vM)(t))e=A(t);else{if(!(0,n.jh)(t))throw b(210,t);e=$(t)}this.obs.add(e)}function l(t){this.obs.add(t)}function u(){throw b(99,"handleChange")}function d(){throw b(99,"handleCollectionChange")}return function(t,e){const s=t.prototype;return c(s,"observe",r),c(s,"observeCollection",o),c(s,"subscribeTo",l),a(s,"obs",{get:i}),c(s,"handleChange",u),c(s,"handleCollectionChange",d),t}})();function R(t,e){return null==t?E:E(t,e)}let N=null;const P=[];let O=!1;function L(){return N}function B(t){if(null==t)throw b(206);if(null==N)return N=t,P[0]=N,void(O=!0);if(N===t)throw b(207);P.push(t),N=t,O=!0}function M(t){if(null==t)throw b(208);if(N!==t)throw b(209);P.pop(),N=P.length>0?P[P.length-1]:null,O=null!=N}const j=u({get current(){return N},get connecting(){return O},enter:B,exit:M,pause:function(){O=!1},resume:function(){O=!0}}),F=Reflect.get,D=Object.prototype.toString,V=new WeakMap,H="__au_nw__";function q(t){switch(D.call(t)){case"[object Object]":return!0!==t.constructor[H];case"[object Array]":case"[object Map]":case"[object Set]":return!0;default:return!1}}const U="__raw__";function _(t){return q(t)?W(t):t}function W(t){return V.get(t)??function(t){const e=(0,n.cy)(t)?G:(0,n.jh)(t)||(0,n.vM)(t)?yt:J,s=new Proxy(t,e);return V.set(t,s),V.set(s,s),s}(t)}function K(t){return t[U]??t}function Q(t){return q(t)&&t[U]||t}function z(t,e){return"constructor"===e||"__proto__"===e||"$observers"===e||e===Symbol.toPrimitive||e===Symbol.toStringTag||!0===t.constructor[`__au_nw_${d(e)}__`]}const J={get(t,e,s){if(e===U)return t;const i=L();return!O||z(t,e)||null==i?F(t,e,s):(i.observe(t,e),_(F(t,e,s)))}},G={get(t,e,s){if(e===U)return t;if(!O||z(t,e)||null==N)return F(t,e,s);switch(e){case"length":return N.observe(t,"length"),t.length;case"map":return Y;case"includes":return tt;case"indexOf":return et;case"lastIndexOf":return st;case"every":return Z;case"filter":return X;case"find":return nt;case"findIndex":return it;case"flat":return rt;case"flatMap":return ot;case"join":return at;case"push":return ct;case"pop":return ht;case"reduce":return vt;case"reduceRight":return wt;case"reverse":return pt;case"shift":return lt;case"unshift":return ut;case"slice":return mt;case"splice":return dt;case"some":return ft;case"sort":return gt;case"keys":return At;case"values":case Symbol.iterator:return $t;case"entries":return Et}return N.observe(t,e),_(F(t,e,s))},ownKeys:t=>(L()?.observe(t,"length"),Reflect.ownKeys(t))};function Y(t,e){const s=K(this),i=s.map(((s,i)=>Q(t.call(e,_(s),i,this))));return Rt(N,s),_(i)}function Z(t,e){const s=K(this),i=s.every(((s,i)=>t.call(e,_(s),i,this)));return Rt(N,s),i}function X(t,e){const s=K(this),i=s.filter(((s,i)=>Q(t.call(e,_(s),i,this))));return Rt(N,s),_(i)}function tt(t){const e=K(this),s=e.includes(Q(t));return Rt(N,e),s}function et(t){const e=K(this),s=e.indexOf(Q(t));return Rt(N,e),s}function st(t){const e=K(this),s=e.lastIndexOf(Q(t));return Rt(N,e),s}function it(t,e){const s=K(this),i=s.findIndex(((s,i)=>Q(t.call(e,_(s),i,this))));return Rt(N,s),i}function nt(t,e){const s=K(this),i=s.find(((e,s)=>t(_(e),s,this)),e);return Rt(N,s),_(i)}function rt(){const t=K(this);return Rt(N,t),_(t.flat())}function ot(t,e){const s=K(this);return Rt(N,s),W(s.flatMap(((s,i)=>_(t.call(e,_(s),i,this)))))}function at(t){const e=K(this);return Rt(N,e),e.join(t)}function ht(){return _(K(this).pop())}function ct(...t){return K(this).push(...t)}function lt(){return _(K(this).shift())}function ut(...t){return K(this).unshift(...t)}function dt(...t){return _(K(this).splice(...t))}function pt(...t){const e=K(this),s=e.reverse();return Rt(N,e),_(s)}function ft(t,e){const s=K(this),i=s.some(((s,i)=>Q(t.call(e,_(s),i,this))));return Rt(N,s),i}function gt(t){const e=K(this),s=e.sort(t);return Rt(N,e),_(s)}function mt(t,e){const s=K(this);return Rt(N,s),W(s.slice(t,e))}function vt(t,e){const s=K(this),i=s.reduce(((e,s,i)=>t(e,_(s),i,this)),e);return Rt(N,s),_(i)}function wt(t,e){const s=K(this),i=s.reduceRight(((e,s,i)=>t(e,_(s),i,this)),e);return Rt(N,s),_(i)}const yt={get(t,e,s){if(e===U)return t;const i=L();if(!O||z(t,e)||null==i)return F(t,e,s);switch(e){case"size":return i.observe(t,"size"),t.size;case"clear":return xt;case"delete":return It;case"forEach":return bt;case"add":if((0,n.vM)(t))return Tt;break;case"get":if((0,n.jh)(t))return Ct;break;case"set":if((0,n.jh)(t))return kt;break;case"has":return St;case"keys":return At;case"values":return $t;case"entries":return Et;case Symbol.iterator:return(0,n.jh)(t)?Et:$t}return _(F(t,e,s))}};function bt(t,e){const s=K(this);return Rt(N,s),s.forEach(((s,i)=>{t.call(e,_(s),_(i),this)}))}function St(t){const e=K(this);return Rt(N,e),e.has(Q(t))}function Ct(t){const e=K(this);return Rt(N,e),_(e.get(Q(t)))}function kt(t,e){return _(K(this).set(Q(t),Q(e)))}function Tt(t){return _(K(this).add(Q(t)))}function xt(){return _(K(this).clear())}function It(t){return _(K(this).delete(Q(t)))}function At(){const t=K(this);Rt(N,t);const e=t.keys();return{next(){const t=e.next(),s=t.value,i=t.done;return i?{value:void 0,done:i}:{value:_(s),done:i}},[Symbol.iterator](){return this}}}function $t(){const t=K(this);Rt(N,t);const e=t.values();return{next(){const t=e.next(),s=t.value,i=t.done;return i?{value:void 0,done:i}:{value:_(s),done:i}},[Symbol.iterator](){return this}}}function Et(){const t=K(this);Rt(N,t);const e=t.entries();return{next(){const t=e.next(),s=t.value,i=t.done;return i?{value:void 0,done:i}:{value:[_(s[0]),_(s[1])],done:i}},[Symbol.iterator](){return this}}}const Rt=(t,e)=>t?.observeCollection(e),Nt=u({getProxy:W,getRaw:K,wrap:_,unwrap:Q,rawKey:U});class Pt{constructor(t,e,s,i,n){this.type=1,this.v=void 0,this.ir=!1,this.D=!1,this.cb=void 0,this.h=void 0,this.C=void 0,this.o=t,this.O=n?_(t):t,this.$get=e,this.$set=s,this.oL=i}init(t){this.v=t,this.D=!1}getValue(){return 0===this.subs.count?this.$get.call(this.o,this.o,this):(this.D&&(this.compute(),this.D=!1),this.v)}setValue(t){if(!(0,n.Tn)(this.$set))throw b(221);void 0!==this.h&&(t=this.h.call(null,t,this.C)),(0,n.t7)(t,this.v)||(this.ir=!0,this.$set.call(this.o,t),this.ir=!1,this.run())}useCoercer(t,e){return this.h=t,this.C=e,!0}useCallback(t){return this.cb=t,!0}handleDirty(){this.D||(this.D=!0,this.subs.notifyDirty())}handleChange(){this.D=!0,this.subs.count>0&&this.run()}handleCollectionChange(){this.D=!0,this.subs.count>0&&this.run()}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.compute(),this.D=!1)}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&(this.D=!0,this.obs.clearAll())}run(){if(this.ir)return;const t=this.v,e=this.compute();this.D=!1,(0,n.t7)(e,t)||(this.cb?.(e,t),this.subs.notify(this.v,t))}compute(){this.ir=!0,this.obs.version++;try{return B(this),this.v=Q(this.$get.call(this.O,this.O,this))}finally{this.obs.clear(),this.ir=!1,M(this)}}}R(Pt,null),y(Pt,null);const Ot=p("IDirtyChecker",void 0),Lt={timeoutsPerCheck:25,disabled:!1,throw:!1,resetToDefault(){this.timeoutsPerCheck=6,this.disabled=!1,this.throw=!1}};class Bt{constructor(t,e,s){this.obj=e,this.key=s,this.type=0,this.ov=void 0,this.P=t}getValue(){return this.obj[this.key]}setValue(t){throw b(219,this.key)}isDirty(){return this.ov!==this.obj[this.key]}flush(){const t=this.ov,e=this.getValue();this.ov=e,this.subs.notify(e,t)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.ov=this.obj[this.key],this.P.addProperty(this))}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.P.removeProperty(this)}}class Mt{get doNotCache(){return!0}constructor(t,e){this.type=0,this.o=t,this.k=e}getValue(){return this.o[this.k]}setValue(){}subscribe(){}unsubscribe(){}}class jt{constructor(){this.type=0}getValue(t,e){return t[e]}setValue(t,e,s){e[s]=t}}class Ft{constructor(t,e){this.type=1,this.v=void 0,this.iO=!1,this.cb=void 0,this.h=void 0,this.C=void 0,this.o=t,this.k=e}getValue(){return this.v}setValue(t){if(void 0!==this.h&&(t=this.h.call(void 0,t,this.C)),this.iO){if((0,n.t7)(t,this.v))return;Dt=this.v,this.v=t,this.cb?.(t,Dt),this.subs.notifyDirty(),this.subs.notify(t,Dt)}else this.v=this.o[this.k]=t,this.cb?.(t,Dt)}useCallback(t){return this.cb=t,this.start(),!0}useCoercer(t,e){return this.h=t,this.C=e,this.start(),!0}subscribe(t){!1===this.iO&&this.start(),this.subs.add(t)}start(){return!1===this.iO&&(this.iO=!0,this.v=this.o[this.k],a(this.o,this.k,{enumerable:!0,configurable:!0,get:l((()=>this.getValue()),{getObserver:()=>this}),set:t=>{this.setValue(t)}})),this}stop(){return this.iO&&(a(this.o,this.k,{enumerable:!0,configurable:!0,writable:!0,value:this.v}),this.iO=!1),this}}let Dt;y(Ft,null);const Vt=new jt,Ht=p("IObserverLocator",(t=>t.singleton(Wt))),qt=p("INodeObserverLocator",(t=>t.cachedCallback((t=>new Ut))));class Ut{handles(){return!1}getObserver(){return Vt}getAccessor(){return Vt}}const _t=p("IComputedObserverLocator",(t=>t.singleton(class{getObserver(t,e,s,i){const n=new Pt(t,s.get,s.set,i,!0);return a(t,e,{enumerable:s.enumerable,configurable:!0,get:l((()=>n.getValue()),{getObserver:()=>n}),set:t=>{n.setValue(t)}}),n}})));class Wt{constructor(){this.I=[],this.P=(0,n.hd)(Ot),this._=(0,n.hd)(qt),this.M=(0,n.hd)(_t)}addAdapter(t){this.I.push(t)}getObserver(t,e){if(null==t)throw b(199,e);if(!(0,n.Gv)(t))return new Mt(t,(0,n.Tn)(e)?"":e);if((0,n.Tn)(e))return new Pt(t,e,void 0,this,!0);const s=Jt(t);let i=s[e];return void 0===i&&(i=this.createObserver(t,e),i.doNotCache||(s[e]=i)),i}getAccessor(t,e){const s=t.$observers?.[e];return void 0!==s?s:this._.handles(t,e,this)?this._.getAccessor(t,e,this):Vt}getArrayObserver(t){return I(t)}getMapObserver(t){return $(t)}getSetObserver(t){return A(t)}createObserver(t,e){if(this._.handles(t,e,this))return this._.getObserver(t,e,this);switch(e){case"length":if((0,n.cy)(t))return I(t).getLengthObserver();break;case"size":if((0,n.jh)(t))return $(t).getLengthObserver();if((0,n.vM)(t))return A(t).getLengthObserver();break;default:if((0,n.cy)(t)&&(0,n.Zn)(e))return I(t).getIndexObserver(Number(e))}let s=zt(t,e);if(void 0===s){let i=Qt(t);for(;null!==i&&(s=zt(i,e),void 0===s);)i=Qt(i)}if(void 0!==s&&!o.call(s,"value")){let i=this.L(t,e,s);return null==i&&(i=(s.get?.getObserver)?.(t)),null==i?s.configurable?this.M.getObserver(t,e,s,this):this.P.createProperty(t,e):i}return new Ft(t,e)}L(t,e,s){if(this.I.length>0)for(const i of this.I){const n=i.getObserver(t,e,s,this);if(null!=n)return n}return null}}const Kt=t=>{let e;return(0,n.cy)(t)?e=I(t):(0,n.jh)(t)?e=$(t):(0,n.vM)(t)&&(e=A(t)),e},Qt=Object.getPrototypeOf,zt=Object.getOwnPropertyDescriptor,Jt=t=>{let e=t.$observers;return void 0===e&&a(t,"$observers",{enumerable:!1,value:e=(0,n.BL)()}),e};R(class{constructor(t,e){this.oL=t,this.fn=e,this.maxRunCount=10,this.queued=!1,this.running=!1,this.runCount=0,this.stopped=!1}handleChange(){this.queued=!0,this.run()}handleCollectionChange(){this.queued=!0,this.run()}run(){if(this.stopped)throw b(225);if(!this.running){++this.runCount,this.running=!0,this.queued=!1,++this.obs.version;try{B(this),this.fn(this)}finally{this.obs.clear(),this.running=!1,M(this)}if(this.queued){if(this.runCount>this.maxRunCount)throw this.runCount=0,b(226);this.run()}else this.runCount=0}}stop(){this.stopped=!0,this.obs.clearAll()}},null),"function"==typeof SuppressedError&&SuppressedError;var Gt=s(467),Yt=s(303),Zt=s(410);const Xt=Object,te=String,ee=Xt.prototype,se=ee.hasOwnProperty,ie=Xt.freeze,ne=Xt.assign,re=Xt.getOwnPropertyNames,oe=Xt.keys,ae=(0,n.BL)(),he=(t,e,s)=>{if(!0===ae[e])return!0;if(!(0,n.Kg)(e))return!1;const i=e.slice(0,5);return ae[e]="aria-"===i||"data-"===i||s.isStandardSvgAttribute(t,e)},ce=t=>{throw t},le=Reflect.defineProperty,ue=(t,e,s)=>(le(t,e,{enumerable:!1,configurable:!0,writable:!0,value:s}),s),de=(t,e,s)=>t.addSignalListener(e,s),pe=(t,e,s)=>t.removeSignalListener(e,s),fe="IsProperty",ge="pending",me="running",ve=v.Observer,we=v.Node,ye=v.Layout,be=(t,...e)=>new Error(`AUR${te(t).padStart(4,"0")}:${e.map(te)}`);class Se{constructor(t,e,s,i){this.parent=t,this.bindingContext=e,this.overrideContext=s,this.isBoundary=i}static getContext(t,e,s){if(null==t)throw be(203);let i=t.overrideContext,n=t;if(s>0){for(;s>0;)if(s--,n=n.parent,null==n)return;return i=n.overrideContext,e in i?i:n.bindingContext}for(;null!=n&&!n.isBoundary&&!(e in n.overrideContext)&&!(e in n.bindingContext);)n=n.parent;return null==n?t.bindingContext:(i=n.overrideContext,e in i?i:n.bindingContext)}static create(t,e,s){if(null==t)throw be(204);return new Se(null,t,e??new ke,s??!1)}static fromParent(t,e){if(null==t)throw be(203);return new Se(t,e,new ke,!1)}}class Ce{constructor(t,e){void 0!==t&&(this[t]=e)}}class ke{}const{astAssign:Te,astEvaluate:xe,astBind:Ie,astUnbind:Ae}=(()=>{const t="AccessThis",e="AccessBoundary",s="AccessGlobal",r="AccessScope",o="ArrayLiteral",a="ObjectLiteral",h="PrimitiveLiteral",c="Template",l="Unary",u="CallScope",d="CallMember",p="CallFunction",f="CallGlobal",g="AccessMember",m="AccessKeyed",v="TaggedTemplate",w="Binary",y="Conditional",b="Assign",S="ArrowFunction",C="ValueConverter",k="BindingBehavior",T="ArrayBindingPattern",x="ObjectBindingPattern",I="BindingIdentifier",A="ForOfStatement",$="Interpolation",E="ArrayDestructuring",R="ObjectDestructuring",N="DestructuringAssignmentLeaf",P="Custom",O=Se.getContext;function L(i,V,H,q){switch(i.$kind){case t:{let t=V.overrideContext,e=V,s=i.ancestor;for(;s--&&t;)e=e.parent,t=e?.overrideContext??null;return s<1&&e?e.bindingContext:void 0}case e:{let t=V;for(;null!=t&&!t.isBoundary;)t=t.parent;return t?t.bindingContext:void 0}case r:{const t=O(V,i.name,i.ancestor);null!==q&&q.observe(t,i.name);const e=t[i.name];if(null==e&&"$host"===i.name)throw be(105);return H?.strict?H?.boundFn&&(0,n.Tn)(e)?e.bind(t):e:null==e?"":H?.boundFn&&(0,n.Tn)(e)?e.bind(t):e}case s:return globalThis[i.name];case f:{const t=globalThis[i.name];if((0,n.Tn)(t))return t(...i.args.map((t=>L(t,V,H,q))));if(!H?.strictFnCall&&null==t)return;throw be(107)}case o:return i.elements.map((t=>L(t,V,H,q)));case a:{const t={};for(let e=0;e<i.keys.length;++e)t[i.keys[e]]=L(i.values[e],V,H,q);return t}case h:return i.value;case c:{let t=i.cooked[0];for(let e=0;e<i.expressions.length;++e)t+=String(L(i.expressions[e],V,H,q)),t+=i.cooked[e+1];return t}case l:{const t=L(i.expression,V,H,q);switch(i.operation){case"void":return;case"typeof":return typeof t;case"!":return!t;case"-":return-t;case"+":return+t;case"--":if(null!=q)throw be(113);return B(i.expression,V,H,t-1)+i.pos;case"++":if(null!=q)throw be(113);return B(i.expression,V,H,t+1)-i.pos;default:throw be(109,i.operation)}}case u:{const t=i.args.map((t=>L(t,V,H,q))),e=O(V,i.name,i.ancestor),s=M(H?.strictFnCall,e,i.name);return s?s.apply(e,t):void 0}case d:{const t=L(i.object,V,H,q),e=i.args.map((t=>L(t,V,H,q))),s=M(H?.strictFnCall,t,i.name);let r;return s&&(r=s.apply(t,e),(0,n.cy)(t)&&D.includes(i.name)&&q?.observeCollection(t)),r}case p:{const t=L(i.func,V,H,q);if((0,n.Tn)(t))return t(...i.args.map((t=>L(t,V,H,q))));if(!H?.strictFnCall&&null==t)return;throw be(107)}case S:{const t=(...t)=>{const e=i.args,s=i.rest,n=e.length-1,r=e.reduce(((e,i,r)=>(e[i.name]=s&&r===n?t.slice(r):t[r],e)),{}),o=Se.fromParent(V,r);return L(i.body,o,H,q)};return t}case g:{const t=L(i.object,V,H,q);let e;if(H?.strict){if(null==t)return;return null===q||i.accessGlobal||q.observe(t,i.name),e=t[i.name],H?.boundFn&&(0,n.Tn)(e)?e.bind(t):e}return null!==q&&(0,n.Gv)(t)&&!i.accessGlobal&&q.observe(t,i.name),t?(e=t[i.name],H?.boundFn&&(0,n.Tn)(e)?e.bind(t):e):""}case m:{const t=L(i.object,V,H,q),e=L(i.key,V,H,q);return(0,n.Gv)(t)?(null===q||i.accessGlobal||q.observe(t,e),t[e]):null==t?void 0:t[e]}case v:{const t=i.expressions.map((t=>L(t,V,H,q))),e=L(i.func,V,H,q);if(!(0,n.Tn)(e))throw be(110);return e(i.cooked,...t)}case w:{const t=i.left,e=i.right;switch(i.operation){case"&&":return L(t,V,H,q)&&L(e,V,H,q);case"||":return L(t,V,H,q)||L(e,V,H,q);case"??":return L(t,V,H,q)??L(e,V,H,q);case"==":return L(t,V,H,q)==L(e,V,H,q);case"===":return L(t,V,H,q)===L(e,V,H,q);case"!=":return L(t,V,H,q)!=L(e,V,H,q);case"!==":return L(t,V,H,q)!==L(e,V,H,q);case"instanceof":{const s=L(e,V,H,q);return!!(0,n.Tn)(s)&&L(t,V,H,q)instanceof s}case"in":{const s=L(e,V,H,q);return!!(0,n.Gv)(s)&&L(t,V,H,q)in s}case"+":{const s=L(t,V,H,q),i=L(e,V,H,q);if(H?.strict)return s+i;if(!s||!i){if(j(s)||j(i))return(s||0)+(i||0);if(F(s)||F(i))return(s||"")+(i||"")}return s+i}case"-":return L(t,V,H,q)-L(e,V,H,q);case"*":return L(t,V,H,q)*L(e,V,H,q);case"/":return L(t,V,H,q)/L(e,V,H,q);case"%":return L(t,V,H,q)%L(e,V,H,q);case"<":return L(t,V,H,q)<L(e,V,H,q);case">":return L(t,V,H,q)>L(e,V,H,q);case"<=":return L(t,V,H,q)<=L(e,V,H,q);case">=":return L(t,V,H,q)>=L(e,V,H,q);default:throw be(108,i.operation)}}case y:return L(i.condition,V,H,q)?L(i.yes,V,H,q):L(i.no,V,H,q);case b:{let t=L(i.value,V,H,q);if("="!==i.op){if(null!=q)throw be(113);const e=L(i.target,V,H,q);switch(i.op){case"/=":t=e/t;break;case"*=":t*=e;break;case"+=":t=e+t;break;case"-=":t=e-t;break;default:throw be(108,i.op)}}return B(i.target,V,H,t)}case C:{const t=H?.getConverter?.(i.name);if(null==t)throw be(103,i.name);return"toView"in t?t.toView(L(i.expression,V,H,q),...i.args.map((t=>L(t,V,H,q)))):L(i.expression,V,H,q)}case k:return L(i.expression,V,H,q);case I:return i.name;case A:return L(i.iterable,V,H,q);case $:if(i.isMulti){let t=i.parts[0],e=0;for(;e<i.expressions.length;++e)t+=te(L(i.expressions[e],V,H,q)),t+=i.parts[e+1];return t}return`${i.parts[0]}${L(i.firstExpression,V,H,q)}${i.parts[1]}`;case N:return L(i.target,V,H,q);case E:return i.list.map((t=>L(t,V,H,q)));case T:case x:case R:default:return;case P:return i.evaluate(V,H,q)}}function B(t,e,s,o){switch(t.$kind){case r:if("$host"===t.name)throw be(106);return O(e,t.name,t.ancestor)[t.name]=o;case g:{const i=L(t.object,e,s,null);return(0,n.Gv)(i)?"length"===t.name&&(0,n.cy)(i)&&!isNaN(o)?i.splice(o):i[t.name]=o:B(t.object,e,s,{[t.name]:o}),o}case m:{const i=L(t.object,e,s,null),r=L(t.key,e,s,null);if((0,n.cy)(i)){if("length"===r&&!isNaN(o))return i.splice(o),o;if((0,n.Zn)(r))return i.splice(r,1,o),o}return i[r]=o}case b:return B(t.value,e,s,o),B(t.target,e,s,o);case C:{const i=s?.getConverter?.(t.name);if(null==i)throw be(103,t.name);return"fromView"in i&&(o=i.fromView(o,...t.args.map((t=>L(t,e,s,null))))),B(t.expression,e,s,o)}case k:return B(t.expression,e,s,o);case E:case R:{const i=t.list,n=i.length;let r,a;for(r=0;r<n;r++)switch(a=i[r],a.$kind){case N:B(a,e,s,o);break;case E:case R:{if("object"!=typeof o||null===o)throw be(112);let t=L(a.source,Se.create(o),s,null);void 0===t&&a.initializer&&(t=L(a.initializer,e,s,null)),B(a,e,s,t);break}}break}case N:if(t instanceof i.lJ){if(null==o)return;if("object"!=typeof o)throw be(112);let i=L(t.source,Se.create(o),s,null);void 0===i&&t.initializer&&(i=L(t.initializer,e,s,null)),B(t.target,e,s,i)}else{if(null==o)return;if("object"!=typeof o)throw be(112);const i=t.indexOrProperties;let r;if((0,n.Zn)(i)){if(!Array.isArray(o))throw be(112);r=o.slice(i)}else r=Object.entries(o).reduce(((t,[e,s])=>(i.includes(e)||(t[e]=s),t)),{});B(t.target,e,s,r)}break;case P:return t.assign(e,s,o);default:return}}const M=(t,e,s)=>{const i=null==e?null:e[s];if((0,n.Tn)(i))return i;if(!t&&null==i)return null;throw be(111,s)},j=t=>{switch(typeof t){case"number":case"bigint":return!0;default:return!1}},F=t=>{switch(typeof t){case"string":return!0;case"object":return t instanceof Date;default:return!1}},D="at map filter includes indexOf lastIndexOf findIndex find flat flatMap join reduce reduceRight slice every some sort".split(" ");return{astEvaluate:L,astAssign:B,astBind:function t(e,s,i){switch(e.$kind){case k:{const n=e.name,r=e.key,o=i.getBehavior?.(n);if(null==o)throw be(101,n);if(void 0!==i[r])throw be(102,n);return i[r]=o,o.bind?.(s,i,...e.args.map((t=>L(t,s,i,null)))),void t(e.expression,s,i)}case C:{const n=e.name,r=i.getConverter?.(n);if(null==r)throw be(103,n);const o=r.signals;if(null!=o){const t=i.getSignaler?.(),e=o.length;let s=0;for(;s<e;++s)t?.addSignalListener(o[s],i)}return void t(e.expression,s,i)}case A:t(e.iterable,s,i);break;case P:e.bind?.(s,i)}},astUnbind:function t(e,s,i){switch(e.$kind){case k:{const n=e.key,r=i;void 0!==r[n]&&(r[n].unbind?.(s,i),r[n]=void 0),t(e.expression,s,i);break}case C:{const n=i.getConverter?.(e.name);if(void 0===n?.signals)return;const r=i.getSignaler?.();let o=0;for(;o<n.signals.length;++o)r?.removeSignalListener(n.signals[o],i);t(e.expression,s,i);break}case A:t(e.iterable,s,i);break;case P:e.unbind?.(s,i)}}}})();"function"==typeof SuppressedError&&SuppressedError;const{default:$e,oneTime:Ee,toView:Re,fromView:Ne,twoWay:Pe}=Gt.Zm,Oe=r.OS.get,Le=r.OS.has,Be=r.OS.define,{annotation:Me}=n.Zs,je=Me.keyFor,Fe=je("bindables"),De=ie({name:Fe,keyFrom:t=>`${Fe}:${t}`,from(...t){const e={},s=Array.isArray;function i(t,s){e[t]=s instanceof Ve?s:Ve.create(t,!0===s?{}:s)}return t.forEach((function(t){s(t)?t.forEach((t=>(0,n.Kg)(t)?function(t){e[t]=Ve.create(t)}(t):i(t.name,t))):t instanceof Ve?e[t.name]=t:void 0!==t&&oe(t).forEach((e=>i(e,t[e])))})),e},getAll(t){const e=[],s=(0,n.eA)(t);let i,r=s.length;for(;--r>=0;){i=s[r];const t=Oe(Fe,i);null!=t&&e.push(...Object.values(t))}return e},i(t,e){let s=Oe(Fe,e);null==s&&Be(s=(0,n.BL)(),e,Fe),s[t.name]=t}});class Ve{constructor(t,e,s,i,n,r){this.attribute=t,this.callback=e,this.mode=s,this.primary=i,this.name=n,this.set=r}static create(t,e={}){const s=e.mode??Re;return new Ve(e.attribute??(0,n.kW)(t),e.callback??`${t}Changed`,(0,n.Kg)(s)?Gt.Zm[s]??$e:s,e.primary??!1,e.name??t,e.set??function(t={}){const e=t.type??null;if(null==e)return n.lQ;let s;switch(e){case Number:case Boolean:case String:case BigInt:s=e;break;default:{const t=e.coerce;s="function"==typeof t?t.bind(e):He.for(e)??n.lQ;break}}return s===n.lQ?s:function(t,e){return function(s,i){return i?.enableCoercion?(e??!i?.coerceNullish)&&null==s?s:t(s,i):s}}(s,t.nullable)}(e))}}const He={key:je("coercer"),define(t,e){Be(t[e].bind(t),t,He.key)},for:t=>Oe(He.key,t)},qe=n.DI.createInterface,Ue=n.cH.singleton,_e=n.cH.aliasTo,We=n.cH.instance;n.cH.callback,n.cH.transient;const Ke=(t,e,s)=>t.registerResolver(e,s),Qe=(t,e,s,i="__au_static_resource__")=>{let n=Oe(i,t);return null==n&&t.$au?.type===e&&(n=s(t.$au,t),Be(n,t,i)),n};class ze{constructor(t,e,s,i){this.Type=t,this.name=e,this.aliases=s,this.key=i}static create(t,e){let s,i;return(0,n.Kg)(t)?(s=t,i={name:s}):(s=t.name,i=t),new ze(e,(0,n.c4)(Ye(e,"name"),s),(0,n.TR)(Ye(e,"aliases"),i.aliases,e.aliases),Xe.keyFrom(s))}register(t,e){const s=this.Type,i="string"==typeof e?Ze(e):this.key,n=this.aliases;t.has(i,!1)||t.register(t.has(s,!1)?null:Ue(s,s),_e(s,i),...n.map((t=>_e(s,Ze(t)))))}}const Je="binding-behavior",Ge=(0,n.r$)(Je),Ye=(t,e)=>Oe(je(e),t),Ze=t=>`${Ge}:${t}`,Xe=ie({name:Ge,keyFrom:Ze,isType:t=>(0,n.Tn)(t)&&(Le(Ge,t)||t.$au?.type===Je),define(t,e){const s=ze.create(t,e),i=s.Type;return Be(s,i,Ge,n.n_),i},getDefinition(t){const e=Oe(Ge,t)??Qe(t,Je,ze.create);if(void 0===e)throw be(151,t);return e},find(t,e){const s=t.find(Je,e);return null==s?null:Oe(Ge,s)??Qe(s,Je,ze.create)??null},get:(t,e)=>t.get((0,n.Zc)(Ze(e)))}),ts=new Map,es=t=>({type:Je,name:t});class ss{bind(t,e){ts.set(e,e.mode),e.mode=this.mode}unbind(t,e){e.mode=ts.get(e),ts.delete(e)}}class is extends ss{get mode(){return Ee}}is.$au=es("oneTime");class ns extends ss{get mode(){return Re}}ns.$au=es("toView");class rs extends ss{get mode(){return Ne}}rs.$au=es("fromView");class os extends ss{get mode(){return Pe}}os.$au=es("twoWay");const as=new WeakMap;class hs{constructor(){this.p=(0,n.hd)(n.r_)}bind(t,e,s,i){const r={type:"debounce",delay:s??200,now:this.p.performanceNow,queue:this.p.taskQueue,signals:(0,n.Kg)(i)?[i]:i??n.tR},o=e.limit?.(r);null==o||as.set(e,o)}unbind(t,e){as.get(e)?.dispose(),as.delete(e)}}hs.$au={type:Je,name:"debounce"};const cs=qe("ISignaler",(t=>t.singleton(ls)));class ls{constructor(){this.signals=(0,n.BL)()}dispatchSignal(t){const e=this.signals[t];if(void 0===e)return;let s;for(s of e.keys())s.handleChange(void 0,void 0)}addSignalListener(t,e){(this.signals[t]??=new Set).add(e)}removeSignalListener(t,e){this.signals[t]?.delete(e)}}class us{constructor(){this.h=new Map,this.u=(0,n.hd)(cs)}bind(t,e,...s){if(!("handleChange"in e))throw be(817);if(0===s.length)throw be(818);let i;for(i of(this.h.set(e,s),s))de(this.u,i,e)}unbind(t,e){const s=this.h.get(e);let i;for(i of(this.h.delete(e),s))pe(this.u,i,e)}}us.$au={type:Je,name:"signal"};const ds=new WeakMap;class ps{constructor(){({performanceNow:this.C,taskQueue:this.B}=(0,n.hd)(n.r_))}bind(t,e,s,i){const r={type:"throttle",delay:s??200,now:this.C,queue:this.B,signals:(0,n.Kg)(i)?[i]:i??n.tR},o=e.limit?.(r);null==o||ds.set(e,o)}unbind(t,e){ds.get(e)?.dispose(),ds.delete(e)}}ps.$au={type:Je,name:"throttle"};const fs=qe("IAppTask");class gs{constructor(t,e,s){this.c=void 0,this.slot=t,this.k=e,this.cb=s}register(t){return this.c=t.register(We(fs,this))}run(){const t=this.k,e=this.cb;return null===t?e():e(this.c.get(t))}}const ms=ie({creating:vs("creating"),hydrating:vs("hydrating"),hydrated:vs("hydrated"),activating:vs("activating"),activated:vs("activated"),deactivating:vs("deactivating"),deactivated:vs("deactivated")});function vs(t){return function(e,s){return(0,n.Tn)(s)?new gs(t,e,s):new gs(t,null,e)}}const ws=n.r_,ys=(()=>{const t=new WeakMap;return ie({add(e,s){let i=t.get(e);null==i&&t.set(e,i=[]),i.push(s)},getDefinitions:e=>t.get(e)??n.tR})})();class bs{get type(){return"custom-attribute"}constructor(t,e,s,i,n,r,o,a,h,c,l){this.Type=t,this.name=e,this.aliases=s,this.key=i,this.defaultBindingMode=n,this.isTemplateController=r,this.bindables=o,this.noMultiBindings=a,this.watches=h,this.dependencies=c,this.containerStrategy=l}static create(t,e){let s,i;(0,n.Kg)(t)?(s=t,i={name:s}):(s=t.name,i=t);const r=(0,n.c4)(Ts(e,"defaultBindingMode"),i.defaultBindingMode,e.defaultBindingMode,Re);for(const t of Object.values(De.from(i.bindables)))De.i(t,e);return new bs(e,(0,n.c4)(Ts(e,"name"),s),(0,n.TR)(Ts(e,"aliases"),i.aliases,e.aliases),ks(s),(0,n.Kg)(r)?Gt.Zm[r]??$e:r,(0,n.c4)(Ts(e,"isTemplateController"),i.isTemplateController,e.isTemplateController,!1),De.from(...De.getAll(e),Ts(e,"bindables"),e.bindables,i.bindables),(0,n.c4)(Ts(e,"noMultiBindings"),i.noMultiBindings,e.noMultiBindings,!1),(0,n.TR)(ys.getDefinitions(e),e.watches),(0,n.TR)(Ts(e,"dependencies"),i.dependencies,e.dependencies),(0,n.c4)(Ts(e,"containerStrategy"),i.containerStrategy,e.containerStrategy,"reuse"))}register(t,e){const s=this.Type,i="string"==typeof e?ks(e):this.key,r=this.aliases;t.has(i,!1)?bs.warnDuplicate&&t.get(n.gF).warn(be(154,this.name)):t.register(t.has(s,!1)?null:Ue(s,s),_e(s,i),...r.map((t=>_e(s,ks(t)))))}toString(){return`au:ca:${this.name}`}}bs.warnDuplicate=!0;const Ss="custom-attribute",Cs=(0,n.r$)(Ss),ks=t=>`${Cs}:${t}`,Ts=(t,e)=>Oe(je(e),t),xs=(t,e)=>mr(t,ks(e))??void 0,Is=(t,e)=>{const s=bs.create(t,e),i=s.Type;return Be(s,i,Cs,n.n_),i},As=t=>{const e=Oe(Cs,t)??Qe(t,Ss,bs.create);if(void 0===e)throw be(759,t);return e},$s=ie({name:Cs,keyFrom:ks,isType:t=>(0,n.Tn)(t)&&(Le(Cs,t)||t.$au?.type===Ss),for:xs,closest:(t,e)=>{let s="",i="";if((0,n.Kg)(e))s=ks(e),i=e;else{const t=As(e);s=t.key,i=t.name}let r=t;for(;null!==r;){const t=mr(r,s);if(t?.is(i))return t;r=kr(r)}return null},define:Is,getDefinition:As,annotate(t,e,s){Be(s,t,je(e))},getAnnotation:Ts,find(t,e){const s=t.find(Ss,e);return null===s?null:Oe(Cs,s)??Qe(s,Ss,bs.create)??null}}),Es=qe("ILifecycleHooks");class Rs{constructor(t,e){this.definition=t,this.instance=e}}class Ns{constructor(t,e){this.Type=t,this.propertyNames=e}static create(t,e){const s=new Set;let i=e.prototype;for(;i!==ee;){for(const t of re(i))"constructor"===t||t.startsWith("_")||s.add(t);i=Object.getPrototypeOf(i)}return new Ns(e,s)}}const Ps=(()=>{const t=new WeakMap,e=new WeakMap;return ie({define(t,s){const i=Ns.create(t,s),n=i.Type;return e.set(n,i),{register(t){Ue(Es,n).register(t)}}},resolve(s){let i=t.get(s);if(void 0===i){t.set(s,i=new Os);const n=s.root,r=n===s?s.getAll(Es):s.has(Es,!1)?n.getAll(Es).concat(s.getAll(Es)):n.getAll(Es);let o,a,h,c,l;for(o of r)for(c of(a=e.get(o.constructor),h=new Rs(a,o),a.propertyNames))l=i[c],void 0===l?i[c]=[h]:l.push(h)}return i}})})();class Os{}class Ls{constructor(t,e,s,i){this.Type=t,this.name=e,this.aliases=s,this.key=i}static create(t,e){let s,i;return(0,n.Kg)(t)?(s=t,i={name:s}):(s=t.name,i=t),new Ls(e,(0,n.c4)(js(e,"name"),s),(0,n.TR)(js(e,"aliases"),i.aliases,e.aliases),Ds.keyFrom(s))}register(t,e){const s=this.Type,i="string"==typeof e?Fs(e):this.key,n=this.aliases;t.has(i,!1)||t.register(t.has(s,!1)?null:Ue(s,s),_e(s,i),...n.map((t=>_e(s,Fs(t)))))}}const Bs="value-converter",Ms=(0,n.r$)(Bs),js=(t,e)=>Oe(je(e),t),Fs=t=>`${Ms}:${t}`,Ds=ie({name:Ms,keyFrom:Fs,isType:t=>(0,n.Tn)(t)&&(Le(Ms,t)||t.$au?.type===Bs),define(t,e){const s=Ls.create(t,e),i=s.Type;return Be(s,i,Ms,n.n_),i},getDefinition(t){const e=Oe(Ms,t)??Qe(t,Bs,Ls.create);if(void 0===e)throw be(152,t);return e},annotate(t,e,s){Be(s,t,je(e))},getAnnotation:js,find(t,e){const s=t.find(Bs,e);return null==s?null:Oe(Ms,s)??Qe(s,Bs,Ls.create)??null},get:(t,e)=>t.get((0,n.Zc)(Fs(e)))});class Vs{constructor(t,e){this.v=void 0,this.b=t,this.A=e}flush(){this.b.updateSource(this.v)}handleChange(t,e){const s=this.b;t!==xe(s.ast,s.s,s,null)&&(this.v=t,this.A.add(this))}}const Hs=(()=>{function t(t){this.s=t}return e=>{ue(e.prototype,"useScope",t)}})(),qs=(()=>{const t=new WeakMap,e=new WeakMap;function s(t){return this.l.get(t)}function i(){return this.l.root.get(cs)}function n(e){let s=t.get(this);return null==s&&t.set(this,s=new Us),s[e]??=Ds.get(this.l,e)}function r(t){let s=e.get(this);return null==s&&e.set(this,s=new Us),s[t]??=Xe.get(this.l,t)}return(t,e=!0)=>o=>{const a=o.prototype;null!=t&&le(a,"strict",{enumerable:!0,get:function(){return t}}),le(a,"strictFnCall",{enumerable:!0,get:function(){return e}}),ue(a,"get",s),ue(a,"getSignaler",i),ue(a,"getConverter",n),ue(a,"getBehavior",r)}})();class Us{}const _s=qe("IFlushQueue",(t=>t.singleton(Ws)));class Ws{constructor(){this.R=!1,this.T=new Set}get count(){return this.T.size}add(t){if(this.T.add(t),!this.R){this.R=!0;try{this.T.forEach(Ks)}finally{this.R=!1}}}clear(){this.T.clear(),this.R=!1}}const Ks=function(t,e,s){s.delete(t),t.flush()},Qs=(()=>{const t=new WeakSet;return(e,s)=>{ue(e.prototype,"limit",(function(e){if(t.has(this))throw be(9996);t.add(this);const i=s(this,e),n=e.signals,r=n.length>0?this.get(cs):null,o=this[i],a=(...t)=>o.call(this,...t),h="debounce"===e.type?((t,e,s)=>{let i,n,r,o=!1;const a=t.queue,h=()=>e(r),c=e=>{r=e,s.isBound?(n=i,i=a.queueTask(h,{delay:t.delay}),n?.cancel()):h()},l=c.dispose=()=>{n?.cancel(),i?.cancel(),n=i=void 0};return c.flush=()=>{o=i?.status===ge,l(),o&&h()},c})(e,a,this):((t,e,s)=>{let i,n,r,o=0,a=0,h=!1;const c=t.queue,l=()=>t.now(),u=()=>e(r),d=e=>{r=e,s.isBound?(a=l()-o,n=i,a>t.delay?(o=l(),u()):i=c.queueTask((()=>{o=l(),u()}),{delay:t.delay-a}),n?.cancel()):u()},p=d.dispose=()=>{n?.cancel(),i?.cancel(),n=i=void 0};return d.flush=()=>{h=i?.status===ge,p(),h&&u()},d})(e,a,this),c=r?{handleChange:h.flush}:null;return this[i]=h,r&&n.forEach((t=>de(r,t,c))),{dispose:()=>{r&&n.forEach((t=>pe(r,t,c))),t.delete(this),h.dispose(),delete this[i]}}}))}})(),zs=((t=new WeakSet)=>e=>function(){t.has(this)||(t.add(this),e.call(this))})(),Js={preempt:!0};class Gs{constructor(t,e,s,i,n,r,o,a,h){this.targetAttribute=o,this.targetProperty=a,this.mode=h,this.isBound=!1,this.s=void 0,this.L=null,this.v=void 0,this.boundFn=!1,this.l=e,this.ast=n,this.M=t,this.target=r,this.oL=s,this.B=i}updateTarget(t){const e=this.target,s=this.targetAttribute,i=this.targetProperty;switch(s){case"class":e.classList.toggle(i,!!t);break;case"style":{let s="",r=te(t);(0,n.Kg)(r)&&r.includes("!important")&&(s="important",r=r.replace("!important","")),e.style.setProperty(i,r,s);break}default:null==t?e.removeAttribute(s):e.setAttribute(s,te(t))}}handleChange(){if(!this.isBound)return;let t;this.obs.version++;const e=xe(this.ast,this.s,this,(this.mode&Re)>0?this:null);this.obs.clear(),e!==this.v&&(this.v=e,this.M.state!==Qn?(t=this.L,this.L=this.B.queueTask((()=>{this.L=null,this.updateTarget(e)}),Js),t?.cancel()):this.updateTarget(e))}handleCollectionChange(){this.handleChange()}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,Ie(this.ast,t,this),this.mode&(Re|Ee)&&this.updateTarget(this.v=xe(this.ast,t,this,(this.mode&Re)>0?this:null)),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,Ae(this.ast,this.s,this),this.s=void 0,this.v=void 0,this.L?.cancel(),this.L=null,this.obs.clearAll())}}Gs.mix=zs((()=>{Hs(Gs),Qs(Gs,(()=>"updateTarget")),R(Gs,null),qs(!0)(Gs)}));const Ys={preempt:!0};class Zs{constructor(t,e,s,i,n,r,o,a){this.ast=n,this.target=r,this.targetProperty=o,this.mode=a,this.isBound=!1,this.s=void 0,this.L=null,this.M=t,this.oL=s,this.B=i,this.I=s.getAccessor(r,o);const h=n.expressions,c=this.partBindings=Array(h.length),l=h.length;let u=0;for(;l>u;++u)c[u]=new Xs(h[u],r,o,e,s,this)}P(){this.updateTarget()}updateTarget(){const t=this.partBindings,e=this.ast.parts,s=t.length;let i="",n=0;if(1===s)i=e[0]+t[0].v+e[1];else for(i=e[0];s>n;++n)i+=t[n].v+e[n+1];const r=this.I;let o;this.M.state!==Qn&&(r.type&ye)>0?(o=this.L,this.L=this.B.queueTask((()=>{this.L=null,r.setValue(i,this.target,this.targetProperty)}),Ys),o?.cancel(),o=null):r.setValue(i,this.target,this.targetProperty)}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t;const e=this.partBindings,s=e.length;let i=0;for(;s>i;++i)e[i].bind(t);this.updateTarget(),this.isBound=!0}unbind(){if(!this.isBound)return;this.isBound=!1,this.s=void 0;const t=this.partBindings,e=t.length;let s=0;for(;e>s;++s)t[s].unbind();this.L?.cancel(),this.L=null}useAccessor(t){this.I=t}}class Xs{constructor(t,e,s,i,n,r){this.ast=t,this.target=e,this.targetProperty=s,this.owner=r,this.mode=Re,this.task=null,this.isBound=!1,this.v="",this.boundFn=!1,this.l=i,this.oL=n}updateTarget(){this.owner.P()}handleChange(){if(!this.isBound)return;this.obs.version++;const t=xe(this.ast,this.s,this,(this.mode&Re)>0?this:null);this.obs.clear(),t!=this.v&&(this.v=t,(0,n.cy)(t)&&this.observeCollection(t),this.updateTarget())}handleCollectionChange(){this.updateTarget()}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,Ie(this.ast,t,this),this.v=xe(this.ast,this.s,this,(this.mode&Re)>0?this:null),(0,n.cy)(this.v)&&this.observeCollection(this.v),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,Ae(this.ast,this.s,this),this.s=void 0,this.obs.clearAll())}}Xs.mix=zs((()=>{Hs(Xs),Qs(Xs,(()=>"updateTarget")),R(Xs,null),qs(!0)(Xs)}));const ti={preempt:!0};class ei{constructor(t,e,s,i,n,r,o){this.p=n,this.ast=r,this.target=o,this.isBound=!1,this.mode=Re,this.L=null,this.v="",this.q=!1,this.boundFn=!1,this.strict=!0,this.l=e,this.M=t,this.oL=s,this.B=i}updateTarget(t){const e=this.target,s=this.v;this.v=t,this.q&&(s.parentNode?.removeChild(s),this.q=!1),t instanceof this.p.Node&&(e.parentNode?.insertBefore(t,e),t="",this.q=!0),e.textContent=te(t??"")}handleChange(){if(!this.isBound)return;this.obs.version++;const t=xe(this.ast,this.s,this,(this.mode&Re)>0?this:null);if(this.obs.clear(),t===this.v)return this.L?.cancel(),void(this.L=null);this.M.state!==Qn?this._(t):this.updateTarget(t)}handleCollectionChange(){if(!this.isBound)return;this.obs.version++;const t=this.v=xe(this.ast,this.s,this,(this.mode&Re)>0?this:null);this.obs.clear(),(0,n.cy)(t)&&this.observeCollection(t),this.M.state!==Qn?this._(t):this.updateTarget(t)}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,Ie(this.ast,t,this);const e=this.v=xe(this.ast,this.s,this,(this.mode&Re)>0?this:null);(0,n.cy)(e)&&this.observeCollection(e),this.updateTarget(e),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,Ae(this.ast,this.s,this),this.q&&this.v.parentNode?.removeChild(this.v),this.s=void 0,this.obs.clearAll(),this.L?.cancel(),this.L=null)}_(t){const e=this.L;this.L=this.B.queueTask((()=>{this.L=null,this.updateTarget(t)}),ti),e?.cancel()}}ei.mix=zs((()=>{Hs(ei),Qs(ei,(()=>"updateTarget")),R(ei,null),qs(void 0,!1)(ei)}));class si{constructor(t,e,s,i,n=!1){this.ast=s,this.targetProperty=i,this.isBound=!1,this.s=void 0,this.target=null,this.boundFn=!1,this.l=t,this.oL=e,this.O=n}updateTarget(){this.target[this.targetProperty]=this.v}handleChange(){this.isBound&&(this.obs.version++,this.v=xe(this.ast,this.s,this,this),this.obs.clear(),this.updateTarget())}handleCollectionChange(){this.handleChange()}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,this.target=this.O?t.bindingContext:t.overrideContext,Ie(this.ast,t,this),this.v=xe(this.ast,this.s,this,this),this.updateTarget(),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,Ae(this.ast,this.s,this),this.s=void 0,this.obs.clearAll())}}si.mix=zs((()=>{Hs(si),Qs(si,(()=>"updateTarget")),R(si,null),qs(!0)(si)}));class ii{constructor(t,e,s,i,n,r,o,a){this.ast=n,this.target=r,this.targetProperty=o,this.mode=a,this.isBound=!1,this.s=void 0,this.I=void 0,this.L=null,this.F=null,this.boundFn=!1,this.l=e,this.M=t,this.B=i,this.oL=s}updateTarget(t){this.I.setValue(t,this.target,this.targetProperty)}updateSource(t){Te(this.ast,this.s,this,t)}handleChange(){if(!this.isBound)return;this.obs.version++;const t=xe(this.ast,this.s,this,(this.mode&Re)>0?this:null);this.obs.clear(),this.M.state!==Qn&&(this.I.type&ye)>0?(ni=this.L,this.L=this.B.queueTask((()=>{this.updateTarget(t),this.L=null}),ri),ni?.cancel(),ni=null):this.updateTarget(t)}handleCollectionChange(){this.handleChange()}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,Ie(this.ast,t,this);const e=this.oL,s=this.mode;let i=this.I;i||(i=s&Ne?e.getObserver(this.target,this.targetProperty):e.getAccessor(this.target,this.targetProperty),this.I=i);const n=(s&Re)>0;s&(Re|Ee)&&this.updateTarget(xe(this.ast,this.s,this,n?this:null)),s&Ne&&(i.subscribe(this.F??=new Vs(this,this.l.get(_s))),n||this.updateSource(i.getValue(this.target,this.targetProperty))),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,Ae(this.ast,this.s,this),this.s=void 0,this.F&&(this.I.unsubscribe(this.F),this.F=null),this.L?.cancel(),this.L=null,this.obs.clearAll())}useTargetObserver(t){this.I?.unsubscribe(this),(this.I=t).subscribe(this)}useTargetSubscriber(t){if(null!=this.F)throw be(9995);this.F=t}}ii.mix=zs((()=>{Hs(ii),Qs(ii,(t=>t.mode&Ne?"updateSource":"updateTarget")),R(ii,null),qs(!0,!1)(ii)}));let ni=null;const ri={preempt:!0};class oi{constructor(t,e,s){this.ast=e,this.target=s,this.isBound=!1,this.s=void 0,this.l=t}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,Ie(this.ast,t,this),Te(this.ast,this.s,this,this.target),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,xe(this.ast,this.s,this,null)===this.target&&Te(this.ast,this.s,this,null),Ae(this.ast,this.s,this),this.s=void 0)}}oi.mix=zs((()=>{qs(!1)(oi)}));class ai{constructor(t,e=!1){this.prevent=t,this.capture=e}}class hi{constructor(t,e,s,i,n,r){this.ast=e,this.target=s,this.targetEvent=i,this.isBound=!1,this.self=!1,this.boundFn=!0,this.V=null,this.l=t,this.H=n,this.V=r}callSource(t){const e=this.s.overrideContext;e.$event=t;let s=xe(this.ast,this.s,this,null);return delete e.$event,(0,n.Tn)(s)&&(s=s(t)),!0!==s&&this.H.prevent&&t.preventDefault(),s}handleEvent(t){this.self&&this.target!==t.composedPath()[0]||!1!==this.V?.(t)&&this.callSource(t)}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,Ie(this.ast,t,this),this.target.addEventListener(this.targetEvent,this,this.H),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,Ae(this.ast,this.s,this),this.s=void 0,this.target.removeEventListener(this.targetEvent,this,this.H))}}hi.mix=zs((function(){Hs(hi),Qs(hi,(()=>"callSource")),qs(!0,!0)(hi)}));const ci=qe("IEventModifier"),li=qe("IKeyMapping",(t=>t.instance({meta:ie(["ctrl","alt","shift","meta"]),keys:{escape:"Escape",enter:"Enter",space:"Space",tab:"tab",...Array.from({length:25}).reduce(((t,e,s)=>{let i=String.fromCharCode(s+65);return t[s+65]=i,i=String.fromCharCode(s+97),t[s+97]=t[i]=i,t}),{})}})));class ui{constructor(){this.type=["click","mousedown","mousemove","mouseup","dblclick","contextmenu"],this.$=(0,n.hd)(li),this.N=["left","middle","right"]}static register(t){t.register(Ue(ci,ui))}getHandler(t){const e=t.split(/[:+.]/);return t=>{let s,i=!1,n=!1;for(s of e){switch(s){case"prevent":i=!0;continue;case"stop":n=!0;continue;case"left":case"middle":case"right":if(t.button!==this.N.indexOf(s))return!1;continue}if(this.$.meta.includes(s)&&!0!==t[`${s}Key`])return!1}return i&&t.preventDefault(),n&&t.stopPropagation(),!0}}}class di{constructor(){this.$=(0,n.hd)(li),this.type=["keydown","keyup"]}static register(t){t.register(Ue(ci,di))}getHandler(t){const e=t.split(/[:+.]/);return t=>{let s,i=!1,n=!1;for(s of e){switch(s){case"prevent":i=!0;continue;case"stop":n=!0;continue}if(this.$.meta.includes(s)){if(!0!==t[`${s}Key`])return!1}else if(this.$.keys[s]!==t.key)return!1}return i&&t.preventDefault(),n&&t.stopPropagation(),!0}}}class pi{constructor(){this.type=["$ALL"]}static register(t){t.register(Ue(ci,pi))}getHandler(t){const e=t.split(/[:+.]/);return t=>{let s,i=!1,n=!1;for(s of e)switch(s){case"prevent":i=!0;continue;case"stop":n=!0;continue}return i&&t.preventDefault(),n&&t.stopPropagation(),!0}}}const fi=qe("IEventModifierHandler",(t=>t.instance({getHandler:()=>null})));class gi{constructor(){this.j=(0,n.hd)((0,n.Q7)(ci)).reduce(((t,e)=>(((0,n.cy)(e.type)?e.type:[e.type]).forEach((s=>t[s]=e)),t)),{})}static register(t){t.register(Ue(fi,gi))}getHandler(t,e){return(0,n.Kg)(e)?(this.j[t]??this.j.$ALL)?.getHandler(e)??null:null}}const mi={register(t){t.register(gi,ui,di,pi)}},vi=qe("IViewFactory");class wi{constructor(t,e){this.isCaching=!1,this.W=null,this.U=-1,this.name=e.name,this.container=t,this.def=e}setCacheSize(t,e){t&&("*"===t?t=wi.maxCacheSize:(0,n.Kg)(t)&&(t=parseInt(t,10)),-1!==this.U&&e||(this.U=t)),this.U>0?this.W=[]:this.W=null,this.isCaching=this.U>0}canReturnToCache(t){return null!=this.W&&this.W.length<this.U}tryReturnToCache(t){return!!this.canReturnToCache(t)&&(this.W.push(t),!0)}create(t){const e=this.W;let s;return null!=e&&e.length>0?(s=e.pop(),s):(s=An.$view(this,t),s)}}wi.maxCacheSize=65535;const yi=(()=>{const t=(t,e)=>t.document.createComment(e);return e=>{const s=t(e,"au-end");return s.$start=t(e,"au-start"),s}})(),bi=(t,e,s)=>{if(null===t)return;const i=s.length;let n=0;for(;i>n;)t.insertBefore(s[n],e),++n},Si=(t,e)=>new t.ownerDocument.defaultView.MutationObserver(e),Ci=t=>1===t.nodeType,ki="default",Ti=qe("IAuSlotsInfo");class xi{constructor(t){this.projectedSlots=t}}const Ii=qe("IAuSlotWatcher");class Ai{static create(t,e,s,i,r,o,a,h){const c=[],l=i.renderers,u=e=>{let s=e,i=t;for(;null!=i&&s>0;)i=i.parent,--s;if(null==i)throw be(9999);return i},d=t=>{const i=u(t),p=new Ai(i),f=r.compileSpread(i.controller.definition,i.instruction?.captures??n.tR,i.controller.container,e,s);let g;for(g of f)switch(g.type){case Gt.lp.spreadTransferedBinding:d(t+1);break;case Gt.lp.spreadElementProp:l[g.instruction.type].render(p,Wr(e),g.instruction,o,a,h);break;default:l[g.type].render(p,e,g,o,a,h)}c.push(p)};return d(0),c}get container(){return this.locator}get definition(){return this.$controller.definition}get state(){return this.$controller.state}constructor(t){this.isBound=!1,this.Z=[],this.locator=(this.$controller=(this.J=t).controller).container}get(t){return this.locator.get(t)}bind(t){if(this.isBound)return;this.isBound=!0;const e=this.scope=this.J.controller.scope.parent??void 0;if(null==e)throw be(9999);this.Z.forEach((t=>t.bind(e)))}unbind(){this.Z.forEach((t=>t.unbind())),this.isBound=!1}addBinding(t){this.Z.push(t)}addChild(t){if(t.vmKind!==_n)throw be(9998);this.$controller.addChild(t)}}class $i{constructor(t,e,s,i,n,r,o){this.target=e,this.targetKeys=s,this.ast=i,this.isBound=!1,this.s=void 0,this.boundFn=!1,this.tt={},this.et=new WeakMap,this.M=t,this.oL=n,this.l=r,this.B=o}updateTarget(){this.obs.version++;const t=xe(this.ast,this.s,this,this);this.obs.clear(),this.st(t,!0)}handleChange(){this.isBound&&this.updateTarget()}handleCollectionChange(){this.isBound&&this.updateTarget()}bind(t){if(this.isBound){if(t===this.s)return;this.unbind()}this.isBound=!0,this.s=t,Ie(this.ast,t,this);const e=xe(this.ast,t,this,this);this.st(e,!1)}unbind(){if(!this.isBound)return;let t;for(t in this.isBound=!1,Ae(this.ast,this.s,this),this.s=void 0,this.tt)this.tt[t].unbind()}st(t,e){let s,r;if(!(0,n.Gv)(t)){for(s in this.tt)this.tt[s]?.unbind();return}let o=this.et.get(t);for(s of(null==o&&this.et.set(t,o=Se.fromParent(this.s,t)),this.targetKeys))r=this.tt[s],s in t?(null==r&&(r=this.tt[s]=new ii(this.M,this.l,this.oL,this.B,$i.it[s]??=new i.DC(s,0),this.target,s,Gt.Zm.toView)),r.bind(o)):e&&r?.unbind()}}$i.mix=zs((()=>{Hs($i),Qs($i,(()=>"updateTarget")),R($i,null),qs(!0,!1)($i)})),$i.it={};const Ei=(t,e,s,i)=>{t.addEventListener(e,s,i)},Ri=(t,e,s,i)=>{t.removeEventListener(e,s,i)},Ni=t=>{let e;const s=t.prototype;ue(s,"subscribe",(function(t){if(this.subs.add(t)&&1===this.subs.count){for(e of this.cf.events)Ei(this.nt,e,this);this.rt=!0,this.ot?.()}})),ue(s,"unsubscribe",(function(t){if(this.subs.remove(t)&&0===this.subs.count){for(e of this.cf.events)Ri(this.nt,e,this);this.rt=!1,this.lt?.()}})),ue(s,"useConfig",(function(t){if(this.cf=t,this.rt){for(e of this.cf.events)Ri(this.nt,e,this);for(e of this.cf.events)Ei(this.nt,e,this)}}))},Pi=t=>{ue(t.prototype,"subscribe",n.lQ),ue(t.prototype,"unsubscribe",n.lQ)};class Oi{get doNotCache(){return!0}constructor(t,e={}){this.obj=t,this.mapping=e,this.type=we|ye,this.v="",this.ht={},this.ct=0}getValue(){return this.v}setValue(t){t!==this.v&&(this.v=t,this.ut())}ut(){const t=this.ht,e=++this.ct,s=this.obj.classList,i=Li(this.v),n=i.length;let r,o=0;if(n>0)for(;o<n;o++)r=i[o],r=this.mapping[r]||r,0!==r.length&&(t[r]=this.ct,s.add(r));if(1!==e)for(r in t)r=this.mapping[r]||r,t[r]!==e&&s.remove(r)}}function Li(t){if((0,n.Kg)(t))return Bi(t);if("object"!=typeof t)return n.tR;if((0,n.cy)(t)){const e=t.length;if(e>0){const s=[];let i=0;for(;e>i;++i)s.push(...Li(t[i]));return s}return n.tR}const e=[];let s;for(s in t)Boolean(t[s])&&(s.includes(" ")?e.push(...Bi(s)):e.push(s));return e}function Bi(t){const e=t.match(/\S+/g);return null===e?n.tR:e}Pi(Oi);const Mi=t=>({$isResolver:!0,resolve:(e,s)=>s.get(tr).controller.container.get((0,n.ZV)(t))}),ji=qe("IRenderer");function Fi(t,e){return(e?.metadata??(t[Symbol.metadata]??=Object.create(null)))[n.Ri]={register(e){Ue(ji,t).register(e)}},t}function Di(t,e,s){return(0,n.Kg)(e)?t.parse(e,s):e}function Vi(t){return null!=t.viewModel?t.viewModel:t}const Hi=Fi(class{constructor(){this.target=Gt.lp.setProperty}render(t,e,s){const i=Vi(e);void 0!==i.$observers?.[s.to]?i.$observers[s.to].setValue(s.value):i[s.to]=s.value}},null),qi=Fi(class{constructor(){this.r=(0,n.hd)(vn),this.target=Gt.lp.hydrateElement}render(t,e,s,i,r,o){let a,h,c;const l=s.res,u=s.projections,d=t.container;if("string"==typeof l){if(a=Jr.find(d,l),null==a)throw be(752,s,t)}else a=l;const p=s.containerless||a.containerless?Tr(e):null,f=function(t,e,s,i,r,o){const a=e.container.createChild();return Rr(a,s,t),Ke(a,Xn,new n.JF(an,e)),Ke(a,Gt.OA,new n.JF(hn,i)),Ke(a,br,null==r?fn:new pn(r)),Ke(a,vi,gn),Ke(a,Ti,null==o?mn:new n.JF(ln,o)),a}(i,t,e,s,p,null==u?void 0:new xi(oe(u)));h=f.invoke(a.Type),c=An.$el(f,h,e,s,a,p),vr(e,a.key,c);const g=this.r.renderers,m=s.props,v=m.length;let w,y=0;for(;v>y;)w=m[y],g[w.type].render(t,c,w,i,r,o),++y;t.addChild(c)}},null),Ui=Fi(class{constructor(){this.r=(0,n.hd)(vn),this.target=Gt.lp.hydrateAttribute}render(t,e,s,i,n,r){let o,a=t.container;if("string"==typeof s.res){if(o=$s.find(a,s.res),null==o)throw be(753,s,t)}else o=s.res;const h=dn(i,o,t,e,s,void 0,void 0),c=An.$attr(h.ctn,h.vm,e,o);vr(e,o.key,c);const l=this.r.renderers,u=s.props,d=u.length;let p,f=0;for(;d>f;)p=u[f],l[p.type].render(t,c,p,i,n,r),++f;t.addChild(c)}},null),_i=Fi(class{constructor(){this.r=(0,n.hd)(vn),this.target=Gt.lp.hydrateTemplateController}render(t,e,s,i,n,r){let o,a=t.container;if("string"==typeof s.res){if(o=$s.find(a,s.res),null==o)throw be(754,s,t)}else o=s.res;const h=this.r.getViewFactory(s.def,"new"===o.containerStrategy?a.createChild({inheritParentResources:!0}):a),c=Tr(e),l=dn(i,o,t,e,s,h,c),u=An.$attr(l.ctn,l.vm,e,o);vr(c,o.key,u),l.vm.link?.(t,u,e,s);const d=this.r.renderers,p=s.props,f=p.length;let g,m=0;for(;f>m;)g=p[m],d[g.type].render(t,u,g,i,n,r),++m;t.addChild(u)}},null),Wi=Fi(class{constructor(){this.target=Gt.lp.hydrateLetElement,si.mix()}render(t,e,s,i,n,r){e.remove();const o=s.instructions,a=s.toBindingContext,h=t.container,c=o.length;let l,u,d=0;for(;c>d;)l=o[d],u=Di(n,l.from,fe),t.addBinding(new si(h,r,u,l.to,a)),++d}},null),Ki=Fi(class{constructor(){this.target=Gt.lp.refBinding}render(t,e,s,i,n){t.addBinding(new oi(t.container,Di(n,s.from,fe),function(t,e){if("element"===e)return t;switch(e){case"controller":return Wr(t);case"view":throw be(750);case"component":return Wr(t).viewModel;default:{const s=xs(t,e);if(void 0!==s)return s.viewModel;const i=Wr(t,{name:e});if(void 0===i)throw be(751,e);return i.viewModel}}}(e,s.to)))}},null),Qi=Fi(class{constructor(){this.target=Gt.lp.interpolation,Xs.mix()}render(t,e,s,i,n,r){const o=t.container,a=new Zs(t,o,r,i.domQueue,Di(n,s.from,"Interpolation"),Vi(e),s.to,Re);if("class"===s.to&&a.target.nodeType>0){const t=o.get(Mi(Sr));a.useAccessor(new Oi(a.target,t))}t.addBinding(a)}},null),zi=Fi(class{constructor(){this.target=Gt.lp.propertyBinding,ii.mix()}render(t,e,s,i,n,r){const o=t.container,a=new ii(t,o,r,i.domQueue,Di(n,s.from,fe),Vi(e),s.to,s.mode);if("class"===s.to&&a.target.nodeType>0){const t=o.get(Mi(Sr));a.useTargetObserver(new Oi(a.target,t))}t.addBinding(a)}},null),Ji=Fi(class{constructor(){this.target=Gt.lp.iteratorBinding,ii.mix()}render(t,e,s,i,n,r){t.addBinding(new ii(t,t.container,r,i.domQueue,Di(n,s.forOf,"IsIterator"),Vi(e),s.to,Re))}},null),Gi=Fi(class{constructor(){this.target=Gt.lp.textBinding,ei.mix()}render(t,e,s,i,n,r){t.addBinding(new ei(t,t.container,r,i.domQueue,i,Di(n,s.from,fe),e))}},null),Yi=qe("IListenerBindingOptions",(t=>t.instance({prevent:!1}))),Zi=Fi(class{constructor(){this.target=Gt.lp.listenerBinding,this.ft=(0,n.hd)(fi),this.dt=(0,n.hd)(Yi),hi.mix()}render(t,e,s,i,n){t.addBinding(new hi(t.container,Di(n,s.from,"IsFunction"),e,s.to,new ai(this.dt.prevent,s.capture),this.ft.getHandler(s.to,s.modifier)))}},null),Xi=Fi(class{constructor(){this.target=Gt.lp.setAttribute}render(t,e,s){e.setAttribute(s.to,s.value)}},null),tn=Fi(class{constructor(){this.target=Gt.lp.setClassAttribute}render(t,e,s){!function(t,e){const s=e.length;let i=0;for(let n=0;n<s;++n)32===e.charCodeAt(n)?(n!==i&&t.add(e.slice(i,n)),i=n+1):n+1===s&&t.add(e.slice(i))}(e.classList,s.value)}},null),en=Fi(class{constructor(){this.target=Gt.lp.setStyleAttribute}render(t,e,s){e.style.cssText+=s.value}},null),sn=Fi(class{constructor(){this.target=Gt.lp.stylePropertyBinding,ii.mix()}render(t,e,s,i,n,r){t.addBinding(new ii(t,t.container,r,i.domQueue,Di(n,s.from,fe),e.style,s.to,Re))}},null),nn=Fi(class{constructor(){this.target=Gt.lp.attributeBinding,Gs.mix()}render(t,e,s,i,n,r){const o=t.container,a=o.has(Sr,!1)?o.get(Sr):null;t.addBinding(new Gs(t,o,r,i.domQueue,Di(n,s.from,fe),e,s.attr,null==a?s.to:s.to.split(/\s/g).map((t=>a[t]??t)).join(" "),Re))}},null),rn=Fi(class{constructor(){this.gt=(0,n.hd)(Gt.B3),this.r=(0,n.hd)(vn),this.target=Gt.lp.spreadTransferedBinding}render(t,e,s,i,n,r){Ai.create(t.container.get(tr),e,void 0,this.r,this.gt,i,n,r).forEach((e=>t.addBinding(e)))}},null),on=Fi(class{constructor(){this.target=Gt.lp.spreadValueBinding,$i.mix()}render(t,e,s,i,n,r){const o=s.target;if("$bindables"!==o)throw be(820,o);t.addBinding(new $i(t,e.viewModel,oe(e.definition.bindables),n.parse(s.from,fe),r,t.container,i.domQueue))}},null),an="IController",hn="IInstruction",cn="IRenderLocation",ln="ISlotsInfo";class un{get $isResolver(){return!0}constructor(t){this.f=t}resolve(){const t=this.f;if(null===t)throw be(755);if(!(0,n.Kg)(t.name)||0===t.name.length)throw be(756);return t}}function dn(t,e,s,i,r,o,a,h){const c=s instanceof An?s:s.$controller,l=c.container.createChild();return Rr(l,i,t),Ke(l,Xn,new n.JF(an,c)),Ke(l,Gt.OA,new n.JF(hn,r)),Ke(l,br,null==a?fn:new n.JF(cn,a)),Ke(l,vi,null==o?gn:new un(o)),Ke(l,Ti,null==h?mn:new n.JF(ln,h)),{vm:l.invoke(e.Type),ctn:l}}class pn{get name(){return"IRenderLocation"}get $isResolver(){return!0}constructor(t){this.l=t}resolve(){return this.l}}const fn=new pn(null),gn=new un(null),mn=new n.JF(ln,new xi(n.tR)),vn=qe("IRendering",(t=>t.singleton(wn)));class wn{get renderers(){return this.vt??=this.xt.getAll(ji,!1).reduce(((t,e)=>(t[e.target]??=e,t)),(0,n.BL)())}constructor(){this.bt=new WeakMap,this.wt=new WeakMap;const t=this.xt=(0,n.hd)(n.p7).root,e=this.p=t.get(ws);this.ep=t.get(i.JW),this.oL=t.get(Ht),this.yt=e.document.createElement("au-m"),this.kt=new Ir(e,e.document.createDocumentFragment())}compile(t,e){const s=e.get(Gt.B3),i=this.bt;let n=i.get(t);return null==n&&i.set(t,n=Or.create(t.needsCompile?s.compile(t,e):t)),n}getViewFactory(t,e){return new wi(e,Or.getOrCreate(t))}createNodes(t){if(!0===t.enhance)return new Ir(this.p,this.Ct(t.template));let e,s=!1;const i=this.wt,r=this.p,o=r.document;if(i.has(t))e=i.get(t);else{const a=t.template;let h;null==a?e=null:a instanceof r.Node?"TEMPLATE"===a.nodeName?(e=a.content,s=!0):(e=o.createDocumentFragment()).appendChild(a.cloneNode(!0)):(h=o.createElement("template"),(0,n.Kg)(a)&&(h.innerHTML=a),e=h.content,s=!0),this.Ct(e),i.set(t,e)}return null==e?this.kt:new Ir(this.p,s?o.importNode(e,!0):o.adoptNode(e.cloneNode(!0)))}render(t,e,s,i){const n=s.instructions,r=this.renderers,o=e.length;let a,h,c,l=0,u=0,d=n.length;if(o!==d)throw be(757,o,d);if(o>0)for(;o>l;){for(a=n[l],c=e[l],u=0,d=a.length;d>u;)h=a[u],r[h.type].render(t,c,h,this.p,this.ep,this.oL),++u;++l}if(null!=i&&(a=s.surrogates,(d=a.length)>0))for(u=0;d>u;)h=a[u],r[h.type].render(t,i,h,this.p,this.ep,this.oL),++u}Ct(t){if(null==t)return null;const e=this.p.document.createTreeWalker(t,128);let s;for(;null!=(s=e.nextNode());)"au*"===s.nodeValue&&s.parentNode.replaceChild(e.currentNode=this.yt.cloneNode(),s);return t}}const yn=qe("IShadowDOMStyles"),bn=qe("IShadowDOMGlobalStyles",(t=>t.instance({applyTo:n.lQ}))),{enter:Sn,exit:Cn}=j,{wrap:kn,unwrap:Tn}=Nt;class xn{get value(){return this.v}constructor(t,e,s,i,n){this.obj=t,this.$get=s,this.useProxy=n,this.isBound=!1,this.running=!1,this.v=void 0,this.cb=i,this.oL=e}handleChange(){this.run()}handleCollectionChange(){this.run()}bind(){this.isBound||(this.compute(),this.isBound=!0)}unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll())}run(){if(!this.isBound||this.running)return;const t=this.obj,e=this.v,s=this.compute();(0,n.t7)(s,e)||this.cb.call(t,s,e,t)}compute(){this.running=!0,this.obs.version++;try{return Sn(this),this.v=Tn(this.$get.call(void 0,this.useProxy?kn(this.obj):this.obj,this))}finally{this.obs.clear(),this.running=!1,Cn(this)}}}R(xn,null);class In{get value(){return this.v}constructor(t,e,s,i,n){this.scope=t,this.l=e,this.oL=s,this.isBound=!1,this.boundFn=!1,this.obj=t.bindingContext,this.Bt=i,this.cb=n}handleChange(t){const e=this.Bt,s=this.obj,i=this.v;"AccessScope"===e.$kind&&1===this.obs.count||(this.obs.version++,t=xe(e,this.scope,this,this),this.obs.clear()),(0,n.t7)(t,i)||(this.v=t,this.cb.call(s,t,i,s))}bind(){this.isBound||(this.obs.version++,this.v=xe(this.Bt,this.scope,this,this),this.obs.clear(),this.isBound=!0)}unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll(),this.v=void 0)}}R(In,null),qs(!0)(In);class An{get lifecycleHooks(){return this.St}get isActive(){return(this.state&(Qn|zn))>0&&!(this.state&Jn)}get name(){if(null===this.parent)switch(this.vmKind){case _n:return`[${this.definition.name}]`;case Un:return this.definition.name;case Wn:return this.viewFactory.name}switch(this.vmKind){case _n:return`${this.parent.name}>[${this.definition.name}]`;case Un:return`${this.parent.name}>${this.definition.name}`;case Wn:return this.viewFactory.name===this.parent.definition?.name?`${this.parent.name}[view]`:`${this.parent.name}[view:${this.viewFactory.name}]`}}get viewModel(){return this.At}set viewModel(t){this.At=t,this.Et=null==t||this.vmKind===Wn?Hn.none:new Hn(t)}constructor(t,e,s,i,n,r,o){this.container=t,this.vmKind=e,this.definition=s,this.viewFactory=i,this.host=r,this.head=null,this.tail=null,this.next=null,this.parent=null,this.bindings=null,this.children=null,this.hasLockedScope=!1,this.scope=null,this.isBound=!1,this.Rt=!1,this.hostController=null,this.mountTarget=En,this.shadowRoot=null,this.nodes=null,this.location=null,this.St=null,this.state=Kn,this.Tt=!1,this.$initiator=null,this.$resolve=void 0,this.$reject=void 0,this.$promise=void 0,this.Lt=0,this.Mt=0,this.Dt=0,this.At=n,this.Et=e===Wn?Hn.none:new Hn(n),this.location=o,this.r=t.root.get(vn),this.coercion=e===Wn?void 0:t.get(Bn)}static getCached(t){return $n.get(t)}static getCachedOrThrow(t){const e=An.getCached(t);if(void 0===e)throw be(500,t);return e}static $el(t,e,s,i,r=void 0,o=null){if($n.has(e))return $n.get(e);r=r??Qr(e.constructor),Ke(t,r.Type,new n.JF(r.key,e,r.Type));const a=new An(t,Un,r,null,e,s,o),h=t.get((0,n.lq)(tr));return r.dependencies.length>0&&t.register(...r.dependencies),Ke(t,tr,new n.JF("IHydrationContext",new er(a,i,h))),$n.set(e,a),null!=i&&!1===i.hydrate||a.hE(i,h),a}static $attr(t,e,s,i){if($n.has(e))return $n.get(e);i=i??As(e.constructor),Ke(t,i.Type,new n.JF(i.key,e,i.Type));const r=new An(t,_n,i,null,e,s,null);return i.dependencies.length>0&&t.register(...i.dependencies),$n.set(e,r),r.It(),r}static $view(t,e=void 0){const s=new An(t.container,Wn,null,t,null,null,null);return s.parent=e??null,s.Pt(),s}hE(t,e){const s=this.container,i=this.At,r=this.definition;this.scope=Se.create(i,null,!0),r.watches.length>0&&Dn(this,s,r,i),Mn(this,r,i),this.St=Ps.resolve(s),s.register(r.Type),null!==r.injectable&&Ke(s,r.injectable,new n.JF("definition.injectable",i)),null!=t&&!1===t.hydrate||(this.hS(),this.hC())}hS(){null!=this.St.hydrating&&this.St.hydrating.forEach(nr,this),this.Et.qt&&this.At.hydrating(this);const t=this.definition,e=this._t=this.r.compile(t,this.container),s=e.shadowOptions,i=e.hasSlots,n=e.containerless;let r=this.host,o=this.location;if(null!==(this.hostController=Wr(r,Ln))&&(r=this.host=this.container.root.get(ws).document.createElement(t.name),n&&null==o&&(o=this.location=Tr(r))),vr(r,Vr,this),vr(r,t.key,this),null!==s||i){if(null!=o)throw be(501);vr(this.shadowRoot=r.attachShadow(s??qn),Vr,this),vr(this.shadowRoot,t.key,this),this.mountTarget=Nn}else null!=o?(vr(o,Vr,this),vr(o,t.key,this),this.mountTarget=Pn):this.mountTarget=Rn;this.At.$controller=this,this.nodes=this.r.createNodes(e),void 0!==this.St.hydrated&&this.St.hydrated.forEach(rr,this),this.Et.Ot&&this.At.hydrated(this)}hC(){this.r.render(this,this.nodes.findTargets(),this._t,this.host),void 0!==this.St.created&&this.St.created.forEach(ir,this),this.Et.Ft&&this.At.created(this)}It(){const t=this.definition,e=this.At;t.watches.length>0&&Dn(this,this.container,t,e),Mn(this,t,e),e.$controller=this,this.St=Ps.resolve(this.container),void 0!==this.St.created&&this.St.created.forEach(ir,this),this.Et.Ft&&this.At.created(this)}Pt(){this._t=this.r.compile(this.viewFactory.def,this.container),this.r.render(this,(this.nodes=this.r.createNodes(this._t)).findTargets(),this._t,void 0)}activate(t,e,s){switch(this.state){case Kn:case Gn:if(null!==e&&!e.isActive)return;this.state=Qn;break;case zn:return;case Zn:throw be(502,this.name);default:throw be(503,this.name,function(t){const e=[];return(t&Qn)===Qn&&e.push("activating"),(t&zn)===zn&&e.push("activated"),(t&Jn)===Jn&&e.push("deactivating"),(t&Gn)===Gn&&e.push("deactivated"),(t&Yn)===Yn&&e.push("released"),(t&Zn)===Zn&&e.push("disposed"),0===e.length?"none":e.join("|")}(this.state))}switch(this.parent=e,this.vmKind){case Un:this.scope.parent=s??null;break;case _n:this.scope=s??null;break;case Wn:if(null==s)throw be(504,this.name);this.hasLockedScope||(this.scope=s)}let i;return this.$initiator=t,this.Vt(),this.vmKind!==Wn&&null!=this.St.binding&&(i=(0,n.jY)(...this.St.binding.map(or,this))),this.Et.Ht&&(i=(0,n.jY)(i,this.At.binding(this.$initiator,this.parent))),(0,n.yL)(i)?(this.$t(),i.then((()=>{this.Rt=!0,this.state!==Qn?this.Nt():this.bind()})).catch((t=>{this.jt(t)})),this.$promise):(this.Rt=!0,this.bind(),this.$promise)}bind(){let t,e=0,s=0;if(null!==this.bindings)for(e=0,s=this.bindings.length;s>e;)this.bindings[e].bind(this.scope),++e;if(this.vmKind!==Wn&&null!=this.St.bound&&(t=(0,n.jY)(...this.St.bound.map(ar,this))),this.Et.Wt&&(t=(0,n.jY)(t,this.At.bound(this.$initiator,this.parent))),(0,n.yL)(t))return this.$t(),void t.then((()=>{this.isBound=!0,this.state!==Qn?this.Nt():this.zt()})).catch((t=>{this.jt(t)}));this.isBound=!0,this.zt()}Ut(...t){switch(this.mountTarget){case Rn:this.host.append(...t);break;case Nn:this.shadowRoot.append(...t);break;case Pn:{let e=0;for(;e<t.length;++e)this.location.parentNode.insertBefore(t[e],this.location);break}}}zt(){if(null!==this.hostController)switch(this.mountTarget){case Rn:case Nn:this.hostController.Ut(this.host);break;case Pn:this.hostController.Ut(this.location.$start,this.location)}switch(this.mountTarget){case Rn:this.nodes.appendTo(this.host,null!=this.definition&&this.definition.enhance);break;case Nn:{const t=this.container;(t.has(yn,!1)?t.get(yn):t.get(bn)).applyTo(this.shadowRoot),this.nodes.appendTo(this.shadowRoot);break}case Pn:this.nodes.insertBefore(this.location)}let t,e=0;if(this.vmKind!==Wn&&null!=this.St.attaching&&(t=(0,n.jY)(...this.St.attaching.map(hr,this))),this.Et.Gt&&(t=(0,n.jY)(t,this.At.attaching(this.$initiator,this.parent))),(0,n.yL)(t)&&(this.$t(),this.Vt(),t.then((()=>{this.Nt()})).catch((t=>{this.jt(t)}))),null!==this.children)for(;e<this.children.length;++e)this.children[e].activate(this.$initiator,this,this.scope);this.Nt()}deactivate(t,e){let s;switch(this.state&~Yn){case zn:this.state=Jn;break;case Qn:this.state=Jn,s=this.$promise?.catch(n.lQ);break;case Kn:case Gn:case Zn:case Gn|Zn:return;default:throw be(505,this.name,this.state)}this.$initiator=t,t===this&&this.Kt();let i,r=0;if(null!==this.children)for(r=0;r<this.children.length;++r)this.children[r].deactivate(t,this);return(0,n.ui)(s,(()=>{if(this.isBound&&(this.vmKind!==Wn&&null!=this.St.detaching&&(i=(0,n.jY)(...this.St.detaching.map(lr,this))),this.Et.Xt&&(i=(0,n.jY)(i,this.At.detaching(this.$initiator,this.parent)))),(0,n.yL)(i)&&(this.$t(),t.Kt(),i.then((()=>{t.Qt()})).catch((e=>{t.jt(e)}))),null===t.head?t.head=this:t.tail.next=this,t.tail=this,t===this)return this.Qt(),this.$promise}))}removeNodes(){switch(this.vmKind){case Un:case Wn:this.nodes.remove(),this.nodes.unlink()}if(null!==this.hostController)switch(this.mountTarget){case Rn:case Nn:this.host.remove();break;case Pn:this.location.$start.remove(),this.location.remove()}}unbind(){let t=0;if(null!==this.bindings)for(;t<this.bindings.length;++t)this.bindings[t].unbind();switch(this.parent=null,this.vmKind){case _n:this.scope=null;break;case Wn:this.hasLockedScope||(this.scope=null),(this.state&Yn)!==Yn||this.viewFactory.tryReturnToCache(this)||this.$initiator!==this||this.dispose();break;case Un:this.scope.parent=null}this.state=Gn,this.$initiator=null,this.Yt()}$t(){void 0===this.$promise&&(this.$promise=new Promise(((t,e)=>{this.$resolve=t,this.$reject=e})),this.$initiator!==this&&this.parent.$t())}Yt(){void 0!==this.$promise&&(dr=this.$resolve,this.$resolve=this.$reject=this.$promise=void 0,dr(),dr=void 0)}jt(t){void 0!==this.$promise&&(pr=this.$reject,this.$resolve=this.$reject=this.$promise=void 0,pr(t),pr=void 0),this.$initiator!==this&&this.parent.jt(t)}Vt(){++this.Lt,this.$initiator!==this&&this.parent.Vt()}Nt(){if(this.state!==Qn)return--this.Lt,this.Yt(),void(this.$initiator!==this&&this.parent.Nt());if(0==--this.Lt){if(this.vmKind!==Wn&&null!=this.St.attached&&(fr=(0,n.jY)(...this.St.attached.map(cr,this))),this.Et.Zt&&(fr=(0,n.jY)(fr,this.At.attached(this.$initiator))),(0,n.yL)(fr))return this.$t(),fr.then((()=>{this.state=zn,this.Yt(),this.$initiator!==this&&this.parent.Nt()})).catch((t=>{this.jt(t)})),void(fr=void 0);fr=void 0,this.state=zn,this.Yt()}this.$initiator!==this&&this.parent.Nt()}Kt(){++this.Mt}Qt(){if(0==--this.Mt){this.Jt(),this.removeNodes();let t,e=this.$initiator.head;for(;null!==e;)e!==this&&(e.debug&&e.logger.trace("detach()"),e.removeNodes()),e.Rt&&(e.vmKind!==Wn&&null!=e.St.unbinding&&(t=(0,n.jY)(...e.St.unbinding.map(ur,e))),e.Et.te&&(e.debug&&e.logger.trace("unbinding()"),t=(0,n.jY)(t,e.viewModel.unbinding(e.$initiator,e.parent)))),(0,n.yL)(t)&&(this.$t(),this.Jt(),t.then((()=>{this.ee()})).catch((t=>{this.jt(t)}))),t=void 0,e=e.next;this.ee()}}Jt(){++this.Dt}ee(){if(0==--this.Dt){let t=this.$initiator.head,e=null;for(;null!==t;)t!==this&&(t.Rt=!1,t.isBound=!1,t.unbind()),e=t.next,t.next=null,t=e;this.head=this.tail=null,this.Rt=!1,this.isBound=!1,this.unbind()}}addBinding(t){null===this.bindings?this.bindings=[t]:this.bindings[this.bindings.length]=t}addChild(t){null===this.children?this.children=[t]:this.children[this.children.length]=t}is(t){switch(this.vmKind){case _n:case Un:return this.definition.name===t;case Wn:return this.viewFactory.name===t}}lockScope(t){this.scope=t,this.hasLockedScope=!0}setHost(t){return this.vmKind===Un&&(vr(t,Vr,this),vr(t,this.definition.key,this)),this.host=t,this.mountTarget=Rn,this}setShadowRoot(t){return this.vmKind===Un&&(vr(t,Vr,this),vr(t,this.definition.key,this)),this.shadowRoot=t,this.mountTarget=Nn,this}setLocation(t){return this.vmKind===Un&&(vr(t,Vr,this),vr(t,this.definition.key,this)),this.location=t,this.mountTarget=Pn,this}release(){this.state|=Yn}dispose(){(this.state&Zn)!==Zn&&(this.state|=Zn,this.Et.se&&this.At.dispose(),null!==this.children&&(this.children.forEach(sr),this.children=null),this.hostController=null,this.scope=null,this.nodes=null,this.location=null,this.viewFactory=null,null!==this.At&&($n.delete(this.At),this.At=null),this.At=null,this.host=null,this.shadowRoot=null,this.container.disposeResolvers())}accept(t){if(!0===t(this))return!0;if(this.Et.ie&&!0===this.At.accept(t))return!0;if(null!==this.children){const{children:e}=this;for(let s=0,i=e.length;s<i;++s)if(!0===e[s].accept(t))return!0}}}const $n=new WeakMap,En=0,Rn=1,Nn=2,Pn=3,On=ie({none:En,host:Rn,shadowRoot:Nn,location:Pn}),Ln={optional:!0},Bn=(0,n.HN)(m);function Mn(t,e,s){const i=e.bindables,r=re(i),o=r.length,a=t.container.get(Ht);if(o>0)for(let e=0;e<o;++e){const o=r[e],h=i[o],c=h.callback,l=a.getObserver(s,o);if(h.set!==n.lQ&&!0!==l.useCoercer?.(h.set,t.coercion))throw be(507,o);if(null!=s[c]||null!=s.propertyChanged){const e=(e,i)=>{t.isBound&&(s[c]?.(e,i),s.propertyChanged?.(o,e,i))};if(!0!==l.useCallback?.(e))throw be(508,o)}}}const jn=new Map,Fn=t=>{let e=jn.get(t);return null==e&&(e=new i.DC(t,0),jn.set(t,e)),e};function Dn(t,e,s,r){const o=e.get(Ht),a=e.get(i.JW),h=s.watches,c=t.vmKind===Un?t.scope:Se.create(r,null,!0),l=h.length;let u,d,p,f=0;for(;l>f;++f){if(({expression:u,callback:d}=h[f]),d=(0,n.Tn)(d)?d:Reflect.get(r,d),!(0,n.Tn)(d))throw be(506,d);(0,n.Tn)(u)?t.addBinding(new xn(r,o,u,d,!0)):(p=(0,n.Kg)(u)?a.parse(u,fe):Fn(u),t.addBinding(new In(c,e,o,p,d)))}}function Vn(t){return(0,r.Gv)(t)&&_r(t.constructor)}class Hn{constructor(t){this.ne="define"in t,this.qt="hydrating"in t,this.Ot="hydrated"in t,this.Ft="created"in t,this.Ht="binding"in t,this.Wt="bound"in t,this.Gt="attaching"in t,this.Zt="attached"in t,this.Xt="detaching"in t,this.te="unbinding"in t,this.se="dispose"in t,this.ie="accept"in t}}Hn.none=new Hn({});const qn={mode:"open"},Un="customElement",_n="customAttribute",Wn="synthetic",Kn=0,Qn=1,zn=2,Jn=4,Gn=8,Yn=16,Zn=32,Xn=qe("IController"),tr=qe("IHydrationContext");class er{constructor(t,e,s){this.instruction=e,this.parent=s,this.controller=t}}function sr(t){t.dispose()}function ir(t){t.instance.created(this.At,this)}function nr(t){t.instance.hydrating(this.At,this)}function rr(t){t.instance.hydrated(this.At,this)}function or(t){return t.instance.binding(this.At,this.$initiator,this.parent)}function ar(t){return t.instance.bound(this.At,this.$initiator,this.parent)}function hr(t){return t.instance.attaching(this.At,this.$initiator,this.parent)}function cr(t){return t.instance.attached(this.At,this.$initiator)}function lr(t){return t.instance.detaching(this.At,this.$initiator,this.parent)}function ur(t){return t.instance.unbinding(this.At,this.$initiator,this.parent)}let dr,pr,fr;class gr{}function mr(t,e){return t.$au?.[e]??null}function vr(t,e,s){(t.$au??=new gr)[e]=s}const wr=qe("INode"),yr=qe("IEventTarget",(t=>t.cachedCallback((t=>t.has(Gr,!0)?t.get(Gr).host:t.get(ws).document)))),br=qe("IRenderLocation"),Sr=qe("ICssClassMapping"),Cr=new WeakMap;function kr(t){if(Cr.has(t))return Cr.get(t);let e=0,s=t.nextSibling;for(;null!==s;){if(8===s.nodeType)switch(s.textContent){case"au-start":++e;break;case"au-end":if(0==e--)return s}s=s.nextSibling}if(null===t.parentNode&&11===t.nodeType){const e=Wr(t,{optional:!0});if(null==e)return null;if(e.mountTarget===On.shadowRoot)return kr(e.host)}return t.parentNode}function Tr(t){if(xr(t))return t;const e=t.ownerDocument.createComment("au-end"),s=e.$start=t.ownerDocument.createComment("au-start"),i=t.parentNode;return null!==i&&(i.replaceChild(e,t),i.insertBefore(s,e)),e}function xr(t){return"au-end"===t.textContent}class Ir{get firstChild(){return this.re}get lastChild(){return this.oe}constructor(t,e){this.platform=t,this.next=void 0,this.le=!1,this.ae=!1,this.ref=null;const s=(this.f=e).querySelectorAll("au-m");let i,n,r=0,o=s.length,a=this.t=Array(o);for(;o>r;)n=s[r],i=n.nextSibling,n.remove(),8===i.nodeType&&(n=i,(i=i.nextSibling).$start=n),a[r]=i,++r;const h=e.childNodes,c=this.childNodes=Array(o=h.length);for(r=0;o>r;)c[r]=h[r],++r;this.re=e.firstChild,this.oe=e.lastChild}findTargets(){return this.t}insertBefore(t){if(this.ae&&this.ref)this.addToLinked();else{const e=t.parentNode;if(this.le){let s,i=this.re;const n=this.oe;for(;null!=i&&(s=i.nextSibling,e.insertBefore(i,t),i!==n);)i=s}else this.le=!0,t.parentNode.insertBefore(this.f,t)}}appendTo(t,e=!1){if(this.le){let e,s=this.re;const i=this.oe;for(;null!=s&&(e=s.nextSibling,t.appendChild(s),s!==i);)s=e}else this.le=!0,e||t.appendChild(this.f)}remove(){if(this.le){this.le=!1;const t=this.f,e=this.oe;let s,i=this.re;for(;null!==i&&(s=i.nextSibling,t.appendChild(i),i!==e);)i=s}}addToLinked(){const t=this.ref,e=t.parentNode;if(this.le){let s,i=this.re;const n=this.oe;for(;null!=i&&(s=i.nextSibling,e.insertBefore(i,t),i!==n);)i=s}else this.le=!0,e.insertBefore(this.f,t)}unlink(){this.ae=!1,this.next=void 0,this.ref=void 0}link(t){this.ae=!0,xr(t)?this.ref=t:(this.next=t,this.he())}he(){void 0!==this.next?this.ref=this.next.firstChild:this.ref=void 0}}const Ar=qe("IWindow",(t=>t.callback((t=>t.get(ws).window)))),$r=qe("ILocation",(t=>t.callback((t=>t.get(Ar).location)))),Er=qe("IHistory",(t=>t.callback((t=>t.get(Ar).history)))),Rr=(t,e,s=t.get(ws))=>(Ke(t,s.HTMLElement,Ke(t,s.Element,Ke(t,wr,new n.JF("ElementResolver",e)))),t);function Nr(t){return function(e,s){return s.addInitializer((function(){Ur(t,this)})),e}}const Pr=new WeakMap;class Or{get type(){return"custom-element"}constructor(t,e,s,i,n,r,o,a,h,c,l,u,d,p,f,g,m,v){this.Type=t,this.name=e,this.aliases=s,this.key=i,this.capture=n,this.template=r,this.instructions=o,this.dependencies=a,this.injectable=h,this.needsCompile=c,this.surrogates=l,this.bindables=u,this.containerless=d,this.shadowOptions=p,this.hasSlots=f,this.enhance=g,this.watches=m,this.processContent=v}static create(t,e=null){if(null===e){const s=t;if((0,n.Kg)(s))throw be(761,t);const i=(0,n.M6)("name",s,qr);e=(0,n.Tn)(s.Type)?s.Type:zr((0,n.fL)(i));for(const t of Object.values(De.from(s.bindables)))De.i(t,e);return new Or(e,i,(0,n.TR)(s.aliases),(0,n.M6)("key",s,(()=>Hr(i))),(0,n.nf)("capture",s,e,Mr),(0,n.M6)("template",s,Br),(0,n.TR)(s.instructions),(0,n.TR)(Kr(e,"dependencies"),s.dependencies),(0,n.M6)("injectable",s,Br),(0,n.M6)("needsCompile",s,jr),(0,n.TR)(s.surrogates),De.from(Kr(e,"bindables"),s.bindables),(0,n.nf)("containerless",s,e,Mr),(0,n.M6)("shadowOptions",s,Br),(0,n.M6)("hasSlots",s,Mr),(0,n.M6)("enhance",s,Mr),(0,n.M6)("watches",s,Fr),(0,n.fv)("processContent",e,Br))}if((0,n.Kg)(t))return new Or(e,t,(0,n.TR)(Kr(e,"aliases"),e.aliases),Hr(t),(0,n.fv)("capture",e,Mr),(0,n.fv)("template",e,Br),(0,n.TR)(Kr(e,"instructions"),e.instructions),(0,n.TR)(Kr(e,"dependencies"),e.dependencies),(0,n.fv)("injectable",e,Br),(0,n.fv)("needsCompile",e,jr),(0,n.TR)(Kr(e,"surrogates"),e.surrogates),De.from(...De.getAll(e),Kr(e,"bindables"),e.bindables),(0,n.fv)("containerless",e,Mr),(0,n.fv)("shadowOptions",e,Br),(0,n.fv)("hasSlots",e,Mr),(0,n.fv)("enhance",e,Mr),(0,n.TR)(ys.getDefinitions(e),e.watches),(0,n.fv)("processContent",e,Br));const s=(0,n.M6)("name",t,qr);for(const s of Object.values(De.from(t.bindables)))De.i(s,e);return new Or(e,s,(0,n.TR)(Kr(e,"aliases"),t.aliases,e.aliases),Hr(s),(0,n.nf)("capture",t,e,Mr),(0,n.nf)("template",t,e,Br),(0,n.TR)(Kr(e,"instructions"),t.instructions,e.instructions),(0,n.TR)(Kr(e,"dependencies"),t.dependencies,e.dependencies),(0,n.nf)("injectable",t,e,Br),(0,n.nf)("needsCompile",t,e,jr),(0,n.TR)(Kr(e,"surrogates"),t.surrogates,e.surrogates),De.from(...De.getAll(e),Kr(e,"bindables"),e.bindables,t.bindables),(0,n.nf)("containerless",t,e,Mr),(0,n.nf)("shadowOptions",t,e,Br),(0,n.nf)("hasSlots",t,e,Mr),(0,n.nf)("enhance",t,e,Mr),(0,n.TR)(t.watches,ys.getDefinitions(e),e.watches),(0,n.nf)("processContent",t,e,Br))}static getOrCreate(t){if(t instanceof Or)return t;if(Pr.has(t))return Pr.get(t);const e=Or.create(t);return Pr.set(t,e),Be(e,e.Type,Vr),e}register(t,e){const s=this.Type,i="string"==typeof e?Hr(e):this.key,n=this.aliases;t.has(i,!1)?console.warn(be(153,this.name)):t.register(t.has(s,!1)?null:Ue(s,s),_e(s,i),...n.map((t=>_e(s,Hr(t)))))}toString(){return`au:ce:${this.name}`}}const Lr={name:void 0,searchParents:!1,optional:!1},Br=()=>null,Mr=()=>!1,jr=()=>!0,Fr=()=>n.tR,Dr="custom-element",Vr=(0,n.r$)(Dr),Hr=t=>`${Vr}:${t}`,qr=(t=>()=>"unnamed-"+ ++t)(0),Ur=(t,e)=>{const s=Or.create(t,e),i=s.Type;return Be(s,i,Vr,n.n_),i},_r=t=>(0,n.Tn)(t)&&(Le(Vr,t)||t.$au?.type===Dr),Wr=(t,e=Lr)=>{if(void 0===e.name&&!0!==e.searchParents){const s=mr(t,Vr);if(null===s){if(!0===e.optional)return null;throw be(762,t)}return s}if(void 0!==e.name){if(!0!==e.searchParents){const s=mr(t,Vr);if(null===s)throw be(763,t);return s.is(e.name)?s:void 0}let s=t,i=!1;for(;null!==s;){const t=mr(s,Vr);if(null!==t&&(i=!0,t.is(e.name)))return t;s=kr(s)}if(i)return;throw be(764,t)}let s=t;for(;null!==s;){const t=mr(s,Vr);if(null!==t)return t;s=kr(s)}throw be(765,t)},Kr=(t,e)=>Oe(je(e),t),Qr=t=>{const e=Oe(Vr,t)??Qe(t,Dr,Or.create);if(null==e)throw be(760,t);return e},zr=function(){const t={value:"",writable:!1,enumerable:!1,configurable:!0},e={};return function(s,i=e){const n=class{};return t.value=s,le(n,"name",t),i!==e&&ne(n.prototype,i),n}}(),Jr=ie({name:Vr,keyFrom:Hr,isType:_r,for:Wr,define:Ur,getDefinition:Qr,annotate:(t,e,s)=>{Be(s,t,je(e))},getAnnotation:Kr,generateName:qr,createInjectable:()=>{const t={$isInterface:!1,register:()=>({$isResolver:!0,resolve:(e,s)=>s.has(t,!0)?s.get(t):null})};return t},generateType:zr,find(t,e){const s=t.find(Dr,e);return null==s?null:Oe(Vr,s)??Qe(s,Dr,Or.create)??null}}),Gr=qe("IAppRoot");class Yr{get controller(){return this.M}constructor(t,e,s,i=!1){this.config=t,this.container=e,this.ce=void 0,this.ue=i;const r=this.host=t.host;s.prepare(this),Ke(e,yr,new n.JF("IEventTarget",r)),Rr(e,r,this.platform=this.fe(e,r)),this.ce=(0,n.ui)(this.de("creating"),(()=>{0!=!t.allowActionlessForm&&r.addEventListener("submit",(t=>{const e=t.target,s=!e.getAttribute("action");"FORM"===e.tagName&&s&&t.preventDefault()}),!1);const s=i?e:e.createChild(),o=t.component;let a;(0,n.Tn)(o)?(a=s.invoke(o),We(o,a)):a=t.component;const h={hydrate:!1,projections:null},c=i?Or.create({name:qr(),template:this.host,enhance:!0}):void 0,l=this.M=An.$el(s,a,r,h,c);return l.hE(h,null),(0,n.ui)(this.de("hydrating"),(()=>(l.hS(),(0,n.ui)(this.de("hydrated"),(()=>{l.hC(),this.ce=void 0})))))}))}activate(){return(0,n.ui)(this.ce,(()=>(0,n.ui)(this.de("activating"),(()=>(0,n.ui)(this.M.activate(this.M,null,void 0),(()=>this.de("activated")))))))}deactivate(){return(0,n.ui)(this.de("deactivating"),(()=>(0,n.ui)(this.M.deactivate(this.M,null),(()=>this.de("deactivated")))))}de(t){const e=this.container,s=this.ue&&!e.has(fs,!1)?[]:e.getAll(fs);return(0,n.jY)(...s.reduce(((e,s)=>(s.slot===t&&e.push(s.run()),e)),[]))}fe(t,e){let s;if(t.has(ws,!1))s=t.get(ws);else{if(null===e.ownerDocument.defaultView)throw be(769);s=new Yt.s(e.ownerDocument.defaultView),t.register(We(ws,s))}return s}dispose(){this.M?.dispose()}}const Zr=qe("IAurelia");class Xr{get isRunning(){return this.ir}get isStarting(){return this.me}get isStopping(){return this.ge}get root(){if(null==this.pe){if(null==this.next)throw be(767);return this.next}return this.pe}constructor(t=n.DI.createContainer()){if(this.container=t,this.ir=!1,this.me=!1,this.ge=!1,this.pe=void 0,this.next=void 0,this.ve=void 0,this.xe=void 0,t.has(Zr,!0)||t.has(Xr,!0))throw be(768);Ke(t,Zr,new n.JF("IAurelia",this)),Ke(t,Xr,new n.JF("Aurelia",this)),Ke(t,Gr,this.be=new n.JF("IAppRoot"))}register(...t){return this.container.register(...t),this}app(t){return this.next=new Yr(t,this.container,this.be),this}enhance(t){const e=t.container??this.container.createChild(),s=Ke(e,Gr,new n.JF("IAppRoot")),i=new Yr({host:t.host,component:t.component},e,s,!0);return(0,n.ui)(i.activate(),(()=>i))}async waitForIdle(){const t=this.root.platform;await t.domQueue.yield(),await t.taskQueue.yield()}start(t=this.next){if(null==t)throw be(770);return(0,n.yL)(this.ve)?this.ve:this.ve=(0,n.ui)(this.stop(),(()=>(Reflect.set(t.host,"$aurelia",this),this.be.prepare(this.pe=t),this.me=!0,(0,n.ui)(t.activate(),(()=>{this.ir=!0,this.me=!1,this.ve=void 0,this.we(t,"au-started",t.host)})))))}stop(t=!1){if((0,n.yL)(this.xe))return this.xe;if(!0===this.ir){const e=this.pe;return this.ir=!1,this.ge=!0,this.xe=(0,n.ui)(e.deactivate(),(()=>{Reflect.deleteProperty(e.host,"$aurelia"),t&&e.dispose(),this.pe=void 0,this.be.dispose(),this.ge=!1,this.we(e,"au-stopped",e.host)}))}}dispose(){if(this.ir||this.ge)throw be(771);this.container.dispose()}we(t,e,s){const i=new t.platform.window.CustomEvent(e,{detail:this,bubbles:!0,cancelable:!0});s.dispatchEvent(i)}}const to=qe("ISVGAnalyzer",(t=>t.singleton(eo)));class eo{isStandardSvgAttribute(t,e){return!1}}class so{constructor(){this.fns=[],this.Be=(0,n.BL)(),this.Se=(0,n.BL)(),this.svg=(0,n.hd)(to),this.useMapping({LABEL:{for:"htmlFor"},IMG:{usemap:"useMap"},INPUT:{maxlength:"maxLength",minlength:"minLength",formaction:"formAction",formenctype:"formEncType",formmethod:"formMethod",formnovalidate:"formNoValidate",formtarget:"formTarget",inputmode:"inputMode"},TEXTAREA:{maxlength:"maxLength"},TD:{rowspan:"rowSpan",colspan:"colSpan"},TH:{rowspan:"rowSpan",colspan:"colSpan"}}),this.useGlobalMapping({accesskey:"accessKey",contenteditable:"contentEditable",tabindex:"tabIndex",textcontent:"textContent",innerhtml:"innerHTML",scrolltop:"scrollTop",scrollleft:"scrollLeft",readonly:"readOnly"})}useMapping(t){let e,s,i,r;for(i in t)for(r in e=t[i],s=this.Be[i]??=(0,n.BL)(),e){if(void 0!==s[r])throw io(r,i);s[r]=e[r]}}useGlobalMapping(t){const e=this.Se;for(const s in t){if(void 0!==e[s])throw io(s,"*");e[s]=t[s]}}useTwoWay(t){this.fns.push(t)}isTwoWay(t,e){return function(t,e){switch(t.nodeName){case"INPUT":switch(t.type){case"checkbox":case"radio":return"checked"===e;default:return"value"===e||"files"===e||"value-as-number"===e||"value-as-date"===e}case"TEXTAREA":case"SELECT":return"value"===e;default:switch(e){case"textcontent":case"innerhtml":return t.hasAttribute("contenteditable");case"scrolltop":case"scrollleft":return!0;default:return!1}}}(t,e)||this.fns.length>0&&this.fns.some((s=>s(t,e)))}map(t,e){return this.Be[t.nodeName]?.[e]??this.Se[e]??(he(t,e,this.svg)?e:null)}}function io(t,e){return be(719,t,e)}so.register=(0,n.E8)(Gt.Ii);const no={register(t){t.register(Gt.Mg,so,oo)}};class ro{constructor(t,e,s){this.attrs=t,this.bindables=e,this.primary=s}}class oo{constructor(){this.Ae=new WeakMap,this.Ee=new WeakMap}el(t,e){let s=this.Ae.get(t);return null==s&&this.Ae.set(t,s=new ao),e in s.Re?s.Re[e]:s.Re[e]=Jr.find(t,e)}attr(t,e){let s=this.Ae.get(t);return null==s&&this.Ae.set(t,s=new ao),e in s.Te?s.Te[e]:s.Te[e]=$s.find(t,e)}bindables(t){let e=this.Ee.get(t);if(null==e){const s=t.bindables,i=(0,n.BL)();let r,o,a,h,c=!1;for(o in s){if(r=s[o],h=r.attribute,!0===r.primary){if(c)throw be(714,t);c=!0,a=r}else c||null!=a||(a=r);i[h]=Ve.create(o,r)}null==r&&"custom-attribute"===t.type&&(a=i.value=Ve.create("value",{mode:t.defaultBindingMode??$e})),this.Ee.set(t,e=new ro(i,s,a??null))}return e}}oo.register=(0,n.E8)(Gt.Y_);class ao{constructor(){this.Re=(0,n.BL)(),this.Te=(0,n.BL)()}}const ho=(0,n.BL)();class co{static forNs(t){return ho[t]??=new co(t)}constructor(t){this.ns=t,this.type=we|ye}getValue(t,e){return t.getAttributeNS(this.ns,e)}setValue(t,e,s){null==t?e.removeAttributeNS(this.ns,s):e.setAttributeNS(this.ns,s,t)}}Pi(co);class lo{constructor(){this.type=we|ye}getValue(t,e){return t.getAttribute(e)}setValue(t,e,s){null==t?e.removeAttribute(s):e.setAttribute(s,t)}}Pi(lo);const uo=new lo;class po{static Le(t){const e=[];if(0===t.length)return e;const s=t.length;let i,n=0;for(;s>n;)i=t[n],i.selected&&(e[e.length]=se.call(i,"model")?i.model:i.value),++n;return e}static Me(t,e){return t===e}constructor(t,e,s,i){this.type=we|ve|ye,this.v=void 0,this.ov=void 0,this.De=!1,this.Ie=void 0,this.Pe=void 0,this.iO=!1,this.rt=!1,this.nt=t,this.oL=i,this.cf=s}getValue(){return this.iO?this.v:this.nt.multiple?po.Le(this.nt.options):this.nt.value}setValue(t){this.ov=this.v,this.v=t,this.De=t!==this.ov,this.qe(t instanceof Array?t:null),this.ut()}ut(){this.De&&(this.De=!1,this.syncOptions())}handleCollectionChange(){this.syncOptions()}syncOptions(){const t=this.v,e=this.nt,s=(0,n.cy)(t),i=e.matcher??po.Me,r=e.options;let o=r.length;for(;o-- >0;){const e=r[o],n=se.call(e,"model")?e.model:e.value;e.selected=s?-1!==t.findIndex((t=>!!i(n,t))):!!i(n,t)}}syncValue(){const t=this.nt,e=t.options,s=e.length,i=this.v;let n=0;if(t.multiple){if(!(i instanceof Array))return!0;let r;const o=t.matcher||po.Me,a=[];for(;n<s;)r=e[n],r.selected&&a.push(se.call(r,"model")?r.model:r.value),++n;let h;for(n=0;n<i.length;)h=i[n],-1===a.findIndex((t=>!!o(h,t)))?i.splice(n,1):++n;for(n=0;n<a.length;)h=a[n],-1===i.findIndex((t=>!!o(h,t)))&&i.push(h),++n;return!1}let r,o=null;for(;n<s;){if(r=e[n],r.selected){o=se.call(r,"model")?r.model:r.value;break}++n}return this.ov=this.v,this.v=o,!0}ot(){(this.Pe=Si(this.nt,this._e.bind(this))).observe(this.nt,{childList:!0,subtree:!0,characterData:!0}),this.qe(this.v instanceof Array?this.v:null),this.iO=!0}lt(){this.Pe.disconnect(),this.Ie?.unsubscribe(this),this.Pe=this.Ie=void 0,this.iO=!1}qe(t){if(this.Ie?.unsubscribe(this),this.Ie=void 0,null!=t){if(!this.nt.multiple)throw be(654);(this.Ie=this.oL.getArrayObserver(t)).subscribe(this)}}handleEvent(){this.syncValue()&&this.Oe()}_e(t){this.syncOptions(),this.syncValue()&&this.Oe()}Oe(){const t=this.ov;this.ov=this.v,this.subs.notify(this.v,t)}}Ni(po),y(po,null);class fo{constructor(t){this.obj=t,this.type=we|ye,this.v="",this.ov="",this.styles={},this.version=0,this.De=!1}getValue(){return this.obj.style.cssText}setValue(t){this.v=t,this.De=t!==this.ov,this.ut()}Fe(t){const e=[],s=/url\([^)]+$/;let i,n,r,o,a=0,h="";for(;a<t.length;)i=t.indexOf(";",a),-1===i&&(i=t.length),h+=t.substring(a,i),a=i+1,s.test(h)?h+=";":(n=h.indexOf(":"),r=h.substring(0,n).trim(),o=h.substring(n+1).trim(),e.push([r,o]),h="");return e}Ve(t){let e,s;const i=[];for(s in t)if(e=t[s],null!=e)if((0,n.Kg)(e)){if(s.startsWith("--")){i.push([s,e]);continue}i.push([(0,n.kW)(s),e])}else i.push(...this.He(e));return i}$e(t){const e=t.length;if(e>0){const s=[];let i=0;for(;e>i;++i)s.push(...this.He(t[i]));return s}return n.tR}He(t){return(0,n.Kg)(t)?this.Fe(t):t instanceof Array?this.$e(t):t instanceof Object?this.Ve(t):n.tR}ut(){if(this.De){this.De=!1;const t=this.v,e=this.styles,s=this.He(t);let i,n,r,o,a=this.version;this.ov=t;let h=0;const c=s.length;for(;h<c;++h)n=s[h],r=n[0],o=n[1],this.setProperty(r,o),e[r]=a;if(this.styles=e,this.version+=1,0===a)return;for(i in a-=1,e)se.call(e,i)&&e[i]===a&&this.obj.style.removeProperty(i)}}setProperty(t,e){let s="";null!=e&&(0,n.Tn)(e.indexOf)&&e.includes("!important")&&(s="important",e=e.replace("!important","")),this.obj.style.setProperty(t,e,s)}bind(){this.v=this.ov=this.obj.style.cssText}}Pi(fo);class go{constructor(t,e,s){this.type=we|ve|ye,this.v="",this.ov="",this.De=!1,this.rt=!1,this.nt=t,this.k=e,this.cf=s}getValue(){return this.v}setValue(t){(0,n.t7)(t,this.v)||(this.ov=this.v,this.v=t,this.De=!0,this.cf.readonly||this.ut())}ut(){this.De&&(this.De=!1,this.nt[this.k]=this.v??this.cf.default,this.Oe())}handleEvent(){this.ov=this.v,this.v=this.nt[this.k],this.ov!==this.v&&(this.De=!1,this.Oe())}ot(){this.v=this.ov=this.nt[this.k]}Oe(){const t=this.ov;this.ov=this.v,this.subs.notify(this.v,t)}}Ni(go),y(go,null);const mo=(()=>{const t="http://www.w3.org/1999/xlink",e="http://www.w3.org/XML/1998/namespace",s="http://www.w3.org/2000/xmlns/";return ne((0,n.BL)(),{"xlink:actuate":["actuate",t],"xlink:arcrole":["arcrole",t],"xlink:href":["href",t],"xlink:role":["role",t],"xlink:show":["show",t],"xlink:title":["title",t],"xlink:type":["type",t],"xml:lang":["lang",e],"xml:space":["space",e],xmlns:["xmlns",s],"xmlns:xlink":["xlink",s]})})(),vo=new jt;vo.type=we|ye;class wo{constructor(){this.allowDirtyCheck=!0,this.Ne=(0,n.BL)(),this.je=(0,n.BL)(),this.We=(0,n.BL)(),this.ze=(0,n.BL)(),this.Ue=(0,n.hd)(n.Nt),this.p=(0,n.hd)(ws),this.Ge=(0,n.hd)(Ot),this.svg=(0,n.hd)(to);const t=["change","input"],e={events:t,default:""};this.useConfig({INPUT:{value:e,valueAsNumber:{events:t,default:0},checked:{type:So,events:t},files:{events:t,readonly:!0}},SELECT:{value:{type:po,events:["change"],default:""}},TEXTAREA:{value:e}});const s={events:["change","input","blur","keyup","paste"],default:""},i={events:["scroll"],default:0};this.useConfigGlobal({scrollTop:i,scrollLeft:i,textContent:s,innerHTML:s}),this.overrideAccessorGlobal("css","style","class"),this.overrideAccessor({INPUT:["value","checked","model"],SELECT:["value"],TEXTAREA:["value"]})}handles(t,e){return t instanceof this.p.Node}useConfig(t,e,s){const i=this.Ne;let r;if((0,n.Kg)(t))r=i[t]??=(0,n.BL)(),null==r[e]?r[e]=s:yo(t,e);else for(const s in t){r=i[s]??=(0,n.BL)();const o=t[s];for(e in o)null==r[e]?r[e]=o[e]:yo(s,e)}}useConfigGlobal(t,e){const s=this.je;if("object"==typeof t)for(const e in t)null==s[e]?s[e]=t[e]:yo("*",e);else null==s[t]?s[t]=e:yo("*",t)}getAccessor(t,e,s){if(e in this.ze||e in(this.We[t.tagName]??n.vB))return this.getObserver(t,e,s);switch(e){case"src":case"href":case"role":case"minLength":case"maxLength":case"placeholder":case"size":case"pattern":case"title":case"popovertarget":case"popovertargetaction":return uo;default:{const s=mo[e];return void 0!==s?co.forNs(s[1]):he(t,e,this.svg)?uo:vo}}}overrideAccessor(t,e){let s;if((0,n.Kg)(t))s=this.We[t]??=(0,n.BL)(),s[e]=!0;else for(const e in t)for(const i of t[e])s=this.We[e]??=(0,n.BL)(),s[i]=!0}overrideAccessorGlobal(...t){for(const e of t)this.ze[e]=!0}getNodeObserverConfig(t,e){return this.Ne[t.tagName]?.[e]??this.je[e]}getNodeObserver(t,e,s){const i=this.Ne[t.tagName]?.[e]??this.je[e];let n;return null!=i?(n=new(i.type??go)(t,e,i,s,this.Ue),n.doNotCache||(Jt(t)[e]=n),n):null}getObserver(t,e,s){switch(e){case"class":return new Oi(t);case"css":case"style":return new fo(t)}const i=this.getNodeObserver(t,e,s);if(null!=i)return i;const n=mo[e];if(void 0!==n)return co.forNs(n[1]);if(he(t,e,this.svg))return uo;if(e in t.constructor.prototype){if(this.allowDirtyCheck)return this.Ge.createProperty(t,e);throw be(652,e)}return new Ft(t,e)}}function yo(t,e){throw be(653,t,e)}function bo(t,e){return t===e}wo.register=(0,n.E8)(qt);class So{constructor(t,e,s,i){this.type=we|ve|ye,this.v=void 0,this.ov=void 0,this.Ke=void 0,this.Xe=void 0,this.rt=!1,this.nt=t,this.oL=i,this.cf=s}getValue(){return this.v}setValue(t){const e=this.v;t!==e&&(this.v=t,this.ov=e,this.Qe(),this.Ye(),this.Oe())}handleCollectionChange(){this.Ye()}handleChange(t,e){this.Ye()}Ye(){const t=this.v,e=this.nt,s=se.call(e,"model")?e.model:e.value,i="radio"===e.type,r=void 0!==e.matcher?e.matcher:bo;if(i)e.checked=!!r(t,s);else if(!0===t)e.checked=!0;else{let i=!1;if((0,n.cy)(t))i=-1!==t.findIndex((t=>!!r(t,s)));else if(t instanceof Set){for(const e of t)if(r(e,s)){i=!0;break}}else if(t instanceof Map)for(const e of t){const t=e[0],n=e[1];if(r(t,s)&&!0===n){i=!0;break}}e.checked=i}}handleEvent(){let t=this.ov=this.v;const e=this.nt,s=se.call(e,"model")?e.model:e.value,i=e.checked,r=void 0!==e.matcher?e.matcher:bo;if("checkbox"===e.type){if((0,n.cy)(t)){const e=t.findIndex((t=>!!r(t,s)));return void(i&&-1===e?t.push(s):i||-1===e||t.splice(e,1))}if(t instanceof Set){const e={};let n=e;for(const e of t)if(!0===r(e,s)){n=e;break}return void(i&&n===e?t.add(s):i||n===e||t.delete(n))}if(t instanceof Map){let e;for(const i of t){const t=i[0];if(!0===r(t,s)){e=t;break}}return void t.set(e,i)}t=i}else{if(!i)return;t=s}this.v=t,this.Oe()}ot(){this.Qe()}lt(){this.Ke?.unsubscribe(this),this.Xe?.unsubscribe(this),this.Ke=this.Xe=void 0}Oe(){Co=this.ov,this.ov=this.v,this.subs.notify(this.v,Co)}Qe(){const t=this.nt;(this.Xe??=t.$observers?.model??t.$observers?.value)?.subscribe(this),this.Ke?.unsubscribe(this),this.Ke=void 0,"checkbox"===t.type&&(this.Ke=function(t,e){return t instanceof Array?e.getArrayObserver(t):t instanceof Map?e.getMapObserver(t):t instanceof Set?e.getSetObserver(t):void 0}(this.v,this.oL))?.subscribe(this)}}let Co;Ni(So),y(So,null);class ko{bind(t,e){if(!(e instanceof ii))throw be(9994,e);e.useTargetObserver(uo)}}ko.$au={type:Je,name:"attr"};class To{bind(t,e){if(!("handleEvent"in e))throw be(801);e.self=!0}unbind(t,e){e.self=!1}}To.$au={type:Je,name:"self"};class xo{constructor(){this.oL=(0,n.hd)(Ht),this.Ze=(0,n.hd)(qt)}bind(t,e,...s){if(!(this.Ze instanceof wo))throw be(9993);if(0===s.length)throw be(802);if(!(e instanceof ii&&e.mode&Ne))throw be(803);const i=this.Ze.getNodeObserverConfig(e.target,e.targetProperty);if(null==i)throw be(9992,e);const n=this.Ze.getNodeObserver(e.target,e.targetProperty,this.oL);n.useConfig({readonly:i.readonly,default:i.default,events:s}),e.useTargetObserver(n)}}xo.$au={type:Je,name:"updateTrigger"};class Io{constructor(){this.elseFactory=void 0,this.elseView=void 0,this.ifView=void 0,this.view=void 0,this.value=!1,this.cache=!0,this.pending=void 0,this.Je=!1,this.ts=0,this.es=(0,n.hd)(vi),this.l=(0,n.hd)(br)}attaching(t,e){return this.ss(this.value)}detaching(t,e){return this.Je=!0,(0,n.ui)(this.pending,(()=>{this.Je=!1,this.pending=void 0,this.view?.deactivate(t,this.$controller)}))}valueChanged(t,e){if(this.$controller.isActive)return(t=!!t)!=(e=!!e)?this.ss(t):void 0}ss(t){const e=this.view,s=this.$controller,i=this.ts++,r=()=>!this.Je&&this.ts===i+1;let o;return(0,n.ui)(this.pending,(()=>this.pending=(0,n.ui)(e?.deactivate(e,s),(()=>{if(r()&&(o=this.view=t?this.ifView=this.cache&&null!=this.ifView?this.ifView:this.es.create():this.elseView=this.cache&&null!=this.elseView?this.elseView:this.elseFactory?.create(),null!=o))return o.setLocation(this.l),(0,n.ui)(o.activate(o,s,s.scope),(()=>{r()&&(this.pending=void 0)}))}))))}dispose(){this.ifView?.dispose(),this.elseView?.dispose(),this.ifView=this.elseView=this.view=void 0}accept(t){if(!0===this.view?.accept(t))return!0}}Io.$au={type:Ss,name:"if",isTemplateController:!0,bindables:{value:!0,cache:{set:t=>""===t||!!t&&"false"!==t}}};class Ao{constructor(){this.f=(0,n.hd)(vi)}link(t,e,s,i){const n=t.children,r=n[n.length-1];if(r instanceof Io)r.elseFactory=this.f;else{if(!(r.viewModel instanceof Io))throw be(810);r.viewModel.elseFactory=this.f}}}function $o(t){t.dispose()}Ao.$au={type:"custom-attribute",name:"else",isTemplateController:!0};const Eo=["BindingBehavior","ValueConverter"];class Ro{constructor(){this.views=[],this.rs=[],this.key=null,this.os=new Map,this.ls=new Map,this.cs=void 0,this.us=!1,this.ds=!1,this.gs=null,this.ps=void 0,this.xs=!1,this.l=(0,n.hd)(br),this.bs=(0,n.hd)(Xn),this.f=(0,n.hd)(vi),this.ws=(0,n.hd)(Bo);const t=(0,n.hd)(Gt.OA).props[0].props[0];if(void 0!==t){const{to:e,value:s,command:r}=t;if("key"!==e)throw be(776,e);if(null===r)this.key=s;else{if("bind"!==r)throw be(775,r);this.key=(0,n.hd)(i.JW).parse(s,fe)}}}binding(t,e){const s=this.bs.bindings,i=s.length;let n,r,o=0;for(;i>o;++o)if(n=s[o],n.target===this&&"items"===n.targetProperty){r=this.forOf=n.ast,this.ys=n;let t=r.iterable;for(;null!=t&&Eo.includes(t.$kind);)t=t.expression,this.us=!0;this.gs=t;break}this.ks();const a=r.declaration;(this.xs="ArrayDestructuring"===a.$kind||"ObjectDestructuring"===a.$kind)||(this.local=xe(a,this.$controller.scope,n,null))}attaching(t,e){return this.Cs(),this.Bs(t,this.ps??n.tR)}detaching(t,e){return this.ks(),this.Ss(t)}unbinding(t,e){this.ls.clear(),this.os.clear()}itemsChanged(){this.$controller.isActive&&(this.ks(),this.Cs(),this.As(this.items,void 0))}handleCollectionChange(t,e){const s=this.$controller;if(s.isActive){if(this.us){if(this.ds)return;return this.ds=!0,this.items=xe(this.forOf.iterable,s.scope,this.ys,null),void(this.ds=!1)}this.Cs(),this.As(t,e)}}As(t,e){const s=this.views;this.rs=s.slice();const i=s.length,r=this.key,o=null!==r;if(o||void 0===e){const t=this.local,n=this.ps,a=n.length,h=this.forOf,c=h.declaration,l=this.ys,u=this.xs;e=w(a);let d=0;if(0===i)for(;d<a;++d)e[d]=-2;else if(0===a)if(u)for(d=0;d<i;++d)e.deletedIndices.push(d),e.deletedItems.push(xe(c,s[d].scope,l,null));else for(d=0;d<i;++d)e.deletedIndices.push(d),e.deletedItems.push(s[d].scope.bindingContext[t]);else{const p=Array(i);if(u)for(d=0;d<i;++d)p[d]=xe(c,s[d].scope,l,null);else for(d=0;d<i;++d)p[d]=s[d].scope.bindingContext[t];let f,g,m,v,w=0;const y=i-1,b=a-1,S=new Map,C=new Map,k=this.os,T=this.ls,x=this.$controller.scope;d=0;t:{for(;;){if(o?(f=p[d],g=n[d],m=_o(k,r,f,Wo(T,f,h,x,l,t,u),l),v=_o(k,r,g,Wo(T,g,h,x,l,t,u),l)):(f=m=Ko(p[d],d),g=v=Ko(n[d],d)),m!==v){k.set(f,m),k.set(g,v);break}if(++d,d>y||d>b)break t}if(y===b)for(w=b;;){if(o?(f=p[w],g=n[w],m=_o(k,r,f,Wo(T,f,h,x,l,t,u),l),v=_o(k,r,g,Wo(T,g,h,x,l,t,u),l)):(f=m=Ko(p[d],d),g=v=Ko(n[d],d)),m!==v){k.set(f,m),k.set(g,v);break}if(--w,d>w)break t}}const I=d,A=d;for(d=A;d<=b;++d)k.has(g=o?n[d]:Ko(n[d],d))?v=k.get(g):(v=o?_o(k,r,g,Wo(T,g,h,x,l,t,u),l):g,k.set(g,v)),C.set(v,d);for(d=I;d<=y;++d)m=k.has(f=o?p[d]:Ko(p[d],d))?k.get(f):o?_o(k,r,f,s[d].scope,l):f,S.set(m,d),C.has(m)?e[C.get(m)]=d:(e.deletedIndices.push(d),e.deletedItems.push(f));for(d=A;d<=b;++d)S.has(k.get(o?n[d]:Ko(n[d],d)))||(e[d]=-2);S.clear(),C.clear()}}if(void 0===e){const t=(0,n.ui)(this.Ss(null),(()=>this.Bs(null,this.ps??n.tR)));(0,n.yL)(t)&&t.catch(ce)}else if(e.deletedIndices.length>0){const t=(0,n.ui)(this.Es(e),(()=>this.Rs(i,e)));(0,n.yL)(t)&&t.catch(ce)}else this.Rs(i,e)}ks(){const t=this.$controller.scope;let e,s=this.Ts,i=this.us;i&&(s=this.Ts=xe(this.gs,t,this.ys,null)??null,i=this.us=!(0,n.t7)(this.items,s));const r=this.cs;if(this.$controller.isActive){const t=i?s:this.items;e=this.cs=this.ws.resolve(t).getObserver?.(t),r!==e&&(r?.unsubscribe(this),e?.subscribe(this))}else r?.unsubscribe(this),this.cs=void 0}Cs(){const t=this.items;if((0,n.cy)(t))return void(this.ps=t.slice(0));const e=[];this.ws.resolve(t).iterate(t,((t,s)=>{e[s]=t})),this.ps=e}Bs(t,e){let s,i,r,o;const{$controller:a,f:h,local:c,l,ls:u,ys:d,forOf:p,xs:f}=this,g=a.scope,m=e.length,v=this.views=Array(m);if(e.forEach(((e,w)=>{r=v[w]=h.create().setLocation(l),r.nodes.unlink(),o=Wo(u,e,p,g,d,c,f),Lo(o.overrideContext,w,m),i=r.activate(t??r,a,o),(0,n.yL)(i)&&(s??=[]).push(i)})),void 0!==s)return 1===s.length?s[0]:Promise.all(s)}Ss(t){let e,s,i,r=0;const{views:o,$controller:a}=this,h=o.length;for(;h>r;++r)i=o[r],i.release(),s=i.deactivate(t??i,a),(0,n.yL)(s)&&(e??(e=[])).push(s);if(void 0!==e)return 1===e.length?e[0]:Promise.all(e)}Es(t){let e,s,i;const{$controller:r,views:o}=this,a=t.deletedIndices.slice().sort(Qo),h=a.length;let c=0;for(;h>c;++c)i=o[a[c]],i.release(),s=i.deactivate(i,r),(0,n.yL)(s)&&(e??(e=[])).push(s);for(c=0;h>c;++c)o.splice(a[c]-c,1);if(void 0!==e)return 1===e.length?e[0]:Promise.all(e)}Rs(t,e){let s,i,r,o,a=0;const{$controller:h,f:c,local:l,ps:u,l:d,views:p,xs:f,ys:g,ls:m,rs:v,forOf:w}=this,y=e.length;for(;y>a;++a)-2===e[a]&&(r=c.create(),p.splice(a,0,r));if(p.length!==y)throw be(814,[p.length,y]);const b=h.scope,S=e.length;let C=0;for(a=0;a<e.length;++a)-2!==(C=e[a])&&(p[a]=v[C]);const k=function(t){const e=t.length;e>No&&(No=e,Po=new Int32Array(e),Oo=new Int32Array(e));let s=0,i=0,n=0,r=0,o=0,a=0,h=0,c=0;for(;r<e;r++)if(i=t[r],-2!==i){if(o=Po[s],n=t[o],-2!==n&&n<i){Oo[r]=o,Po[++s]=r;continue}for(a=0,h=s;a<h;)c=a+h>>1,n=t[Po[c]],-2!==n&&n<i?a=c+1:h=c;n=t[Po[a]],(i<n||-2===n)&&(a>0&&(Oo[r]=Po[a-1]),Po[a]=r)}r=++s;const l=new Int32Array(r);for(i=Po[s-1];s-- >0;)l[s]=i,i=Oo[i];for(;r-- >0;)Po[r]=0;return l}(e),T=k.length,x=w.declaration;let I,A=T-1;for(a=S-1;a>=0;--a)r=p[a],I=p[a+1],r.nodes.link(I?.nodes??d),-2===e[a]?(o=Wo(m,u[a],w,b,g,l,f),Lo(o.overrideContext,a,S),r.setLocation(d),i=r.activate(r,h,o),(0,n.yL)(i)&&(s??(s=[])).push(i)):A<0||1===T||a!==k[A]?(f?Te(x,r.scope,g,u[a]):r.scope.bindingContext[l]=u[a],Lo(r.scope.overrideContext,a,S),r.nodes.insertBefore(r.location)):(f?Te(x,r.scope,g,u[a]):r.scope.bindingContext[l]=u[a],t!==S&&Lo(r.scope.overrideContext,a,S),--A);if(void 0!==s)return 1===s.length?s[0]:Promise.all(s)}dispose(){this.views.forEach($o),this.views=void 0}accept(t){const{views:e}=this;if(void 0!==e)for(let s=0,i=e.length;s<i;++s)if(!0===e[s].accept(t))return!0}}Ro.$au={type:Ss,name:"repeat",isTemplateController:!0,bindables:["items"]};let No=16,Po=new Int32Array(No),Oo=new Int32Array(No);const Lo=(t,e,s)=>{const i=0===e,n=e===s-1,r=e%2==0;t.$index=e,t.$first=i,t.$last=n,t.$middle=!i&&!n,t.$even=r,t.$odd=!r,t.$length=s},Bo=qe("IRepeatableHandlerResolver",(t=>t.singleton(Mo)));class Mo{constructor(){this.Ls=(0,n.hd)((0,n.Q7)(jo))}resolve(t){if(Fo.handles(t))return Fo;if(Do.handles(t))return Do;if(Vo.handles(t))return Vo;if(Ho.handles(t))return Ho;if(qo.handles(t))return qo;const e=this.Ls.find((e=>e.handles(t)));return void 0!==e?e:Uo}}const jo=qe("IRepeatableHandler"),Fo={handles:n.cy,getObserver:Kt,iterate(t,e){const s=t.length;let i=0;for(;i<s;++i)e(t[i],i,t)}},Do={handles:n.vM,getObserver:Kt,iterate(t,e){let s,i=0;for(s of t.keys())e(s,i++,t)}},Vo={handles:n.jh,getObserver:Kt,iterate(t,e){let s,i=0;for(s of t.entries())e(s,i++,t)}},Ho={handles:n.Et,iterate(t,e){let s=0;for(;s<t;++s)e(s,s,t)}},qo={handles:t=>null==t,iterate(){}},Uo={handles:t=>!1,iterate(t,e){throw be(777,t)}},_o=(t,e,s,i,n)=>{let r=t.get(s);return void 0===r&&(r="string"==typeof e?s[e]:xe(e,i,n,null),t.set(s,r)),r},Wo=(t,e,s,i,n,r,o)=>{let a=t.get(e);return void 0===a&&(o?Te(s.declaration,a=Se.fromParent(i,new Ce),n,e):a=Se.fromParent(i,new Ce(r,e)),t.set(e,a)),a},Ko=(t,e)=>{const s=typeof t;switch(s){case"object":if(null!==t)return t;case"string":case"number":case"bigint":case"undefined":case"boolean":return`${e}${s}${t}`;default:return t}},Qo=(t,e)=>t-e;class zo{constructor(){this.view=(0,n.hd)(vi).create().setLocation((0,n.hd)(br))}valueChanged(t,e){const s=this.$controller,i=this.view.bindings;let n,r=0,o=0;if(s.isActive&&null!=i)for(n=Se.fromParent(s.scope,void 0===t?{}:t),o=i.length;o>r;++r)i[r].bind(n)}attaching(t,e){const{$controller:s,value:i}=this,n=Se.fromParent(s.scope,void 0===i?{}:i);return this.view.activate(t,s,n)}detaching(t,e){return this.view.deactivate(t,this.$controller)}dispose(){this.view.dispose(),this.view=void 0}accept(t){if(!0===this.view?.accept(t))return!0}}zo.$au={type:Ss,name:"with",isTemplateController:!0,bindables:["value"]};class Jo{constructor(){this.cases=[],this.activeCases=[],this.promise=void 0,this.f=(0,n.hd)(vi),this.l=(0,n.hd)(br)}link(t,e,s,i){this.view=this.f.create(this.$controller).setLocation(this.l)}attaching(t,e){const s=this.view,i=this.$controller;return this.queue((()=>s.activate(t,i,i.scope))),this.queue((()=>this.swap(t,this.value))),this.promise}detaching(t,e){return this.queue((()=>this.view.deactivate(t,this.$controller))),this.promise}dispose(){this.view?.dispose(),this.view=void 0}valueChanged(t,e){this.$controller.isActive&&this.queue((()=>this.swap(null,this.value)))}caseChanged(t){this.queue((()=>this.Ms(t)))}Ms(t){const e=t.isMatch(this.value),s=this.activeCases,i=s.length;if(!e)return i>0&&s[0].id===t.id?this.Ds(null):void 0;if(i>0&&s[0].id<t.id)return;const r=[];let o=t.fallThrough;if(o){const e=this.cases,s=e.indexOf(t);for(let t=s,i=e.length;t<i&&o;t++){const s=e[t];r.push(s),o=s.fallThrough}}else r.push(t);return(0,n.ui)(this.Ds(null,r),(()=>(this.activeCases=r,this.Is(null))))}swap(t,e){const s=[];let i=!1;for(const t of this.cases)if((i||t.isMatch(e))&&(s.push(t),i=t.fallThrough),s.length>0&&!i)break;const r=this.defaultCase;return 0===s.length&&void 0!==r&&s.push(r),(0,n.ui)(this.activeCases.length>0?this.Ds(t,s):void 0,(()=>{if(this.activeCases=s,0!==s.length)return this.Is(t)}))}Is(t){const e=this.$controller;if(!e.isActive)return;const s=this.activeCases,i=s.length;if(0===i)return;const r=e.scope;return 1===i?s[0].activate(t,r):(0,n.jY)(...s.map((e=>e.activate(t,r))))}Ds(t,e=[]){const s=this.activeCases,i=s.length;if(0!==i){if(1===i){const i=s[0];return e.includes(i)?void 0:(s.length=0,i.deactivate(t))}return(0,n.ui)((0,n.jY)(...s.reduce(((s,i)=>(e.includes(i)||s.push(i.deactivate(t)),s)),[])),(()=>{s.length=0}))}}queue(t){const e=this.promise;let s;s=this.promise=(0,n.ui)((0,n.ui)(e,t),(()=>{this.promise===s&&(this.promise=void 0)}))}accept(t){return!0===this.$controller.accept(t)||!!this.activeCases.some((e=>e.accept(t)))||void 0}}Jo.$au={type:Ss,name:"switch",isTemplateController:!0,bindables:["value"]};let Go=0;const Yo=["value",{name:"fallThrough",mode:Ee,set(t){switch(t){case"true":return!0;case"false":return!1;default:return!!t}}}];class Zo{constructor(){this.id=++Go,this.fallThrough=!1,this.view=void 0,this.f=(0,n.hd)(vi),this.Ue=(0,n.hd)(Ht),this.l=(0,n.hd)(br),this.Ps=(0,n.hd)(n.gF).scopeTo(`${this.constructor.name}-#${this.id}`)}link(t,e,s,i){const n=t.parent,r=n?.viewModel;if(!(r instanceof Jo))throw be(815);this.$switch=r,this.linkToSwitch(r)}detaching(t,e){return this.deactivate(t)}isMatch(t){this.Ps.debug("isMatch()");const e=this.value;return(0,n.cy)(e)?(void 0===this.cs&&(this.cs=this.qs(e)),e.includes(t)):e===t}valueChanged(t,e){(0,n.cy)(t)?(this.cs?.unsubscribe(this),this.cs=this.qs(t)):void 0!==this.cs&&this.cs.unsubscribe(this),this.$switch.caseChanged(this)}handleCollectionChange(){this.$switch.caseChanged(this)}activate(t,e){let s=this.view;if(void 0===s&&(s=this.view=this.f.create().setLocation(this.l)),!s.isActive)return s.activate(t??s,this.$controller,e)}deactivate(t){const e=this.view;if(void 0!==e&&e.isActive)return e.deactivate(t??e,this.$controller)}dispose(){this.cs?.unsubscribe(this),this.view?.dispose(),this.view=void 0}linkToSwitch(t){t.cases.push(this)}qs(t){const e=this.Ue.getArrayObserver(t);return e.subscribe(this),e}accept(t){return!0===this.$controller.accept(t)||this.view?.accept(t)}}Is({name:"case",bindables:Yo,isTemplateController:!0},Zo);class Xo extends Zo{linkToSwitch(t){if(void 0!==t.defaultCase)throw be(816);t.defaultCase=this}}Is({name:"default-case",bindables:Yo,isTemplateController:!0},Xo);class ta{constructor(){this.preSettledTask=null,this.postSettledTask=null,this.f=(0,n.hd)(vi),this.l=(0,n.hd)(br),this.p=(0,n.hd)(ws),this.logger=(0,n.hd)(n.gF).scopeTo("promise.resolve")}link(t,e,s,i){this.view=this.f.create(this.$controller).setLocation(this.l)}attaching(t,e){const s=this.view,i=this.$controller;return(0,n.ui)(s.activate(t,i,this.viewScope=Se.fromParent(i.scope,{})),(()=>this.swap(t)))}valueChanged(t,e){this.$controller.isActive&&this.swap(null)}swap(t){const e=this.value;if(!(0,n.yL)(e))return;const s=this.p.domQueue,i=this.fulfilled,r=this.rejected,o=this.pending,a=this.viewScope;let h;const c=()=>{(0,n.jY)(h=(this.preSettledTask=s.queueTask((()=>(0,n.jY)(i?.deactivate(t),r?.deactivate(t),o?.activate(t,a))))).result.catch((t=>{if(!(t instanceof Zt.mE))throw t})),e.then((c=>{if(this.value!==e)return;const l=()=>{this.postSettlePromise=(this.postSettledTask=s.queueTask((()=>(0,n.jY)(o?.deactivate(t),r?.deactivate(t),i?.activate(t,a,c))))).result};this.preSettledTask.status===me?h.then(l):(this.preSettledTask.cancel(),l())}),(c=>{if(this.value!==e)return;const l=()=>{this.postSettlePromise=(this.postSettledTask=s.queueTask((()=>(0,n.jY)(o?.deactivate(t),i?.deactivate(t),r?.activate(t,a,c))))).result};this.preSettledTask.status===me?h.then(l):(this.preSettledTask.cancel(),l())})))};this.postSettledTask?.status===me?this.postSettlePromise.then(c):(this.postSettledTask?.cancel(),c())}detaching(t,e){return this.preSettledTask?.cancel(),this.postSettledTask?.cancel(),this.preSettledTask=this.postSettledTask=null,this.view.deactivate(t,this.$controller)}dispose(){this.view?.dispose(),this.view=void 0}}ta.$au={type:Ss,name:"promise",isTemplateController:!0,bindables:["value"]};class ea{constructor(){this.view=void 0,this.f=(0,n.hd)(vi),this.l=(0,n.hd)(br)}link(t,e,s,i){na(t).pending=this}activate(t,e){let s=this.view;if(void 0===s&&(s=this.view=this.f.create().setLocation(this.l)),!s.isActive)return s.activate(s,this.$controller,e)}deactivate(t){const e=this.view;if(void 0!==e&&e.isActive)return e.deactivate(e,this.$controller)}detaching(t){return this.deactivate(t)}dispose(){this.view?.dispose(),this.view=void 0}}ea.$au={type:Ss,name:"pending",isTemplateController:!0,bindables:{value:{mode:Re}}};class sa{constructor(){this.view=void 0,this.f=(0,n.hd)(vi),this.l=(0,n.hd)(br)}link(t,e,s,i){na(t).fulfilled=this}activate(t,e,s){this.value=s;let i=this.view;if(void 0===i&&(i=this.view=this.f.create().setLocation(this.l)),!i.isActive)return i.activate(i,this.$controller,e)}deactivate(t){const e=this.view;if(void 0!==e&&e.isActive)return e.deactivate(e,this.$controller)}detaching(t,e){return this.deactivate(t)}dispose(){this.view?.dispose(),this.view=void 0}}sa.$au={type:Ss,name:"then",isTemplateController:!0,bindables:{value:{mode:Ne}}};class ia{constructor(){this.view=void 0,this.f=(0,n.hd)(vi),this.l=(0,n.hd)(br)}link(t,e,s,i){na(t).rejected=this}activate(t,e,s){this.value=s;let i=this.view;if(void 0===i&&(i=this.view=this.f.create().setLocation(this.l)),!i.isActive)return i.activate(i,this.$controller,e)}deactivate(t){const e=this.view;if(void 0!==e&&e.isActive)return e.deactivate(e,this.$controller)}detaching(t,e){return this.deactivate(t)}dispose(){this.view?.dispose(),this.view=void 0}}function na(t){const e=t.parent,s=e?.viewModel;if(s instanceof ta)return s;throw be(813)}ia.$au={type:Ss,name:"catch",isTemplateController:!0,bindables:{value:{mode:Ne}}};class ra{"promise.resolve"(t,e){return new Gt.XP(t,e,"promise","bind")}}ra[Symbol.metadata]={[n.Ri]:Gt.Fv.create([{pattern:"promise.resolve",symbols:""}],ra)};class oa{then(t,e){return new Gt.XP(t,e,"then","from-view")}}oa[Symbol.metadata]={[n.Ri]:Gt.Fv.create([{pattern:"then",symbols:""}],oa)};class aa{catch(t,e){return new Gt.XP(t,e,"catch","from-view")}}aa[Symbol.metadata]={[n.Ri]:Gt.Fv.create([{pattern:"catch",symbols:""}],aa)};class ha{constructor(){this._s=!1,this.Re=(0,n.hd)(wr),this.p=(0,n.hd)(ws)}binding(){this.valueChanged()}valueChanged(){this.$controller.isActive?this.Os():this._s=!0}attached(){this._s&&(this._s=!1,this.Os()),this.Re.addEventListener("focus",this),this.Re.addEventListener("blur",this)}detaching(){const t=this.Re;t.removeEventListener("focus",this),t.removeEventListener("blur",this)}handleEvent(t){"focus"===t.type?this.value=!0:this.Fs||(this.value=!1)}Os(){const t=this.Re,e=this.Fs,s=this.value;s&&!e?t.focus():!s&&e&&t.blur()}get Fs(){return this.Re===this.p.document.activeElement}}ha.$au={type:Ss,name:"focus",bindables:{value:{mode:Pe}}};class ca{constructor(){this.position="beforeend",this.strict=!1;const t=(0,n.hd)(vi),e=(0,n.hd)(br),s=(0,n.hd)(ws);this.p=s,this.Vs=s.document.createElement("div"),(this.view=t.create()).setLocation(this.Hs=yi(s)),function(t,e){if(void 0===t.platform||t instanceof t.platform.Node)Cr.set(t,e);else{const s=t.childNodes;for(let t=0,i=s.length;t<i;++t)Cr.set(s[t],e)}}(this.view.nodes,e)}attaching(t){null==this.callbackContext&&(this.callbackContext=this.$controller.scope.bindingContext);const e=this.Vs=this.$s();return this.Ns(e,this.position),this.js(t,e)}detaching(t){return this.Ws(t,this.Vs)}targetChanged(){const{$controller:t}=this;if(!t.isActive)return;const e=this.$s();if(this.Vs===e)return;this.Vs=e;const s=(0,n.ui)(this.Ws(null,e),(()=>(this.Ns(e,this.position),this.js(null,e))));(0,n.yL)(s)&&s.catch(ce)}positionChanged(){const{$controller:t,Vs:e}=this;if(!t.isActive)return;const s=(0,n.ui)(this.Ws(null,e),(()=>(this.Ns(e,this.position),this.js(null,e))));(0,n.yL)(s)&&s.catch(ce)}js(t,e){const{activating:s,callbackContext:i,view:r}=this;return(0,n.ui)(s?.call(i,e,r),(()=>this.zs(t,e)))}zs(t,e){const{$controller:s,view:i}=this;return null!==t?(0,n.ui)(i.activate(t??i,s,s.scope),(()=>this.Us(e))):(i.nodes.insertBefore(this.Hs),this.Us(e))}Us(t){const{activated:e,callbackContext:s,view:i}=this;return e?.call(s,t,i)}Ws(t,e){const{deactivating:s,callbackContext:i,view:r}=this;return(0,n.ui)(s?.call(i,e,r),(()=>this.Gs(t,e)))}Gs(t,e){const{$controller:s,view:i}=this;return null!==t?(0,n.ui)(i.deactivate(t,s),(()=>this.Ks(e))):(i.nodes.remove(),this.Ks(e))}Ks(t){const{deactivated:e,callbackContext:s,view:i}=this;return(0,n.ui)(e?.call(s,t,i),(()=>this.Xs()))}$s(){const t=this.p,e=t.document;let s=this.target,i=this.renderContext;if(""===s){if(this.strict)throw be(811);return e.body}if((0,n.Kg)(s)){let r=e;(0,n.Kg)(i)&&(i=e.querySelector(i)),i instanceof t.Node&&(r=i),s=r.querySelector(s)}if(s instanceof t.Node)return s;if(null==s){if(this.strict)throw be(812);return e.body}return s}Xs(){this.Hs.remove(),this.Hs.$start.remove()}Ns(t,e){const s=this.Hs,i=s.$start,n=t.parentNode,r=[i,s];switch(e){case"beforeend":bi(t,null,r);break;case"afterbegin":bi(t,t.firstChild,r);break;case"beforebegin":bi(n,t,r);break;case"afterend":bi(n,t.nextSibling,r);break;default:throw be(779,e)}}dispose(){this.view.dispose(),this.view=void 0,this.callbackContext=null}accept(t){if(!0===this.view?.accept(t))return!0}}let la;ca.$au={type:Ss,name:"portal",isTemplateController:!0,bindables:[{name:"target",primary:!0},"position","activated","activating","callbackContext",{name:"renderContext",callback:"targetChanged"},"strict","deactivated","deactivating"]};class ua{constructor(){this.Qs=null,this.Ys=null,this.Zt=!1,this.expose=null,this.slotchange=null,this.Zs=new Set,this.cs=null;const t=(0,n.hd)(tr),e=(0,n.hd)(br),s=(0,n.hd)(Gt.OA),i=(0,n.hd)(vn),r=this.name=s.data.name,o=s.projections?.[ki],a=t.instruction?.projections?.[r],h=t.controller.container;let c,l;null==a?(l=h.createChild({inheritParentResources:!0}),c=i.getViewFactory(o??(la??=Or.create({name:"au-slot-empty-template",template:"",needsCompile:!1})),l),this.Js=!1):(l=h.createChild(),l.useResources(t.parent.controller.container),Ke(l,tr,new n.JF(void 0,t.parent)),c=i.getViewFactory(a,l),this.Js=!0,this.ti=h.getAll(Ii,!1)?.filter((t=>"*"===t.slotName||t.slotName===r))??n.tR),this.ei=(this.ti??=n.tR).length>0,this.si=t,this.view=c.create().setLocation(this.l=e)}get nodes(){const t=[],e=this.l;let s=e.$start.nextSibling;for(;null!=s&&s!==e;)8!==s.nodeType&&t.push(s),s=s.nextSibling;return t}subscribe(t){this.Zs.add(t)}unsubscribe(t){this.Zs.delete(t)}binding(t,e){for(this.Qs=e.scope;"synthetic"===e.vmKind&&e.parent?.viewModel instanceof ua;)e=e.parent.parent;const s=e.scope.bindingContext;let i;this.Js&&(i=this.si.controller.scope.parent,(this.Ys=Se.fromParent(i,i.bindingContext)).overrideContext.$host=this.expose??s)}attaching(t,e){return(0,n.ui)(this.view.activate(t,this.$controller,this.Js?this.Ys:this.Qs),(()=>{this.ei&&(this.ti.forEach((t=>t.watch(this))),this.Qe(),this.ii(),this.Zt=!0)}))}detaching(t,e){return this.Zt=!1,this.ni(),this.ti.forEach((t=>t.unwatch(this))),this.view.deactivate(t,this.$controller)}exposeChanged(t){this.Js&&null!=this.Ys&&(this.Ys.overrideContext.$host=t)}dispose(){this.view.dispose(),this.view=void 0}accept(t){if(!0===this.view?.accept(t))return!0}Qe(){if(null!=this.cs)return;const t=this.l,e=t.parentElement;null!=e&&(this.cs=Si(e,(e=>{pa(t,e)&&this.ii()}))).observe(e,{childList:!0})}ni(){this.cs?.disconnect(),this.cs=null}ii(){const t=this.nodes,e=new Set(this.Zs);let s;for(s of(this.Zt&&this.slotchange?.call(void 0,this.name,t),e))s.handleSlotChange(this,t)}}ua.$au={type:Dr,name:"au-slot",template:null,containerless:!0,processContent(t,e,s){s.name=t.getAttribute("name")??ki;let i=t.firstChild,n=null;for(;null!==i;)n=i.nextSibling,Ci(i)&&i.hasAttribute("au-slot")&&t.removeChild(i),i=n},bindables:["expose","slotchange"]};const da=(t,e)=>t.compareDocumentPosition(e),pa=(t,e)=>{for(const{addedNodes:s,removedNodes:i,nextSibling:n}of e){let e,r=0,o=s.length;for(;r<o;++r)if(e=s[r],4===da(t.$start,e)&&2===da(t,e))return!0;if(i.length>0&&null!=n&&4===da(t.$start,n)&&2===da(t,n))return!0}};class fa{constructor(){this.scopeBehavior="auto",this.ri=void 0,this.tag=null,this.c=(0,n.hd)(n.p7),this.parent=(0,n.hd)(Xn),this.oi=(0,n.hd)(wr),this.l=(0,n.hd)(br),this.p=(0,n.hd)(ws),this.r=(0,n.hd)(vn),this.li=(0,n.hd)(Gt.OA),this.ai=(0,n.hd)((0,n.do)(ma,null)),this.gt=(0,n.hd)(Gt.B3),this.J=(0,n.hd)(tr),this.ep=(0,n.hd)(i.JW),this.oL=(0,n.hd)(Ht)}get composing(){return this.hi}get composition(){return this.ri}attaching(t,e){return this.hi=(0,n.ui)(this.queue(new va(this.template,this.component,this.model,void 0),t),(t=>{this.ai.ci(t)&&(this.hi=void 0)}))}detaching(t){const e=this.ri,s=this.hi;return this.ai.invalidate(),this.ri=this.hi=void 0,(0,n.ui)(s,(()=>e?.deactivate(t)))}propertyChanged(t){"composing"!==t&&"composition"!==t&&("model"!==t||null==this.ri?"tag"===t&&this.ri?.controller.vmKind===Un||(this.hi=(0,n.ui)(this.hi,(()=>(0,n.ui)(this.queue(new va(this.template,this.component,this.model,t),void 0),(t=>{this.ai.ci(t)&&(this.hi=void 0)}))))):this.ri.update(this.model))}queue(t,e){const s=this.ai,i=this.ri;return(0,n.ui)(s.create(t),(t=>s.ci(t)?(0,n.ui)(this.compose(t),(r=>s.ci(t)?(0,n.ui)(r.activate(e),(()=>s.ci(t)?(this.ri=r,(0,n.ui)(i?.deactivate(e),(()=>t))):(0,n.ui)(r.controller.deactivate(r.controller,this.$controller),(()=>(r.controller.dispose(),t))))):(r.controller.dispose(),t))):t))}compose(t){const{ui:e,fi:s,di:i}=t.change,{c:r,$controller:o,l:a,li:h}=this,c=this.mi(this.J.controller.container,s),l=r.createChild(),u=this.p.document.createElement(null==c?this.tag??"div":c.name);let d;a.parentNode.insertBefore(u,a),d=null==c?null==this.tag?Tr(u):null:c.containerless?Tr(u):null;const p=()=>{if(u.remove(),null!=d){let t=d.$start.nextSibling,e=null;for(;null!==t&&t!==d;)e=t.nextSibling,t.remove(),t=e;d.$start?.remove(),d.remove()}},f=this.gi(l,"string"==typeof s?c.Type:s,u,d),g=()=>{const s=h.captures??n.tR;if(null!==c){const e=c.capture,[i,r]=s.reduce(((t,s)=>(t[!(s.target in c.bindables)&&(!0===e||(0,n.Tn)(e)&&e(s.target))?0:1].push(s),t)),[[],[]]),a=An.$el(l,f,u,{projections:h.projections,captures:i},c,d);return this.pi(u,c,r).forEach((t=>a.addBinding(t))),new ba(a,(t=>a.activate(t??a,o,o.scope.parent)),(t=>(0,n.ui)(a.deactivate(t??a,o),p)),(t=>f.activate?.(t)),t)}{const i=Or.create({name:Jr.generateName(),template:e}),r=this.r.getViewFactory(i,l),a=An.$view(r,o),h="auto"===this.scopeBehavior?Se.fromParent(this.parent.scope,f):Se.create(f);return a.setHost(u),null==d?this.pi(u,i,s).forEach((t=>a.addBinding(t))):a.setLocation(d),new ba(a,(t=>a.activate(t??a,o,h)),(t=>(0,n.ui)(a.deactivate(t??a,o),p)),(t=>f.activate?.(t)),t)}};return"activate"in f?(0,n.ui)(f.activate(i),(()=>g())):g()}gi(t,e,s,i){if(null==e)return new ga;if("object"==typeof e)return e;const r=this.p;Rr(t,s,r),Ke(t,br,new n.JF("IRenderLocation",i));const o=t.invoke(e);return Ke(t,e,new n.JF("au-compose.component",o)),o}mi(t,e){if("string"==typeof e){const s=Jr.find(t,e);if(null==s)throw be(806,e);return s}const s=(0,n.Tn)(e)?e:e?.constructor;return Jr.isType(s,void 0)?Jr.getDefinition(s,null):null}pi(t,e,s){const i=new er(this.$controller,{projections:null,captures:s},this.J.parent);return Ai.create(i,t,e,this.r,this.gt,this.p,this.ep,this.oL)}}fa.$au={type:Dr,name:"au-compose",capture:!0,containerless:!0,bindables:["template","component","model",{name:"scopeBehavior",set:t=>{if("scoped"===t||"auto"===t)return t;throw be(805,t)}},{name:"composing",mode:Ne},{name:"composition",mode:Ne},"tag"]};class ga{}class ma{constructor(){this.id=0}ci(t){return t.id===this.id}create(t){return(0,n.ui)(t.load(),(t=>new ya(++this.id,t)))}invalidate(){this.id++}}class va{constructor(t,e,s,i){this.ui=t,this.fi=e,this.di=s,this.xi=i}load(){return(0,n.yL)(this.ui)||(0,n.yL)(this.fi)?Promise.all([this.ui,this.fi]).then((([t,e])=>new wa(t,e,this.di,this.xi))):new wa(this.ui,this.fi,this.di,this.xi)}}class wa{constructor(t,e,s,i){this.ui=t,this.fi=e,this.di=s,this.xi=i}}class ya{constructor(t,e){this.id=t,this.change=e}}class ba{constructor(t,e,s,i,n){this.controller=t,this.start=e,this.stop=s,this.update=i,this.context=n,this.state=0}activate(t){if(0!==this.state)throw be(807,this);return this.state=1,this.start(t)}deactivate(t){switch(this.state){case 1:return this.state=-1,this.stop(t);case-1:throw be(808);default:this.state=-1}}}const Sa=qe("ISanitizer",(t=>t.singleton(class{sanitize(){throw be(99,"sanitize")}})));class Ca{constructor(){this.bi=(0,n.hd)(Sa)}toView(t){return null==t?null:this.bi.sanitize(t)}}Ca.$au={type:Bs,name:"sanitize"};class ka{constructor(){this.el=(0,n.hd)(wr),this.p=(0,n.hd)(ws),this.wi=!1,this.L=null,this.$val="",this.$prio="",this.update=()=>{this.L=null,Boolean(this.value)!==this.yi&&(this.yi===this.ki?(this.yi=!this.ki,this.$val=this.el.style.getPropertyValue("display"),this.$prio=this.el.style.getPropertyPriority("display"),this.el.style.setProperty("display","none","important")):(this.yi=this.ki,this.el.style.setProperty("display",this.$val,this.$prio),""===this.el.getAttribute("style")&&this.el.removeAttribute("style")))};const t=(0,n.hd)(Gt.OA);this.yi=this.ki="hide"!==t.alias}binding(){this.wi=!0,this.update()}detaching(){this.wi=!1,this.L?.cancel(),this.L=null}valueChanged(){this.wi&&null===this.L&&(this.L=this.p.domQueue.queueTask(this.update))}}ka.$au={type:Ss,name:"show",bindables:["value"],aliases:["hide"]};const Ta=[no,class{static register(t){t.register(n.cH.singleton(this,this),n.cH.aliasTo(this,Ot))}constructor(){this.tracked=[],this.A=null,this.R=0,this.p=(0,n.hd)(n.r_),this.check=()=>{if(Lt.disabled)return;if(++this.R<Lt.timeoutsPerCheck)return;this.R=0;const t=this.tracked,e=t.length;let s,i=0;for(;i<e;++i)s=t[i],s.isDirty()&&s.flush()},y(Bt,null)}createProperty(t,e){if(Lt.throw)throw b(218,e);return new Bt(this,t,e)}addProperty(t){this.tracked.push(t),1===this.tracked.length&&(this.A=this.p.taskQueue.queueTask(this.check,{persistent:!0}))}removeProperty(t){this.tracked.splice(this.tracked.indexOf(t),1),0===this.tracked.length&&(this.A.cancel(),this.A=null)}},wo],xa=[Gt.IZ,Gt.xW,Gt.bp,mi],Ia=(Gt.lw,Gt._G,[Gt.Ou,Gt.OK,Gt.MI,Gt.vk,Gt.GB,Gt.m9,Gt.W_,Gt.Rw,Gt.p5,Gt.HF,Gt.Wu,Gt.ao,Gt.XF]),Aa=[hs,is,ns,rs,us,ps,os,Ca,Io,Ao,Ro,zo,Jo,Zo,Xo,ta,ea,sa,ia,ra,oa,aa,ko,To,xo,fa,ca,ha,ka,ua],$a=[zi,Ji,Ki,Qi,Hi,qi,Ui,_i,Wi,Zi,nn,Xi,tn,en,sn,Gi,rn,on],Ea=Ra(n.lQ);function Ra(t){return{optionsProvider:t,register(e){const s={coercingOptions:{enableCoercion:!1,coerceNullish:!1}};return t(s),e.register(We(m,s.coercingOptions),...Ta,...Aa,...xa,...Ia,...$a)},customize:e=>Ra(e??t)}}},467:(t,e,s)=>{s.d(e,{B3:()=>m,Fv:()=>D,GB:()=>xt,HF:()=>Pt,IZ:()=>H,Ii:()=>v,MI:()=>Tt,Mg:()=>Jt,OA:()=>J,OK:()=>Ct,Ou:()=>It,Rw:()=>$t,W_:()=>Ot,Wu:()=>Nt,XF:()=>Lt,XP:()=>B,Y_:()=>re,Zm:()=>g,_G:()=>U,ao:()=>Rt,bp:()=>q,lp:()=>z,lw:()=>_,m9:()=>At,p5:()=>Et,vk:()=>kt,xW:()=>V});var i=s(452),n=s(220),r=s(529);const o=t=>"string"==typeof t,a=i.DI.createInterface,h=Object.freeze,{aliasTo:c,singleton:l}=i.cH,u="Interpolation",d="IsFunction",p="IsProperty",f="custom-element",g=h({default:0,oneTime:1,toView:2,fromView:4,twoWay:6}),m=a("ITemplateCompiler"),v=a("IAttrMapper"),w=(t,...e)=>new Error(`AUR${String(t).padStart(4,"0")}:${e.map(String)}`);var y,b,S,C,k;class T{constructor(t,e,s,i){if(this.chars=t,this.repeat=e,this.isSymbol=s,this.isInverted=i,i)switch(t.length){case 0:this.has=this.i;break;case 1:this.has=this.u;break;default:this.has=this.A}else switch(t.length){case 0:this.has=this.I;break;case 1:this.has=this.B;break;default:this.has=this.P}}equals(t){return this.chars===t.chars&&this.repeat===t.repeat&&this.isSymbol===t.isSymbol&&this.isInverted===t.isInverted}P(t){return this.chars.includes(t)}B(t){return this.chars===t}I(t){return!1}A(t){return!this.chars.includes(t)}u(t){return this.chars!==t}i(t){return!0}}class x{constructor(){this.parts=i.tR,this.C="",this.T={},this.R={}}get pattern(){const t=this.C;return""===t?null:t}set pattern(t){null==t?(this.C="",this.parts=i.tR):(this.C=t,this.parts=this.R[t])}append(t,e){const s=this.T;void 0===s[t]?s[t]=e:s[t]+=e}next(t){const e=this.T;let s;void 0!==e[t]&&(s=this.R,void 0===s[t]?s[t]=[e[t]]:s[t].push(e[t]),e[t]=void 0)}}class I{get C(){return this._?this.L[0]:null}constructor(t,...e){this.charSpec=t,this.V=[],this.H=null,this._=!1,this.L=e}findChild(t){const e=this.V,s=e.length;let i=null,n=0;for(;n<s;++n)if(i=e[n],t.equals(i.charSpec))return i;return null}append(t,e){const s=this.L;s.includes(e)||s.push(e);let i=this.findChild(t);return null==i&&(i=new I(t,e),this.V.push(i),t.repeat&&i.V.push(i)),i}findMatches(t,e){const s=[],i=this.V,n=i.length;let r=0,o=null,a=0,h=0;for(;a<n;++a)if(o=i[a],o.charSpec.has(t))if(s.push(o),r=o.L.length,h=0,o.charSpec.isSymbol)for(;h<r;++h)e.next(o.L[h]);else for(;h<r;++h)e.append(o.L[h],t);return s}}class A{constructor(t){this.text=t;const e=this.M=t.length,s=this.$=[];let i=0;for(;e>i;++i)s.push(new T(t[i],!1,!1,!1))}eachChar(t){const e=this.M,s=this.$;let i=0;for(;e>i;++i)t(s[i])}}class ${constructor(t){this.text="PART",this.F=new T(t,!0,!1,!0)}eachChar(t){t(this.F)}}class E{constructor(t){this.text=t,this.F=new T(t,!1,!0,!1)}eachChar(t){t(this.F)}}class R{constructor(){this.statics=0,this.dynamics=0,this.symbols=0}}const N=a("ISyntaxInterpreter",(t=>t.singleton(P)));class P{constructor(){this.O=new I(null),this.W=[this.O]}add(t){t=t.slice(0).sort(((t,e)=>t.pattern>e.pattern?1:-1));const e=t.length;let s,i,n,r,o,a,h,c,l=0;for(;e>l;){for(s=this.O,i=t[l],n=i.pattern,r=new R,o=this.N(i,r),a=o.length,h=t=>s=s.append(t,n),c=0;a>c;++c)o[c].eachChar(h);s.H=r,s._=!0,++l}}interpret(t){const e=new x,s=t.length;let i,n=this.W,r=0;for(;r<s&&(n=this.j(n,t.charAt(r),e),0!==n.length);++r);return n=n.filter(O),n.length>0&&(n.sort(L),i=n[0],i.charSpec.isSymbol||e.next(i.C),e.pattern=i.C),e}j(t,e,s){const i=[];let n=null;const r=t.length;let o=0;for(;o<r;++o)n=t[o],i.push(...n.findMatches(e,s));return i}N(t,e){const s=[],i=t.pattern,n=i.length,r=t.symbols;let o=0,a=0,h="";for(;o<n;)h=i.charAt(o),0!==r.length&&r.includes(h)?o!==a?(s.push(new A(i.slice(a,o))),++e.statics,a=o):(s.push(new E(i.slice(a,o+1))),++e.symbols,a=++o):o===a&&"P"===h&&"PART"===i.slice(o,o+4)?(a=o+=4,s.push(new $(r)),++e.dynamics):++o;return a!==o&&(s.push(new A(i.slice(a,o))),++e.statics),s}}function O(t){return t._}function L(t,e){const s=t.H,i=e.H;return s.statics!==i.statics?i.statics-s.statics:s.dynamics!==i.dynamics?i.dynamics-s.dynamics:s.symbols!==i.symbols?i.symbols-s.symbols:0}class B{constructor(t,e,s,i,n=null){this.rawName=t,this.rawValue=e,this.target=s,this.command=i,this.parts=n}}const M=a("IAttributePattern"),j=a("IAttributeParser",(t=>t.singleton(F)));class F{constructor(){this.U={},this.L={},this.q=!1,this.G=[],this.J=(0,i.hd)(N),this.c=(0,i.hd)(i.p7)}registerPattern(t,e){if(this.q)throw w(88);const s=this.L;for(const{pattern:i}of t){if(null!=s[i])throw w(89,i);s[i]={patternType:e}}this.G.push(...t)}K(){this.J.add(this.G);const t=this.c;for(const[,e]of Object.entries(this.L))e.pattern=t.get(e.patternType)}parse(t,e){this.q||(this.K(),this.q=!0);let s=this.U[t];null==s&&(s=this.U[t]=this.J.interpret(t));const i=s.pattern;return null==i?new B(t,e,t,null,null):this.L[i].pattern[i](t,e,s.parts)}}const D=h({name:(0,i.r$)("attribute-pattern"),create:(t,e)=>({register(s){s.get(j).registerPattern(t,e),l(M,e).register(s)}})});class V{"PART.PART"(t,e,s){return new B(t,e,s[0],s[1])}"PART.PART.PART"(t,e,s){return new B(t,e,`${s[0]}.${s[1]}`,s[2])}}y=Symbol.metadata,V[y]={[i.Ri]:D.create([{pattern:"PART.PART",symbols:"."},{pattern:"PART.PART.PART",symbols:"."}],V)};class H{ref(t,e,s){return new B(t,e,"element","ref")}"PART.ref"(t,e,s){let i=s[0];return"view-model"===i&&(i="component"),new B(t,e,i,"ref")}}b=Symbol.metadata,H[b]={[i.Ri]:D.create([{pattern:"ref",symbols:""},{pattern:"PART.ref",symbols:"."}],H)};class q{"PART.trigger:PART"(t,e,s){return new B(t,e,s[0],"trigger",s)}"PART.capture:PART"(t,e,s){return new B(t,e,s[0],"capture",s)}}S=Symbol.metadata,q[S]={[i.Ri]:D.create([{pattern:"PART.trigger:PART",symbols:".:"},{pattern:"PART.capture:PART",symbols:".:"}],q)};class U{":PART"(t,e,s){return new B(t,e,s[0],"bind")}}C=Symbol.metadata,U[C]={[i.Ri]:D.create([{pattern:":PART",symbols:":"}],U)};class _{"@PART"(t,e,s){return new B(t,e,s[0],"trigger")}"@PART:PART"(t,e,s){return new B(t,e,s[0],"trigger",[s[0],"trigger",...s.slice(1)])}}k=Symbol.metadata,_[k]={[i.Ri]:D.create([{pattern:"@PART",symbols:"@"},{pattern:"@PART:PART",symbols:"@:"}],_)};const W=n.OS.get;n.OS.has;const K=n.OS.define,Q="rg",z=h({hydrateElement:"ra",hydrateAttribute:"rb",hydrateTemplateController:"rc",hydrateLetElement:"rd",setProperty:"re",interpolation:"rf",propertyBinding:Q,letBinding:"ri",refBinding:"rj",iteratorBinding:"rk",multiAttr:"rl",textBinding:"ha",listenerBinding:"hb",attributeBinding:"hc",stylePropertyBinding:"hd",setAttribute:"he",setClassAttribute:"hf",setStyleAttribute:"hg",spreadTransferedBinding:"hs",spreadElementProp:"hp",spreadValueBinding:"svb"}),J=a("Instruction");class G{constructor(t,e){this.from=t,this.to=e,this.type="rf"}}class Y{constructor(t,e,s){this.from=t,this.to=e,this.mode=s,this.type=Q}}class Z{constructor(t,e,s){this.forOf=t,this.to=e,this.props=s,this.type="rk"}}class X{constructor(t,e){this.from=t,this.to=e,this.type="rj"}}class tt{constructor(t,e){this.value=t,this.to=e,this.type="re"}}class et{constructor(t,e,s){this.value=t,this.to=e,this.command=s,this.type="rl"}}class st{constructor(t,e,s,i,n,r){this.res=t,this.props=e,this.projections=s,this.containerless=i,this.captures=n,this.data=r,this.type="ra"}}class it{constructor(t,e,s){this.res=t,this.alias=e,this.props=s,this.type="rb"}}class nt{constructor(t,e,s,i){this.def=t,this.res=e,this.alias=s,this.props=i,this.type="rc"}}class rt{constructor(t,e){this.instructions=t,this.toBindingContext=e,this.type="rd"}}class ot{constructor(t,e){this.from=t,this.to=e,this.type="ri"}}class at{constructor(t){this.from=t,this.type="ha"}}class ht{constructor(t,e,s,i){this.from=t,this.to=e,this.capture=s,this.modifier=i,this.type="hb"}}class ct{constructor(t,e){this.value=t,this.to=e,this.type="he"}}class lt{constructor(t){this.value=t,this.type="hf"}}class ut{constructor(t){this.value=t,this.type="hg"}}class dt{constructor(t,e,s){this.attr=t,this.from=e,this.to=s,this.type="hc"}}class pt{constructor(){this.type="hs"}}class ft{constructor(t){this.instruction=t,this.type="hp"}}class gt{constructor(t,e){this.target=t,this.from=e,this.type="svb"}}class mt{constructor(t,e,s,i){this.Type=t,this.name=e,this.aliases=s,this.key=i}static create(t,e){let s,n;return o(t)?(s=t,n={name:s}):(s=t.name,n=t),new mt(e,(0,i.c4)(bt(e,"name"),s),(0,i.TR)(bt(e,"aliases"),n.aliases,e.aliases),yt(s))}register(t,e){const s=this.Type,i="string"==typeof e?yt(e):this.key,n=this.aliases;t.has(i,!1)||t.register(t.has(s,!1)?null:l(s,s),c(s,i),...n.map((t=>c(s,yt(t)))))}}const vt="binding-command",wt=(0,i.r$)(vt),yt=t=>`${wt}:${t}`,bt=(t,e)=>W(i.Zs.annotation.keyFor(e),t),St=(()=>{const t="__au_static_resource__",e=(e,s,i)=>{let n=W(t,e);return null==n&&e.$au?.type===s&&(n=i(e.$au,e),K(n,e,t)),n};return h({name:wt,keyFrom:yt,define(t,e){const s=mt.create(t,e),n=s.Type;return K(s,n,wt,i.n_),n},getAnnotation:bt,find(t,s){const i=t.find(vt,s);return null==i?null:W(wt,i)??e(i,vt,mt.create)??null},get:(t,e)=>t.get((0,i.Zc)(yt(e)))})})();class Ct{get ignoreAttr(){return!1}build(t,e,s){let n=t.attr.target,r=t.attr.rawValue;return r=""===r?(0,i.xQ)(n):r,n=null==t.bindable?s.map(t.node,n)??(0,i.xQ)(n):t.bindable.name,new Y(e.parse(r,p),n,1)}}Ct.$au={type:vt,name:"one-time"};class kt{get ignoreAttr(){return!1}build(t,e,s){let n=t.attr.target,r=t.attr.rawValue;return r=""===r?(0,i.xQ)(n):r,n=null==t.bindable?s.map(t.node,n)??(0,i.xQ)(n):t.bindable.name,new Y(e.parse(r,p),n,2)}}kt.$au={type:vt,name:"to-view"};class Tt{get ignoreAttr(){return!1}build(t,e,s){const n=t.attr;let r=n.target,o=n.rawValue;return o=""===o?(0,i.xQ)(r):o,r=null==t.bindable?s.map(t.node,r)??(0,i.xQ)(r):t.bindable.name,new Y(e.parse(o,p),r,4)}}Tt.$au={type:vt,name:"from-view"};class xt{get ignoreAttr(){return!1}build(t,e,s){const n=t.attr;let r=n.target,o=n.rawValue;return o=""===o?(0,i.xQ)(r):o,r=null==t.bindable?s.map(t.node,r)??(0,i.xQ)(r):t.bindable.name,new Y(e.parse(o,p),r,6)}}xt.$au={type:vt,name:"two-way"};class It{get ignoreAttr(){return!1}build(t,e,s){const n=t.attr,r=t.bindable;let a,h,c=n.rawValue,l=n.target;return c=""===c?(0,i.xQ)(l):c,null==r?(h=s.isTwoWay(t.node,l)?6:2,l=s.map(t.node,l)??(0,i.xQ)(l)):(a=t.def.defaultBindingMode??0,h=0===r.mode||null==r.mode?null==a||0===a?2:a:r.mode,l=r.name),new Y(e.parse(c,p),l,o(h)?g[h]??0:h)}}It.$au={type:vt,name:"bind"};class At{constructor(){this.X=(0,i.hd)(j)}get ignoreAttr(){return!1}build(t,e){const s=null===t.bindable?(0,i.xQ)(t.attr.target):t.bindable.name,n=e.parse(t.attr.rawValue,"IsIterator");let r=i.tR;if(n.semiIdx>-1){const e=t.attr.rawValue.slice(n.semiIdx+1),s=e.indexOf(":");if(s>-1){const t=e.slice(0,s).trim(),i=e.slice(s+1).trim(),n=this.X.parse(t,i);r=[new et(i,n.target,n.command)]}}return new Z(n,s,r)}}At.$au={type:vt,name:"for"};class $t{get ignoreAttr(){return!0}build(t,e){return new ht(e.parse(t.attr.rawValue,d),t.attr.target,!1,t.attr.parts?.[2]??null)}}$t.$au={type:vt,name:"trigger"};class Et{get ignoreAttr(){return!0}build(t,e){return new ht(e.parse(t.attr.rawValue,d),t.attr.target,!0,t.attr.parts?.[2]??null)}}Et.$au={type:vt,name:"capture"};class Rt{get ignoreAttr(){return!0}build(t,e){const s=t.attr,n=s.target;let r=s.rawValue;return r=""===r?(0,i.xQ)(n):r,new dt(n,e.parse(r,p),n)}}Rt.$au={type:vt,name:"attr"};class Nt{get ignoreAttr(){return!0}build(t,e){return new dt("style",e.parse(t.attr.rawValue,p),t.attr.target)}}Nt.$au={type:vt,name:"style"};class Pt{get ignoreAttr(){return!0}build(t,e){return new dt("class",e.parse(t.attr.rawValue,p),t.attr.target)}}Pt.$au={type:vt,name:"class"};class Ot{get ignoreAttr(){return!0}build(t,e){return new X(e.parse(t.attr.rawValue,p),t.attr.target)}}Ot.$au={type:vt,name:"ref"};class Lt{get ignoreAttr(){return!1}build(t){return new gt(t.attr.target,t.attr.rawValue)}}Lt.$au={type:vt,name:"spread"},"function"==typeof SuppressedError&&SuppressedError;const Bt=a("ITemplateElementFactory",(t=>t.singleton(jt))),Mt={};class jt{constructor(){this.p=(0,i.hd)(i.r_),this.Y=this.t()}t(){return this.p.document.createElement("template")}createTemplate(t){if(o(t)){let e=Mt[t];if(void 0===e){const s=this.Y;s.innerHTML=t;const i=s.content.firstElementChild;!function(t){if(null==t)return!0;if("TEMPLATE"!==t.nodeName)return!0;if(null!=t.nextElementSibling)return!0;const e=t.previousSibling;if(null!=e&&3===e.nodeType)return e.textContent.trim().length>0;const s=t.nextSibling;return null!=s&&3===s.nodeType&&s.textContent.trim().length>0}(i)?(s.content.removeChild(i),e=i):(this.Y=this.t(),e=s),Mt[t]=e}return e.cloneNode(!0)}if("TEMPLATE"!==t.nodeName){const e=this.t();return e.content.appendChild(t),e}return t.parentNode?.removeChild(t),t.cloneNode(!0)}}const Ft="au-start",Dt="au-end",Vt=(t,e,s)=>t.insertBefore(e,s),Ht=(t,e,s)=>{if(null===t)return;const i=s.length;let n=0;for(;i>n;)t.insertBefore(s[n],e),++n},qt=(t,e)=>t.content.appendChild(e),Ut=(t,e)=>{const s=e.length;let i=0;for(;s>i;)t.content.appendChild(e[i]),++i},_t=t=>1===t.nodeType,Wt=t=>3===t.nodeType,Kt="au-slot",Qt="default",zt=(t=>()=>"anonymous-"+ ++t)(0);class Jt{constructor(){this.debug=!1,this.resolveResources=!0}compile(t,e){if(null==t.template||!1===t.needsCompile)return t;const s=new Zt(t,e,null,null,void 0),n=o(t.template)||!t.enhance?s.Z.createTemplate(t.template):t.template,r=n.nodeName===Gt&&null!=n.content,a=r?n.content:n,h=ue.findAll(e),c=h.length;let l=0;if(c>0)for(;c>l;)h[l].compiling?.(n),++l;if(n.hasAttribute(he))throw w(701,t);return this.tt(a,s),this.et(a,s),{...t,name:t.name||zt(),dependencies:(t.dependencies??i.tR).concat(s.deps??i.tR),instructions:s.rows,surrogates:r?this.nt(n,s):i.tR,template:n,hasSlots:s.hasSlot,needsCompile:!1}}compileSpread(t,e,s,n,r){const o=new Zt(t,s,null,null,void 0),a=[],h=r??o.it(n.nodeName.toLowerCase()),c=null!==h,l=o.ep,d=e.length;let p,f,g,m,v,y,b,S,C,k,T=0,x=null,I=null;for(;d>T;++T)if(p=e[T],C=p.target,k=p.rawValue,"...$attrs"!==C)if(I=o.rt(p),null!==I&&I.ignoreAttr)se.node=n,se.attr=p,se.bindable=null,se.def=null,a.push(I.build(se,o.ep,o.m));else if(c&&(m=o.st(h),v=m.attrs[C],void 0!==v))null==I?(b=l.parse(k,u),a.push(new ft(null==b?new tt(k,v.name):new G(b,v.name)))):(se.node=n,se.attr=p,se.bindable=v,se.def=h,a.push(new ft(I.build(se,o.ep,o.m))));else if(x=o.lt(C),null===x)if(null==I)if(b=l.parse(k,u),null!=b)a.push(new G(b,o.m.map(n,C)??(0,i.xQ)(C)));else switch(C){case"class":a.push(new lt(k));break;case"style":a.push(new ut(k));break;default:a.push(new ct(k,C))}else se.node=n,se.attr=p,se.bindable=null,se.def=null,a.push(I.build(se,o.ep,o.m));else{if(x.isTemplateController)throw w(9998,C);m=o.st(x),S=!1===x.noMultiBindings&&null===I&&Xt(k),S?g=this.ot(n,k,x,o):(y=m.primary,null===I?(b=l.parse(k,u),g=[null===b?new tt(k,y.name):new G(b,y.name)]):(se.node=n,se.attr=p,se.bindable=y,se.def=x,g=[I.build(se,o.ep,o.m)])),(f??=[]).push(new it(this.resolveResources?x:x.name,null!=x.aliases&&x.aliases.includes(C)?C:void 0,g))}else a.push(new pt);return te(),null!=f?f.concat(a):a}nt(t,e){const s=[],n=t.attributes,r=e.ep;let o,a,h,c,l,d,p,f,g,m,v,y,b=n.length,S=0,C=null,k=null;for(;b>S;++S){if(o=n[S],a=o.name,h=o.value,c=e.X.parse(a,h),v=c.target,y=c.rawValue,ie[v])throw w(702,a);if(k=e.rt(c),null!==k&&k.ignoreAttr)se.node=t,se.attr=c,se.bindable=null,se.def=null,s.push(k.build(se,e.ep,e.m));else if(C=e.lt(v),null===C)if(null===k)if(g=r.parse(y,u),null!=g)t.removeAttribute(a),--S,--b,s.push(new G(g,e.m.map(t,v)??(0,i.xQ)(v)));else switch(a){case"class":s.push(new lt(y));break;case"style":s.push(new ut(y));break;default:s.push(new ct(y,a))}else se.node=t,se.attr=c,se.bindable=null,se.def=null,s.push(k.build(se,e.ep,e.m));else{if(C.isTemplateController)throw w(703,v);p=e.st(C),m=!1===C.noMultiBindings&&null===k&&Xt(y),m?d=this.ot(t,y,C,e):(f=p.primary,null===k?(g=r.parse(y,u),d=null===g?""===y?[]:[new tt(y,f.name)]:[new G(g,f.name)]):(se.node=t,se.attr=c,se.bindable=f,se.def=C,d=[k.build(se,e.ep,e.m)])),t.removeAttribute(a),--S,--b,(l??=[]).push(new it(this.resolveResources?C:C.name,null!=C.aliases&&C.aliases.includes(v)?v:void 0,d))}}return te(),null!=l?l.concat(s):s}et(t,e){switch(t.nodeType){case 1:return"LET"===t.nodeName?this.ut(t,e):this.ct(t,e);case 3:return this.ht(t,e);case 11:{let s=t.firstChild;for(;null!==s;)s=this.et(s,e);break}}return t.nextSibling}ut(t,e){const s=t.attributes,n=s.length,o=[],a=e.ep;let h,c,l,d,f,g,m,v,y=!1,b=0;for(;n>b;++b)if(h=s[b],l=h.name,d=h.value,"to-binding-context"!==l)if(c=e.X.parse(l,d),g=c.target,m=c.rawValue,f=e.rt(c),null===f)v=a.parse(m,u),o.push(new ot(null===v?new r.fU(m):v,(0,i.xQ)(g)));else{if("bind"!==c.command)throw w(704,c);o.push(new ot(a.parse(m,p),(0,i.xQ)(g)))}else y=!0;return e.rows.push([new rt(o,y)]),this.dt(t,e).nextSibling}ct(t,e){const s=t.nextSibling,n=(t.getAttribute("as-element")??t.nodeName).toLowerCase(),r=e.it(n),o=null!==r,a=o&&null!=r.shadowOptions,h=r?.capture,c=null!=h&&"boolean"!=typeof h,l=h?[]:i.tR,d=e.ep,p=this.debug?i.lQ:()=>{t.removeAttribute(v),--F,--j};let g,m,v,y,b,S,C,k,T,x,I,A,$,E,R,N,P,O,L,B,M=t.attributes,j=M.length,F=0,D=null,V=!1,H=null,q=!0,U=!1,_=!1,W=!1,K=0;if("slot"===n){if(null==e.root.def.shadowOptions)throw w(717,e.root.def.name);e.root.hasSlot=!0}for(o&&(L={},q=r.processContent?.call(r.Type,t,e.p,L),M=t.attributes,j=M.length);j>F;++F){switch(m=M[F],v=m.name,y=m.value,v){case"as-element":case"containerless":p(),U=U||"containerless"===v;continue}if(b=e.X.parse(v,y),H=e.rt(b),P=b.target,O=b.rawValue,h&&(!c||c&&h(P))){if(null!=H&&H.ignoreAttr){p(),l.push(b);continue}if(_=P!==Kt&&"slot"!==P&&(-1===(K=P.indexOf("..."))||0===K&&"...$attrs"===P),_&&(R=e.st(r),null==R.attrs[P]&&!e.lt(P)?.isTemplateController)){p(),l.push(b);continue}}if("...$attrs"!==P)if(H?.ignoreAttr)se.node=t,se.attr=b,se.bindable=null,se.def=null,(S??=[]).push(H.build(se,e.ep,e.m)),p();else{if(0===P.indexOf("...")){if(o&&"$element"!==(P=P.slice(3))){(C??=[]).push(new gt("$bindables","$bindables"===P?O:P)),p();continue}throw w(720,P)}if(o){if(R=e.st(r),k=R.attrs[P],void 0!==k){null===H?($=d.parse(O,u),(C??=[]).push(null==$?new tt(O,k.name):new G($,k.name))):(se.node=t,se.attr=b,se.bindable=k,se.def=r,(C??=[]).push(H.build(se,e.ep,e.m))),p();continue}if("$bindables"===P){null!=H&&(se.node=t,se.attr=b,se.bindable=null,se.def=r,(C??=[]).push(H.build(se,e.ep,e.m))),p();continue}}if("$bindables"===P)throw w(721,t.nodeName,P,O);D=e.lt(P),null===D?null!==H?(se.node=t,se.attr=b,se.bindable=null,se.def=null,(S??=[]).push(H.build(se,e.ep,e.m)),p()):($=d.parse(O,u),null!=$&&(p(),(S??=[]).push(new G($,e.m.map(t,P)??(0,i.xQ)(P))))):(R=e.st(D),V=!1===D.noMultiBindings&&null===H&&Xt(O),V?x=this.ot(t,O,D,e):(N=R.primary,null===H?($=d.parse(O,u),x=null===$?""===O?[]:[new tt(O,N.name)]:[new G($,N.name)]):(se.node=t,se.attr=b,se.bindable=N,se.def=D,x=[H.build(se,e.ep,e.m)])),p(),D.isTemplateController?(I??=[]).push(new nt(ee,this.resolveResources?D:D.name,void 0,x)):(T??=[]).push(new it(this.resolveResources?D:D.name,null!=D.aliases&&D.aliases.includes(P)?P:void 0,x)))}else(S??=[]).push(new pt),p()}if(te(),this.ft(t,S)&&null!=S&&S.length>1&&this.gt(t,S),o&&(E=new st(this.resolveResources?r:r.name,C??i.tR,null,U,l,L)),null==S&&null==E&&null==T||(g=i.tR.concat(E??i.tR,T??i.tR,S??i.tR),W=!0),null!=I){let s;j=I.length-1,F=j,A=I[F],Yt(t)?(s=e.t(),Ut(s,[e.wt(),e.bt(Ft),e.bt(Dt)])):(this.At(t,e),"TEMPLATE"===t.nodeName?s=t:(s=e.t(),qt(s,t)));const i=s,h=e.yt(null==g?[]:[g]);let c,l,u,d,p,m,v,y,b=!1,S=0,C=0,k=t.firstChild,T=!1;if(!1!==q)for(;null!==k;){if(l=_t(k)?k.getAttribute(Kt):null,b=null!==l||o&&!a,c=k.nextSibling,b){if(!o)throw w(706,l,n);k.removeAttribute?.(Kt),T=Wt(k)&&""===k.textContent.trim(),T||((d??={})[l||Qt]??=[]).push(k),t.removeChild(k)}k=c}if(null!=d){for(l in u={},d){for(s=e.t(),p=d[l],S=0,C=p.length;C>S;++S)m=p[S],"TEMPLATE"===m.nodeName?m.attributes.length>0?qt(s,m):qt(s,m.content):qt(s,m);y=e.yt(),this.et(s.content,y),u[l]={name:zt(),type:f,template:s,instructions:y.rows,needsCompile:!1}}E.projections=u}if(W&&(o&&(U||r.containerless)?this.At(t,e):this.dt(t,e)),B=!o||!r.containerless&&!U&&!1!==q,B)if(t.nodeName===Gt)this.et(t.content,h);else for(k=t.firstChild;null!==k;)k=this.et(k,h);for(A.def={name:zt(),type:f,template:i,instructions:h.rows,needsCompile:!1};F-- >0;)A=I[F],s=e.t(),v=e.wt(),Ut(s,[v,e.bt(Ft),e.bt(Dt)]),A.def={name:zt(),type:f,template:s,needsCompile:!1,instructions:[[I[F+1]]]};e.rows.push([A])}else{null!=g&&e.rows.push(g);let s,i,h,c,l,u,d,p=t.firstChild,m=!1,v=null,y=!1,b=0,S=0;if(!1!==q)for(;null!==p;){if(i=_t(p)?p.getAttribute(Kt):null,m=null!==i||o&&!a,s=p.nextSibling,m){if(!o)throw w(706,i,n);p.removeAttribute?.(Kt),y=Wt(p)&&""===p.textContent.trim(),y||((h??={})[i||Qt]??=[]).push(p),t.removeChild(p)}p=s}if(null!=h){for(i in v={},h){for(u=e.t(),c=h[i],b=0,S=c.length;S>b;++b)l=c[b],l.nodeName===Gt?l.attributes.length>0?qt(u,l):qt(u,l.content):qt(u,l);d=e.yt(),this.et(u.content,d),v[i]={name:zt(),type:f,template:u,instructions:d.rows,needsCompile:!1}}E.projections=v}if(W&&(o&&(U||r.containerless)?this.At(t,e):this.dt(t,e)),B=!o||!r.containerless&&!U&&!1!==q,B&&t.childNodes.length>0)for(p=t.firstChild;null!==p;)p=this.et(p,e)}return s}ht(t,e){const s=t.parentNode,i=e.ep.parse(t.textContent,u),n=t.nextSibling;let r,o,a,h,c;if(null!==i){for(({parts:r,expressions:o}=i),(c=r[0])&&Vt(s,e.It(c),t),a=0,h=o.length;h>a;++a)Ht(s,t,[e.wt(),e.It(" ")]),(c=r[a+1])&&Vt(s,e.It(c),t),e.rows.push([new at(o[a])]);s.removeChild(t)}return n}ot(t,e,s,i){const n=i.st(s),r=e.length,o=[];let a,h,c,l,d,p,f=0,g=0;for(let m=0;m<r;++m)if(g=e.charCodeAt(m),92===g)++m;else if(58===g){for(a=e.slice(f,m);e.charCodeAt(++m)<=32;);for(f=m;m<r;++m)if(g=e.charCodeAt(m),92===g)++m;else if(59===g){h=e.slice(f,m);break}if(void 0===h&&(h=e.slice(f)),l=i.X.parse(a,h),d=i.rt(l),p=n.attrs[l.target],null==p)throw w(707,l.target,s.name);for(null===d?(c=i.ep.parse(h,u),o.push(null===c?new tt(h,p.name):new G(c,p.name))):(se.node=t,se.attr=l,se.bindable=p,se.def=s,o.push(d.build(se,i.ep,i.m)));m<r&&e.charCodeAt(++m)<=32;);f=m,a=void 0,h=void 0}return te(),o}tt(t,e){const s=e.root.def.name,n=t,r=(0,i.$r)(n.querySelectorAll("template[as-custom-element]")),o=r.length;if(0===o)return;if(o===n.childElementCount)throw w(708,s);const a=new Set,h=[];for(const t of r){if(t.parentNode!==n)throw w(709,s);const e=ce(s,t,a),r=t.content,o=(0,i.$r)(r.querySelectorAll("bindable")),c=new Set,l=new Set,u=o.reduce(((t,s)=>{if(s.parentNode!==r)throw w(710,e);const n=s.getAttribute("name");if(null===n)throw w(711,s,e);const o=s.getAttribute("attribute");if(null!==o&&l.has(o)||c.has(n))throw w(712,c,o);null!==o&&l.add(o),c.add(n);const a=(0,i.$r)(s.attributes).filter((t=>!ae.includes(t.name)));return a.length,s.remove(),t[n]={name:n,attribute:o??void 0,mode:s.getAttribute("mode")??"default"},t}),{});class d{}d.$au={type:f,name:e,template:t,bindables:u},Reflect.defineProperty(d,"name",{value:(0,i.fL)(e)}),h.push(d),n.removeChild(t)}const c=(e.root.def.dependencies??[]).concat(null==e.root.def.Type?i.tR:[e.root.def.Type]);for(const t of h)t.dependencies=c.concat(h.filter((e=>e!==t))),e.St(t)}ft(t,e){const s=t.nodeName;return"INPUT"===s&&1===ne[t.type]||"SELECT"===s&&(t.hasAttribute("multiple")||e?.some((t=>t.type===Q&&"multiple"===t.to)))}gt(t,e){switch(t.nodeName){case"INPUT":{const t=e;let s,i,n,r=0;for(let e=0;e<t.length&&r<3;e++)switch(n=t[e],n.to){case"model":case"value":case"matcher":s=e,r++;break;case"checked":i=e,r++}void 0!==i&&void 0!==s&&i<s&&([t[s],t[i]]=[t[i],t[s]]);break}case"SELECT":{const t=e;let s,i=0,n=0,r=0;for(let e=0;e<t.length&&r<2;++e){switch(s=t[e],s.to){case"multiple":n=e,r++;break;case"value":i=e,r++}2===r&&i<n&&([t[n],t[i]]=[t[i],t[n]])}}}}dt(t,e){return Vt(t.parentNode,e.bt("au*"),t),t}At(t,e){if(Yt(t))return t;const s=t.parentNode,i=e.wt();return Ht(s,t,[i,e.bt(Ft),e.bt(Dt)]),s.removeChild(t),i}}Jt.register=(0,i.E8)(m);const Gt="TEMPLATE",Yt=t=>"au*"===t.nodeValue;class Zt{constructor(t,e,s,n,o){this.hasSlot=!1,this.deps=null;const a=null!==s;if(this.c=e,this.root=null===n?this:n,this.def=t,this.parent=s,this.Bt=a?s.Bt:e.get(re),this.Pt=a?s.Pt:e.get(oe),this.Z=a?s.Z:e.get(Bt),this.X=a?s.X:e.get(j),this.ep=a?s.ep:e.get(r.JW),this.m=a?s.m:e.get(v),this.Ct=a?s.Ct:e.get(i.gF),"number"!=typeof(this.p=a?s.p:e.get(i.r_)).document?.nodeType)throw w(722);this.localEls=a?s.localEls:new Set,this.rows=o??[]}St(t){return(this.root.deps??=[]).push(t),this.root.c.register(t),this}It(t){return this.p.document.createTextNode(t)}bt(t){return this.p.document.createComment(t)}wt(){return this.bt("au*")}h(t){const e=this.p.document.createElement(t);return"template"===t&&this.p.document.adoptNode(e.content),e}t(){return this.h("template")}it(t){return this.Bt.el(this.c,t)}lt(t){return this.Bt.attr(this.c,t)}st(t){return this.Bt.bindables(t)}yt(t){return new Zt(this.def,this.c,this,this.root,t)}rt(t){const e=t.command;return null===e?null:this.Pt.get(this.c,e)}}const Xt=t=>{const e=t.length;let s=0,i=0;for(;e>i;){if(s=t.charCodeAt(i),92===s)++i;else{if(58===s)return!0;if(36===s&&123===t.charCodeAt(i+1))return!1}++i}return!1},te=()=>{se.node=se.attr=se.bindable=se.def=null},ee={name:"unnamed",type:f},se={node:null,attr:null,bindable:null,def:null},ie={id:!0,name:!0,"au-slot":!0,"as-element":!0},ne={checkbox:1,radio:1},re=a("IResourceResolver"),oe=a("IBindingCommandResolver",(t=>t.singleton(class{constructor(){this.U=new WeakMap}get(t,e){let s=this.U.get(t);return s||this.U.set(t,s={}),e in s?s[e]:s[e]=St.get(t,e)}}))),ae=h(["name","attribute","mode"]),he="as-custom-element",ce=(t,e,s)=>{const i=e.getAttribute(he);if(null===i||""===i)throw w(715,t);if(s.has(i))throw w(716,i,t);return s.add(i),e.removeAttribute(he),i},le=a("ITemplateCompilerHooks"),ue=h({name:(0,i.r$)("compiler-hooks"),define:t=>({register(e){l(le,t).register(e)}}),findAll:t=>t.get((0,i.ff)(le))})}},i={};function n(t){var e=i[t];if(void 0!==e)return e.exports;var r=i[t]={id:t,exports:{}};return s[t](r,r.exports,n),r.exports}n.m=s,n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var s in e)n.o(e,s)&&!n.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},n.f={},n.e=t=>Promise.all(Object.keys(n.f).reduce(((e,s)=>(n.f[s](t,e),e)),[])),n.u=t=>t+".5f073d62bf28707439bf.bundle.js",n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),t={},e="plugins-demo:",n.l=(s,i,r,o)=>{if(t[s])t[s].push(i);else{var a,h;if(void 0!==r)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var u=c[l];if(u.getAttribute("src")==s||u.getAttribute("data-webpack")==e+r){a=u;break}}a||(h=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",e+r),a.src=s),t[s]=[i];var d=(e,i)=>{a.onerror=a.onload=null,clearTimeout(p);var n=t[s];if(delete t[s],a.parentNode&&a.parentNode.removeChild(a),n&&n.forEach((t=>t(i))),e)return e(i)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),h&&document.head.appendChild(a)}},n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&"SCRIPT"===e.currentScript.tagName.toUpperCase()&&(t=e.currentScript.src),!t)){var s=e.getElementsByTagName("script");if(s.length)for(var i=s.length-1;i>-1&&(!t||!/^http(s?):/.test(t));)t=s[i--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})(),(()=>{var t={201:0};n.f.j=(e,s)=>{var i=n.o(t,e)?t[e]:void 0;if(0!==i)if(i)s.push(i[2]);else{var r=new Promise(((s,n)=>i=t[e]=[s,n]));s.push(i[2]=r);var o=n.p+n.u(e),a=new Error;n.l(o,(s=>{if(n.o(t,e)&&(0!==(i=t[e])&&(t[e]=void 0),i)){var r=s&&("load"===s.type?"missing":s.type),o=s&&s.target&&s.target.src;a.message="Loading chunk "+e+" failed.\n("+r+": "+o+")",a.name="ChunkLoadError",a.type=r,a.request=o,i[1](a)}}),"chunk-"+e,e)}};var e=(e,s)=>{var i,r,[o,a,h]=s,c=0;if(o.some((e=>0!==t[e]))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);h&&h(n)}for(e&&e(s);c<o.length;c++)r=o[c],n.o(t,r)&&t[r]&&t[r][0](),t[r]=0},s=self.webpackChunkplugins_demo=self.webpackChunkplugins_demo||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))})(),n.nc=void 0,n.d({},{$:()=>ss});var r={};n.r(r),n.d(r,{bindables:()=>Ze,default:()=>Ge,dependencies:()=>Ye,name:()=>ze,register:()=>ts,template:()=>Je});var o=n(452),a=n(273),h=n(303),c=(n(410),n(529),n(467));const l=h.s.getOrCreate(globalThis);class u extends a.KIi{constructor(t=function(){return o.DI.createContainer().register(o.cH.instance(a.r_,l),a.yrA)}()){super(t)}static app(t){return(new u).app(t)}static enhance(t){return(new u).enhance(t)}static register(...t){return(new u).register(...t)}app(t){if(a.K94.isType(t)){const e=a.K94.getDefinition(t);let s=document.querySelector(e.name);return null===s&&(s=document.body),super.app({host:s,component:t})}return super.app(t)}}var d=n(220);class p{constructor(t,e,s,i){this.name=t,this.isOptional=e,this.isStar=s,this.pattern=i}satisfiesPattern(t){return null===this.pattern||(this.pattern.lastIndex=0,this.pattern.test(t))}}class f{constructor(t,e,s){this.path=t,this.caseSensitive=e,this.handler=s}}class g{get residualEndpoint(){return this.t}set residualEndpoint(t){if(null!==this.t)throw new Error("Residual endpoint is already set");this.t=t}constructor(t,e){this.route=t,this.params=e,this.t=null}equalsOrResidual(t){return null!=t&&this===t||this.t===t}}class m{constructor(t,e){this.endpoint=t;const s=Object.create(null);for(const t in e){const i=e[t];s[t]=null!=i?decodeURIComponent(i):i}this.params=Object.freeze(s)}}class v{constructor(t,e,s,i){this.chars=t,this.states=e,this.skippedStates=s,this.result=i,this.params=null,this.isConstrained=!1,this.satisfiesConstraints=null,this.head=e[e.length-1],this.endpoint=this.head?.endpoint}advance(t){const{chars:e,states:s,skippedStates:i,result:n}=this;let r=null,o=0;const a=s[s.length-1];function h(c,l){if(c.isMatch(t)&&(1==++o?r=c:n.add(new v(e.concat(t),s.concat(c),null===l?i:i.concat(l),n))),null===a.segment&&c.isOptional&&null!==c.nextStates){if(c.nextStates.length>1)throw A(`${c.nextStates.length} nextStates`);const t=c.nextStates[0];if(!t.isSeparator)throw A("Not a separator");if(null!==t.nextStates)for(const e of t.nextStates)h(e,c)}}if(a.isDynamic&&h(a,null),null!==a.nextStates)for(const t of a.nextStates)h(t,null);null!==r&&(s.push(this.head=r),e.push(t),this.isConstrained=this.isConstrained||r.isDynamic&&r.segment.isConstrained,null!==r.endpoint&&(this.endpoint=r.endpoint)),0===o&&n.remove(this)}i(){return function t(e,s){const i=s.nextStates;if(null!==i)if(1===i.length&&null===i[0].segment)t(e,i[0]);else for(const s of i)if(s.isOptional&&null!==s.endpoint){if(e.push(s),null!==s.nextStates)for(const i of s.nextStates)t(e,i);break}}(this.skippedStates,this.head),!this.isConstrained||(this.u(),this.satisfiesConstraints)}u(){let t=this.params;if(null!=t)return t;const{states:e,chars:s,endpoint:i}=this;t={},this.satisfiesConstraints=!0;for(const e of i.params)t[e.name]=void 0;for(let i=0,n=e.length;i<n;++i){const n=e[i];if(n.isDynamic){const r=n.segment,o=r.name;if(void 0===t[o]?t[o]=s[i]:t[o]+=s[i],!n.isConstrained||Object.is(e[i+1]?.segment,r))continue;this.satisfiesConstraints=this.satisfiesConstraints&&n.satisfiesConstraint(t[o])}}return this.satisfiesConstraints&&(this.params=t),t}compareTo(t){const e=this.states,s=t.states;for(let t=0,i=0,n=Math.max(e.length,s.length);t<n;++t){let n=e[t];if(void 0===n)return 1;let r=s[i];if(void 0===r)return-1;let o=n.segment,a=r.segment;if(null===o){if(null===a){++i;continue}if(void 0===(n=e[++t]))return 1;o=n.segment}else if(null===a){if(void 0===(r=s[++i]))return-1;a=r.segment}if(o.kind<a.kind)return 1;if(o.kind>a.kind)return-1;++i}const i=this.skippedStates,n=t.skippedStates,r=i.length,o=n.length;if(r<o)return 1;if(r>o)return-1;for(let t=0;t<r;++t){const e=i[t],s=n[t];if(e.length<s.length)return 1;if(e.length>s.length)return-1}return 0}}function w(t,e){return t.compareTo(e)}class y{get isEmpty(){return 0===this.candidates.length}constructor(t){this.candidates=[],this.candidates=[new v([""],[t],[],this)]}getSolution(){const t=this.candidates.filter((t=>function(t){return null!==t.head.endpoint}(t)&&t.i()));return 0===t.length?null:(t.sort(w),t[0])}add(t){this.candidates.push(t)}remove(t){this.candidates.splice(this.candidates.indexOf(t),1)}advance(t){const e=this.candidates.slice();for(const s of e)s.advance(t)}}const b="$$residue",S=/^:(?<name>[^?\s{}]+)(?:\{\{(?<constraint>.+)\}\})?(?<optional>\?)?$/g;class C{constructor(t,e,s){switch(this.prevState=t,this.segment=e,this.value=s,this.nextStates=null,this.endpoint=null,this.isConstrained=!1,e?.kind){case 3:this.length=t.length+1,this.isSeparator=!1,this.isDynamic=!0,this.isOptional=e.optional,this.isConstrained=e.isConstrained;break;case 2:case 1:this.length=t.length+1,this.isSeparator=!1,this.isDynamic=!0,this.isOptional=!1;break;case 4:this.length=t.length+1,this.isSeparator=!1,this.isDynamic=!1,this.isOptional=!1;break;case void 0:this.length=null===t?0:t.length,this.isSeparator=!0,this.isDynamic=!1,this.isOptional=!1}}append(t,e){let s,i=this.nextStates;return null===i?(s=void 0,i=this.nextStates=[]):s=null===t?i.find((t=>t.value===e)):i.find((e=>e.segment?.equals(t))),void 0===s&&i.push(s=new C(this,t,e)),s}setEndpoint(t){if(null!==this.endpoint)throw A(`Cannot add ambiguous route. The pattern '${t.route.path}' clashes with '${this.endpoint.route.path}'`);this.endpoint=t,this.isOptional&&(this.prevState.setEndpoint(t),this.prevState.isSeparator&&null!==this.prevState.prevState&&this.prevState.prevState.setEndpoint(t))}isMatch(t){const e=this.segment;switch(e?.kind){case 3:return!this.value.includes(t);case 2:case 1:return!0;case 4:case void 0:return this.value.includes(t)}}satisfiesConstraint(t){return!this.isConstrained||this.segment.satisfiesPattern(t)}}function k(t){return t.length>0}class T{get kind(){return 4}constructor(t,e){this.value=t,this.caseSensitive=e}appendTo(t){const{value:e,value:{length:s}}=this;if(this.caseSensitive)for(let i=0;i<s;++i)t=t.append(this,e.charAt(i));else for(let i=0;i<s;++i){const s=e.charAt(i);t=t.append(this,s.toUpperCase()+s.toLowerCase())}return t}equals(t){return 4===t.kind&&t.caseSensitive===this.caseSensitive&&t.value===this.value}}class x{get kind(){return 3}constructor(t,e,s){if(this.name=t,this.optional=e,this.pattern=s,void 0===s)throw new Error("Pattern is undefined");this.isConstrained=null!==s}appendTo(t){return t.append(this,"/")}equals(t){return 3===t.kind&&t.optional===this.optional&&t.name===this.name}satisfiesPattern(t){return null===this.pattern||(this.pattern.lastIndex=0,this.pattern.test(t))}}class I{constructor(t,e){this.name=t,this.kind=e}appendTo(t){return t.append(this,"")}equals(t){return(2===t.kind||1===t.kind)&&t.name===this.name}}const A=t=>new Error(t);let $=class{constructor(t,e,s,i={}){this.router=t,this.name=e,this.connectedCE=s,this.options=i,this.contents=[],this.transitionAction="",this.path=null}getContent(){return this.contents[0]}getNextContent(){return this.contents.length>1?this.contents[this.contents.length-1]:null}getTimeContent(t=1/0){return this.getContent()}getNavigationContent(t){return t instanceof wt&&(t=t.navigation),t instanceof Y?this.contents.find((e=>e.navigation===t))??null:null}get activeContent(){return this.getNextContent()??this.getContent()}get connectedScope(){return this.activeContent?.connectedScope}get scope(){return this.connectedScope.scope}get owningScope(){return this.connectedScope.owningScope}get connectedController(){return this.connectedCE?.$controller??null}get isViewport(){return this instanceof st}get isViewportScope(){return this instanceof z}get isEmpty(){return!1}get pathname(){return this.connectedScope.pathname}toString(){throw new Error("Method 'toString' needs to be implemented in all endpoints!")}setNextContent(t,e){throw new Error("Method 'setNextContent' needs to be implemented in all endpoints!")}setConnectedCE(t,e){throw new Error("Method 'setConnectedCE' needs to be implemented in all endpoints!")}transition(t){throw new Error("Method 'transition' needs to be implemented in all endpoints!")}finalizeContentChange(t,e){throw new Error("Method 'finalizeContentChange' needs to be implemented in all endpoints!")}cancelContentChange(t,e=null){throw new Error("Method 'cancelContentChange' needs to be implemented in all endpoints!")}getRoutes(){throw new Error("Method 'getRoutes' needs to be implemented in all endpoints!")}getTitle(t){throw new Error("Method 'getTitle' needs to be implemented in all endpoints!")}removeEndpoint(t,e){return this.contents.forEach((t=>t.delete())),!0}canUnload(t,e){return!0}canLoad(t,e){return!0}unload(t,e){}load(t,e){}};class E{constructor(t,e,s,i,n=rt.create(""),r=Y.create({instruction:"",fullStateInstruction:""})){this.router=t,this.endpoint=e,this.instruction=n,this.navigation=r,this.completed=!1,this.connectedScope=new ut(t,i,s,this),null!==this.router.rootScope&&(this.endpoint.connectedScope?.parent??this.router.rootScope.scope).addChild(this.connectedScope)}get isActive(){return this.endpoint.activeContent===this}delete(){this.connectedScope.parent?.removeChild(this.connectedScope)}}class R{constructor(t=null,e="",s=[],i="",n={}){this.match=t,this.matching=e,this.instructions=s,this.remaining=i,this.params=n}get foundConfiguration(){return null!==this.match}get foundInstructions(){return this.instructions.some((t=>!t.component.none))}get hasRemaining(){return this.instructions.some((t=>t.hasNextScopeInstructions))}}class N{static parse(t,e,s,i){if(!e)return{instructions:[],remaining:""};if(e.startsWith(t.sibling)&&!N.isAdd(t,e))throw new Error(`Instruction parser error: Unnecessary siblings separator ${t.sibling} in beginning of instruction part "${e}".`);const n=[];let r=1e3;for(;e.length&&r;)if(r--,e.startsWith(t.scope)){if(0===n.length)throw new Error(`Instruction parser error: Children without parent in instruction part "(${e}" is not allowed.`);i=!1;const r=(e=e.slice(t.scope.length)).startsWith(t.groupStart);r&&(e=e.slice(t.groupStart.length),s=!0);const{instructions:o,remaining:a}=N.parse(t,e,r,!1);n[n.length-1].nextScopeInstructions=o,e=a}else if(e.startsWith(t.groupStart)){e=e.slice(t.groupStart.length);const{instructions:s,remaining:r}=N.parse(t,e,!0,i);n.push(...s),e=r}else if(e.startsWith(t.groupEnd)){s&&(e=e.slice(t.groupEnd.length));let i=0;const r=e.length;for(;i<r;i++){if(e.slice(i,i+t.sibling.length)===t.sibling)return{instructions:n,remaining:e};if(e.slice(i,i+t.groupEnd.length)!==t.groupEnd){if(n.length>1)throw new Error(`Instruction parser error: Children below scope ${t.groupStart}${t.groupEnd} in instruction part "(${e}" is not allowed.`);e=e.slice(i);break}}if(i>=r)return{instructions:n,remaining:e}}else if(e.startsWith(t.sibling)&&!N.isAdd(t,e)){if(!s)return{instructions:n,remaining:e};e=e.slice(t.sibling.length)}else{const{instruction:s,remaining:i}=N.parseOne(t,e);n.push(s),e=i}return{instructions:n,remaining:e}}static isAdd(t,e){return e===t.add||e.startsWith(`${t.add}${t.viewport}`)}static parseOne(t,e){const s=[t.parameters,t.viewport,t.noScope,t.groupEnd,t.scope,t.sibling];let i,n,r,o,a,h=!0;const c=e,l=[t.add,t.clear];for(const n of l)if(e===n){i=e,e="",s.shift(),s.shift(),o=t.viewport;break}if(void 0===i)for(const n of l)if(e.startsWith(`${n}${t.viewport}`)){i=n,e=e.slice(`${n}${t.viewport}`.length),s.shift(),s.shift(),o=t.viewport;break}if(void 0===i&&(({token:o,pos:a}=N.findNextToken(e,s)),i=-1!==a?e.slice(0,a):e,e=-1!==a?e.slice(a+o.length):"",s.shift(),o===t.parameters&&(({token:o,pos:a}=N.findNextToken(e,[t.parametersEnd])),n=e.slice(0,a),e=e.slice(a+o.length),({token:o}=N.findNextToken(e,s)),e=e.slice(o.length)),s.shift()),o===t.viewport&&(({token:o,pos:a}=N.findNextToken(e,s)),r=-1!==a?e.slice(0,a):e,e=-1!==a?e.slice(a+o.length):""),s.shift(),o===t.noScope&&(h=!1),o!==t.groupEnd&&o!==t.scope&&o!==t.sibling||(e=`${o}${e}`),""===(i??""))throw new Error(`Instruction parser error: No component specified in instruction part "${e}".`);const u=rt.create(i,r,n,h);return u.unparsed=c,{instruction:u,remaining:e}}static findNextToken(t,e){const s={};for(const i of e)t.indexOf(i)>-1&&(s[i]=t.indexOf(i));const i=Math.min(...Object.values(s));for(const t in s)if(s[t]===i)return{token:t,pos:i};return{token:"",pos:-1}}}class P{constructor(t="${componentTitles}${appTitleSeparator}Aurelia",e=" | ",s="top-down",i=" > ",n=!0,r="app-",o){this.appTitle=t,this.appTitleSeparator=e,this.componentTitleOrder=s,this.componentTitleSeparator=i,this.useComponentNames=n,this.componentPrefix=r,this.transformTitle=o}static create(t={}){return new P((t="string"==typeof t?{appTitle:t}:t).appTitle,t.appTitleSeparator,t.componentTitleOrder,t.componentTitleSeparator,t.useComponentNames,t.componentPrefix,t.transformTitle)}static for(t){return B.for(t).title}apply(t={}){t="string"==typeof t?{appTitle:t}:t,this.appTitle=t.appTitle??this.appTitle,this.appTitleSeparator=t.appTitleSeparator??this.appTitleSeparator,this.componentTitleOrder=t.componentTitleOrder??this.componentTitleOrder,this.componentTitleSeparator=t.componentTitleSeparator??this.componentTitleSeparator,this.useComponentNames=t.useComponentNames??this.useComponentNames,this.componentPrefix=t.componentPrefix??this.componentPrefix,this.transformTitle="transformTitle"in t?t.transformTitle:this.transformTitle}}class O{constructor(t="@",e="+",s="/",i="(",n=")",r="!",o="(",a=")",h=",",c="=",l="+",u="-",d="."){this.viewport=t,this.sibling=e,this.scope=s,this.groupStart=i,this.groupEnd=n,this.noScope=r,this.parameters=o,this.parametersEnd=a,this.parameterSeparator=h,this.parameterKeySeparator=c,this.add=l,this.clear=u,this.action=d}static create(t={}){return new O(t.viewport,t.sibling,t.scope,t.groupStart,t.groupEnd,t.noScope,t.parameters,t.parametersEnd,t.parameterSeparator,t.parameterKeySeparator,t.add,t.clear,t.action)}static for(t){return B.for(t).separators}apply(t={}){this.viewport=t.viewport??this.viewport,this.sibling=t.sibling??this.sibling,this.scope=t.scope??this.scope,this.groupStart=t.groupStart??this.groupStart,this.groupEnd=t.groupEnd??this.groupEnd,this.noScope=t.noScope??this.noScope,this.parameters=t.parameters??this.parameters,this.parametersEnd=t.parametersEnd??this.parametersEnd,this.parameterSeparator=t.parameterSeparator??this.parameterSeparator,this.parameterKeySeparator=t.parameterKeySeparator??this.parameterKeySeparator,this.add=t.add??this.add,this.clear=t.clear??this.clear,this.action=t.action??this.action}}class L{constructor(t="active",e="navigating"){this.loadActive=t,this.viewportNavigating=e}static create(t={}){return new L(t.loadActive,t.viewportNavigating)}static for(t){return B.for(t).indicators}apply(t={}){this.loadActive=t.loadActive??this.loadActive,this.viewportNavigating=t.viewportNavigating??this.viewportNavigating}}class B{constructor(t=O.create(),e=L.create(),s=!0,i=null,n=!0,r=0,o=!0,a=!0,h=!1,c=P.create(),l=["guardedUnload","swapped","completed"],u="attach-next-detach-current",d="",p="abort"){this.separators=t,this.indicators=e,this.useUrlFragmentHash=s,this.basePath=i,this.useHref=n,this.statefulHistoryLength=r,this.useDirectRouting=o,this.useConfiguredRoutes=a,this.completeStateNavigations=h,this.title=c,this.navigationSyncStates=l,this.swapOrder=u,this.fallback=d,this.fallbackAction=p,this.registrationHooks=[]}static create(t={}){return new B(O.create(t.separators),L.create(t.indicators),t.useUrlFragmentHash,t.basePath,t.useHref,t.statefulHistoryLength,t.useDirectRouting,t.useConfiguredRoutes,t.completeStateNavigations,P.create(t.title),t.navigationSyncStates,t.swapOrder,t.fallback,t.fallbackAction)}static for(t){return t instanceof Gt?t.options:(t=t instanceof kt?t.configuration:t.get(Qt)).options}apply(t){t=t??{},this.separators.apply(t.separators),this.indicators.apply(t.indicators),this.useUrlFragmentHash=t.useUrlFragmentHash??this.useUrlFragmentHash,this.basePath=t.basePath??this.basePath,this.useHref=t.useHref??this.useHref,this.statefulHistoryLength=t.statefulHistoryLength??this.statefulHistoryLength,this.useDirectRouting=t.useDirectRouting??this.useDirectRouting,this.useConfiguredRoutes=t.useConfiguredRoutes??this.useConfiguredRoutes,this.completeStateNavigations=t.completeStateNavigations??this.completeStateNavigations,this.title.apply(t.title),this.navigationSyncStates=t.navigationSyncStates??this.navigationSyncStates,this.swapOrder=t.swapOrder??this.swapOrder,this.fallback=t.fallback??this.fallback,this.fallbackAction=t.fallbackAction??this.fallbackAction,Array.isArray(t.hooks)&&(void 0!==this.routerConfiguration?t.hooks.forEach((t=>this.routerConfiguration.addHook(t.hook,t.options))):this.registrationHooks=t.hooks)}setRouterConfiguration(t){this.routerConfiguration=t,this.registrationHooks.forEach((t=>this.routerConfiguration.addHook(t.hook,t.options))),this.registrationHooks.length=0}}class M{constructor(){this.parametersString=null,this.parametersRecord=null,this.parametersList=null,this.parametersType="none"}get none(){return"none"===this.parametersType}static create(t){const e=new M;return e.set(t),e}static parse(t,e,s=!1){if(null==e||0===e.length)return[];const i=O.for(t),n=i.parameterSeparator,r=i.parameterKeySeparator;if("string"==typeof e){const t=[],i=e.split(n);for(const e of i){let i,n;[i,n]=e.split(r),void 0===n?(n=s?decodeURIComponent(i):i,i=void 0):s&&(i=decodeURIComponent(i),n=decodeURIComponent(n)),t.push({key:i,value:n})}return t}if(Array.isArray(e))return e.map((t=>({key:void 0,value:t})));const o=Object.keys(e);return o.sort(),o.map((t=>({key:t,value:e[t]})))}get typedParameters(){switch(this.parametersType){case"string":return this.parametersString;case"array":return this.parametersList;case"object":return this.parametersRecord;default:return null}}static stringify(t,e,s=!1){if(!Array.isArray(e)||0===e.length)return"";const i=O.for(t);return e.map((t=>{const e=void 0!==t.key&&s?encodeURIComponent(t.key):t.key,n=s?encodeURIComponent(t.value):t.value;return void 0!==e&&e!==n?e+i.parameterKeySeparator+n:n})).join(i.parameterSeparator)}static contains(t,e){return Object.keys(e).every((s=>e[s]===t[s]))}parameters(t){return M.parse(t,this.typedParameters)}set(t){this.parametersString=null,this.parametersList=null,this.parametersRecord=null,null==t||""===t?(this.parametersType="none",t=null):"string"==typeof t?(this.parametersType="string",this.parametersString=t):Array.isArray(t)?(this.parametersType="array",this.parametersList=t):(this.parametersType="object",this.parametersRecord=t)}get(t,e){if(void 0===e)return this.parameters(t);const s=this.parameters(t).filter((t=>t.key===e)).map((t=>t.value));return 0!==s.length?1===s.length?s[0]:s:void 0}addParameters(t){if("none"===this.parametersType)return this.set(t);if("object"!==this.parametersType)throw new Error("Can't add object parameters to existing non-object parameters!");this.set({...this.parametersRecord,...t})}toSpecifiedParameters(t,e){e=e??[];const s=this.parameters(t),i={};for(const t of e){let e=s.findIndex((e=>e.key===t));if(e>=0){const[n]=s.splice(e,1);i[t]=n.value}else if(e=s.findIndex((t=>void 0===t.key)),e>=0){const[n]=s.splice(e,1);i[t]=n.value}}for(const t of s.filter((t=>void 0!==t.key)))i[t.key]=t.value;let n=e.length;for(const t of s.filter((t=>void 0===t.key)))i[n++]=t.value;return i}toSortedParameters(t,e){e=e||[];const s=this.parameters(t),i=[];for(const t of e){let e=s.findIndex((e=>e.key===t));if(e>=0){const t={...s.splice(e,1)[0]};t.key=void 0,i.push(t)}else if(e=s.findIndex((t=>void 0===t.key)),e>=0){const t={...s.splice(e,1)[0]};i.push(t)}else i.push({value:void 0})}const n=s.filter((t=>void 0!==t.key));return n.sort(((t,e)=>(t.key||"")<(e.key||"")?1:(e.key||"")<(t.key||"")?-1:0)),i.push(...n),i.push(...s.filter((t=>void 0===t.key))),i}same(t,e,s){const i=null!==s?s.parameters:[],n=this.toSpecifiedParameters(t,i),r=e.toSpecifiedParameters(t,i);return Object.keys(n).every((t=>n[t]===r[t]))&&Object.keys(r).every((t=>r[t]===n[t]))}}class j{constructor(){this.name=null,this.type=null,this.instance=null,this.promise=null,this.func=null}static create(t){const e=new j;return e.set(t),e}static isName(t){return"string"==typeof t}static isDefinition(t){return a.K94.isType(t.Type)}static isType(t){return a.K94.isType(t)}static isInstance(t){return(0,a._CO)(t)}static isAppelation(t){return j.isName(t)||j.isType(t)||j.isInstance(t)}static getName(t){return j.isName(t)?t:j.isType(t)?a.K94.getDefinition(t).name:j.getName(t.constructor)}static getType(t){return j.isName(t)?null:j.isType(t)?t:t.constructor}static getInstance(t){return j.isName(t)||j.isType(t)?null:t}set(t){let e=null,s=null,i=null,n=null,r=null;t instanceof Promise?n=t:j.isName(t)?e=j.getName(t):j.isType(t)?(e=this.getNewName(t),s=j.getType(t)):j.isInstance(t)?(e=this.getNewName(j.getType(t)),s=j.getType(t),i=j.getInstance(t)):"function"==typeof t&&(r=t),this.name=e,this.type=s,this.instance=i,this.promise=n,this.func=r}resolve(t){if(null!==this.func&&this.set(this.func(t)),this.promise instanceof Promise)return this.promise.then((t=>{if(j.isAppelation(t))return void this.set(t);if(null!=t.default)return void this.set(t.default);const e=Object.keys(t).filter((t=>!t.startsWith("__")));if(0===e.length)throw new Error("Failed to load component Type from resolved Promise since no export was specified.");if(e.length>1)throw new Error("Failed to load component Type from resolved Promise since no 'default' export was specified when having multiple exports.");const s=e[0];this.set(t[s])}))}get none(){return!(this.isName()||this.isType()||this.isInstance()||this.isFunction()||this.isPromise())}isName(){return null!=this.name&&""!==this.name&&!this.isType()&&!this.isInstance()}isType(){return null!==this.type&&!this.isInstance()}isInstance(){return null!==this.instance}isPromise(){return null!==this.promise}isFunction(){return null!==this.func}toType(t,e){if(this.resolve(e),null!==this.type)return this.type;if(null!==this.name&&"string"==typeof this.name){if(null===t)throw new Error(`No container available when trying to resolve component '${this.name}'!`);if(t.has(a.K94.keyFrom(this.name),!0)){const e=t.getResolver(a.K94.keyFrom(this.name));if(null!==e&&void 0!==e.getFactory){const s=e.getFactory(t);if(s)return s.Type}}}return null}toInstance(t,e,s,i){if(this.resolve(i),null!==this.instance)return this.instance;if(null==t)return null;const n=t.createChild(),r=this.isType()?this.type:n.getResolver(a.K94.keyFrom(this.name)).getFactory(n).Type,o=n.invoke(r);if(null==o)throw new Error(`Failed to create instance when trying to resolve component '${this.name}'!`);return a.xIk.$el(n,o,s,null).parent=e,o}same(t,e=!1){return e?this.type===t.type:this.name===t.name}getNewName(t){return null===this.name?j.getName(t):this.name}}function F(t,e){const s=[];let i=t.findIndex(e);for(;i>=0;)s.push(t.splice(i,1)[0]),i=t.findIndex(e);return s}function D(t,e){Array.isArray(e)||(e=[e]);for(const s of e)t.includes(s)||t.push(s);return t}function V(t,e=!1){return t.filter(((t,s,i)=>(e||null!=t)&&i.indexOf(t)===s))}class H{constructor(){this.isPending=!0,this.promise=new Promise(((t,e)=>{this.t=t,this.i=e}))}resolve(t){this.t(t),this.isPending=!1}reject(t){this.i(t),this.isPending=!1}}class q{constructor(){this.isDone=!1,this.isCancelled=!1,this.isResolved=!1,this.isRejected=!1,this.isAsync=!1}static run(t,...e){if(0===e.length)return;let s=!1;null===t&&(t=new U,s=!0);const i=new U(e.shift());return q.connect(t,i,(t?.runParallel??!1)||s),e.length>0&&q.add(i,!1,...e),s?(q.process(t),t.result instanceof Promise&&this.runners.set(t.result,t),t.result):i}static runParallel(t,...e){if(0===(e?.length??0))return[];let s=!1;return null===t?(t=new U,s=!0):t=q.connect(t,new U,!0),q.add(t,!0,...e),s&&q.process(t),t.result instanceof Promise&&this.runners.set(t.result,t),s?t.result??[]:t}static step(t){if(t instanceof Promise)return q.runners.get(t)}static cancel(t){const e=q.step(t);void 0!==e&&e.cancel()}static add(t,e,...s){let i=new U(s.shift(),e);null!==t&&(i=q.connect(t,i,e));const n=i;for(;s.length>0;)i=q.connect(i,new U(s.shift(),e),!1);return n}static connect(t,e,s){if(s){const s=t.child;t.child=e,e.parent=t,e.next=s,null!==s&&(s.parent=null,s.previous=e)}else{const s=t.next;t.next=e,e.previous=t,e.next=s,null!==s&&(s.previous=e,s.parent=null)}return e}static process(t){const e=t.root;for(;null!==t&&!t.isDoing&&!t.isDone;)if(e.current=t,t.isParallelParent){t.isDone=!0;let e=t.child;for(;null!==e;)q.process(e),e=e.next}else{for(t.isDoing=!0,t.value=t.step;t.value instanceof Function&&!t.isCancelled&&!t.isExited&&!t.isDone;)t.value=t.value(t);if(!t.isCancelled)if(t.value instanceof Promise){const s=t.value;q.ensurePromise(e),((t,e)=>{e.then((e=>{t.value=e,q.settlePromise(t),t.isDone=!0,t.isDoing=!1;const s=t.nextToDo();null===s||t.isExited?(t.root.doneAll||t.isExited)&&q.settlePromise(t.root):q.process(s)})).catch((t=>{throw t}))})(t,s)}else t.isDone=!0,t.isDoing=!1,t=t.isExited?null:t.nextToDo()}e.isCancelled?q.settlePromise(e,"reject"):(e.doneAll||e.isExited)&&q.settlePromise(e)}static ensurePromise(t){return null===t.finally&&(t.finally=new H,t.promise=t.finally.promise,!0)}static settlePromise(t,e="resolve"){if(t.finally?.isPending)switch(t.promise=null,e){case"resolve":t.finally?.resolve(t.result);break;case"reject":t.finally?.reject(t.result)}}}q.runners=new WeakMap,q.roots={};class U{constructor(t=void 0,e=!1){this.step=t,this.runParallel=e,this.promise=null,this.previous=null,this.next=null,this.parent=null,this.child=null,this.current=null,this.finally=null,this.isDoing=!1,this.isDone=!1,this.isCancelled=!1,this.isExited=!1,this.exited=null,this.id="-1",this.id=""+U.id++}get isParallelParent(){return this.child?.runParallel??!1}get result(){if(null!==this.promise)return this.promise;if(null!==this.child){if(this.isParallelParent){const t=[];let e=this.child;for(;null!==e;)t.push(e.result),e=e.next;return t}return this===this.root&&null!==this.exited?this.exited.result:this.child?.tail?.result}let t=this.value;for(;t instanceof U;)t=t.result;return t}get asValue(){return this.result}get previousValue(){return this.runParallel?this.head.parent?.parent?.previous?.result:this.previous?.result}get name(){let t=`${this.id}`;return this.runParallel&&(t=`:${t}`),(this.value instanceof Promise||this.promise instanceof Promise)&&(t=`${t}*`),null!==this.finally&&(t=`${t}*`),null!==this.child&&(t=`${t}>`),this.isDone&&(t=`(${t})`),t}get root(){let t=this.head;for(;null!==t.parent;)t=t.parent.head;return t}get head(){let t=this;for(;null!==t.previous;)t=t.previous;return t}get tail(){let t=this;for(;null!==t.next;)t=t.next;return t}get done(){if(!this.isDone)return!1;let t=this.child;for(;null!==t;){if(!t.done)return!1;t=t.next}return!0}get doneAll(){return!(!this.isDone||null!==this.child&&!this.child.doneAll||null!==this.next&&!this.next.doneAll)}cancel(t=!0){return t?this.root.cancel(!1):!this.isCancelled&&(this.isCancelled=!0,this.child?.cancel(!1),this.next?.cancel(!1),!0)}exit(t=!0){return t?(this.root.exited=this,this.root.exit(!1)):!this.isExited&&(this.isExited=!0,this.child?.exit(!1),this.next?.exit(!1),!0)}nextToDo(){return null===this.child||this.child.isDoing||this.child.isDone?this.runParallel&&!this.head.parent.done?null:this.nextOrUp():this.child}nextOrUp(){let t=this.next;for(;null!==t;){if(!t.isDoing&&!t.isDone)return t;t=t.next}const e=this.head.parent??null;return null!==e&&e.done?e.nextOrUp():null}get path(){return`${this.head.parent?.path??""}/${this.name}`}get tree(){let t="",e=this.head,s=e.parent,i="";for(;null!==s;)i=`${s.path}${i}`,s=s.head.parent;do{if(t+=`${i}/${e.name}\n`,e===this)break;e=e.next}while(null!==e);return t}get report(){let t=`${this.path}\n`;return t+=this.child?.report??"",t+=this.next?.report??"",t}}U.id=0;const _=(t,...e)=>new Error(`AUR${String(t).padStart(4,"0")}:${e.map(String)}`);class W{constructor(t,e,s,i,n,r,o,a){this.path=t,this.id=e,this.redirectTo=s,this.instructions=i,this.caseSensitive=n,this.title=r,this.reloadBehavior=o,this.data=a}static configure(t,e){const s=W.create(t,e);return d.OS.define(s,e,W.resourceKey),e}static getConfiguration(t){const e=d.OS.get(W.resourceKey,t)??{};return Array.isArray(t.parameters)&&(e.parameters=t.parameters),"title"in t&&(e.title=t.title),e instanceof W?e:W.create(e,t)}static create(t,e=null){null!==e&&(t=W.transferTypeToComponent(t,e)),a.K94.isType(t)?t=W.getConfiguration(t):null===e&&(t={...t});const s=W.transferIndividualIntoInstructions(t);W.validateRouteConfiguration(s);let i=s.path;return Array.isArray(i)&&(i=i.join(",")),new W(s.path??"",s.id??i??null,s.redirectTo??null,s.instructions??null,s.caseSensitive??!1,s.title??null,s.reloadBehavior??null,s.data??null)}static transferTypeToComponent(t,e){if(a.K94.isType(t))throw _(2012);const s={...t};if("component"in s||"instructions"in s)throw _(2013);return"redirectTo"in s||(s.component=e),"path"in s||"redirectTo"in s||(s.path=a.K94.getDefinition(e).name),s}static transferIndividualIntoInstructions(t){if(null==t)throw _(2014);if(null!=t.component||null!=t.viewport||null!=t.parameters||null!=t.children){if(null!=t.instructions)throw _(2015);t.instructions=[{component:t.component,viewport:t.viewport,parameters:t.parameters,children:t.children}]}return t}static validateRouteConfiguration(t){if(null===t.redirectTo&&null===t.instructions)throw _(2016)}}W.resourceKey=(0,o.r$)("route");const K={name:(0,o.r$)("routes"),isConfigured:t=>d.OS.has(K.name,t)||"routes"in t,configure(t,e){const s=t.map((t=>W.create(t)));return d.OS.define(s,e,K.name),e},getConfiguration(t){const e=t,s=[],i=d.OS.get(K.name,t);return Array.isArray(i)&&s.push(...i),Array.isArray(e.routes)&&s.push(...e.routes),s.map((t=>t instanceof W?t:W.create(t)))}};class Q extends E{}class z extends ${constructor(t,e,s,i,n,r=null,o={catches:[],source:null}){super(t,e,s),this.rootComponentType=r,this.options=o,this.instruction=null,this.available=!0,this.sourceItem=null,this.sourceItemIndex=-1,this.remove=!1,this.add=!1,this.contents.push(new Q(t,this,i,n)),this.catches.length>0&&(this.instruction=rt.create(this.catches[0],this.name))}get isEmpty(){return null===this.instruction}get passThroughScope(){return null===this.rootComponentType&&0===this.catches.length}get siblings(){const t=this.connectedScope.parent;return null===t?[this]:t.enabledChildren.filter((t=>t.isViewportScope&&t.endpoint.name===this.name)).map((t=>t.endpoint))}get source(){return this.options.source??null}get catches(){let t=this.options.catches??[];return"string"==typeof t&&(t=t.split(",")),t}get default(){if(this.catches.length>0)return this.catches[0]}toString(){const t=this.instruction?.component.name??"",e=this.getNextContent()?.instruction.component.name??"";return`vs:${this.name}[${t}->${e}]`}setNextContent(t,e){return t.endpoint.set(this),this.remove=t.isClear(this.router)||t.isClearAll(this.router),this.add=t.isAdd(this.router)&&Array.isArray(this.source),this.add&&(t.component.name=null),void 0!==this.default&&null===t.component.name&&(t.component.name=this.default),this.contents.push(new Q(this.router,this,this.owningScope,this.scope.hasScope,t,e)),"swap"}transition(t){q.run(null,(e=>t.setEndpointStep(this,e.root)),(()=>t.addEndpointState(this,"guardedUnload")),(()=>t.addEndpointState(this,"guardedLoad")),(()=>t.addEndpointState(this,"guarded")),(()=>t.addEndpointState(this,"loaded")),(()=>t.addEndpointState(this,"unloaded")),(()=>t.addEndpointState(this,"routed")),(()=>t.addEndpointState(this,"swapped")),(()=>t.addEndpointState(this,"completed")))}finalizeContentChange(t,e){const s=this.contents.findIndex((e=>e.navigation===t.navigation));let i=this.contents[s];if(this.remove){const t=new Q(this.router,this,this.owningScope,this.scope.hasScope);this.contents.splice(s,1,t),i.delete(),i=t}i.completed=!0;let n=0;for(let t=0,e=s;t<e&&this.contents[0].navigation.completed;t++)n++;this.contents.splice(0,n),this.remove&&Array.isArray(this.source)&&this.removeSourceItem()}cancelContentChange(t,e=null){[...new Set(this.scope.children.map((t=>t.endpoint)))].forEach((s=>s.cancelContentChange(t,e)));const s=this.contents.findIndex((e=>e.navigation===t.navigation));if(!(s<0)&&(this.contents.splice(s,1),this.add)){const t=this.source.indexOf(this.sourceItem);this.source.splice(t,1),this.sourceItem=null}}acceptSegment(t){return null===t&&void 0===t||0===t.length||t===rt.clear(this.router)||t===rt.add(this.router)||t===this.name||0===this.catches.length||!!this.catches.includes(t)||!!this.catches.filter((t=>t.includes("*"))).length}binding(){(this.source||[]).length>0&&null===this.sourceItem&&(this.sourceItem=this.getAvailableSourceItem())}unbinding(){null!==this.sourceItem&&null!==this.source&&F(this.source,(t=>t===this.sourceItem)),this.sourceItem=null}getAvailableSourceItem(){if(null===this.source)return null;const t=this.siblings;for(const e of this.source)if(t.every((t=>t.sourceItem!==e)))return e;return null}addSourceItem(){const t={};return this.source.push(t),t}removeSourceItem(){this.sourceItemIndex=this.source.indexOf(this.sourceItem),this.sourceItemIndex>=0&&this.source.splice(this.sourceItemIndex,1)}getRoutes(){const t=[];if(null!==this.rootComponentType){const e=this.rootComponentType.constructor===this.rootComponentType.constructor.constructor?this.rootComponentType:this.rootComponentType.constructor;t.push(...K.getConfiguration(e)??[])}return t}}class J{constructor(t={instruction:"",fullStateInstruction:""}){this.instruction=t.instruction,this.fullStateInstruction=t.fullStateInstruction,this.scope=t.scope,this.index=t.index,this.firstEntry=t.firstEntry,this.path=t.path,this.title=t.title,this.query=t.query,this.fragment=t.fragment,this.parameters=t.parameters,this.data=t.data}toStoredNavigation(){return{instruction:this.instruction,fullStateInstruction:this.fullStateInstruction,scope:this.scope,index:this.index,firstEntry:this.firstEntry,path:this.path,title:this.title,query:this.query,fragment:this.fragment,parameters:this.parameters,data:this.data}}}class G{constructor(){this.first=!1,this.new=!1,this.refresh=!1,this.forward=!1,this.back=!1,this.replace=!1}}class Y extends J{constructor(t={instruction:"",fullStateInstruction:""}){super(t),this.navigation=new G,this.repeating=!1,this.previous=null,this.fromBrowser=!1,this.origin=null,this.replacing=!1,this.refreshing=!1,this.untracked=!1,this.process=null,this.completed=!0,this.fromBrowser=t.fromBrowser??this.fromBrowser,this.origin=t.origin??this.origin,this.replacing=t.replacing??this.replacing,this.refreshing=t.refreshing??this.refreshing,this.untracked=t.untracked??this.untracked,this.historyMovement=t.historyMovement??this.historyMovement,this.process=null,this.timestamp=Date.now()}get useFullStateInstruction(){return(this.navigation.back??!1)||(this.navigation.forward??!1)||(this.navigation.refresh??!1)}static create(t={instruction:"",fullStateInstruction:""}){return new Y(t)}}class Z{constructor(){this.map=new Map}set(t,e){const s=this.map.get(t);s instanceof H&&s.resolve(e),this.map.set(t,e)}delete(t){const e=this.map.get(t);e instanceof H&&e.reject(),this.map.delete(t)}await(t){if(!this.map.has(t)){const e=new H;return this.map.set(t,e),e.promise}const e=this.map.get(t);return e instanceof H?e.promise:e}has(t){return this.map.has(t)&&!(this.map.get(t)instanceof H)}clone(){const t=new Z;return t.map=new Map(this.map),t}}class X extends E{constructor(t,e,s,i,n=rt.create(""),r=Y.create({instruction:"",fullStateInstruction:""}),o=null){super(t,e,s,i,n,r),this.router=t,this.instruction=n,this.navigation=r,this.contentStates=new Z,this.fromCache=!1,this.fromHistory=!1,this.reload=!1,this.activatedResolve=null,this.instruction.component.isType()||null==o?.container||(this.instruction.component.type=this.toComponentType(o.container))}get componentInstance(){return this.instruction.component.instance}get reloadBehavior(){return this.instruction.route instanceof R&&null!==this.instruction.route.match?.reloadBehavior?this.instruction.route.match?.reloadBehavior:null!==this.instruction.component.instance&&"reloadBehavior"in this.instruction.component.instance&&void 0!==this.instruction.component.instance.reloadBehavior?this.instruction.component.instance.reloadBehavior:"default"}get controller(){return this.instruction.component.instance?.$controller}equalComponent(t){return this.instruction.sameComponent(this.router,t.instruction)}equalParameters(t){return this.instruction.sameComponent(this.router,t.instruction,!0)&&(this.navigation.query??"")===(t.navigation.query??"")}isCacheEqual(t){return this.instruction.sameComponent(this.router,t.instruction,!0)}contentController(t){return a.xIk.$el(t.container.createChild(),this.instruction.component.instance,t.element,null)}createComponent(t,e,s,i){if(!this.contentStates.has("created")){if(!this.fromCache&&!this.fromHistory)try{this.instruction.component.set(this.toComponentInstance(e.container,e.controller,e.element))}catch(n){if(!n.message.startsWith("AUR0009:"))throw n;if(""===(s??"")){const t=this.instruction.component.name;throw _(2017,t)}"process-children"===i?this.instruction.parameters.set([this.instruction.component.name]):(this.instruction.parameters.set([this.instruction.unparsed??this.instruction.component.name]),this.instruction.hasNextScopeInstructions&&(t.removeInstructions(this.instruction.nextScopeInstructions),this.instruction.nextScopeInstructions=null)),this.instruction.component.set(s);try{this.instruction.component.set(this.toComponentInstance(e.container,e.controller,e.element))}catch(t){if(!t.message.startsWith("AUR0009:"))throw t;const e=this.instruction.component.name;throw _(2017,e,t)}}this.contentStates.set("created",void 0)}}canLoad(){if(!this.contentStates.has("created")||this.contentStates.has("checkedLoad")&&!this.reload)return!0;const t=this.instruction.component.instance;if(null==t)return!0;this.contentStates.set("checkedLoad",void 0);const e=this.endpoint.parentViewport?.getTimeContent(this.navigation.timestamp)?.instruction?.typeParameters(this.router),s=this.instruction.typeParameters(this.router),i={...this.navigation.parameters,...e,...s},n=this.h(t,"canLoad").map((e=>s=>null!=s?.previousValue&&!0!==s.previousValue?(s.exit(),s.previousValue??!1):e(t,i,this.instruction,this.navigation)));return null!=t.canLoad&&n.push((e=>!1!==(e?.previousValue??!0)&&t.canLoad(i,this.instruction,this.navigation))),0===n.length||(1===n.length?n[0](null):q.run(null,...n))}canUnload(t){if(this.contentStates.has("checkedUnload")&&!this.reload)return!0;if(this.contentStates.set("checkedUnload",void 0),!this.contentStates.has("loaded"))return!0;const e=this.instruction.component.instance;null===t&&(t=Y.create({instruction:"",fullStateInstruction:"",previous:this.navigation}));const s=this.h(e,"canUnload").map((s=>i=>!1!==(i?.previousValue??!0)&&s(e,this.instruction,t)));return null!=e.canUnload&&s.push((s=>!1!==(s?.previousValue??!0)&&e.canUnload?.(this.instruction,t))),0===s.length||(1===s.length?s[0](null):q.run(null,...s))}load(t){return q.run(t,(()=>this.contentStates.await("checkedLoad")),(()=>{if(!this.contentStates.has("created")||this.contentStates.has("loaded")&&!this.reload)return;this.reload=!1,this.contentStates.set("loaded",void 0);const t=this.instruction.component.instance,e=this.endpoint.parentViewport?.getTimeContent(this.navigation.timestamp)?.instruction?.typeParameters(this.router),s=this.instruction.typeParameters(this.router),i={...this.navigation.parameters,...e,...s},n=this.h(t,"loading").map((e=>()=>e(t,i,this.instruction,this.navigation)));return n.push(...this.h(t,"load").map((e=>()=>(console.warn(`[Deprecated] Found deprecated hook name "load" in ${this.instruction.component.name}. Please use the new name "loading" instead.`),e(t,i,this.instruction,this.navigation))))),0!==n.length?("function"==typeof t.loading&&n.push((()=>t.loading(i,this.instruction,this.navigation))),tt(t,"load")&&(console.warn(`[Deprecated] Found deprecated hook name "load" in ${this.instruction.component.name}. Please use the new name "loading" instead.`),n.push((()=>t.load(i,this.instruction,this.navigation)))),q.run(null,...n)):tt(t,"loading")?t.loading(i,this.instruction,this.navigation):tt(t,"load")?(console.warn(`[Deprecated] Found deprecated hook name "load" in ${this.instruction.component.name}. Please use the new name "loading" instead.`),t.load(i,this.instruction,this.navigation)):void 0}))}unload(t){if(!this.contentStates.has("loaded"))return;this.contentStates.delete("loaded");const e=this.instruction.component.instance;null===t&&(t=Y.create({instruction:"",fullStateInstruction:"",previous:this.navigation}));const s=this.h(e,"unloading").map((s=>()=>s(e,this.instruction,t)));return s.push(...this.h(e,"unload").map((s=>()=>(console.warn(`[Deprecated] Found deprecated hook name "unload" in ${this.instruction.component.name}. Please use the new name "unloading" instead.`),s(e,this.instruction,t))))),0!==s.length?(tt(e,"unloading")&&s.push((()=>e.unloading(this.instruction,t))),tt(e,"unload")&&(console.warn(`[Deprecated] Found deprecated hook name "unload" in ${this.instruction.component.name}. Please use the new name "unloading" instead.`),s.push((()=>e.unload(this.instruction,t)))),q.run(null,...s)):tt(e,"unloading")?e.unloading(this.instruction,t):tt(e,"unload")?(console.warn(`[Deprecated] Found deprecated hook name "unload" in ${this.instruction.component.name}. Please use the new name "unloading" instead.`),e.unload(this.instruction,t)):void 0}activateComponent(t,e,s,i,n,r){return q.run(t,(()=>this.contentStates.await("loaded")),(()=>this.waitForParent(s)),(()=>{if(!this.contentStates.has("activating")&&!this.contentStates.has("activated"))return this.contentStates.set("activating",void 0),this.controller?.activate(e??this.controller,s,void 0)}),(()=>{this.contentStates.set("activated",void 0)}))}deactivateComponent(t,e,s,i,n=!1){if(this.contentStates.has("activated")||this.contentStates.has("activating"))return q.run(t,(()=>{if(n&&null!==i.element){const t=Array.from(i.element.getElementsByTagName("*"));for(const e of t)(e.scrollTop>0||e.scrollLeft)&&e.setAttribute("au-element-scroll",`${e.scrollTop},${e.scrollLeft}`)}return this.contentStates.delete("activated"),this.contentStates.delete("activating"),this.controller?.deactivate(e??this.controller,s)}))}disposeComponent(t,e,s=!1){if(this.contentStates.has("created")&&null!=this.instruction.component.instance)return s?void e.push(this):(this.contentStates.delete("created"),this.controller?.dispose())}freeContent(t,e,s,i,n=!1){return q.run(t,(()=>this.unload(s)),(t=>this.deactivateComponent(t,null,e.controller,e,n)),(()=>this.disposeComponent(e,i,n)))}toComponentName(){return this.instruction.component.name}toComponentType(t){return this.instruction.component.none?null:this.instruction.component.toType(t,this.instruction)}toComponentInstance(t,e,s){return this.instruction.component.none?null:this.instruction.component.toInstance(t,e,s,this.instruction)}waitForParent(t){if(null!==t)return t.isActive?void 0:new Promise((t=>{this.endpoint.activeResolve=t}))}h(t,e){return(t.$controller.lifecycleHooks[e]??[]).map((t=>t.instance[e].bind(t.instance)))}}function tt(t,e){return"function"==typeof t[e]}class et{constructor(t=!0,e=[],s="",i="",n="",r=!1,o=!1,a=!1,h=!1,c=!1){this.scope=t,this.usedBy=e,this.fallback=i,this.fallbackAction=n,this.noLink=r,this.noTitle=o,this.stateful=a,this.forceDescription=h,this.noHistory=c,this.default=void 0,this.default=s}static create(t){const e=new et;return void 0!==t&&e.apply(t),e}apply(t){this.scope=t.scope??this.scope,this.usedBy=("string"==typeof t.usedBy?t.usedBy.split(",").filter((t=>t.length>0)):t.usedBy)??this.usedBy,this.default=t.default??this.default,this.fallback=t.fallback??this.fallback,this.fallbackAction=t.fallbackAction??this.fallbackAction,this.noLink=t.noLink??this.noLink,this.noTitle=t.noTitle??this.noTitle,this.stateful=t.stateful??this.stateful,this.forceDescription=t.forceDescription??this.forceDescription,this.noHistory=t.noHistory??this.noHistory}}class st extends ${constructor(t,e,s,i,n,r){super(t,e,s),this.contents=[],this.forceRemove=!1,this.options=new et,this.activeResolve=null,this.connectionResolve=null,this.clear=!1,this.coordinators=[],this.previousViewportState=null,this.cache=[],this.historyCache=[],this.contents.push(new X(t,this,i,n)),this.contents[0].completed=!0,void 0!==r&&this.options.apply(r)}getContent(){if(1===this.contents.length)return this.contents[0];let t;for(let e=0,s=this.contents.length;e<s&&this.contents[e].completed;e++)t=this.contents[e];return t}getNextContent(){if(1===this.contents.length)return null;const t=this.contents.indexOf(this.getContent());return this.contents.length>t?this.contents[t+1]:null}getTimeContent(t){let e=null;for(let s=0,i=this.contents.length;s<i&&!(this.contents[s].navigation.timestamp>t);s++)e=this.contents[s];return e}getNavigationContent(t){return super.getNavigationContent(t)}get parentViewport(){let t=this.connectedScope;for(;null!=t?.parent;)if(t=t.parent,t.endpoint.isViewport)return t.endpoint;return null}get isEmpty(){return null===this.getContent().componentInstance}get doForceRemove(){let t=this.connectedScope;for(;null!==t;){if(t.isViewport&&t.endpoint.forceRemove)return!0;t=t.parent}return!1}isActiveNavigation(t){return this.coordinators[this.coordinators.length-1]===t}toString(){const t=this.getContent()?.instruction.component.name??"",e=this.getNextContent()?.instruction.component.name??"";return`v:${this.name}[${t}->${e}]`}setNextContent(t,e){t.endpoint.set(this),this.clear=t.isClear(this.router);const s=this.getContent(),i=new X(this.router,this,this.owningScope,this.scope.hasScope,this.clear?void 0:t,e,this.connectedCE??null);if(this.contents.push(i),i.fromHistory=!(null===i.componentInstance||null==e.navigation||!e.navigation.back&&!e.navigation.forward),this.options.stateful){const t=this.cache.find((t=>i.isCacheEqual(t)));void 0!==t?(this.contents.splice(this.contents.indexOf(i),1,t),i.fromCache=!0):this.cache.push(i)}return null!==i.componentInstance&&s.componentInstance===i.componentInstance?(i.delete(),this.contents.splice(this.contents.indexOf(i),1),this.transitionAction="skip"):!s.equalComponent(i)||e.navigation.refresh||"refresh"===s.reloadBehavior?this.transitionAction="swap":"disallow"===s.reloadBehavior?(i.delete(),this.contents.splice(this.contents.indexOf(i),1),this.transitionAction="skip"):"reload"===s.reloadBehavior?(s.reload=!0,i.instruction.component.set(s.componentInstance),i.contentStates=s.contentStates.clone(),i.reload=s.reload,this.transitionAction="reload"):this.options.stateful&&s.equalParameters(i)||s.equalParameters(i)?(i.delete(),this.contents.splice(this.contents.indexOf(i),1),this.transitionAction="skip"):this.transitionAction="swap"}setConnectedCE(t,e){e=e??{},this.connectedCE!==t&&(this.previousViewportState={...this},this.clearState(),this.connectedCE=t,this.options.apply(e),this.connectionResolve?.());const s=(this.scope.parent?.endpoint.getRoutes()??[]).filter((t=>(Array.isArray(t.path)?t.path:[t.path]).includes(""))).length>0;if(null===this.getContent().componentInstance&&null==this.getNextContent()?.componentInstance&&(this.options.default||s)){const t=rt.parse(this.router,this.options.default??"");if(0===t.length&&s){const e=this.scope.parent?.findInstructions([rt.create("")],!1,this.router.configuration.options.useConfiguredRoutes);e?.foundConfiguration&&t.push(...e.instructions)}for(const e of t)e.endpoint.set(this),e.scope=this.owningScope,e.default=!0;this.router.load(t,{append:!0}).catch((t=>{throw t}))}}remove(t,e){return this.connectedCE===e&&q.run(t,(t=>{if(null!==this.getContent().componentInstance)return this.getContent().freeContent(t,this.connectedCE,this.getNextContent()?.navigation??null,this.historyCache,!this.doForceRemove&&(this.router.statefulHistory||this.options.stateful))}),(t=>{if(this.doForceRemove){const e=[];for(const t of this.historyCache)e.push((e=>t.freeContent(e,null,null,this.historyCache,!1)));return e.push((()=>{this.historyCache=[]})),q.run(t,...e)}return!0}))}async transition(t){const e=this.router.configuration.options.indicators.viewportNavigating;for(this.coordinators.push(t);this.coordinators[0]!==t;)await this.coordinators[0].waitForSyncState("completed");let s=this.parentViewport;null!==s&&"reload"!==s.transitionAction&&"swap"!==s.transitionAction&&(s=null);const i=[e=>{if(this.isActiveNavigation(t))return this.canUnload(t,e)},e=>{if(this.isActiveNavigation(t))if(!1===(e.previousValue??!0))t.cancel();else if(this.router.isRestrictedNavigation){const e=this.router.configuration.options;this.getNavigationContent(t).createComponent(t,this.connectedCE,this.options.fallback||e.fallback,this.options.fallbackAction||e.fallbackAction)}t.addEndpointState(this,"guardedUnload")},()=>t.waitForSyncState("guardedUnload",this),()=>null!==s?t.waitForEndpointState(s,"guardedLoad"):void 0,e=>{if(this.isActiveNavigation(t))return this.canLoad(t,e)},e=>{if(this.isActiveNavigation(t)){let s=e.previousValue??!0;if("boolean"!=typeof s){const i=this.getNavigationContent(t).instruction;if(t.removeInstructions(i.dynasty),i.nextScopeInstructions=null,"string"==typeof s){const t=this.scope,e=this.router.configuration.options;let i=rt.parse(this.router,s);const n=t.parent?.findInstructions(i,e.useDirectRouting,e.useConfiguredRoutes);(n?.foundConfiguration||n?.foundInstructions)&&(i=n.instructions);for(const e of i)e.endpoint.set(this),e.scope=t.owningScope;s=i}return q.run(e,(e=>this.cancelContentChange(t,e)),(e=>(this.router.load(s,{append:t}),e.exit())))}if(!s){e.cancel(),t.cancel();const s=this.getNavigationContent(t).instruction;return t.removeInstructions(s.dynasty),void(s.nextScopeInstructions=null)}}t.addEndpointState(this,"guardedLoad"),t.addEndpointState(this,"guarded")}],n=[()=>t.waitForSyncState("guarded",this),e=>{if(this.isActiveNavigation(t))return this.unload(t,e)},()=>t.addEndpointState(this,"unloaded"),()=>t.waitForSyncState("unloaded",this),()=>null!==s?t.waitForEndpointState(s,"loaded"):void 0,e=>{if(this.isActiveNavigation(t))return this.load(t,e)},()=>t.addEndpointState(this,"loaded"),()=>t.addEndpointState(this,"routed")],r=[()=>t.waitForSyncState("routed",this),()=>t.waitForEndpointState(this,"routed")];switch(this.router.configuration.options.swapOrder){case"detach-current-attach-next":r.push((e=>{if(this.isActiveNavigation(t))return this.removeContent(e,t)}),(e=>{if(this.isActiveNavigation(t))return this.addContent(e,t)}));break;case"attach-next-detach-current":r.push((e=>{if(this.isActiveNavigation(t))return this.addContent(e,t)}),(e=>{if(this.isActiveNavigation(t))return this.removeContent(e,t)}));break;case"detach-attach-simultaneously":r.push((e=>q.runParallel(e,(e=>{if(this.isActiveNavigation(t))return this.removeContent(e,t)}),(e=>{if(this.isActiveNavigation(t))return this.addContent(e,t)}))));break;case"attach-detach-simultaneously":r.push((e=>q.runParallel(e,(e=>{if(this.isActiveNavigation(t))return this.addContent(e,t)}),(e=>{if(this.isActiveNavigation(t))return this.removeContent(e,t)}))))}r.push((()=>t.addEndpointState(this,"swapped"))),this.connectedCE?.setActivity?.(e,!0),this.connectedCE?.setActivity?.(t.navigation.navigation,!0);const o=q.run(null,(e=>t.setEndpointStep(this,e.root)),...i,...n,...r,(()=>t.addEndpointState(this,"completed")),(()=>t.waitForSyncState("bound")),(()=>{this.connectedCE?.setActivity?.(e,!1),this.connectedCE?.setActivity?.(t.navigation.navigation,!1)}));o instanceof Promise&&o.catch((t=>{}))}canUnload(t,e){return q.run(e,(e=>this.getContent().connectedScope.canUnload(t,e)),(e=>!1!==(e.previousValue??!0)&&this.getContent().canUnload(t.navigation)))}canLoad(t,e){return!!this.clear||q.run(e,(()=>this.waitForConnected()),(()=>{const e=this.router.configuration.options,s=this.getNavigationContent(t);return s.createComponent(t,this.connectedCE,this.options.fallback||e.fallback,this.options.fallbackAction||e.fallbackAction),s.canLoad()}))}load(t,e){if(!this.clear)return this.getNavigationContent(t).load(e)}addContent(t,e){return this.activate(t,null,this.connectedController,e)}removeContent(t,e){if(this.isEmpty)return;const s=this.router.statefulHistory||(this.options.stateful??!1);return q.run(t,(()=>e.addEndpointState(this,"bound")),(()=>e.waitForSyncState("bound")),(t=>this.deactivate(t,null,this.connectedController)),(()=>s?this.dispose():void 0))}activate(t,e,s,i){if(null!==this.activeContent.componentInstance)return q.run(t,(()=>this.activeContent.canLoad()),(t=>this.activeContent.load(t)),(t=>this.activeContent.activateComponent(t,e,s,this.connectedCE,(()=>i?.addEndpointState(this,"bound")),i?.waitForSyncState("bound"))))}deactivate(t,e,s){const i=this.getContent();if(null!=i?.componentInstance&&!i.reload&&i.componentInstance!==this.getNextContent()?.componentInstance)return i.deactivateComponent(t,e,s,this.connectedCE,this.router.statefulHistory||this.options.stateful)}unload(t,e){return q.run(e,(e=>this.getContent().connectedScope.unload(t,e)),(()=>null!=this.getContent().componentInstance?this.getContent().unload(t.navigation??null):void 0))}dispose(){null===this.getContent().componentInstance||this.getContent().reload||this.getContent().componentInstance===this.getNextContent()?.componentInstance||this.getContent().disposeComponent(this.connectedCE,this.historyCache,this.router.statefulHistory||this.options.stateful)}finalizeContentChange(t,e){const s=this.contents.findIndex((e=>e.navigation===t.navigation));let i=this.contents[s];const n=this.contents[s-1];if(this.clear){const t=new X(this.router,this,this.owningScope,this.scope.hasScope,void 0,i.navigation);this.contents.splice(s,1,t),i.delete(),i=t}else i.reload=!1;n.delete(),i.completed=!0,this.transitionAction="",i.contentStates.delete("checkedUnload"),i.contentStates.delete("checkedLoad"),this.previousViewportState=null;const r=this.router.configuration.options.indicators.viewportNavigating;this.connectedCE?.setActivity?.(r,!1),this.connectedCE?.setActivity?.(t.navigation.navigation,!1);let o=0;for(let t=0,e=s;t<e&&this.contents[0].navigation.completed;t++)o++;this.contents.splice(0,o),F(this.coordinators,(e=>e===t))}cancelContentChange(t,e=null){[...new Set(this.scope.children.map((t=>t.endpoint)))].forEach((s=>s.cancelContentChange(t,e)));const s=this.contents.findIndex((e=>e.navigation===t.navigation));if(s<0)return;const i=t.getEndpointStep(this)?.current??null,n=this.contents[s],r=this.contents[s-1];return n.instruction.cancelled=!0,q.run(i,(t=>n.freeContent(t,this.connectedCE,n.navigation,this.historyCache,this.router.statefulHistory||this.options.stateful)),(()=>{this.previousViewportState&&Object.assign(this,this.previousViewportState),n?.delete(),null!==n&&this.contents.splice(this.contents.indexOf(n),1),this.transitionAction="",r?.contentStates.delete("checkedUnload"),r?.contentStates.delete("checkedLoad");const e=this.router.configuration.options.indicators.viewportNavigating;this.connectedCE?.setActivity?.(e,!1),this.connectedCE?.setActivity?.(t.navigation.navigation,!1),t.removeEndpoint(this),F(this.coordinators,(e=>e===t))}),(()=>{if(i!==e)return i?.exit()}))}wantComponent(t){return this.options.usedBy.includes(t)}acceptComponent(t){if("-"===t||null===t)return!0;const e=this.options.usedBy;return 0===e.length||!!e.includes(t)||!!e.filter((t=>t.includes("*"))).length}freeContent(t,e){const s=this.historyCache.find((t=>t.componentInstance===e));if(void 0!==s)return q.run(t,(t=>(this.forceRemove=!0,s.freeContent(t,null,null,this.historyCache,!1))),(()=>{this.forceRemove=!1,F(this.historyCache,(t=>t===s))}))}getRoutes(){const t=[];let e=this.getComponentType();return null!=e&&(e=e.constructor===e.constructor.constructor?e:e.constructor,t.push(...K.getConfiguration(e)??[])),t}getTitle(t){if(this.options.noTitle)return"";const e=this.getComponentType();if(null===e)return"";let s="";const i=e.title;if(void 0!==i)if("string"==typeof i)s=i;else{const e=this.getComponentInstance();s=i.call(e,e,t)}else if(this.router.configuration.options.title.useComponentNames){let t=this.getContentInstruction().component.name??"";const e=this.router.configuration.options.title.componentPrefix??"";t.startsWith(e)&&(t=t.slice(e.length)),t=t.replace("-"," "),s=t.slice(0,1).toLocaleUpperCase()+t.slice(1)}return s}getComponentType(){let t=this.getContentInstruction().component.type??null;return null===t&&(t=a.K94.for(this.connectedCE.element).container.componentType),t??null}getComponentInstance(){return this.getContentInstruction().component.instance??null}getContentInstruction(){return this.getNextContent()?.instruction??this.getContent().instruction??null}clearState(){this.options=et.create();const t=this.owningScope,e=this.scope.hasScope;if(this.getContent().delete(),this.contents.shift(),this.contents.length<1)throw new Error("no content!");this.contents.push(new X(this.router,this,t,e)),this.cache=[]}waitForConnected(){if(null===this.connectedCE)return new Promise((t=>{this.connectionResolve=t}))}}class it{constructor(){this.name=null,this.instance=null,this.scope=null}get none(){return null===this.name&&null===this.instance}get endpointType(){return this.instance instanceof st?"Viewport":this.instance instanceof z?"ViewportScope":null}static create(t){const e=new it;return e.set(t),e}static isName(t){return"string"==typeof t}static isInstance(t){return t instanceof $}static getName(t){return it.isName(t)?t:t?t.name:null}static getInstance(t){return it.isName(t)?null:t}set(t){void 0!==t&&""!==t||(t=null),"string"==typeof t?(this.name=t,this.instance=null):(this.instance=t,null!==t&&(this.name=t.name,this.scope=t.owningScope))}toInstance(t){return null!==this.instance?this.instance:t.getEndpoint(this.endpointType,this.name)}same(t,e){return null!==this.instance&&null!==t.instance?this.instance===t.instance:null!==this.endpointType&&null!==t.endpointType&&this.endpointType===t.endpointType&&(!e||this.scope===t.scope)&&(null!==this.instance?this.instance.name:this.name)===(null!==t.instance?t.instance.name:t.name)}}const nt={excludeEndpoint:!1,endpointContext:!1,fullState:!1};class rt{constructor(t,e,s){this.ownsScope=!0,this.nextScopeInstructions=null,this.scope=null,this.scopeModifier="",this.needsEndpointDescribed=!1,this.route=null,this.routeStart=!1,this.default=!1,this.topInstruction=!1,this.unparsed=null,this.cancelled=!1,this.component=j.create(t),this.endpoint=it.create(e),this.parameters=M.create(s)}static create(t,e,s,i=!0,n=null){const r=new rt(t,e,s);return r.ownsScope=i,r.nextScopeInstructions=n,r}static createClear(t,e){const s=rt.create(rt.clear(t),e);return s.scope=e.scope,s}static from(t,e){Array.isArray(e)||(e=[e]);const s=[];for(const i of e)if("string"==typeof i)s.push(...rt.parse(t,i));else if(i instanceof rt)s.push(i);else if(i instanceof Promise)s.push(rt.create(i));else if(j.isAppelation(i))s.push(rt.create(i));else if(j.isDefinition(i))s.push(rt.create(i.Type));else if("component"in i||"id"in i){const e=i,n=rt.create(e.component,e.viewport,e.parameters);n.route=i.id??null,void 0!==e.children&&null!==e.children&&(n.nextScopeInstructions=rt.from(t,e.children)),s.push(n)}else if("object"==typeof i&&null!==i){const t=a.K94.define(i);s.push(rt.create(t))}else s.push(rt.create(i));return s}static clear(t){return O.for(t).clear}static add(t){return O.for(t).add}static parse(t,e){const s=O.for(t);let i="";const n=/^[./]+/.exec(e);Array.isArray(n)&&n.length>0&&(i=n[0],e=e.slice(i.length));const r=N.parse(s,e,!0,!0).instructions;for(const t of r)t.scopeModifier=i;return r}static stringify(t,e,s={},i=!1){return"boolean"==typeof s&&(console.warn("[Deprecated] Boolean passed to RoutingInstruction.stringify. Please use the new interface instead: { excludeEndpoint: boolean; endpointContext: boolean; }"),s={excludeEndpoint:s,endpointContext:i}),s={...nt,...s},"string"==typeof e?e:e.map((e=>e.stringify(t,s))).filter((t=>t.length>0)).join(O.for(t).sibling)}static resolve(t){const e=t.filter((t=>t.isUnresolved)).map((t=>t.resolve())).filter((t=>t instanceof Promise));if(e.length>0)return Promise.all(e)}static containsSiblings(t,e){return null!==e&&(e.filter((e=>!e.isClear(t)&&!e.isClearAll(t))).length>1||e.some((e=>rt.containsSiblings(t,e.nextScopeInstructions))))}static flat(t){const e=[];for(const s of t)e.push(s),s.hasNextScopeInstructions&&e.push(...rt.flat(s.nextScopeInstructions));return e}static clone(t,e=!1,s=!1){return t.map((t=>t.clone(e,s)))}static contains(t,e,s,i){return s.every((s=>s.isIn(t,e,i)))}get viewport(){return this.endpoint.instance instanceof st||null===this.endpoint.endpointType?this.endpoint:null}get viewportScope(){return this.endpoint.instance instanceof z||null===this.endpoint.endpointType?this.endpoint:null}get previous(){return this.endpoint.instance?.getContent()?.instruction}isAdd(t){return this.component.name===O.for(t).add}isClear(t){return this.component.name===O.for(t).clear}isAddAll(t){return this.isAdd(t)&&0===(this.endpoint.name?.length??0)}isClearAll(t){return this.isClear(t)&&0===(this.endpoint.name?.length??0)}get hasNextScopeInstructions(){return(this.nextScopeInstructions?.length??0)>0}get dynasty(){const t=[this];return this.hasNextScopeInstructions&&t.push(...this.nextScopeInstructions.map((t=>t.dynasty)).flat()),t}get isUnresolved(){return this.component.isFunction()||this.component.isPromise()}resolve(){return this.component.resolve(this)}typeParameters(t){return this.parameters.toSpecifiedParameters(t,this.component.type?.parameters??[])}sameRoute(t){const e=this.route?.match,s=t.route?.match;return null!=e&&null!=s&&("string"==typeof e||"string"==typeof s?e===s:e.id===s.id)}sameComponent(t,e,s=!1,i=!1){return!(s&&!this.sameParameters(t,e,i))&&this.component.same(e.component,i)}sameEndpoint(t,e){return this.endpoint.same(t.endpoint,e)}sameParameters(t,e,s=!1){return!!this.component.same(e.component,s)&&this.parameters.same(t,e.parameters,this.component.type)}stringify(t,e={},s=!1,i=!1){"boolean"==typeof e?(console.warn("[Deprecated] Boolean passed to RoutingInstruction.stringify. Please use the new interface instead: { excludeEndpoint: boolean; endpointContext: boolean; }"),e={excludeEndpoint:e,endpointContext:s}):i=s,e={...nt,...e};const n=O.for(t);let r=e.excludeEndpoint,o=!1;if(e.endpointContext){const t=this.viewport?.instance??null;if(t?.options.noLink)return"";this.needsEndpointDescribed||t?.options.forceDescription&&null==this.viewportScope?.instance||(r=!0),t?.options.fallback===this.component.name&&(o=!0),t?.options.default===this.component.name&&(o=!0)}const a=this.nextScopeInstructions;let h=this.scopeModifier;if(this.route instanceof R&&!this.routeStart)return!i&&Array.isArray(a)?rt.stringify(t,a,e):"";const c=this.stringifyShallow(t,r,o,e.fullState);if(h+=c.endsWith(n.scope)?c.slice(0,-n.scope.length):c,!i&&Array.isArray(a)&&a.length>0){const s=rt.stringify(t,a,e);s.length>0&&(h+=n.scope,h+=1===a.length?s:`${n.groupStart}${s}${n.groupEnd}`)}return h}clone(t=!1,e=!1,s=!1){const i=rt.create(this.component.func??this.component.promise??this.component.type??this.component.name,this.endpoint.name,this.parameters.typedParameters??void 0);return t&&(i.component.set(this.component.instance??this.component.type??this.component.name),i.endpoint.set(this.endpoint.instance??this.endpoint.name)),i.component.name=this.component.name,i.needsEndpointDescribed=this.needsEndpointDescribed,i.route=this.route,i.routeStart=this.routeStart,i.default=this.default,e&&(i.scopeModifier=this.scopeModifier),i.scope=t?this.scope:null,this.hasNextScopeInstructions&&!s&&(i.nextScopeInstructions=rt.clone(this.nextScopeInstructions,t,e)),i}isIn(t,e,s){const i=e.filter((e=>{if(null!=this.route||null!=e.route){if(!e.sameRoute(this))return!1}else if(!e.sameComponent(t,this))return!1;const s=e.component.type??this.component.type,i=this.component.type??e.component.type,n=e.parameters.toSpecifiedParameters(t,s?.parameters),r=this.parameters.toSpecifiedParameters(t,i?.parameters);return!!M.contains(n,r)&&(this.endpoint.none||e.sameEndpoint(this,!1))}));return!(0===i.length||s&&this.hasNextScopeInstructions&&!i.some((e=>rt.contains(t,e.nextScopeInstructions??[],this.nextScopeInstructions,s))))}getTitle(t){if(this.route instanceof R){const e=this.route.match?.title;if(null!=e)return this.routeStart?"string"==typeof e?e:e(this,t):""}return this.endpoint.instance.getTitle(t)}toJSON(){return{component:this.component.name??void 0,viewport:this.endpoint.name??void 0,parameters:this.parameters.parametersRecord??void 0,children:this.hasNextScopeInstructions?this.nextScopeInstructions:void 0}}stringifyShallow(t,e=!1,s=!1,i=!1){if(!i&&null!=this.route)return(this.route instanceof R?this.route.matching:this.route).split("/").map((e=>e.startsWith(":")?this.parameters.get(t,e.slice(1)):e)).join("/");const n=O.for(t);let r=!s||i?this.component.name??"":"";const o=this.component.type?this.component.type.parameters:null,a=M.stringify(t,this.parameters.toSortedParameters(t,o));return a.length>0&&(r+=!s||i?`${n.parameters}${a}${n.parametersEnd}`:a),null==this.endpoint.name||e&&!i||(r+=`${n.viewport}${this.endpoint.name}`),this.ownsScope||(r+=n.noScope),r||""}}class ot{constructor(t,e){this.eventName=t,this.navigation=e}static create(t){return new ot(ot.eventName,t)}}ot.eventName="au:router:navigation-navigate";class at{constructor(){this.lastNavigationIndex=-1,this.navigations=[],this.options={statefulHistoryLength:0},this.isActive=!1,this.uninitializedNavigation=Y.create({instruction:"NAVIGATOR UNINITIALIZED",fullStateInstruction:"",index:0,completed:!0}),this.ea=(0,o.hd)(o.xe),this.container=(0,o.hd)(o.p7)}start(t){if(this.isActive)throw _(2010);this.isActive=!0,this.options={...t}}stop(){if(!this.isActive)throw _(2011);this.isActive=!1}navigate(t){t instanceof Y||(t=Y.create(t));const e=new G;return-1===this.lastNavigationIndex&&(this.loadState(),-1!==this.lastNavigationIndex?e.refresh=!0:(e.first=!0,e.new=!0,this.lastNavigationIndex=0,this.navigations=[Y.create({index:0,instruction:"",fullStateInstruction:""})])),void 0===t.index||t.replacing||t.refreshing?t.refreshing||e.refresh?((t=this.navigations[this.lastNavigationIndex]).replacing=!0,t.refreshing=!0):t.replacing?(e.replace=!0,e.new=!0,t.index=this.lastNavigationIndex):(e.new=!0,t.index=this.lastNavigationIndex+1,this.navigations[t.index]=t):(t.historyMovement=t.index-Math.max(this.lastNavigationIndex,0),t.instruction=null!=this.navigations[t.index]?this.navigations[t.index].fullStateInstruction:t.fullStateInstruction,t.replacing=!0,t.historyMovement>0?e.forward=!0:t.historyMovement<0&&(e.back=!0)),t.navigation=e,t.previous=this.navigations[Math.max(this.lastNavigationIndex,0)],t.process=new H,this.lastNavigationIndex=t.index,this.notifySubscribers(t),t.process.promise}async finalize(t,e){if(t.untracked)t.fromBrowser&&null!=this.options.store&&await this.options.store.popNavigatorState();else if(t.replacing)0===(t.historyMovement??0)&&(this.navigations[t.previous.index]=t),await this.saveState(t.index,!1);else{const s=t.index;if(e&&(this.navigations=this.navigations.slice(0,s)),this.navigations[s]=t,(this.options.statefulHistoryLength??0)>0){const t=this.navigations.length-(this.options.statefulHistoryLength??0);for(const e of this.navigations.slice(s))"string"==typeof e.instruction&&"string"==typeof e.fullStateInstruction||await this.serializeNavigation(e,this.navigations.slice(t,s))}await this.saveState(t.index,!t.fromBrowser)}}async cancel(t){null!=this.options.store&&(t.navigation?.new?t.fromBrowser&&await this.options.store.popNavigatorState():0!==(t.historyMovement??0)&&await this.options.store.go(-t.historyMovement,!0))}async go(t){let e=this.lastNavigationIndex+t;e=Math.min(e,this.navigations.length-1),await this.options.store.go(t,!0);const s=this.navigations[e];return this.navigate(s)}getState(){const t=null!=this.options.store?{...this.options.store.state}:{};return{navigations:t?.navigations??[],navigationIndex:t?.navigationIndex??-1}}loadState(){const{navigations:t,navigationIndex:e}=this.getState();this.navigations=t.map((t=>Y.create(t))),this.lastNavigationIndex=e}async saveState(t,e){for(let t=0;t<this.navigations.length;t++)this.navigations[t]=Y.create(this.navigations[t].toStoredNavigation());if((this.options.statefulHistoryLength??0)>0){const t=this.navigations.length-(this.options.statefulHistoryLength??0);for(let e=0;e<t;e++){const s=this.navigations[e];"string"==typeof s.instruction&&"string"==typeof s.fullStateInstruction||await this.serializeNavigation(s,this.navigations.slice(t))}}if(null==this.options.store)return Promise.resolve();const s={navigations:(this.navigations??[]).map((t=>this.toStoreableNavigation(t))),navigationIndex:t};return e?this.options?.store?.pushNavigatorState(s):this.options.store.replaceNavigatorState(s)}async refresh(){if(-1===this.lastNavigationIndex)return Promise.reject();const t=this.navigations[this.lastNavigationIndex];return t.replacing=!0,t.refreshing=!0,this.navigate(t)}notifySubscribers(t){this.ea.publish(ot.eventName,ot.create(t))}toStoreableNavigation(t){const e=t instanceof Y?t.toStoredNavigation():t;return e.instruction=rt.stringify(this.container,e.instruction),e.fullStateInstruction=rt.stringify(this.container,e.fullStateInstruction,{endpointContext:!0,fullState:!0}),"string"!=typeof e.scope&&(e.scope=null),e}async serializeNavigation(t,e){let s=[];for(const t of e)"string"!=typeof t.instruction&&s.push(...rt.flat(t.instruction).filter((t=>null!==t.endpoint.instance)).map((t=>t.component.instance))),"string"!=typeof t.fullStateInstruction&&s.push(...rt.flat(t.fullStateInstruction).filter((t=>null!==t.endpoint.instance)).map((t=>t.component.instance)));s=V(s);let i=[];"string"!=typeof t.fullStateInstruction&&(i.push(...t.fullStateInstruction),t.fullStateInstruction=rt.stringify(this.container,t.fullStateInstruction,{endpointContext:!0,fullState:!0})),"string"!=typeof t.instruction&&(i.push(...t.instruction),t.instruction=rt.stringify(this.container,t.instruction)),i=i.filter(((t,e,s)=>null!=t.component.instance&&s.indexOf(t)===e));const n=[];for(const t of i)await this.freeInstructionComponents(t,s,n)}freeInstructionComponents(t,e,s){const i=t.component.instance,n=t.viewport?.instance??null;if(null!==i&&null!==n&&!s.some((t=>t===i))){if(!e.some((t=>t===i)))return q.run(null,(t=>n.freeContent(t,i)),(()=>{s.push(i)}));if(t.hasNextScopeInstructions)for(const i of t.nextScopeInstructions)return this.freeInstructionComponents(i,e,s)}}}const ht=class{constructor(){this.rootState=new C(null,null,""),this.cache=new Map,this.endpointLookup=new Map}add(t,e=!1){let s,i;if(t instanceof Array)for(const n of t)i=this.$add(n,!1),s=i.params,e&&!s[s.length-1]?.isStar&&(i.residualEndpoint=this.$add({...n,path:`${n.path}/*${b}`},!0));else i=this.$add(t,!1),s=i.params,e&&!s[s.length-1]?.isStar&&(i.residualEndpoint=this.$add({...t,path:`${t.path}/*${b}`},!0));this.cache.clear()}$add(t,e){const s=t.path,i=this.endpointLookup;if(i.has(s))throw A(`Cannot add duplicate path '${s}'.`);const n=new f(s,!0===t.caseSensitive,t.handler),r=""===s?[""]:s.split("/").filter(k),o=[];let a=this.rootState;for(const t of r)switch(a=a.append(null,"/"),t.charAt(0)){case":":{S.lastIndex=0;const e=S.exec(t),{name:s,optional:i}=e?.groups??{},n="?"===i;if(s===b)throw new Error(`Invalid parameter name; usage of the reserved parameter name '${b}' is used.`);const r=e?.groups?.constraint,h=null!=r?new RegExp(r):null;o.push(new p(s,n,!1,h)),a=new x(s,n,h).appendTo(a);break}case"*":{const s=t.slice(1);let i;if(s===b){if(!e)throw new Error(`Invalid parameter name; usage of the reserved parameter name '${b}' is used.`);i=1}else i=2;o.push(new p(s,!0,!0,null)),a=new I(s,i).appendTo(a);break}default:a=new T(t,n.caseSensitive).appendTo(a)}const h=new g(n,o);return a.setEndpoint(h),i.set(s,h),h}recognize(t){let e=this.cache.get(t);return void 0===e&&this.cache.set(t,e=this.$recognize(t)),e}$recognize(t){(t=decodeURI(t)).startsWith("/")||(t=`/${t}`),t.length>1&&t.endsWith("/")&&(t=t.slice(0,-1));const e=new y(this.rootState);for(let s=0,i=t.length;s<i;++s){const i=t.charAt(s);if(e.advance(i),e.isEmpty)return null}const s=e.getSolution();if(null===s)return null;const{endpoint:i}=s,n=s.u();return new m(i,n)}getEndpoint(t){return this.endpointLookup.get(t)??null}};class ct extends Array{constructor(){super(...arguments),this.currentIndex=-1}next(){return this.length>this.currentIndex+1?this[++this.currentIndex]:(this.currentIndex=-1,null)}removeCurrent(){this.splice(this.currentIndex--,1)}remove(t){F(this,(e=>e===t))}}class lt{static matchEndpoints(t,e,s,i=!1){const n=[],r=t.getOwnedRoutingScopes(1/0).map((t=>t.endpoint)).filter((e=>null!==e&&!s.some((s=>e===s.endpoint.instance&&!s.cancelled&&!s.isClear(t.router))))),o=new ct(...e.slice());let a=null;for(lt.matchKnownEndpoints(t.router,"ViewportScope",o,r,n,!1),i||lt.matchKnownEndpoints(t.router,"Viewport",o,r,n,!1),lt.matchViewportScopeSegment(t.router,t,o,r,n);null!==(a=o.next());)a.needsEndpointDescribed=!0;return lt.matchViewportConfiguration(o,r,n),i||lt.matchSpecifiedViewport(o,r,n,!1),lt.matchLastViewport(o,r,n),i&&lt.matchSpecifiedViewport(o,r,n,!1),{matchedInstructions:n,remainingInstructions:[...o]}}static matchKnownEndpoints(t,e,s,i,n,r=!1){let o;for(;null!==(o=s.next());)null===o.endpoint.instance||o.isAdd(t)||o.endpoint.endpointType!==e||(lt.matchEndpoint(o,o.endpoint.instance,r),n.push(o),F(i,(t=>t===o.endpoint.instance)),s.removeCurrent())}static matchViewportScopeSegment(t,e,s,i,n){let r;for(;null!==(r=s.next());)for(let o of i)if(o instanceof z&&o.acceptSegment(r.component.name)){if(Array.isArray(o.source)){let s=i.find((t=>t instanceof z&&t.name===o.name));if(void 0===s||r.isAdd(t)){const t=o.addSourceItem();s=e.getOwnedScopes().filter((t=>t.isViewportScope)).map((t=>t.endpoint)).find((e=>e.sourceItem===t))}o=s}lt.matchEndpoint(r,o,!1),n.push(r),F(i,(t=>t===r.endpoint.instance)),s.removeCurrent();break}}static matchViewportConfiguration(t,e,s){let i;for(;null!==(i=t.next());)for(const n of e)if(n instanceof st&&n?.wantComponent(i.component.name)){lt.matchEndpoint(i,n,!0),s.push(i),F(e,(t=>t===i.endpoint.instance)),t.removeCurrent();break}}static matchSpecifiedViewport(t,e,s,i){let n;for(;null!==(n=t.next());){let r=n.endpoint.instance;if(null==r){const t=n.endpoint.name;if(0===(t?.length??0))continue;for(const s of e)if(s instanceof st&&t===s.name){r=s;break}}r?.acceptComponent(n.component.name)&&(lt.matchEndpoint(n,r,i),s.push(n),F(e,(t=>t===n.endpoint.instance)),t.removeCurrent())}}static matchLastViewport(t,e,s){let i;for(;null!==(i=t.next());){const n=[];for(const t of e)t instanceof st&&t.acceptComponent(i.component.name)&&n.push(t);if(1===n.length){const r=n[0];lt.matchEndpoint(i,r,!0),s.push(i),F(e,(t=>t===i.endpoint.instance)),t.removeCurrent()}}}static matchEndpoint(t,e,s){t.endpoint.set(e),s&&(t.needsEndpointDescribed=!1),t.hasNextScopeInstructions&&t.nextScopeInstructions.forEach((t=>{null===t.scope&&(t.scope=e instanceof st?e.scope:e.scope.scope)}))}}class ut{constructor(t,e,s,i){this.id=++ut.lastId,this.parent=null,this.children=[],this.router=t,this.hasScope=e,this.owningScope=s??this,this.endpointContent=i}static for(t,e){if(null==t)return{scope:null,instruction:e};if(t instanceof ut||t instanceof st||t instanceof z)return{scope:t.scope,instruction:e};let s;if("res"in t)s=t;else if("container"in t)s=t.container;else if("$controller"in t)s=t.$controller.container;else{const e=a.K94.for(t,{searchParents:!0});s=e?.container}if(null==s)return{scope:null,instruction:e};const i=s.has(kt.closestEndpointKey,!0)?s.get(kt.closestEndpointKey):null;let n=i?.scope??null;if(null===n||void 0===e){const t=e??"";return{scope:n,instruction:t.startsWith("/")?t.slice(1):e}}if(e.startsWith("/"))return{scope:null,instruction:e.slice(1)};for(;e.startsWith(".");)if(e.startsWith("./"))e=e.slice(2);else{if(!e.startsWith("../"))break;n=n.parent??n,e=e.slice(3)}return{scope:n,instruction:e}}get scope(){return this.hasScope?this:this.owningScope.scope}get endpoint(){return this.endpointContent.endpoint}get isViewport(){return this.endpoint instanceof st}get isViewportScope(){return this.endpoint instanceof z}get type(){return this.isViewport?"Viewport":"ViewportScope"}get enabled(){return this.endpointContent.isActive}get passThroughScope(){return this.isViewportScope&&this.endpoint.passThroughScope}get pathname(){return`${this.owningScope!==this?this.owningScope.pathname:""}/${this.endpoint.name}`}get path(){return`${this.parent?.path??""}${this.routingInstruction?.stringify(this.router,{endpointContext:!0},!0)??""}${this.routingInstruction?O.for(this.router).scope:""}`}toString(t=!1){return`${this.owningScope!==this?this.owningScope.toString():""}/${this.enabled?"":"("}${this.endpoint.toString()}#${this.id}${this.enabled?"":")"}`+(t?"\n"+this.children.map((t=>t.toString(!0))).join(""):"")}toStringOwning(t=!1){return`${this.owningScope!==this?this.owningScope.toString():""}/${this.enabled?"":"("}${this.endpoint.toString()}#${this.id}${this.enabled?"":")"}`+(t?"\n"+this.ownedScopes.map((t=>t.toStringOwning(!0))).join(""):"")}get enabledChildren(){return this.children.filter((t=>t.enabled))}get hoistedChildren(){const t=this.enabledChildren;for(;t.some((t=>t.passThroughScope));)for(const e of t.slice())if(e.passThroughScope){const s=t.indexOf(e);t.splice(s,1,...e.enabledChildren)}return t}get ownedScopes(){return this.getOwnedScopes()}get routingInstruction(){return this.endpoint.isViewportScope?this.endpoint.instruction:this.isViewport?this.endpoint.activeContent.instruction:null}getOwnedScopes(t=!1){const e=this.allScopes(t).filter((t=>t.owningScope===this));for(const t of e.slice())if(t.passThroughScope){const s=e.indexOf(t);e.splice(s,1,...t.getOwnedScopes())}return e}findInstructions(t,e,s){const i=this.router;let n=new R;if(s&&!rt.containsSiblings(i,t)){let s=t.filter((t=>t.isClear(i)||t.isClearAll(i)));const r=t.filter((t=>!t.isClear(i)&&!t.isClearAll(i)));if(r.length>0)for(const o of r){const r="string"==typeof o.route?o.route:o.unparsed??rt.stringify(i,[o]),a=this.findMatchingRoute(r,o.parameters.parametersRecord??{});if(a.foundConfiguration)n=a,n.instructions=[...s,...n.instructions],s=[];else{if(!e)throw new Error(`No route found for: ${rt.stringify(i,t)}!`);n.instructions=[...s,...n.instructions,o],s=[],n.remaining=rt.stringify(i,o.nextScopeInstructions??[])}}else n.instructions=[...s]}else{if(!e)throw new Error(`No way to process sibling viewport routes with direct routing disabled: ${rt.stringify(i,t)}!`);n.instructions.push(...t)}n.instructions=n.instructions.filter((t=>""!==t.component.name));for(const t of n.instructions)null===t.scope&&(t.scope=this);return n}matchEndpoints(t,e,s=!1){const i=[],n=t.filter((t=>(t.scope??this)===this)),r=t.filter((t=>(t.scope??this)!==this)),{matchedInstructions:o,remainingInstructions:a}=lt.matchEndpoints(this,n,e,s);return i.push(...o),r.push(...a),{matchedInstructions:i,remainingInstructions:r}}addEndpoint(t,e,s,i={}){let n=this.getOwnedScopes().find((s=>s.type===t&&s.endpoint.name===e))?.endpoint??null;return null!=s&&null!=n?.connectedCE&&n.connectedCE!==s&&(n=this.getOwnedScopes(!0).find((i=>i.type===t&&i.endpoint.name===e&&i.endpoint.connectedCE===s))?.endpoint??null),null==n&&(n="Viewport"===t?new st(this.router,e,s,this.scope,!!i.scope,i):new z(this.router,e,s,this.scope,!0,null,i),this.addChild(n.connectedScope)),null!=s&&n.setConnectedCE(s,i),n}removeEndpoint(t,e,s){return!(null===(s??null)&&!e.removeEndpoint(t,s)||(this.removeChild(e.connectedScope),0))}addChild(t){this.children.some((e=>e===t))||(null!==t.parent&&t.parent.removeChild(t),this.children.push(t),t.parent=this)}removeChild(t){const e=this.children.indexOf(t);e>=0&&(this.children.splice(e,1),t.parent=null)}allScopes(t=!1){const e=t?this.children.slice():this.enabledChildren;for(const s of e.slice())e.push(...s.allScopes(t));return e}reparentRoutingInstructions(){const t=this.hoistedChildren.filter((t=>null!==t.routingInstruction&&t.routingInstruction.component.name));if(!t.length)return null;for(const e of t){const t=e.reparentRoutingInstructions();e.routingInstruction.nextScopeInstructions=null!==t&&t.length>0?t:null}return t.map((t=>t.routingInstruction))}getChildren(t){return this.children.map((e=>e.endpoint.getTimeContent(t))).filter((t=>null!==t)).map((t=>t.connectedScope))}getAllRoutingScopes(t){const e=this.getChildren(t);for(const s of e.slice())e.push(...s.getAllRoutingScopes(t));return e}getOwnedRoutingScopes(t){const e=this.getAllRoutingScopes(t).filter((t=>t.owningScope===this));for(const s of e.slice())if(s.passThroughScope){const i=e.indexOf(s);e.splice(i,1,...s.getOwnedRoutingScopes(t))}return V(e)}getRoutingInstructions(t){const e=V(this.getOwnedRoutingScopes(t).map((t=>t.endpoint))).map((e=>e.getTimeContent(t))).filter((t=>null!==t)),s=[];for(const i of e){const e=i.instruction.clone(!0,!1,!1);""!==(e.component.name??"")&&(e.nextScopeInstructions=i.connectedScope.getRoutingInstructions(t),s.push(e))}return s}canUnload(t,e){return q.run(e,(e=>q.runParallel(e,...this.children.map((e=>null!==e.endpoint?s=>e.endpoint.canUnload(t,s):s=>e.canUnload(t,s))))),(t=>t.previousValue.every((t=>t??!0))))}unload(t,e){return q.runParallel(e,...this.children.map((e=>null!==e.endpoint?s=>e.endpoint.unload(t,s):s=>e.unload(t,s))))}matchScope(t,e=!1){const s=[];for(const i of t)i.scope===this?s.push(i):e&&i.hasNextScopeInstructions&&s.push(...this.matchScope(i.nextScopeInstructions,e));return s}findMatchingRoute(t,e){let s=new R;if(this.isViewportScope&&!this.passThroughScope)s=this.findMatchingRouteInRoutes(t,this.endpoint.getRoutes(),e);else if(this.isViewport)s=this.findMatchingRouteInRoutes(t,this.endpoint.getRoutes(),e);else for(const i of this.enabledChildren)if(s=i.findMatchingRoute(t,e),s.foundConfiguration)break;return s.foundConfiguration?s:null!=this.parent?this.parent.findMatchingRoute(t,e):s}findMatchingRouteInRoutes(t,e,s){const i=new R;if(0===e.length)return i;e=e.map((t=>this.ensureProperRoute(t)));const n=[];for(const t of e){const e=Array.isArray(t.path)?t.path:[t.path];for(const s of e)n.push({...t,path:s,handler:t}),""!==s&&n.push({...t,path:`${s}/*remainingPath`,handler:t})}(t.startsWith("/")||t.startsWith("+"))&&(t=t.slice(1));const r=e.find((e=>e.id===t));let o={params:{},endpoint:{}};if(null!=r){o.endpoint={route:{handler:r}};const e=(t=Array.isArray(r.path)?r.path[0]:r.path).split("/").map((t=>{if(t.startsWith(":")){const e=t.slice(1).replace(/\?$/,""),i=s[e];return o.params[e]=i,i}return t}));t=e.join("/")}else{const e=new ht;e.add(n),o=e.recognize(t)}if(null!=o){i.match=o.endpoint.route.handler,i.matching=t;const n={...o.params};if(null!=n.remainingPath&&(i.remaining=n.remainingPath,Reflect.deleteProperty(n,"remainingPath"),i.matching=i.matching.slice(0,i.matching.indexOf(i.remaining))),i.params=n,null!=i.match?.redirectTo){let t=i.match?.redirectTo;return(i.remaining??"").length>0&&(t+=`/${i.remaining}`),this.findMatchingRouteInRoutes(t,e,s)}}if(i.foundConfiguration){i.instructions=rt.clone(i.match.instructions,!1,!0);const t=i.instructions.slice();for(;t.length>0;){const e=t.shift();e.parameters.addParameters(i.params),e.route=i,e.hasNextScopeInstructions&&t.unshift(...e.nextScopeInstructions)}i.instructions.length>0&&(i.instructions[0].routeStart=!0);const e=rt.parse(this.router,i.remaining);if(e.length>0){let t=i.instructions[0];for(;t.hasNextScopeInstructions;)t=t.nextScopeInstructions[0];t.nextScopeInstructions=e}}return i}ensureProperRoute(t){return void 0===t.id&&(t.id=Array.isArray(t.path)?t.path.join(","):t.path),void 0===t.instructions&&(t.instructions=[{component:t.component,viewport:t.viewport,parameters:t.parameters,children:t.children}]),null===t.redirectTo&&(t.instructions=rt.from(this.router,t.instructions)),t}}ut.lastId=0;class dt{constructor(t,e,s=0){this.taskQueue=t,this.item=e,this.cost=s,this.done=!1,this.promise=new Promise(((t,e)=>{this.resolve=()=>{this.taskQueue.resolve(this,t)},this.reject=t=>{this.taskQueue.reject(this,e,t)}}))}async execute(){"execute"in this.item?await this.item.execute(this):await this.item(this)}wait(){return this.promise}}class pt{get isActive(){return null!==this.task}constructor(t){this.callback=t,this.pending=[],this.processing=null,this.allowedExecutionCostWithinTick=null,this.currentExecutionCostInCurrentTick=0,this.platform=null,this.task=null,this.dequeue=t=>{null===this.processing&&(void 0!==t&&(this.currentExecutionCostInCurrentTick=0),0!==this.pending.length&&(null!==this.allowedExecutionCostWithinTick&&void 0===t&&this.currentExecutionCostInCurrentTick+(this.pending[0].cost||0)>this.allowedExecutionCostWithinTick||(this.processing=this.pending.shift()||null,this.processing&&(this.currentExecutionCostInCurrentTick+=this.processing.cost??0,void 0!==this.callback?this.callback(this.processing):this.processing.execute().catch((t=>{throw t}))))))}}get length(){return this.pending.length}start(t){this.platform=t.platform,this.allowedExecutionCostWithinTick=t.allowedExecutionCostWithinTick,this.task=this.platform.domQueue.queueTask(this.dequeue,{persistent:!0})}stop(){this.task.cancel(),this.task=null,this.allowedExecutionCostWithinTick=null,this.clear()}enqueue(t,e){const s=Array.isArray(t),i=s?t:[t],n=i.map(((t,s)=>Array.isArray(e)?e[s]:e)).map((t=>void 0!==t?t:1)),r=[];for(const t of i)r.push(t instanceof dt?t:this.createQueueTask(t,n.shift()));return this.pending.push(...r),this.dequeue(),s?r:r[0]}createQueueTask(t,e){return new dt(this,t,e)}clear(){this.pending.length=0}resolve(t,e){e(),this.processing=null,this.dequeue()}reject(t,e,s){e(s),this.processing=null,this.dequeue()}}class ft{constructor(){this.allowedExecutionCostWithinTick=2,this.pendingCalls=new pt,this.isActive=!1,this.options={useUrlFragmentHash:!0},this.forwardedState={eventTask:null,suppressPopstate:!1},this.platform=(0,o.hd)(a.r_),this.window=(0,o.hd)(a.mYM),this.history=(0,o.hd)(a.YFW),this.location=(0,o.hd)(a.PyP),this.ea=(0,o.hd)(o.xe)}start(t){if(this.isActive)throw _(2007);this.isActive=!0,null!=t.useUrlFragmentHash&&(this.options.useUrlFragmentHash=t.useUrlFragmentHash),this.pendingCalls.start({platform:this.platform,allowedExecutionCostWithinTick:this.allowedExecutionCostWithinTick}),this.window.addEventListener("popstate",this)}stop(){if(!this.isActive)throw _(2008);this.window.removeEventListener("popstate",this),this.pendingCalls.stop(),this.options={useUrlFragmentHash:!0},this.isActive=!1}get length(){return this.history.length}get state(){return this.history.state}get viewerState(){const{pathname:t,search:e,hash:s}=this.location,i=this.options.useUrlFragmentHash?s.slice(1):`${t}${e}`,n=this.options.useUrlFragmentHash?s.slice(1).includes("#")?s.slice(s.slice(1).indexOf("#",1)):"":s.slice(1);return new gt(t,e.slice(1),n,i)}async go(t,e=!1){const s=this.pendingCalls.createQueueTask((t=>t.resolve()),1);return this.pendingCalls.enqueue([t=>{const i=s,n=e;this.forwardState({eventTask:i,suppressPopstate:n}),t.resolve()},e=>{const s=this.history,i=t;s.go(i),e.resolve()}],[0,1]),s.wait()}async pushNavigatorState(t){const{title:e,path:s}=t.navigations[t.navigationIndex],i=this.options.useUrlFragmentHash?"#/":"";return this.pendingCalls.enqueue((n=>{const r=this.history,o=t,a=e||"",h=`${i}${s}`;try{r.pushState(o,a,h),this.setTitle(a)}catch(t){const e=this.tryCleanState(o,"push",t);r.pushState(e,a,h),this.setTitle(a)}n.resolve()}),1).wait()}async replaceNavigatorState(t,e,s){const i=t.navigations[t.navigationIndex];e??=i.title,s??=i.path;const n=this.options.useUrlFragmentHash?"#/":"";return this.pendingCalls.enqueue((i=>{const r=this.history,o=t,a=e||"",h=`${n}${s}`;try{r.replaceState(o,a,h),this.setTitle(a)}catch(t){const e=this.tryCleanState(o,"replace",t);r.replaceState(e,a,h),this.setTitle(a)}i.resolve()}),1).wait()}async popNavigatorState(){const t=this.pendingCalls.createQueueTask((t=>t.resolve()),1);return this.pendingCalls.enqueue((async e=>{const s=t;await this.popState(s),e.resolve()}),1),t.wait()}setTitle(t){this.window.document.title=t}handleEvent(t){this.handlePopStateEvent(t)}handlePopStateEvent(t){const{eventTask:e,suppressPopstate:s}=this.forwardedState;this.forwardedState={eventTask:null,suppressPopstate:!1},this.pendingCalls.enqueue((async i=>{s||this.notifySubscribers(t),null!==e&&await e.execute(),i.resolve()}),1)}notifySubscribers(t){this.ea.publish(mt.eventName,mt.create(this.viewerState,t,this.history.state))}async popState(t){await this.go(-1,!0);const e=this.history.state,s=e?.navigations?.[e?.navigationIndex??0];null==s||s.firstEntry||(await this.go(-1,!0),await this.pushNavigatorState(e)),await t.execute()}forwardState(t){this.forwardedState=t}tryCleanState(t,e,s){try{return JSON.parse(JSON.stringify(t))}catch(t){throw _(2009,e,t,s)}}}class gt{constructor(t,e,s,i){this.path=t,this.query=e,this.hash=s,this.instruction=i}}class mt{constructor(t,e,s,i){this.eventName=t,this.viewerState=e,this.event=s,this.state=i}static create(t,e,s){return new mt(mt.eventName,t,e,s)}}mt.eventName="au:router:navigation-state-change";class vt{constructor(t){this.endpoint=t,this.running=!1,this.states=new Map,this.checkedStates=[],this.syncingState=null,this.syncPromise=null,this.step=null}hasReachedState(t){return this.states.has(t)&&null===this.states.get(t)}}class wt{constructor(t,e){this.router=t,this.navigation=e,this.instructions=[],this.matchedInstructions=[],this.processedInstructions=[],this.changedEndpoints=[],this.running=!1,this.completed=!1,this.cancelled=!1,this.hasAllEndpoints=!1,this.appendedInstructions=[],this.closed=!1,this.entities=[],this.syncStates=new Map,this.checkedSyncStates=new Set}static create(t,e,s){const i=new wt(t,e);return s.syncStates.forEach((t=>i.addSyncState(t))),i}appendInstructions(t){this.instructions.push(...t),this.manageDefaults()}removeInstructions(t){this.instructions=this.instructions.filter((e=>!t.includes(e))),this.matchedInstructions=this.matchedInstructions.filter((e=>!t.includes(e)))}manageDefaults(){const t=this.router;this.instructions=[...this.instructions.filter((t=>!t.default)),...this.instructions.filter((t=>t.default))],this.instructions.forEach((t=>{null==t.scope&&(t.scope=this.navigation.scope??this.router.rootScope?.scope??null)}));const e=this.instructions.filter((e=>!e.isClear(t)));for(;e.length>0;){const s=e.shift(),i=this.processedInstructions.some((e=>!e.isClear(t)&&!e.cancelled&&e.sameEndpoint(s,!0))),n=this.matchedInstructions.find((e=>!e.isClear(t)&&e.sameEndpoint(s,!0))),r=this.instructions.find((e=>!e.isClear(t)&&e.sameEndpoint(s,!0)&&e!==s));s.default&&(i||void 0!==n&&!n.default||void 0!==r&&!r.default)?F(this.instructions,(t=>t===s)):void 0===n?void 0!==r&&F(this.instructions,(t=>t===r)):F(this.matchedInstructions,(t=>t===n))}}async processInstructions(){const t=[];let e=100;for(;this.instructions.length>0;){if(!e--)throw console.error("processInstructions endless loop",this.navigation,this.instructions),new Error("Endless loop");this.instructions=[...this.instructions.filter((t=>!t.default)),...this.instructions.filter((t=>t.default))];const s=this.instructions[0].scope;if(null==s)throw new Error("No scope for instruction");t.push(...await this.processInstructionsForScope(s))}return t}async processInstructionsForScope(t){const e=this.router,s=e.configuration.options,i=this.getClearAllEndpoints(t),n=this.getInstructionsForScope(t).filter((t=>!(t.route instanceof W)));if(n.length>0){const e=t.findInstructions(n,s.useDirectRouting,s.useConfiguredRoutes);if(n.some((t=>!t.component.none||null!=t.route))&&!e.foundConfiguration&&!e.foundInstructions)throw this.createUnknownRouteError(n);this.instructions.splice(this.instructions.indexOf(n[0]),n.length,...e.instructions)}const r=rt.resolve(this.getInstructionsForScope(t));r instanceof Promise&&await r;for(const s of this.getInstructionsForScope(t).filter((t=>t.isAddAll(e))))s.endpoint.set(s.scope.endpoint.name),s.scope=s.scope.owningScope;let o=100;do{this.matchEndpoints(t),o--||e.unresolvedInstructionsError(this.navigation,this.instructions);const s=[],n=this.matchedInstructions.map((t=>t.endpoint.instance));this.matchedInstructions.push(...i.filter((t=>!n.includes(t))).map((t=>rt.createClear(e,t))));const r=await yt.invokeBeforeNavigation(this.matchedInstructions,this.navigation);if(!1===r)return e.cancelNavigation(this.navigation,this),[];!0!==r&&r!==this.matchedInstructions&&(this.matchedInstructions=r);for(const t of this.matchedInstructions){const n=t.endpoint.instance;if(null!==n){const r=n.setNextContent(t,this.navigation);"skip"!==r&&(s.push(n),this.addEndpoint(n));const o=[n];if("swap"===r&&o.push(...n.getContent().connectedScope.allScopes(!0).map((t=>t.endpoint))),F(i,(t=>o.includes(t))),F(this.matchedInstructions,(s=>s!==t&&s.isClear(e)&&o.includes(s.endpoint.instance))),!t.isClear(e)&&t.scope?.parent?.isViewportScope&&(F(i,(e=>e===t.scope.parent.endpoint)),F(this.matchedInstructions,(s=>s!==t&&s.isClear(e)&&s.endpoint.instance===t.scope.parent.endpoint))),t.hasNextScopeInstructions){if(this.instructions.push(...t.nextScopeInstructions),"skip"!==r)for(const e of t.nextScopeInstructions)e.scope=n.scope,e.endpoint.instance=null}else i.push(...t.endpoint.instance.scope.children.map((t=>t.endpoint)))}}const a=this.matchedInstructions.filter((t=>"skip"===t.endpoint.instance?.transitionAction)),h=a.filter((t=>t.hasNextScopeInstructions));if((0===a.length||0===h.length)&&(e.isRestrictedNavigation||this.finalEndpoint(),this.run(),this.hasAllEndpoints)){const t=this.waitForSyncState("guardedUnload");t instanceof Promise&&await t}if(this.cancelled)return e.cancelNavigation(this.navigation,this),[];if(D(this.changedEndpoints,s),this.processedInstructions.push(...this.matchedInstructions.splice(0)),!e.isRestrictedNavigation&&(this.matchedInstructions.length>0||this.instructions.length>0)&&this.running){const t=this.waitForSyncState("swapped");t instanceof Promise&&await t}this.instructions.push(...i.map((t=>rt.createClear(e,t))));const c=rt.resolve(this.matchedInstructions);c instanceof Promise&&await c,this.changedEndpoints=this.changedEndpoints.filter((t=>![...this.processedInstructions].reverse().find((e=>e.endpoint.instance===t))?.cancelled))}while(this.matchedInstructions.length>0||this.getInstructionsForScope(t).length>0);return this.changedEndpoints}getInstructionsForScope(t){this.manageDefaults();const e=this.instructions.filter((e=>e.scope===t&&!e.default));return e.length>0?e:this.instructions.filter((e=>e.scope===t))}ensureClearStateInstruction(t){const e=this.router;if(!this.instructions.some((s=>s.scope===t&&s.isClearAll(e)))){const s=rt.create(rt.clear(e));s.scope=t,this.instructions.unshift(s)}}matchEndpoints(t,e=!1){const s=this.getInstructionsForScope(t),i=lt.matchEndpoints(t,s,[...this.processedInstructions,...this.matchedInstructions],e).matchedInstructions;this.matchedInstructions.push(...i),this.instructions=this.instructions.filter((t=>!i.includes(t)))}run(){if(!this.running){this.running=!0;for(const t of this.entities)t.running||(t.running=!0,t.endpoint.transition(this))}}addSyncState(t){const e=new H;this.syncStates.set(t,e)}addEndpoint(t){const e=new vt(t);return this.entities.push(e),this.recheckSyncStates(),this.running&&e.endpoint.transition(this),e}removeEndpoint(t){const e=this.entities.map((t=>t.endpoint)),s=[t];let i=[t];for(;i.length>0;)i=e.filter((t=>null!=t?.parentViewport&&i.includes(t.parentViewport))),s.push(...i);for(const t of s){const e=this.entities.find((e=>e.endpoint===t));void 0!==e&&F(this.entities,(t=>t===e))}this.checkSyncState()}setEndpointStep(t,e){let s=this.entities.find((e=>e.endpoint===t));void 0===s&&(s=this.addEndpoint(t)),s.step=e}getEndpointStep(t){const e=this.entities.find((e=>e.endpoint===t));return e?.step??null}addEndpointState(t,e){let s=this.entities.find((e=>e.endpoint===t));void 0===s&&(s=this.addEndpoint(t));const i=s.states.get(e);i instanceof H&&i.resolve(),s.states.set(e,null),this.checkSyncState(e)}waitForSyncState(t,e=null){if(0===this.entities.length)return;const s=this.syncStates.get(t);if(void 0!==s){if(null!==e){const i=this.entities.find((t=>t.endpoint===e));if(null===i?.syncPromise&&s.isPending)return i.syncingState=t,i.syncPromise=new H,i.checkedStates.push(t),this.checkedSyncStates.add(t),Promise.resolve().then((()=>{this.checkSyncState(t)})).catch((t=>{throw t})),i.syncPromise.promise}return s.isPending?s.promise:void 0}}waitForEndpointState(t,e){if(!this.syncStates.has(e))return;let s=this.entities.find((e=>e.endpoint===t));if(null==s&&(s=this.addEndpoint(t)),s.hasReachedState(e))return;let i=s.states.get(e);return null==i&&(i=new H,s.states.set(e,i)),i.promise}finalEndpoint(){this.hasAllEndpoints=!0,this.syncStates.forEach(((t,e)=>this.checkSyncState(e)))}finalize(){this.entities.forEach((t=>t.endpoint.finalizeContentChange(this,null))),this.completed=!0,this.navigation.completed=!0,this.syncStates.clear()}cancel(){this.cancelled=!0,this.instructions=[],this.matchedInstructions=[],this.entities.forEach((t=>{const e=t.endpoint.cancelContentChange(this);e instanceof Promise&&e.catch((t=>{throw t}))})),this.router.navigator.cancel(this.navigation).then((()=>{this.navigation.process?.resolve(!1)})).catch((t=>{throw t})),this.completed=!0,this.navigation.completed=!0,[...this.syncStates.values()].forEach((t=>{t.isPending&&t.resolve()})),this.syncStates.clear()}checkSyncState(t){if(void 0===t)return void this.syncStates.forEach(((t,e)=>this.checkSyncState(e)));const e=this.syncStates.get(t);if(void 0!==e&&this.hasAllEndpoints&&e.isPending&&this.entities.every((e=>e.hasReachedState(t)))&&(!this.checkedSyncStates.has(t)||this.entities.every((e=>e.checkedStates.includes(t))))){for(const e of this.entities)e.syncingState===t&&(e.syncPromise?.resolve(),e.syncPromise=null,e.syncingState=null);e.resolve()}}recheckSyncStates(){this.syncStates.forEach(((t,e)=>{t.isPending||this.entities.every((t=>t.hasReachedState(e)))||this.addSyncState(e)}))}getClearAllEndpoints(t){const e=this.router;let s=[];return this.instructions.some((s=>(s.scope??t)===t&&s.isClearAll(e)))&&(s=t.enabledChildren.filter((t=>!t.endpoint.isEmpty)).map((t=>t.endpoint)),this.instructions=this.instructions.filter((s=>!((s.scope??t)===t&&s.isClearAll(e))))),s}createUnknownRouteError(t){const e=this.router.configuration.options,s=rt.stringify(this.router,t);return null!=t[0].route?e.useConfiguredRoutes?new Error(`No matching configured route found for '${s}'.`):new Error(`Can not match '${s}' since the router is configured to not use configured routes.`):e.useConfiguredRoutes&&e.useDirectRouting?new Error(`No matching configured route or component found for '${s}'.`):e.useConfiguredRoutes?new Error(`No matching configured route found for '${s}'.`):new Error(`No matching route/component found for '${s}'.`)}}class yt{constructor(t,e,s){this.hook=t,this.id=s,this.type="beforeNavigation",this.includeTargets=[],this.excludeTargets=[],void 0!==e.type&&(this.type=e.type);for(const t of e.include??[])this.includeTargets.push(new bt(t));for(const t of e.exclude??[])this.excludeTargets.push(new bt(t))}static add(t,e){const s=new yt(t,e??{},++this.lastIdentity);return this.hooks[s.type].push(s),this.lastIdentity}static remove(t){for(const e in this.hooks)if(Object.prototype.hasOwnProperty.call(this.hooks,e)){const s=this.hooks[e].findIndex((e=>e.id===t));s>=0&&this.hooks[e].splice(s,1)}}static removeAll(){for(const t in this.hooks)this.hooks[t]=[]}static async invokeBeforeNavigation(t,e){return this.invoke("beforeNavigation",e,t)}static async invokeTransformFromUrl(t,e){return this.invoke("transformFromUrl",e,t)}static async invokeTransformToUrl(t,e){return this.invoke("transformToUrl",e,t)}static async invokeTransformTitle(t,e){return this.invoke("transformTitle",e,t)}static async invoke(t,e,s){let i=s;for(const n of this.hooks[t])if(!n.wantsMatch||n.matches(s))if(i=await n.invoke(e,s),"boolean"==typeof i){if(!i)return!1}else s=i;return i}get wantsMatch(){return this.includeTargets.length>0||this.excludeTargets.length>0}matches(t){return!(this.includeTargets.length&&!this.includeTargets.some((e=>e.matches(t)))||this.excludeTargets.length&&this.excludeTargets.some((e=>e.matches(t))))}invoke(t,e){return this.hook(e,t)}}yt.hooks={beforeNavigation:[],transformFromUrl:[],transformToUrl:[],transformTitle:[]},yt.lastIdentity=0;class bt{constructor(t){if(this.componentType=null,this.componentName=null,this.viewport=null,this.viewportName=null,"string"==typeof t)this.componentName=t;else if(j.isType(t))this.componentType=t,this.componentName=j.getName(t);else{const e=t;null!=e.component&&(this.componentType=j.isType(e.component)?j.getType(e.component):null,this.componentName=j.getName(e.component)),null!=e.viewport&&(this.viewport=it.isInstance(e.viewport)?e.viewport:null,this.viewportName=it.getName(e.viewport))}}matches(t){const e=t.slice();e.length||e.push(rt.create(""));for(const t of e)if(null!==this.componentName&&this.componentName===t.component.name||null!==this.componentType&&this.componentType===t.component.type||null!==this.viewportName&&this.viewportName===t.endpoint.name||null!==this.viewport&&this.viewport===t.endpoint.instance)return!0;return!1}}class St{static async getTitle(t,e,s){let i=await yt.invokeTransformTitle(t,e);if("string"!=typeof i){const t=St.stringifyTitles(i,e,s);i=s.appTitle,i=i.replace(/\${componentTitles}/g,t),i=i.replace(/\${appTitleSeparator}/g,""!==t?s.appTitleSeparator:"")}return i=await yt.invokeTransformTitle(i,e),i}static stringifyTitles(t,e,s){return t.map((t=>St.stringifyTitle(t,e,s))).filter((t=>(t?.length??0)>0)).join(" + ")}static stringifyTitle(t,e,s){const i=t.nextScopeInstructions;let n=St.resolveTitle(t,e,s);if(Array.isArray(i)&&i.length>0){let t=St.stringifyTitles(i,e,s);t.length>0&&(1!==i.length&&(t=`[ ${t} ]`),n=n.length>0?"top-down"===s.componentTitleOrder?n+s.componentTitleSeparator+t:t+s.componentTitleSeparator+n:t)}return n}static resolveTitle(t,e,s){let i=t.getTitle(e);return null!=s.transformTitle&&(i=s.transformTitle(i,t,e)),i}}const Ct=o.DI.createInterface("IRouter",(t=>t.singleton(kt)));class kt{constructor(){this.rootScope=null,this.activeComponents=[],this.appendedInstructions=[],this.isActive=!1,this.coordinators=[],this.loadedFirst=!1,this.u=!1,this.R=(0,o.hd)(o.gF),this.container=(0,o.hd)(o.p7),this.ea=(0,o.hd)(o.xe),this.navigator=(0,o.hd)(at),this.viewer=(0,o.hd)(ft),this.store=(0,o.hd)(ft),this.configuration=(0,o.hd)(Qt),this.handleNavigatorNavigateEvent=t=>{this.C(t)},this.handleNavigatorStateChangeEvent=t=>{if(null!=t.state?.navigationIndex){const e=Y.create(t.state.navigations[t.state.navigationIndex]);e.instruction=t.viewerState.instruction,e.fromBrowser=!0,this.navigator.navigate(e).catch((t=>{throw t}))}else this.load(t.viewerState.instruction,{fromBrowser:!0}).catch((t=>{throw t}))},this.processNavigation=async t=>{this.loadedFirst=!0;const e=this.configuration.options,s=wt.create(this,t,{syncStates:this.configuration.options.navigationSyncStates});this.coordinators.push(s),s.appendInstructions(this.appendedInstructions.splice(0)),this.ea.publish($t.eventName,$t.create(t));let i="string"!=typeof t.instruction||t.useFullStateInstruction?t.useFullStateInstruction?t.fullStateInstruction:t.instruction:await yt.invokeTransformFromUrl(t.instruction,s.navigation);const n=e.basePath;return null!==n&&"string"==typeof i&&i.startsWith(n)&&!e.useUrlFragmentHash&&(i=i.slice(n.length)),"/"===i&&(i=""),"string"==typeof i&&(""===i?(i=[new rt("")],i[0].default=!0):"-"===i?(i=[new rt("-"),new rt("")],i[1].default=!0):i=rt.parse(this,i)),t.scope??=this.rootScope.scope,s.appendInstructions(i),e.completeStateNavigations&&V(i,!1).map((t=>t.scope)).forEach((t=>s.ensureClearStateInstruction(t))),await s.processInstructions(),q.run(null,(()=>(s.closed=!0,s.finalEndpoint(),s.waitForSyncState("completed"))),(()=>(s.finalize(),this.updateNavigation(t))),(()=>{t.navigation.new&&!t.navigation.first&&!t.repeating&&s.changedEndpoints.every((t=>t.options.noHistory))&&(t.untracked=!0)}),(async()=>{for(;this.coordinators.length>0&&this.coordinators[0].completed;){const t=this.coordinators.shift();await this.navigator.finalize(t.navigation,!1),this.ea.publish(Nt.eventName,Nt.create(t.navigation)),this.ea.publish(Et.eventName,Et.create(t.navigation)),t.navigation.process?.resolve(!0)}}))}}get isNavigating(){return this.coordinators.length>0}get hasOpenNavigation(){return this.coordinators.filter((t=>!t.closed)).length>0}get isRestrictedNavigation(){const t=this.configuration.options.navigationSyncStates;return t.includes("guardedLoad")||t.includes("unloaded")||t.includes("loaded")||t.includes("guarded")||t.includes("routed")}get statefulHistory(){return void 0!==this.configuration.options.statefulHistoryLength&&this.configuration.options.statefulHistoryLength>0}start(){if(this.isActive)throw _(2e3);this.isActive=!0;const t=this.container.get(a.DEw);this.rootScope=new z(this,"rootScope",t.controller.viewModel,null,!0,t.config.component);const e=this.configuration.options;if(null===e.basePath){const s=new URL(t.host.baseURI);e.basePath=s.pathname}e.basePath.endsWith("/")&&(e.basePath=e.basePath.slice(0,-1)),this.navigator.start({store:this.store,viewer:this.viewer,statefulHistoryLength:this.configuration.options.statefulHistoryLength}),this.I=this.ea.subscribe(mt.eventName,this.handleNavigatorStateChangeEvent),this.N=this.ea.subscribe(ot.eventName,this.handleNavigatorNavigateEvent),this.viewer.start({useUrlFragmentHash:this.configuration.options.useUrlFragmentHash}),this.ea.publish(xt.eventName,xt.create())}stop(){if(!this.isActive)throw _(2001);this.ea.publish(It.eventName,It.create()),this.navigator.stop(),this.viewer.stop(),this.I.dispose(),this.N.dispose()}async initialLoad(){const{instruction:t,hash:e}=this.viewer.viewerState,s=this.load(t,{fragment:e,replacing:!0,fromBrowser:!1});return this.loadedFirst=!0,s}async C(t){if(this.u)return this.$&&this.$.navigation.process?.resolve(!1),void(this.$=t);this.u=!0;try{await this.processNavigation(t.navigation)}catch(e){t.navigation.process?.reject(e)}finally{this.u=!1}if(this.$){const t=this.$;this.$=void 0,await this.C(t)}}get isProcessingNav(){return this.u||null!=this.$}getEndpoint(t,e){return this.allEndpoints(t).find((t=>t.name===e))??null}allEndpoints(t,e=!1){return this.rootScope.scope.allScopes(e).filter((e=>null===t||e.type===t)).map((t=>t.endpoint))}addEndpoint(t,...e){throw _(99,"addEndPoint")}connectEndpoint(t,e,s,i,n){const r=s.container,a=(r.has(kt.closestEndpointKey,!0)?r.get(kt.closestEndpointKey):this.rootScope).connectedScope;return null===t&&(t=a.addEndpoint(e,i,s,n),o.cH.instance(kt.closestEndpointKey,t).register(r)),t}disconnectEndpoint(t,e,s){if(!e.connectedScope.parent.removeEndpoint(t,e,s))throw _(2002,e.name)}async load(t,e){e=e??{},t=this.extractFragment(t,e),t=this.extractQuery(t,e);let s=null;({instructions:t,scope:s}=this.applyLoadOptions(t,e));const i=e.append??!1;if(!1!==i)if(i instanceof wt){if(!i.closed)return t=rt.from(this,t),this.appendInstructions(t,s,i),Promise.resolve()}else if(!this.loadedFirst||this.hasOpenNavigation)return t=rt.from(this,t),this.appendInstructions(t,s),Promise.resolve();const n=Y.create({instruction:t,fullStateInstruction:"",scope:s,title:e.title,data:e.data,query:e.query,fragment:e.fragment,parameters:e.parameters,replacing:(e.replacing??!1)||e.replace,repeating:!1!==(e.append??!1),fromBrowser:e.fromBrowser??!1,origin:e.origin,completed:!1});return this.navigator.navigate(n)}applyLoadOptions(t,e,s=!0){"origin"in(e=e??{})&&!("context"in e)&&(e.context=e.origin);const{scope:i,instruction:n}=ut.for(e.context??null,"string"==typeof t?t:void 0);if("string"==typeof t)if(s)t=n;else{t=rt.from(this,n);for(const e of t)null===e.scope&&(e.scope=i)}else{t=rt.from(this,t);for(const e of t)null===e.scope&&(e.scope=i)}return{instructions:t,scope:i}}refresh(){return this.navigator.refresh()}back(){return this.navigator.go(-1)}forward(){return this.navigator.go(1)}go(t){return this.navigator.go(t)}checkActive(t,e){if("string"==typeof t)throw _(2003,t);e=e??{},({instructions:t}=this.applyLoadOptions(t,e)),t.forEach((t=>t.scope??=this.rootScope.scope));const s=V(t.map((t=>t.scope)));for(const e of s){const s=e.matchScope(t,!1),i=e.matchScope(this.activeComponents,!0);if(!rt.contains(this,i,s,!0))return!1}return!0}unresolvedInstructionsError(t,e){throw this.ea.publish(Pt.eventName,Pt.create(t)),this.ea.publish(Et.eventName,Et.create(t)),function(t,e){const s=_(2006,t.length);return s.remainingInstructions=t,e.warn(s,s.remainingInstructions),s}(e,this.R)}cancelNavigation(t,e){e.cancel(),this.ea.publish(Rt.eventName,Rt.create(t)),this.ea.publish(Et.eventName,Et.create(t))}appendInstructions(t,e=null,s=null){null===e&&(e=this.rootScope.scope);for(const s of t)null===s.scope&&(s.scope=e);if(null===s)for(let t=this.coordinators.length-1;t>=0;t--)if(!this.coordinators[t].closed){s=this.coordinators[t];break}if(null===s){if(this.loadedFirst)throw _(2004);this.appendedInstructions.push(...t)}s?.appendInstructions(t)}async updateNavigation(t){this.rootScope.scope.reparentRoutingInstructions();const e=this.rootScope.scope.getRoutingInstructions(t.timestamp);let{matchedInstructions:s}=this.rootScope.scope.matchEndpoints(e,[],!0),i=100;for(;s.length>0;){if(0==i--)throw _(2005);s=s.map((t=>{const{matchedInstructions:e}=t.endpoint.instance.scope.matchEndpoints(t.nextScopeInstructions??[],[],!0);return e})).flat()}t.timestamp>=(this.activeNavigation?.timestamp??0)&&(this.activeNavigation=t,this.activeComponents=e);let n=await yt.invokeTransformToUrl(e,t);if("string"!=typeof n&&(n=rt.stringify(this,n,{endpointContext:!0})),n=await yt.invokeTransformToUrl(n,t),null==t.query&&null!=t.parameters){const e=new URLSearchParams;for(let[s,i]of Object.entries(t.parameters)){s=encodeURIComponent(s),Array.isArray(i)||(i=[i]);for(const t of i)e.append(s,encodeURIComponent(t))}t.query=e.toString()}let r=`${this.configuration.options.basePath}/`;(null===r||""!==n&&"/"===n[0]||this.configuration.options.useUrlFragmentHash)&&(r="");const o=(t.query?.length??0)>0?"?"+t.query:"",a=(t.fragment?.length??0)>0?"#"+t.fragment:"";t.path=r+n+o+a;const h=t.path.slice(r.length);if(t.fullStateInstruction=rt.clear(this)+(h.length>0?O.for(this).sibling:"")+h,null===(t.title??null)){const s=await St.getTitle(e,t,this.configuration.options.title);null!==s&&(t.title=s)}return Promise.resolve()}extractFragment(t,e){if("string"==typeof t&&null==e.fragment){const[s,i]=t.split("#");t=s,e.fragment=i}return t}extractQuery(t,e){if("string"==typeof t&&null==e.query){const[s,i]=t.split("?");t=s,e.query=i}return"string"==typeof e.parameters&&null==e.query&&(e.query=e.parameters,e.parameters=void 0),"string"==typeof e.query&&e.query.length>0&&(e.parameters??={},new URLSearchParams(e.query).forEach(((t,s)=>{s=decodeURIComponent(s),t=decodeURIComponent(t),s in e.parameters?(Array.isArray(e.parameters[s])||(e.parameters[s]=[e.parameters[s]]),e.parameters[s].push(t)):e.parameters[s]=t}))),t}}kt.closestEndpointKey=o.Zs.annotation.keyFor("closest-endpoint");class Tt{constructor(t){this.eventName=t}}class xt extends Tt{static create(){return new xt(this.eventName)}}xt.eventName="au:router:router-start";class It extends Tt{static create(){return new It(this.eventName)}}It.eventName="au:router:router-stop";class At{constructor(t,e){this.eventName=t,this.navigation=e}}class $t extends At{static create(t){return new $t(this.eventName,t)}}$t.eventName="au:router:navigation-start";class Et extends At{static create(t){return new Et(this.eventName,t)}}Et.eventName="au:router:navigation-end";class Rt extends At{static create(t){return new Rt(this.eventName,t)}}Rt.eventName="au:router:navigation-cancel";class Nt extends At{static create(t){return new Nt(this.eventName,t)}}Nt.eventName="au:router:navigation-complete";class Pt extends At{static create(t){return new Pt(this.eventName,t)}}Pt.eventName="au:router:navigation-error";const Ot=o.DI.createInterface("ILinkHandler",(t=>t.singleton(Lt)));class Lt{constructor(){this.window=(0,o.hd)(a.mYM),this.router=(0,o.hd)(Ct)}handleEvent(t){this.handleClick(t)}handleClick(t){if(0!==t.button||t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)return;const e=t.currentTarget;if(e.hasAttribute("external"))return;const s=e.getAttribute("target")??"";if(s.length>0&&s!==this.window.name&&"_self"!==s)return;const i=a.I6R.for(e,"load"),n=void 0!==i?i.viewModel.value:null,r=this.router.configuration.options.useHref&&e.hasAttribute("href")?e.getAttribute("href"):null;if(!(null!==n&&0!==n.length||null!==r&&0!==r.length))return;t.preventDefault();let o=n??r??"";"string"==typeof o&&o.startsWith("#")&&(o=o.slice(1),o.startsWith("/")||(o=`/${o}`)),this.router.load(o,{origin:e}).catch((t=>{throw t}))}}function Bt(t,e,s,i,n=!1){if(n)return""===e;if(s)return e;const r=i.getAttribute(t)??"";return r.length>0?r:e}function Mt(t,e){if(!t.isActive)return new Promise((t=>{const s=e.subscribe(xt.eventName,(()=>{t(),s.dispose()}))}))}function jt(t,e,s,i){let n=a.I6R.for(s,"considered-active")?.viewModel?.value;void 0===n&&(n=i);const r=t.applyLoadOptions(n,{context:e}),o=rt.from(t,r.instructions);for(const t of o)null===t.scope&&(t.scope=r.scope);return o}function Ft(t){let e=t.parentElement;for(;null!=e;){if("AU-VIEWPORT"===e.tagName){e=null;break}if(e.hasAttribute("load-active"))break;e=e.parentElement}return e??=t,e}const Dt=c.Zm.toView,Vt=a.K94.createInjectable();class Ht{constructor(){this.name="default",this.usedBy="",this.default="",this.fallback="",this.fallbackAction="",this.noScope=!1,this.noLink=!1,this.noTitle=!1,this.noHistory=!1,this.stateful=!1,this.endpoint=null,this.pendingChildren=[],this.pendingPromise=null,this.isBound=!1,this.router=(0,o.hd)(Ct),this.element=(0,o.hd)(a.w3g),this.container=(0,o.hd)(o.p7),this.ea=(0,o.hd)(o.xe),this.parentViewport=(0,o.hd)(Vt),this.instruction=(0,o.hd)(c.OA)}hydrated(t){this.controller=t;const e=this.instruction.props.filter((t=>"default"===t.to)).length>0;e&&null!=this.parentViewport&&(this.parentViewport.pendingChildren.push(this),null===this.parentViewport.pendingPromise&&(this.parentViewport.pendingPromise=new H)),q.run(null,(()=>Mt(this.router,this.ea)),(()=>{this.router.isRestrictedNavigation&&this.connect()}))}binding(t,e){return this.isBound=!0,q.run(null,(()=>Mt(this.router,this.ea)),(()=>{this.router.isRestrictedNavigation||this.connect()}),(()=>{null!=this.endpoint?.activeResolve&&(this.endpoint.activeResolve(),this.endpoint.activeResolve=null)}),(()=>{if(null!==this.endpoint&&null===this.endpoint.getNextContent())return this.endpoint.activate(null,t,this.controller,void 0)?.asValue}))}detaching(t,e){if(null!==this.endpoint)return this.isBound=!1,this.endpoint.deactivate(null,t,e)}unbinding(t,e){if(null!==this.endpoint)return this.disconnect(null)}dispose(){this.endpoint?.dispose(),this.endpoint=null}connect(){const{isBound:t,element:e}=this,s=Bt("name",this.name,t,e),i={};i.scope=!Bt("no-scope",this.noScope,!1,e,!0),i.usedBy=Bt("used-by",this.usedBy,t,e),i.default=Bt("default",this.default,t,e),i.fallback=Bt("fallback",this.fallback,t,e),i.fallbackAction=Bt("fallback-action",this.fallbackAction,t,e),i.noLink=Bt("no-link",this.noLink,t,e,!0),i.noTitle=Bt("no-title",this.noTitle,t,e,!0),i.noHistory=Bt("no-history",this.noHistory,t,e,!0),i.stateful=Bt("stateful",this.stateful,t,e,!0),Object.keys(i).forEach((t=>{void 0===i[t]&&delete i[t]})),this.endpoint=this.router.connectEndpoint(this.endpoint,"Viewport",this,s,i);const n=this.parentViewport;null!=n&&(F(n.pendingChildren,(t=>t===this)),0===n.pendingChildren.length&&null!==n.pendingPromise&&(n.pendingPromise.resolve(),n.pendingPromise=null))}disconnect(t){null!==this.endpoint&&this.router.disconnectEndpoint(t,this.endpoint,this)}setActivity(t,e){const s=this.router.configuration.options.indicators.viewportNavigating;if("string"==typeof t)this.element.classList.toggle(t,e);else for(const i in t)this.element.classList.toggle(`${s}-${i}`,e&&t[i])}}a.K94.define({name:"au-viewport",injectable:Vt,bindables:["name","usedBy","default","fallback","fallbackAction","noScope","noLink","noTitle","noHistory","stateful"]},Ht);const qt=a.K94.createInjectable();class Ut{constructor(){this.name="default",this.catches="",this.collection=!1,this.source=null,this.viewportScope=null,this.isBound=!1,this.router=(0,o.hd)(Ct),this.element=(0,o.hd)(a.w3g),this.container=(0,o.hd)(o.p7),this.parent=(0,o.hd)(qt),this.parentController=(0,o.hd)(a.MH3)}hydrated(t){this.controller=t}bound(t,e){this.isBound=!0,this.$controller.scope=this.parentController.scope,this.connect(),null!==this.viewportScope&&this.viewportScope.binding()}unbinding(t,e){return null!==this.viewportScope&&this.viewportScope.unbinding(),Promise.resolve()}connect(){if(null===this.router.rootScope)return;const t=this.getAttribute("name",this.name),e={};let s=this.getAttribute("catches",this.catches);void 0!==s&&(e.catches=s),s=this.getAttribute("collection",this.collection,!0),void 0!==s&&(e.collection=s),e.source=this.source??null,this.viewportScope=this.router.connectEndpoint(this.viewportScope,"ViewportScope",this,t,e)}disconnect(){this.viewportScope&&this.router.disconnectEndpoint(null,this.viewportScope,this),this.viewportScope=null}getAttribute(t,e,s=!1){if(this.isBound)return e;if(this.element.hasAttribute(t)){if(s)return!0;if((e=this.element.getAttribute(t)).length>0)return e}}}a.K94.define({name:"au-viewport-scope",template:"<template></template>",containerless:!1,injectable:qt,bindables:["name","catches","collection","source"]},Ut);class _t{constructor(){this.P=!1,this.hasHref=null,this.element=(0,o.hd)(a.w3g),this.router=(0,o.hd)(Ct),this.linkHandler=(0,o.hd)(Ot),this.ea=(0,o.hd)(o.xe),this.activeClass=this.router.configuration.options.indicators.loadActive,this.navigationEndHandler=t=>{this.updateActive()}}binding(){null==this.value&&(this.P=!0),this.element.addEventListener("click",this.linkHandler),this.updateValue(),this.updateActive(),this.routerNavigationSubscription=this.ea.subscribe(Et.eventName,this.navigationEndHandler)}unbinding(){this.element.removeEventListener("click",this.linkHandler),this.routerNavigationSubscription.dispose()}valueChanged(t){this.updateValue(),this.updateActive()}updateValue(){if(this.P&&(this.value={component:this.component,parameters:this.parameters,viewport:this.viewport,id:this.id}),null===this.hasHref&&(this.hasHref=this.element.hasAttribute("href")),!this.hasHref){let t=this.value;if("string"!=typeof t){const e=rt.from(this.router,t).shift(),s=this.V(t);s.foundConfiguration&&(e.route=s.matching),t=rt.stringify(this.router,[e])}const{scope:e,instruction:s}=ut.for(this.element,t);t=`${e?.path??""}${s??""}`,this.router.configuration.options.useUrlFragmentHash&&!t.startsWith("#")&&(t=`#/${t}`),this.element.setAttribute("href",t)}}async updateActive(){const t=a.I6R.for(this.element,"load").parent,e="string"==typeof this.value?{id:this.value,path:this.value}:this.value,s=this.V(e),i=s.foundConfiguration?s.instructions:jt(this.router,t,this.element,this.value);Ft(this.element).classList.toggle(this.activeClass,this.router.checkActive(i,{context:t}))}V(t){if("string"==typeof t)return new R;const e=ut.for(this.element).scope??this.router.rootScope.scope;if(null!=t.id)return e.findMatchingRoute(t.id,t.parameters??{});const s=t.path;return null!=s?e.findMatchingRoute(s,t.parameters??{}):new R}}a.I6R.define({name:"load",bindables:{value:{mode:Dt},component:{},parameters:{},viewport:{},id:{}}},_t);class Wt{constructor(){this.element=(0,o.hd)(a.w3g),this.router=(0,o.hd)(Ct),this.linkHandler=(0,o.hd)(Ot),this.ea=(0,o.hd)(o.xe),this.activeClass=this.router.configuration.options.indicators.loadActive,this.navigationEndHandler=t=>{this.updateActive()}}binding(){!this.router.configuration.options.useHref||this.hasLoad()||this.element.hasAttribute("external")||(this.element.addEventListener("click",this.linkHandler),this.routerNavigationSubscription=this.ea.subscribe(Et.eventName,this.navigationEndHandler)),this.updateValue(),this.updateActive()}unbinding(){this.element.removeEventListener("click",this.linkHandler),this.routerNavigationSubscription?.dispose()}valueChanged(){this.updateValue(),this.updateActive()}updateValue(){this.element.setAttribute("href",this.value)}updateActive(){if(this.router.configuration.options.useHref&&!this.hasLoad()&&!this.element.hasAttribute("external")){const t=a.I6R.for(this.element,"href").parent,e=jt(this.router,t,this.element,this.value);Ft(this.element).classList.toggle(this.activeClass,this.router.checkActive(e,{context:t}))}}hasLoad(){const t=this.$controller.parent.children;return t?.some((t=>"customAttribute"===t.vmKind&&t.viewModel instanceof _t))??!1}}Wt.$au={type:"custom-attribute",name:"href",noMultiBindings:!0,bindables:{value:{mode:Dt}}};class Kt{}a.I6R.define({name:"considered-active",bindables:{value:{mode:Dt}}},Kt);const Qt=o.DI.createInterface("IRouterConfiguration",(t=>t.singleton(Gt))),zt=[Ct],Jt=[Ht,Ut,_t,Wt,Kt];class Gt{static register(t){const e=t.get(Qt);return e.options=Gt.options,e.options.setRouterConfiguration(e),Gt.options=B.create(),t.register(...zt,...Jt,a.NMh.activating(Ct,Gt.configurationCall),a.NMh.activated(Ct,(t=>t.initialLoad())),a.NMh.deactivated(Ct,(t=>t.stop())))}static customize(t){return void 0===t?(Gt.options=B.create(),Gt.configurationCall=t=>{t.start()}):t instanceof Function?Gt.configurationCall=t:(Gt.options=B.create(),Gt.options.apply(t)),Gt}static createContainer(){return this.register(o.DI.createContainer())}static for(t){return t instanceof kt?t.configuration:t.get(Qt)}apply(t,e=!1){e&&(this.options=B.create()),this.options.apply(t)}addHook(t,e){return yt.add(t,e)}removeHook(t){return yt.remove(t)}removeAllHooks(){return yt.removeAll()}}Gt.options=B.create(),Gt.configurationCall=t=>{t.start()};const Yt=async(t,e)=>{const s=t.body?.getReader();if(!s)throw new Error("The response does not contain a readable stream.");for(;;){const{done:t,value:i}=await s.read();if(t)break;e(i)}},Zt=async(t,e)=>{await Yt(t,(t=>{let s,i=new TextDecoder("utf-8").decode(t,{stream:!0});for(;-1!==(s=i.indexOf("\n"));){const t=i.slice(0,s).trim();i=i.slice(s+1),t&&e(t)}i&&e(i)}))},Xt={default:Yt,text:async(t,e)=>{await Zt(t,(t=>{e(t)}))},json:async(t,e)=>{await Zt(t,(t=>{try{const s=JSON.parse(t);e(s)}catch(e){console.error("Error parsing JSON chunk:",t)}}))}};class te{constructor(){this.cache=new Map,this.delete=t=>this.cache.delete(t),this.has=t=>this.cache.has(t),this.set=(t,e)=>this.cache.set(t,e),this.get=t=>this.cache.get(t),this.clear=()=>this.cache.clear()}}const ee=o.DI.createInterface((t=>t.singleton(te)));class se{constructor(){this.baseUrl="",this.defaults={},this.interceptors=[],this.dispatcher=null,this.c=(0,o.hd)(o.p7)}withBaseUrl(t){return this.baseUrl=t,this}withDefaults(t){return this.defaults=t,this}withInterceptor(t){return this.interceptors.push(t),this}useStandardConfiguration(){return Object.assign(this.defaults,{credentials:"same-origin"},this.defaults),this.rejectErrorResponses()}rejectErrorResponses(){return this.withInterceptor({response:ie})}withRetry(t){const e=this.c.invoke(Ce,[t]);return this.withInterceptor(e)}withDispatcher(t){return this.dispatcher=t,this}}function ie(t){if(!t.ok)throw t;return t}const ne=(t,...e)=>new Error(`AUR${String(t).padStart(4,"0")}:${e.map(String)}`),re=/^([a-z][a-z0-9+\-.]*:)?\/\//i,oe=o.DI.createInterface("fetch",(t=>{if("function"!=typeof fetch)throw ne(5e3);return t.instance(fetch)})),ae=o.DI.createInterface("IHttpClient",(t=>t.aliasTo(he)));class he{constructor(){this.activeRequestCount=0,this.isRequesting=!1,this.isConfigured=!1,this.baseUrl="",this.defaults=null,this.t=[],this.i=null,this.h=(0,o.hd)((0,o.P9)(se)),this.u=(0,o.hd)(oe)}get interceptors(){return this.t.slice(0)}configure(t){let e;if("object"==typeof t)e={defaults:t};else{if("function"!=typeof t)throw ne(5002,typeof t);{e=this.h(),e.baseUrl=this.baseUrl,e.defaults={...this.defaults},e.interceptors=this.t,e.dispatcher=this.i;const s=t(e);if(null!=s){if("object"!=typeof s)throw ne(5001,typeof s);e=s}}}const s=e.defaults;if(s?.headers instanceof Headers)throw ne(5003);const i=e.interceptors;if(i?.length>0){if(i.filter((t=>t instanceof Ce)).length>1)throw ne(5004);const t=i.findIndex((t=>t instanceof Ce));if(t>=0&&t!==i.length-1)throw ne(5005)}return this.baseUrl=e.baseUrl,this.defaults=s,this.t=e.interceptors??[],this.i=e.dispatcher,this.isConfigured=!0,this}fetch(t,e){this.C();let s=this.buildRequest(t,e);return this.processRequest(s,this.t).then((t=>{let e;if(t instanceof Response)e=Promise.resolve(t);else{if(!(t instanceof Request))throw ne(5006,t);s=t,e=this.u.call(void 0,s)}return this.processResponse(e,this.t,s)})).then((t=>t instanceof Request?this.fetch(t):t)).then((t=>(this.R(),t)),(t=>{throw this.R(),t}))}buildRequest(t,e){const s=this.defaults??{};let i,n,r;const o=function(t){const e={},s=t??{};for(const t of Object.keys(s))e[t]="function"==typeof s[t]?s[t]():s[t];return e}(s.headers);if(t instanceof Request)i=t,r=new Headers(i.headers).get("Content-Type");else{e||(e={}),n=e.body;const o=void 0!==n?{body:n}:null,a={...s,headers:{},...e,...o};r=new Headers(a.headers).get("Content-Type"),i=new Request(ce(this.baseUrl,t),a)}return r||(new Headers(o).has("content-type")?i.headers.set("Content-Type",new Headers(o).get("content-type")):void 0!==n&&function(t){try{JSON.parse(t)}catch(t){return!1}return!0}(n)&&i.headers.set("Content-Type","application/json")),function(t,e){const s=e??{};for(const e of Object.keys(s))t.has(e)||t.set(e,s[e])}(i.headers,o),n instanceof Blob&&n.type&&i.headers.set("Content-Type",n.type),i}get(t,e){return this.fetch(t,e)}post(t,e,s){return this.I(t,e,s,"POST")}put(t,e,s){return this.I(t,e,s,"PUT")}patch(t,e,s){return this.I(t,e,s,"PATCH")}delete(t,e,s){return this.I(t,e,s,"DELETE")}dispose(){this.t.forEach((t=>t.dispose?.())),this.t.length=0,this.i=null}C(){this.isRequesting=!!++this.activeRequestCount,this.isRequesting&&null!=this.i&&de(this.i,pe.started)}R(){this.isRequesting=!! --this.activeRequestCount,this.isRequesting||null==this.i||de(this.i,pe.drained)}processRequest(t,e){return this.B(t,e,"request","requestError",Request,this)}processResponse(t,e,s){return this.B(t,e,"response","responseError",Response,s,this)}B(t,e,s,i,n,...r){return(e??[]).reduce(((t,e)=>{const o=e[s],a=e[i];return t.then(o?t=>t instanceof n?o.call(e,t,...r):t:le,a?t=>a.call(e,t,...r):ue)}),Promise.resolve(t))}I(t,e,s,i){return s||(s={}),s.method=i,null!=e&&(s.body=e),this.fetch(t,s)}}function ce(t,e){return re.test(e)?e:(t??"")+e}function le(t){return t}function ue(t){throw t}function de(t,e){const s=new t.ownerDocument.defaultView.CustomEvent(e,{bubbles:!0,cancelable:!0});setTimeout((()=>{t.dispatchEvent(s)}),1)}const pe=Object.freeze({started:"aurelia-fetch-client-request-started",drained:"aurelia-fetch-client-requests-drained"}),fe=o.DI.createInterface((t=>t.singleton(me))),ge=Object.freeze({Set:"au:fetch:cache:set",Get:"au:fetch:cache:get",Clear:"au:fetch:cache:clear",Reset:"au:fetch:cache:reset",Dispose:"au:fetch:cache:dispose",CacheHit:"au:fetch:cache:hit",CacheMiss:"au:fetch:cache:miss",CacheStale:"au:fetch:cache:stale",CacheStaleRefreshed:"au:fetch:cache:stale:refreshed",CacheExpired:"au:fetch:cache:expired",CacheBackgroundRefreshed:"au:fetch:cache:background:refreshed",CacheBackgroundRefreshing:"au:fetch:cache:background:refreshing",CacheBackgroundStopped:"au:fetch:cache:background:stopped"});class me{constructor(){this.storage=(0,o.hd)(ee),this.p=(0,o.hd)(o.r_),this.ea=(0,o.hd)(o.xe),this.q=(0,o.hd)(ae),this.H=[],this.O=-1,this.j=[],this.T=new Map}subscribe(t,e){const s=this.ea.subscribe(t,e);return this.H.push(s),s}subscribeOnce(t,e){const s=this.ea.subscribeOnce(t,e);return this.H.push(s),s}setStaleTimer(t,e,s){const i=this.p.setTimeout((async()=>{this.delete(t),await this.q.get(s);const e=this.getItem(t);this.ea.publish(ge.CacheStaleRefreshed,{key:t,value:e}),this.N(i)}),e);this.j.push(i)}startBackgroundRefresh(t){!t||this.O>-1||(this.O=this.p.setInterval((()=>{this.ea.publish(ge.CacheBackgroundRefreshing),this.T.forEach(((t,e)=>{this.delete(e),this.q.get(t).then((()=>{const t=this.getItem(e);this.ea.publish(ge.CacheBackgroundRefreshed,{key:e,value:t})}))}))}),t))}stopBackgroundRefresh(){this.p.clearInterval(this.O),this.O=-1,this.ea.publish(ge.CacheBackgroundStopped)}set(t,e,s,i){const n={data:e,...s};this.setItem(t,n,i)}get(t){return this.getItem(t)?.data}setItem(t,e,s){e.lastCached=Date.now(),this.storage.set(t,e),this.T.set(t,s),this.ea.publish(ge.Set,{key:t,value:e})}getItem(t){if(!this.storage.has(t))return void this.ea.publish(ge.CacheMiss,{key:t});const e=this.storage.get(t);if(!e?.staleTime||!e?.lastCached)return this.ea.publish(ge.CacheHit,{key:t,value:e}),e;const s=Date.now();if(s>e.lastCached+(e.staleTime??0))this.ea.publish(ge.CacheStale,{key:t,value:e});else{if(!(s>e.lastCached+(e.cacheTime??0)))return this.ea.publish(ge.CacheHit,{key:t,value:e}),e;this.ea.publish(ge.CacheExpired,{key:t,value:e})}}delete(t){this.storage.delete(t),this.ea.publish(ge.Clear,{key:t})}clear(){this.storage.clear(),this.T.clear(),this.ea.publish(ge.Reset),this.stopBackgroundRefresh(),this.j.forEach((t=>{this.p.clearTimeout(t)})),this.j.length=0}dispose(){this.clear(),this.H.forEach((t=>t.dispose())),this.ea.publish(ge.Dispose)}N(t){this.p.clearTimeout(t);const e=this.j.indexOf(t);e>-1&&this.j.splice(e,1)}}const ve={cacheTime:3e5,staleTime:0,refreshStaleImmediate:!1,refreshInterval:0};class we{constructor(t){this.P=(0,o.hd)(fe),this.cf={...ve,...t??{}}}request(t){if(this.P.startBackgroundRefresh(this.cf.refreshInterval),"GET"!==t.method)return t;const e=this.P.get(this.key(t));return this.mark(e)??t}response(t,e){if(!e)return t;if(t.headers.has(we.cacheHeader))return t;const s=this.key(e);return this.P.setItem(s,{data:t,...this.cf},e),this.cf?.refreshStaleImmediate&&this.cf.staleTime>0&&this.P.setStaleTimer(s,this.cf.staleTime,e),t}dispose(){this.P.stopBackgroundRefresh()}key(t){return`${we.prefix}${t.url}`}mark(t){return t?.headers.set(we.cacheHeader,"hit"),t}}we.prefix="au:interceptor:",we.cacheHeader="x-au-fetch-cache";class ye{constructor(){this.cache=(0,o.hd)(o.r_).globalThis.indexedDB,this.getStore=()=>this.database.transaction(ye.cacheName,"readwrite").objectStore(ye.cacheName),this.delete=t=>{this.getStore().delete(t)},this.has=t=>this.getStore().count(t).result>0,this.set=(t,e)=>this.getStore().put(e,t),this.get=t=>this.getStore().get(t).result,this.clear=()=>{const t=this.getStore();t.getAllKeys().result.forEach((e=>{t.delete(e)}))},this.database=this.cache.open(ye.cacheName).result}}ye.cacheName="au-cache";const be=Object.freeze({fixed:0,incremental:1,exponential:2,random:3}),Se={maxRetries:3,interval:1e3,strategy:be.fixed};class Ce{constructor(t){if(this.p=(0,o.hd)(o.r_),this.retryConfig={...Se,...t??{}},this.retryConfig.strategy===be.exponential&&this.retryConfig.interval<=1e3)throw ne(5007,this.retryConfig.interval)}request(t){return t.retryConfig||(t.retryConfig={...this.retryConfig},t.retryConfig.counter=0),t.retryConfig.requestClone=t.clone(),t}response(t,e){return delete e.retryConfig,t}responseError(t,e,s){const{retryConfig:i}=e,{requestClone:n}=i;return Promise.resolve().then((()=>{if(i.counter<i.maxRetries){const r=null==i.doRetry||i.doRetry(t,e);return Promise.resolve(r).then((r=>{if(r){i.counter++;const t=function(t){const{interval:e,strategy:s,minRandomInterval:i,maxRandomInterval:n,counter:r}=t;if("function"==typeof s)return t.strategy(r);switch(s){case be.fixed:return ke[be.fixed](e);case be.incremental:return ke[be.incremental](r,e);case be.exponential:return ke[be.exponential](r,e);case be.random:return ke[be.random](r,e,i,n);default:throw ne(5008,s)}}(i);return new Promise((e=>this.p.setTimeout(e,isNaN(t)?0:t))).then((()=>{const t=n.clone();return"function"==typeof i.beforeRetry?i.beforeRetry(t,s):t})).then((t=>{const e={...t,retryConfig:i};return s.fetch(e)}))}throw delete e.retryConfig,t}))}throw delete e.retryConfig,t}))}}const ke=[t=>t,(t,e)=>e*t,(t,e)=>1===t?e:e**t/1e3,(t,e,s=0,i=6e4)=>Math.random()*(i-s)+s],Te={disable:void 0,text:t=>t.text(),json:t=>t.json(),blob:t=>t.blob(),formData:t=>t.formData()};function xe(t,e){const s="/"===t.slice(-1)?"/":"";return e&&(t+=`?${Ie(e)}`),t+s}function Ie(t,e=""){const s=[];for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)){const n=t[i],r=e?`${e}[${encodeURIComponent(i)}]`:encodeURIComponent(i);if(null!==n&&"object"==typeof n)s.push(Ie(n,r));else{const t=encodeURIComponent(n);s.push(`${r}=${t}`)}}return s.join("&")}Object.keys(Te);const Ae=(t,e=!0)=>!e||!t||"object"!=typeof t||t instanceof FormData||t instanceof URLSearchParams||t instanceof Blob||t instanceof ArrayBuffer||t instanceof ReadableStream?t:JSON.stringify(t);class $e{constructor(t,e,s="json"){this.container=t,this.convertToJson=!0,this.dispose=()=>this.client?.dispose(),this.client=this.container.get((0,o.pn)(ae)),this.client?.configure(e),this.setParser(s)}setParser(t){this.parser=this.findParser(t)}get(t,e){return this.request("GET",t,e)}post(t,e,s){return s.body=Ae(e,this.convertToJson),this.request("POST",t,s)}patch(t,e,s){return s.body=Ae(e,this.convertToJson),this.request("PATCH",t,s)}put(t,e,s){return s.body=Ae(e,this.convertToJson),this.request("PUT",t,s)}delete(t,e){return this.request("DELETE",t,e)}async request(t,e,s){const i=this.buildRequest(t,e,s);s?.beforeSend&&s.beforeSend(i);const n=this.client.fetch(i.resource,i.request),r=await n,o=s?.stream?.onChunk;if(o){const t=s?.stream?.parser??Xt.default;await t(r,o)}const a=this.findParser(s?.responseParser);return a?a(r):r}buildRequest(t,e,s){const i=this.client?.defaults?structuredClone(this.client.defaults):{};return i.method=t,{resource:e,url:xe(e,s?.query),request:i}}findParser(t){const e=t??this.parser;let s;return e&&("function"==typeof e?s=e:"string"==typeof e&&(s=Te[e])),s}}const Ee="empty-json",Re=o.DI.createInterface((t=>t.singleton(Ne)));class Ne{constructor(){this.endpoints={}}setContainer(t){this.container=t}getEndpointNames(){return Object.keys(this.endpoints)}getEndpoint(t){return this.endpoints[t??this.defaultEndpoint]}getEmptyEndpoint(){return this.exists(Ee)||this.registerEndpoint(Ee,(t=>t),"json"),this.getEndpoint(Ee)}registerEndpoint(t,e,s){if(this.exists(t))throw new Error(`Endpoint ${t} already exists`);return this.endpoints[t]=new $e(this.container,e,s),this}removeEndpoint(t){return this.endpoints[t].dispose(),delete this.endpoints[t],this}exists(t){return!!this.endpoints[t]}setDefaultEndpoint(t){return this.defaultEndpoint=t,this}}const Pe=[Re],Oe=function t(e){return{register(t){const s=t.get(Re);return s.setContainer(t),e&&e(s),t.register(...Pe),t},setup:e=>t(e)}}();var Le=n(591),Be=n.n(Le),Me=n(740),je=n.n(Me),Fe=n(128),De=n.n(Fe),Ve=n(855),He=n.n(Ve),qe=n(51),Ue=n.n(qe),_e=n(656),We=n.n(_e),Ke=n(183),Qe={};Qe.styleTagTransform=We(),Qe.setAttributes=He(),Qe.insert=De().bind(null,"head"),Qe.domAPI=je(),Qe.insertStyleElement=Ue(),Be()(Ke.A,Qe),Ke.A&&Ke.A.locals&&Ke.A.locals;const ze="my-app",Je='<div>My APP</div>\r\n<button click.trigger="fetch()">FETCH DATA</button>\r\n\r\n\r\n\x3c!-- <nav>\r\n    <a load="/">Home</a>\r\n    <a load="/next">Next</a>\r\n</nav>\r\n\r\n<au-viewport></au-viewport> --\x3e',Ge=Je,Ye=[],Ze={};let Xe;function ts(t){Xe||(Xe=a.K94.define({name:ze,template:Je,dependencies:Ye,bindables:Ze})),t.register(Xe)}let es=(()=>{let t,e,s=[(0,a.EMX)(r)],i=[];return e=class{constructor(){this.githubApi=(0,o.hd)(Re).getEndpoint(ss.github),this.mapApi=(0,o.hd)(Re).getEndpoint(ss.counties)}async fetch(){console.log("find data"),console.log("shoudl get data from api"),this.mapApi.get("",{stream:{parser:Xt.default,onChunk:t=>{console.log(t)}}});const t=await this.githubApi.get("/users/aurelia"),e=await this.mapApi.get("/fylkerkommuner");console.log(t),console.log(e)}},n=e,"symbol"==typeof(h="MyApp")&&(h=h.description?"[".concat(h.description,"]"):""),Object.defineProperty(n,"name",{configurable:!0,value:c?"".concat(c," ",h):h}),(()=>{const n="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;(function(t,e,s,i,n,r){function o(t){if(void 0!==t&&"function"!=typeof t)throw new TypeError("Function expected");return t}for(var a,h=i.kind,c="getter"===h?"get":"setter"===h?"set":"value",l=!e&&t?i.static?t:t.prototype:null,u=e||(l?Object.getOwnPropertyDescriptor(l,i.name):{}),d=!1,p=s.length-1;p>=0;p--){var f={};for(var g in i)f[g]="access"===g?{}:i[g];for(var g in i.access)f.access[g]=i.access[g];f.addInitializer=function(t){if(d)throw new TypeError("Cannot add initializers after decoration has completed");r.push(o(t||null))};var m=(0,s[p])("accessor"===h?{get:u.get,set:u.set}:u[c],f);if("accessor"===h){if(void 0===m)continue;if(null===m||"object"!=typeof m)throw new TypeError("Object expected");(a=o(m.get))&&(u.get=a),(a=o(m.set))&&(u.set=a),(a=o(m.init))&&n.unshift(a)}else(a=o(m))&&("field"===h?n.unshift(a):u[c]=a)}l&&Object.defineProperty(l,i.name,u),d=!0})(null,t={value:e},s,{kind:"class",name:e.name,metadata:n},null,i),e=t.value,n&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:n}),function(t,e,s){for(var i=arguments.length>2,n=0;n<e.length;n++)s=i?e[n].call(t,s):e[n].call(t)}(e,i)})(),e;var n,h,c})();var ss;(function(t){t.github="github",t.counties="counties"})(ss||(ss={})),u.register(Gt.customize({fallback:n.e(458).then(n.bind(n,458)),useHref:!1}),Oe.setup((t=>{t.registerEndpoint(ss.github,(t=>{t.baseUrl="https://api.github.com"})).registerEndpoint(ss.counties,(t=>{t.baseUrl="https://api.kartverket.no/kommuneinfo/v1/"}))}))).app(es).start()})();
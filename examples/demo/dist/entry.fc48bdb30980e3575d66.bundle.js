(()=>{"use strict";var t,e,s={183:(t,e,s)=>{s.d(e,{A:()=>a});var i=s(758),n=s.n(i),r=s(935),o=s.n(r)()(n());o.push([t.id,"nav {\n    background: #eee;\n    display: flex;\n  }\n  \n  a {\n    padding: 10px;\n    text-decoration: none;\n    color: black;\n  }\n  \n  a:hover {\n    background-color: darkgray;\n  }\n  \n  .active {\n    background-color: lightgray;\n  }",""]);const a=o},935:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var s="",i=void 0!==e[5];return e[4]&&(s+="@supports (".concat(e[4],") {")),e[2]&&(s+="@media ".concat(e[2]," {")),i&&(s+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),s+=t(e),i&&(s+="}"),e[2]&&(s+="}"),e[4]&&(s+="}"),s})).join("")},e.i=function(t,s,i,n,r){"string"==typeof t&&(t=[[null,t,void 0]]);var o={};if(i)for(var a=0;a<this.length;a++){var h=this[a][0];null!=h&&(o[h]=!0)}for(var c=0;c<t.length;c++){var l=[].concat(t[c]);i&&o[l[0]]||(void 0!==r&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=r),s&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=s):l[2]=s),n&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=n):l[4]="".concat(n)),e.push(l))}},e}},758:t=>{t.exports=function(t){return t[1]}},591:t=>{var e=[];function s(t){for(var s=-1,i=0;i<e.length;i++)if(e[i].identifier===t){s=i;break}return s}function i(t,i){for(var r={},o=[],a=0;a<t.length;a++){var h=t[a],c=i.base?h[0]+i.base:h[0],l=r[c]||0,u="".concat(c," ").concat(l);r[c]=l+1;var d=s(u),p={css:h[1],media:h[2],sourceMap:h[3],supports:h[4],layer:h[5]};if(-1!==d)e[d].references++,e[d].updater(p);else{var f=n(p,i);i.byIndex=a,e.splice(a,0,{identifier:u,updater:f,references:1})}o.push(u)}return o}function n(t,e){var s=e.domAPI(e);return s.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;s.update(t=e)}else s.remove()}}t.exports=function(t,n){var r=i(t=t||[],n=n||{});return function(t){t=t||[];for(var o=0;o<r.length;o++){var a=s(r[o]);e[a].references--}for(var h=i(t,n),c=0;c<r.length;c++){var l=s(r[c]);0===e[l].references&&(e[l].updater(),e.splice(l,1))}r=h}}},128:t=>{var e={};t.exports=function(t,s){var i=function(t){if(void 0===e[t]){var s=document.querySelector(t);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(t){s=null}e[t]=s}return e[t]}(t);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(s)}},51:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},855:(t,e,s)=>{t.exports=function(t){var e=s.nc;e&&t.setAttribute("nonce",e)}},740:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(s){!function(t,e,s){var i="";s.supports&&(i+="@supports (".concat(s.supports,") {")),s.media&&(i+="@media ".concat(s.media," {"));var n=void 0!==s.layer;n&&(i+="@layer".concat(s.layer.length>0?" ".concat(s.layer):""," {")),i+=s.css,n&&(i+="}"),s.media&&(i+="}"),s.supports&&(i+="}");var r=s.sourceMap;r&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleTagTransform(i,t,e.options)}(e,t,s)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},656:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},529:(t,e,s)=>{s.d(e,{DC:()=>y,JW:()=>K,fU:()=>R,lJ:()=>H});var i=s(452);const n="AccessThis",r="AccessGlobal",o="AccessScope",a="AccessMember",h="AccessKeyed",c="ArrayBindingPattern",l="ObjectBindingPattern",u="BindingIdentifier",d="ArrayDestructuring";class p{constructor(t){this.value=t,this.$kind="Custom"}evaluate(...t){return this.value}assign(...t){return t}bind(...t){}unbind(...t){}accept(t){}}class f{constructor(t,e,s){this.expression=t,this.name=e,this.args=s,this.$kind="BindingBehavior",this.key=`_bb_${e}`}}class g{constructor(t,e,s){this.expression=t,this.name=e,this.args=s,this.$kind="ValueConverter"}}class m{constructor(t,e){this.target=t,this.value=e,this.$kind="Assign"}}class v{constructor(t,e,s){this.condition=t,this.yes=e,this.no=s,this.$kind="Conditional"}}class w{constructor(t){this.name=t,this.$kind=r}}class b{constructor(t=0){this.ancestor=t,this.$kind=n}}class y{constructor(t,e=0){this.name=t,this.ancestor=e,this.$kind=o}}const C=t=>t.$kind===r||(t.$kind===a||t.$kind===h)&&t.accessGlobal;class S{constructor(t,e,s=!1){this.object=t,this.name=e,this.optional=s,this.$kind=a,this.accessGlobal=C(t)}}class k{constructor(t,e,s=!1){this.object=t,this.key=e,this.optional=s,this.$kind=h,this.accessGlobal=C(t)}}class T{constructor(t,e,s=0,i=!1){this.name=t,this.args=e,this.ancestor=s,this.optional=i,this.$kind="CallScope"}}class x{constructor(t,e,s,i=!1,n=!1){this.object=t,this.name=e,this.args=s,this.optionalMember=i,this.optionalCall=n,this.$kind="CallMember"}}class I{constructor(t,e,s=!1){this.func=t,this.args=e,this.optional=s,this.$kind="CallFunction"}}class A{constructor(t,e){this.name=t,this.args=e,this.$kind="CallGlobal"}}class ${constructor(t,e,s){this.operation=t,this.left=e,this.right=s,this.$kind="Binary"}}class E{constructor(t,e){this.operation=t,this.expression=e,this.$kind="Unary"}}class R{constructor(t){this.value=t,this.$kind="PrimitiveLiteral"}}R.$undefined=new R(void 0),R.$null=new R(null),R.$true=new R(!0),R.$false=new R(!1),R.$empty=new R("");class N{constructor(t){this.elements=t,this.$kind="ArrayLiteral"}}N.$empty=new N(i.tR);class P{constructor(t,e){this.keys=t,this.values=e,this.$kind="ObjectLiteral"}}P.$empty=new P(i.tR,i.tR);class O{constructor(t,e=i.tR){this.cooked=t,this.expressions=e,this.$kind="Template"}}O.$empty=new O([""]);class M{constructor(t,e,s,n=i.tR){this.cooked=t,this.func=s,this.expressions=n,this.$kind="TaggedTemplate",t.raw=e}}class B{constructor(t){this.elements=t,this.$kind=c}}class L{constructor(t,e){this.keys=t,this.values=e,this.$kind=l}}class j{constructor(t){this.name=t,this.$kind=u}}class F{constructor(t,e,s){this.declaration=t,this.iterable=e,this.semiIdx=s,this.$kind="ForOfStatement"}}class D{constructor(t,e=i.tR){this.parts=t,this.expressions=e,this.$kind="Interpolation",this.isMulti=e.length>1,this.firstExpression=e[0]}}class V{constructor(t,e,s,i){this.$kind=t,this.list=e,this.source=s,this.initializer=i}}class H{constructor(t,e,s){this.target=t,this.source=e,this.initializer=s,this.$kind="DestructuringAssignmentLeaf"}}class q{constructor(t,e,s=!1){this.args=t,this.body=e,this.rest=s,this.$kind="ArrowFunction"}}const U=String,W=()=>Object.create(null),_=(t,...e)=>new Error(`AUR${U(t).padStart(4,"0")}:${e.map(U)}`),K=i.DI.createInterface("IExpressionParser",(t=>t.singleton(Q)));class Q{constructor(){this.t=W(),this.i=W(),this.h=W()}parse(t,e){let s;switch(e){case ht:return new p(t);case it:return s=this.h[t],void 0===s&&(s=this.h[t]=this.$parse(t,e)),s;case nt:return s=this.i[t],void 0===s&&(s=this.i[t]=this.$parse(t,e)),s;default:if(0===t.length){if(e===ot||e===at)return R.$empty;throw Kt()}return s=this.t[t],void 0===s&&(s=this.t[t]=this.$parse(t,e)),s}}$parse(t,e){return lt=t,ut=0,dt=t.length,pt=0,ft=0,gt=6291456,mt="",ct=St(0),vt=!0,wt=!1,bt=!0,yt=-1,xt(61,void 0===e?at:e)}}function z(t){switch(t){case 98:return 8;case 116:return 9;case 110:return 10;case 118:return 11;case 102:return 12;case 114:return 13;case 34:return 34;case 39:return 39;case 92:return 92;default:return t}}const G=R.$false,J=R.$true,Y=R.$null,Z=R.$undefined,X=new b(0),tt=new b(1),et=new class{constructor(){this.$kind="AccessBoundary"}},st="None",it="Interpolation",nt="IsIterator",rt="IsChainable",ot="IsFunction",at="IsProperty",ht="IsCustom";let ct,lt="",ut=0,dt=0,pt=0,ft=0,gt=6291456,mt="",vt=!0,wt=!1,bt=!0,yt=-1;const Ct=String.fromCharCode,St=t=>lt.charCodeAt(t),kt=()=>lt.slice(ft,ut),Tt="Infinity NaN isFinite isNaN parseFloat parseInt decodeURI decodeURIComponent encodeURI encodeURIComponent Array BigInt Boolean Date Map Number Object RegExp Set String JSON Math Intl".split(" ");function xt(t,e){if(e===ht)return new p(lt);if(0===ut){if(e===it)return function(){const t=[],e=[],s=dt;let i="";for(;ut<s;){switch(ct){case 36:if(123===St(ut+1)){t.push(i),i="",ut+=2,ct=St(ut),Ot();const s=xt(61,it);e.push(s);continue}i+="$";break;case 92:i+=Ct(z(Mt()));break;default:i+=Ct(ct)}Mt()}return e.length?(t.push(i),new D(t,e)):null}();if(Ot(),4194304&gt)throw Vt()}vt=513>t,wt=!1,bt=514>t;let s,i=!1,h=0;if(131072&gt){const t=de[63&gt];Ot(),s=new E(t,xt(514,e)),vt=!1}else{t:switch(gt){case 12295:h=pt,vt=!1,bt=!1;do{switch(Ot(),++h,gt){case 65546:if(Ot(),!(12288&gt))throw qt();break;case 11:case 12:throw qt();case 2162701:if(wt=!0,Ot(),!(12288&gt)){s=0===h?X:1===h?tt:new b(h),i=!0;break t}break;default:if(2097152&gt){s=0===h?X:1===h?tt:new b(h);break t}throw Ut()}}while(12295===gt);case 4096:{const t=mt;if(e===nt)s=new j(t);else if(bt&&Tt.includes(t))s=new w(t);else{if(bt&&"import"===t)throw Yt();s=new y(t,h)}if(vt=!wt,Ot(),Ft(51)){if(524297===gt)throw le();const e=wt,i=pt;++pt;const n=xt(62,st);wt=e,pt=i,vt=!1,s=new q([new j(t)],n)}break}case 11:throw ue();case 12:throw Ht();case 12292:switch(vt=!1,Ot(),pt){case 0:s=X;break;case 1:s=tt;break;default:s=new b(pt)}break;case 12293:vt=!1,Ot(),s=et;break;case 2688008:s=function(t){Ot();const e=ut,s=ft,i=gt,n=ct,r=mt,o=vt,a=wt,h=[];let c=1,l=!1;e:for(;;){if(12===gt){if(Ot(),4096!==gt)throw qt();if(h.push(new j(mt)),Ot(),6291472===gt)throw ce();if(7340047!==gt)throw Ht();if(Ot(),51!==gt)throw Ht();Ot();const t=wt,e=pt;++pt;const s=xt(62,st);return wt=t,pt=e,vt=!1,new q(h,s,!0)}switch(gt){case 4096:h.push(new j(mt)),Ot();break;case 7340047:Ot();break e;case 524297:case 2688019:Ot(),c=4;break;case 6291472:c=2,l=!0;break e;case 2688008:c=2;break e;default:Ot(),c=2}switch(gt){case 6291472:if(Ot(),l=!0,1===c)break;break e;case 7340047:Ot();break e;case 4194350:1===c&&(c=3);break e;case 51:if(l)throw oe();Ot(),c=2;break e;default:1===c&&(c=2);break e}}if(51===gt){if(1===c){if(Ot(),524297===gt)throw le();const t=wt,e=pt;++pt;const s=xt(62,st);return wt=t,pt=e,vt=!1,new q(h,s)}throw oe()}if(1===c&&0===h.length)throw ee();if(l)switch(c){case 2:throw oe();case 3:throw ae();case 4:throw he()}ut=e,ft=s,gt=i,ct=n,mt=r,vt=o,wt=a;const u=wt,d=xt(62,t);if(wt=u,Dt(7340047),51===gt)switch(c){case 2:throw oe();case 3:throw ae();case 4:throw he()}return d}(e);break;case 2688019:s=lt.search(/\s+of\s+/)>ut?function(){const t=[],e=new V(d,t,void 0,void 0);let s="",i=!0,n=0;for(;i;)switch(Ot(),gt){case 7340052:i=!1,r();break;case 6291472:r();break;case 4096:s=kt();break;default:throw ie()}return Dt(7340052),e;function r(){""!==s?(t.push(new H(new S(X,s),new k(X,new R(n++)),void 0)),s=""):n++}}():function(t){const e=wt;Ot();const s=new Array;for(;7340052!==gt;)if(Ft(6291472)){if(s.push(Z),7340052===gt)break}else{if(s.push(xt(62,t===nt?st:t)),!Ft(6291472))break;if(7340052===gt)break}return wt=e,Dt(7340052),t===nt?new B(s):(vt=!1,new N(s))}(e);break;case 524297:s=function(t){const e=wt,s=new Array,i=new Array;for(Ot();7340046!==gt;){if(s.push(mt),49152&gt)Ot(),Dt(6291477),i.push(xt(62,t===nt?st:t));else{if(!(12288&gt))throw Xt();{const e=ct,s=gt,n=ut;Ot(),Ft(6291477)?i.push(xt(62,t===nt?st:t)):(ct=e,gt=s,ut=n,i.push(xt(515,t===nt?st:t)))}}7340046!==gt&&Dt(6291472)}return wt=e,Dt(7340046),t===nt?new L(s,i):(vt=!1,new P(s,i))}(e);break;case 2163760:s=new O([mt]),vt=!1,Ot();break;case 2163761:s=Nt(e,s,!1);break;case 16384:case 32768:s=new R(mt),vt=!1,Ot();break;case 8194:case 8195:case 8193:case 8192:s=de[63&gt],vt=!1,Ot();break;default:throw ut>=dt?Wt():_t()}if(e===nt)return function(t){if(!Rt.includes(t.$kind))throw Zt(t.$kind);if(4204594!==gt)throw Zt(t.$kind);Ot();const e=t,s=xt(61,rt);return new F(e,s,yt)}(s);if(514<t)return s;if(11===gt||12===gt)throw qt();if(s.$kind===n)switch(gt){case 2162701:if(wt=!0,vt=!1,Ot(),!(13312&gt))throw ne();if(12288&gt)s=new y(mt,s.ancestor),Ot();else if(2688008===gt)s=new I(s,It(),!0);else{if(2688019!==gt)throw re();s=At(s,!0)}break;case 65546:if(vt=!wt,Ot(),!(12288&gt))throw qt();s=new y(mt,s.ancestor),Ot();break;case 11:case 12:throw qt();case 2688008:s=new I(s,It(),i);break;case 2688019:s=At(s,i);break;case 2163760:s=Pt(s);break;case 2163761:s=Nt(e,s,!0)}for(;(65536&gt)>0;)switch(gt){case 2162701:s=$t(s);break;case 65546:if(Ot(),!(12288&gt))throw qt();s=Et(s,!1);break;case 11:case 12:throw qt();case 2688008:s=s.$kind===o?new T(s.name,It(),s.ancestor,!1):s.$kind===a?new x(s.object,s.name,It(),s.optional,!1):s.$kind===r?new A(s.name,It()):new I(s,It(),!1);break;case 2688019:s=At(s,!1);break;case 2163760:if(wt)throw re();s=Pt(s);break;case 2163761:if(wt)throw re();s=Nt(e,s,!0)}}if(11===gt||12===gt)throw qt();if(513<t)return s;for(;(262144&gt)>0;){const i=gt;if((960&i)<=t)break;Ot(),s=new $(de[63&i],s,xt(960&i,e)),vt=!1}if(63<t)return s;if(Ft(6291479)){const t=xt(62,e);Dt(6291477),s=new v(s,t,xt(62,e)),vt=!1}if(62<t)return s;if(Ft(4194350)){if(!vt)throw Qt();s=new m(s,xt(62,e))}if(61<t)return s;for(;Ft(6291481);){if(6291456===gt)throw zt();const t=mt;Ot();const i=new Array;for(;Ft(6291477);)i.push(xt(62,e));s=new g(s,t,i)}for(;Ft(6291480);){if(6291456===gt)throw Gt();const t=mt;Ot();const i=new Array;for(;Ft(6291477);)i.push(xt(62,e));s=new f(s,t,i)}if(6291456!==gt){if(e===it&&7340046===gt)return s;if(e===rt&&6291478===gt){if(ut===dt)throw _t();return yt=ut-1,s}if("of"===kt())throw Jt();throw _t()}return s}function It(){const t=wt;Ot();const e=[];for(;7340047!==gt&&(e.push(xt(62,st)),Ft(6291472)););return Dt(7340047),vt=!1,wt=t,e}function At(t,e){const s=wt;return Ot(),t=new k(t,xt(62,st),e),Dt(7340052),vt=!s,wt=s,t}function $t(t){if(wt=!0,vt=!1,Ot(),!(13312&gt))throw ne();if(12288&gt)return Et(t,!0);if(2688008===gt)return t.$kind===o?new T(t.name,It(),t.ancestor,!0):t.$kind===a?new x(t.object,t.name,It(),t.optional,!0):new I(t,It(),!0);if(2688019===gt)return At(t,!0);throw re()}function Et(t,e){const s=mt;switch(gt){case 2162701:{wt=!0,vt=!1;const i=ut,n=ft,r=gt,o=ct,a=mt,h=vt,c=wt;if(Ot(),!(13312&gt))throw ne();return 2688008===gt?new x(t,s,It(),e,!0):(ut=i,ft=n,gt=r,ct=o,mt=a,vt=h,wt=c,new S(t,s,e))}case 2688008:return vt=!1,new x(t,s,It(),e,!1);default:return vt=!wt,Ot(),new S(t,s,e)}}const Rt=[c,l,u,d,"ObjectDestructuring"];function Nt(t,e,s){const i=wt,n=[mt];Dt(2163761);const r=[xt(62,t)];for(;2163760!==(gt=jt());)n.push(mt),Dt(2163761),r.push(xt(62,t));return n.push(mt),vt=!1,wt=i,s?(Ot(),new M(n,n,e,r)):(Ot(),new O(n,r))}function Pt(t){vt=!1;const e=[mt];return Ot(),new M(e,e,t)}function Ot(){for(;ut<dt;)if(ft=ut,null!=(gt=be[ct]()))return;gt=6291456}function Mt(){return ct=St(++ut)}function Bt(t){let e=ct;if(!1===t){do{e=Mt()}while(e<=57&&e>=48);if(46!==e)return mt=parseInt(kt(),10),32768;if(e=Mt(),ut>=dt)return mt=parseInt(kt().slice(0,-1),10),32768}if(e<=57&&e>=48)do{e=Mt()}while(e<=57&&e>=48);else ct=St(--ut);return mt=parseFloat(kt()),32768}function Lt(){let t=!0,e="";for(;96!==Mt();)if(36===ct){if(ut+1<dt&&123===St(ut+1)){ut++,t=!1;break}e+="$"}else if(92===ct)e+=Ct(z(Mt()));else{if(ut>=dt)throw te();e+=Ct(ct)}return Mt(),mt=e,t?2163760:2163761}const jt=()=>{if(ut>=dt)throw te();return ut--,Lt()},Ft=t=>gt===t&&(Ot(),!0),Dt=t=>{if(gt!==t)throw ee();Ot()},Vt=()=>_(151,lt),Ht=()=>_(152,lt),qt=()=>_(153,lt),Ut=()=>_(154,lt),Wt=()=>_(155,lt),_t=()=>_(156,kt(),ut,lt),Kt=()=>_(157),Qt=()=>_(158,lt),zt=()=>_(159,lt),Gt=()=>_(160,lt),Jt=()=>_(161,lt),Yt=()=>_(162,lt),Zt=t=>_(163,lt,t),Xt=()=>_(164,lt),te=()=>_(166,lt),ee=t=>_(167,lt),se=()=>{throw _(168,lt)};se.notMapped=!0;const ie=()=>_(170,lt),ne=()=>_(171,lt),re=()=>_(172,lt),oe=()=>_(173,lt),ae=()=>_(174,lt),he=()=>_(175,lt),ce=()=>_(176,lt),le=()=>_(178,lt),ue=()=>_(179,lt),de=[G,J,Y,Z,"this","$this",null,"$parent","(","{",".","..","...","?.","}",")",",","[","]",":",";","?","'",'"',"&","|","??","||","&&","==","!=","===","!==","<",">","<=",">=","in","instanceof","+","-","typeof","void","*","%","/","=","!",2163760,2163761,"of","=>"],pe=Object.assign(W(),{true:8193,null:8194,false:8192,undefined:8195,this:12293,$this:12292,$parent:12295,in:6562213,instanceof:6562214,typeof:139305,void:139306,of:4204594}),fe=[36,0,65,91,95,0,97,123,170,0,186,0,192,215,216,247,248,697,736,741,7424,7462,7468,7517,7522,7526,7531,7544,7545,7615,7680,7936,8305,0,8319,0,8336,8349,8490,8492,8498,0,8526,0,8544,8585,11360,11392,42786,42888,42891,42927,42928,42936,42999,43008,43824,43867,43868,43877,64256,64263,65313,65339,65345,65371],ge=[48,58],me=(t,e,s,i)=>{const n=s.length;for(let r=0;r<n;r+=2){const n=s[r];let o=s[r+1];if(o=o>0?o:n+1,t&&t.fill(i,n,o),e)for(let t=n;t<o;t++)e.add(t)}},ve=t=>()=>(Mt(),t);me(null,new Set,[36,0,48,58,65,91,95,0,97,123],!0);const we=new Uint8Array(65535);me(we,null,fe,1),me(we,null,ge,1);const be=new Array(65535);be.fill(se,0,65535),me(be,null,[0,33,127,161],(()=>(Mt(),null))),me(be,null,fe,(function(){for(;we[Mt()];);const t=pe[mt=kt()];return void 0===t?4096:t})),me(be,null,ge,(()=>Bt(!1))),be[34]=be[39]=()=>function(){const t=ct;Mt();let e=0;const s=new Array;let i=ut;for(;ct!==t;)if(92===ct)s.push(lt.slice(i,ut)),Mt(),e=z(ct),Mt(),s.push(Ct(e)),i=ut;else{if(ut>=dt)throw _(165,lt);Mt()}const n=lt.slice(i,ut);Mt(),s.push(n);const r=s.join("");return mt=r,16384}(),be[96]=()=>Lt(),be[33]=()=>61!==Mt()?131119:61!==Mt()?6553950:(Mt(),6553952),be[61]=()=>62===Mt()?(Mt(),51):61!==ct?4194350:61!==Mt()?6553949:(Mt(),6553951),be[38]=()=>38!==Mt()?6291480:(Mt(),6553884),be[124]=()=>124!==Mt()?6291481:(Mt(),6553819),be[63]=()=>{if(46===Mt()){const t=St(ut+1);return t<=48||t>=57?(Mt(),2162701):6291479}return 63!==ct?6291479:(Mt(),6553754)},be[46]=()=>Mt()<=57&&ct>=48?Bt(!0):46===ct?46!==Mt()?11:(Mt(),12):65546,be[60]=()=>61!==Mt()?6554017:(Mt(),6554019),be[62]=()=>61!==Mt()?6554018:(Mt(),6554020),be[37]=ve(6554156),be[40]=ve(2688008),be[41]=ve(7340047),be[42]=ve(6554155),be[43]=ve(2490855),be[44]=ve(6291472),be[45]=ve(2490856),be[47]=ve(6554157),be[58]=ve(6291477),be[59]=ve(6291478),be[91]=ve(2688019),be[93]=ve(7340052),be[123]=ve(524297),be[125]=ve(7340046)},452:(t,e,s)=>{s.d(e,{$r:()=>w,DI:()=>mt,HN:()=>Mt,JF:()=>kt,M6:()=>q,Nt:()=>wt,P9:()=>Pt,Q7:()=>Rt,TR:()=>y,Zc:()=>Ot,Zn:()=>p,Zs:()=>F,c4:()=>C,cH:()=>O,do:()=>yt,eA:()=>S,fL:()=>m,ff:()=>Bt,fv:()=>H,gF:()=>Wt,hb:()=>U,hd:()=>et,jY:()=>I,kW:()=>v,lQ:()=>At,lq:()=>Nt,n_:()=>L,nf:()=>V,p7:()=>vt,pn:()=>Lt,r$:()=>j,r_:()=>$t,tR:()=>xt,ui:()=>x,vB:()=>It,xQ:()=>g,xe:()=>se});var i=s(220);const n=Object.freeze,r=Object.assign,o=String,a=i.OS.get;i.OS.has;const h=i.OS.define,c=t=>"function"==typeof t,l=t=>"string"==typeof t,u=()=>Object.create(null),d=(t,...e)=>new Error(`AUR${o(t).padStart(4,"0")}:${e.map(o)}`),p=(()=>{const t={};let e=!1,s=0,i=0,n=0;return r=>{switch(typeof r){case"number":return r>=0&&(0|r)===r;case"string":if(e=t[r],void 0!==e)return e;if(s=r.length,0===s)return t[r]=!1;for(i=0,n=0;n<s;++n)if(i=A(r,n),0===n&&48===i&&s>1||i<48||i>57)return t[r]=!1;return t[r]=!0;default:return!1}}})(),f=function(){const t=r(u(),{0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0}),e=e=>""===e?0:e!==e.toUpperCase()?3:e!==e.toLowerCase()?2:!0===t[e]?1:0;return(t,s)=>{const i=t.length;if(0===i)return t;let n,r=!1,o="",a="",h=0,c=t.charAt(0),l=e(c),u=0;for(;u<i;++u)n=h,a=c,h=l,c=t.charAt(u+1),l=e(c),0===h?o.length>0&&(r=!0):(!r&&o.length>0&&2===h&&(r=3===n||3===l),o+=s(a,r),r=!1);return o}}(),g=function(){const t=u(),e=(t,e)=>e?t.toUpperCase():t.toLowerCase();return s=>{let i=t[s];return void 0===i&&(i=t[s]=f(s,e)),i}}(),m=function(){const t=u();return e=>{let s=t[e];return void 0===s&&(s=g(e),s.length>0&&(s=s[0].toUpperCase()+s.slice(1)),t[e]=s),s}}(),v=function(){const t=u(),e=(t,e)=>e?`-${t.toLowerCase()}`:t.toLowerCase();return s=>{let i=t[s];return void 0===i&&(i=t[s]=f(s,e)),i}}(),w=t=>{const e=t.length,s=Array(e);let i=0;for(;i<e;++i)s[i]=t[i];return s},b=(t,e)=>{const s=e.name;e.addInitializer((function(){Reflect.defineProperty(this,s,{value:t.bind(this),writable:!0,configurable:!0,enumerable:!1})}))},y=(...t)=>{const e=[];let s=0;const i=t.length;let n,r=0,o=0;for(;o<i;++o)if(n=t[o],void 0!==n){r=n.length;let t=0;for(;t<r;++t)e[s++]=n[t]}return e},C=(...t)=>{const e=t.length;let s,i=0;for(;e>i;++i)if(s=t[i],void 0!==s)return s;throw d(20)},S=function(){const t=Function.prototype,e=Object.getPrototypeOf,s=new WeakMap;let i,n=t,r=0;return function(o){if(i=s.get(o),void 0===i)for(s.set(o,i=[n=o]),r=0;(n=e(n))!==t;)i[++r]=n;return i}}();function k(...t){return r(u(),...t)}const T=function(){const t=new WeakMap;let e=!1,s="",i=0;return n=>(e=t.get(n),void 0===e&&(s=n.toString(),i=s.length,e=i>=29&&i<=100&&125===A(s,i-1)&&A(s,i-2)<=32&&93===A(s,i-3)&&101===A(s,i-4)&&100===A(s,i-5)&&111===A(s,i-6)&&99===A(s,i-7)&&32===A(s,i-8)&&101===A(s,i-9)&&118===A(s,i-10)&&105===A(s,i-11)&&116===A(s,i-12)&&97===A(s,i-13)&&110===A(s,i-14)&&91===A(s,i-15),t.set(n,e)),e)}(),x=(t,e)=>t instanceof Promise?t.then(e):e(t),I=(...t)=>{let e,s,i,n=0,r=t.length;for(;n<r;++n)e=t[n],(e=t[n])instanceof Promise&&(void 0===s?s=e:void 0===i?i=[s,e]:i.push(e));return void 0===i?s:Promise.all(i)},A=(t,e)=>t.charCodeAt(e),$=(t,e)=>new St(t,1,e),E=(t,e)=>new St(t,2,e),R=(t,e)=>new St(e,5,t),N=new WeakMap,P=t=>(e,s,i)=>{let n=N.get(e);if(void 0===n&&N.set(e,n=new WeakMap),n.has(i))return n.get(i);const r=t(e,s,i);return n.set(i,r),r},O={instance:(t,e)=>new St(t,0,e),singleton:$,transient:E,callback:(t,e)=>new St(t,3,e),cachedCallback:(t,e)=>new St(t,3,P(e)),aliasTo:R,defer:(t,...e)=>new Tt(t,e)},M="au:annotation",B=(t,e)=>void 0===e?`${M}:${t}`:`${M}:${t}:${e}`,L="au:resource",j=(t,e,s)=>null==e?`${L}:${t}`:null==s?`${L}:${t}:${e}`:`${L}:${t}:${e}:${s}`,F={annotation:n({name:"au:annotation",appendTo:(t,e)=>{const s=a(M,t);void 0===s?h([e],t,M):s.push(e)},set(t,e,s){h(s,t,B(e))},get:(t,e)=>a(B(e),t),getKeys(t){let e=a(M,t);return void 0===e&&h(e=[],t,M),e},isKey:t=>t.startsWith(M),keyFor:B})},D=Object.prototype.hasOwnProperty;function V(t,e,s,i){let n=a(B(t),s);return void 0===n?(n=e[t],void 0===n?(n=s[t],void 0!==n&&D.call(s,t)?n:i()):n):n}function H(t,e,s){let i=a(B(t),e);return void 0===i?(i=e[t],void 0!==i&&D.call(e,t)?i:s()):i}function q(t,e,s){const i=e[t];return void 0===i?s():i}const U=(()=>{const t=new WeakMap;return n({define:(e,s)=>(t.set(e,s),e),get:e=>t.get(e),has:e=>t.has(e)})})(),W={none(t){throw d(2,t)},singleton:t=>new St(t,1,t),transient:t=>new St(t,2,t)};class _{constructor(t,e){this.inheritParentResources=t,this.defaultResolver=e}static from(t){return void 0===t||t===_.DEFAULT?_.DEFAULT:new _(t.inheritParentResources??!1,t.defaultResolver??W.singleton)}}_.DEFAULT=_.from({});const K=t=>new J(null,_.from(t)),Q=new Set("Array ArrayBuffer Boolean DataView Date Error EvalError Float32Array Float64Array Function Int8Array Int16Array Int32Array Map Number Object Promise RangeError ReferenceError RegExp Set SharedArrayBuffer String SyntaxError TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array URIError WeakMap WeakSet".split(" "));let z=0,G=null;class J{get depth(){return null===this.t?0:this.t.depth+1}get parent(){return this.t}constructor(t,e){if(this.id=++z,this.i=0,this.u=new Map,this.t=t,this.config=e,this.h=new Map,this.res={},null===t)this.root=this,this.R=new Map;else if(this.root=t.root,this.R=t.R,e.inheritParentResources)for(const e in t.res)this.registerResolver(e,t.res[e]);this.h.set(vt,it)}register(...t){if(100==++this.i)throw d(6,...t);let e,s,n,r,o,h,c=0,u=t.length;for(;c<u;++c)if(e=t[c],(0,i.Gv)(e))if(nt(e))e.register(this);else if(U.has(e))U.get(e).call(e,this);else if(null!=(h=a(L,e)))h.register(this);else if(ot(e))if(l(e.$au?.type)){const t=e.$au,s=(e.aliases??xt).concat(t.aliases??xt);let i=`${L}:${t.type}:${t.name}`;if(!this.has(i,!1))for(R(e,i).register(this),this.has(e,!1)||$(e,e).register(this),r=0,o=s.length;r<o;++r)i=`${L}:${t.type}:${s[r]}`,this.has(i,!1)||R(e,i).register(this)}else $(e,e).register(this);else for(s=Object.keys(e),r=0,o=s.length;r<o;++r)n=e[s[r]],(0,i.Gv)(n)&&(nt(n)?n.register(this):U.has(n)?U.get(n).call(n,this):this.register(n));return--this.i,this}registerResolver(t,e,s=!1){X(t);const i=this.h,n=i.get(t);if(null==n){if(i.set(t,e),at(t)){if(void 0!==this.res[t])throw d(7,t);this.res[t]=e}}else n instanceof St&&4===n.$?n._state.push(e):i.set(t,new St(t,4,[n,e]));return s&&this.u.set(t,e),e}registerTransformer(t,e){const s=this.getResolver(t);if(null==s)return!1;if(s.getFactory){const t=s.getFactory(this);return null!=t&&(t.registerTransformer(e),!0)}return!1}getResolver(t,e=!0){if(X(t),void 0!==t.resolve)return t;const s=G;let i,n,r=G=this;try{for(;null!=r;){if(i=r.h.get(t),null!=i)return i;if(null==r.t)return n=rt(t)?this:r,e?this.C(t,n):null;r=r.t}}finally{G=s}return null}has(t,e=!1){return this.h.has(t)||at(t)&&t in this.res||((e&&this.t?.has(t,!0))??!1)}get(t){if(X(t),t.$isResolver)return t.resolve(this,this);const e=G;let s,i,n=G=this;try{for(;null!=n;){if(s=n.h.get(t),null!=s)return s.resolve(n,this);if(null==n.t)return i=rt(t)?this:n,s=this.C(t,i),s.resolve(n,this);n=n.t}}finally{G=e}throw d(8,t)}getAll(t,e=!1){X(t);const s=G,i=G=this;let n,r=i,o=xt;try{if(e){for(;null!=r;)n=r.h.get(t),null!=n&&(o=o.concat(st(n,r,i))),r=r.t;return o}for(;null!=r;){if(n=r.h.get(t),null!=n)return st(n,r,i);if(r=r.t,null==r)return xt}}finally{G=s}return xt}invoke(t,e){if(T(t))throw d(15,t);const s=G;G=this;try{return void 0===e?new t(...pt(t).map(tt,this)):new t(...pt(t).map(tt,this),...e)}finally{G=s}}hasFactory(t){return this.R.has(t)}getFactory(t){let e=this.R.get(t);if(void 0===e){if(T(t))throw d(15,t);this.R.set(t,e=new Y(t,pt(t)))}return e}registerFactory(t,e){this.R.set(t,e)}createChild(t){return void 0===t&&this.config.inheritParentResources?this.config===_.DEFAULT?new J(this,this.config):new J(this,_.from({...this.config,inheritParentResources:!1})):new J(this,_.from(t??this.config))}disposeResolvers(){const t=this.h,e=this.u;let s,i;for([i,s]of e.entries())s.dispose(),t.delete(i);e.clear()}useResources(t){const e=t.res;for(const t in e)this.registerResolver(t,e[t])}find(t,e){const s=l(e)?`${L}:${t}:${e}`:t;let i=this,n=i.res[s];return null==n&&(i=i.root,n=i.res[s]),null==n?null:n.getFactory?.(i)?.Type??null}dispose(){this.u.size>0&&this.disposeResolvers(),this.h.clear(),this.root===this&&(this.R.clear(),this.res={})}C(t,e){const s=nt(t);if(!c(t)&&!s)throw d(9,t);if(Q.has(t.name))throw d(10,t);if(s){const s=t.register(e,t);if(!(s instanceof Object)||null==s.resolve){const s=e.h.get(t);if(null!=s)return s;throw d(11,t)}return s}if(t.$isInterface)throw d(12,t.friendlyName);const i=this.config.defaultResolver(t,e);return e.h.set(t,i),i}}class Y{constructor(t,e){this.Type=t,this.dependencies=e,this.transformers=null}construct(t,e){const s=G;let i;G=t;try{return i=void 0===e?new this.Type(...this.dependencies.map(tt,t)):new this.Type(...this.dependencies.map(tt,t),...e),null==this.transformers?i:this.transformers.reduce(Z,i)}finally{G=s}}registerTransformer(t){(this.transformers??=[]).push(t)}}function Z(t,e){return e(t)}function X(t){if(null==t)throw d(14)}function tt(t){return this.get(t)}function et(...t){if(null==G)throw d(16,...t);return 1===t.length?G.get(t[0]):t.map(tt,G)}const st=(t,e,s)=>{if(t instanceof St&&4===t.$){const i=t._state,n=i.length,r=Array(n);let o=0;for(;o<n;++o)r[o]=i[o].resolve(e,s);return r}return[t.resolve(e,s)]},it={$isResolver:!0,resolve:(t,e)=>e},nt=t=>c(t.register),rt=t=>(t=>nt(t)&&"boolean"==typeof t.registerInRequestor)(t)&&t.registerInRequestor,ot=t=>void 0!==t.prototype,at=t=>l(t)&&t.indexOf(":")>0;(0,i.b8)();class ht{constructor(t,e){this.c=t,this.k=e}instance(t){return this.O(0,t)}singleton(t){return this.O(1,t)}transient(t){return this.O(2,t)}callback(t){return this.O(3,t)}cachedCallback(t){return this.O(3,P(t))}aliasTo(t){return this.O(5,t)}O(t,e){const{c:s,k:i}=this;return this.c=this.k=void 0,s.registerResolver(i,new St(i,t,e))}}const ct=t=>{const e=t.slice(),s=Object.keys(t),i=s.length;let n;for(let r=0;r<i;++r)n=s[r],p(n)||(e[n]=t[n]);return e},lt=B("di:paramtypes"),ut=t=>a("design:paramtypes",t),dt=t=>t.metadata[lt]??=[],pt=t=>{const e=B("di:dependencies");let s=a(e,t);if(void 0===s){const i=t.inject;if(void 0===i){const e=ut(t),i=(t=>a(lt,t))(t);if(void 0===e)if(void 0===i){const e=Object.getPrototypeOf(t);s=c(e)&&e!==Function.prototype?ct(pt(e)):[]}else s=ct(i);else if(void 0===i)s=ct(e);else{s=ct(e);let t,n=i.length,r=0;for(;r<n;++r)t=i[r],void 0!==t&&(s[r]=t);const o=Object.keys(i);let a;for(r=0,n=o.length,r=0;r<n;++r)a=o[r],p(a)||(s[a]=i[a])}}else s=ct(i);h(s,t,e)}return s},ft=(t,e)=>{const s=c(t)?t:e,i=(l(t)?t:void 0)??"(anonymous)",n={$isInterface:!0,friendlyName:i,toString:()=>`InterfaceSymbol<${i}>`,register:null!=s?(t,e)=>s(new ht(t,e??n)):void 0};return n},gt=(...t)=>(e,s)=>{switch(s.kind){case"class":{const e=dt(s);let i,n=0;for(;n<t.length;++n)i=t[n],void 0!==i&&(e[n]=i);break}case"field":{const e=dt(s),i=t[0];void 0!==i&&(e[s.name]=i);break}default:throw d(22,String(s.name),s.kind)}},mt={createContainer:K,getDesignParamtypes:ut,getDependencies:pt,createInterface:ft,inject:gt,transient:t=>(t.register=function(e){return E(t,t).register(e,t)},t.registerInRequestor=!1,t),singleton:(t,e=Ct)=>(t.register=function(e){return $(t,t).register(e,t)},t.registerInRequestor=e.scoped,t)},vt=ft("IContainer"),wt=vt;function bt(t,e){return mt.transient(t)}function yt(t,e){return null==t?bt:bt(t)}const Ct={scoped:!1};mt.singleton;class St{get $isResolver(){return!0}constructor(t,e,s){this.I=!1,this.L=null,this.k=t,this.$=e,this._state=s}register(t,e){return t.registerResolver(e||this.k,this)}resolve(t,e){switch(this.$){case 0:return this._state;case 1:if(this.I)throw d(3,this._state.name);return this.I=!0,this._state=(this.L=t.getFactory(this._state)).construct(e),this.$=0,this.I=!1,this._state;case 2:{const s=t.getFactory(this._state);if(null===s)throw d(4,this.k);return s.construct(e)}case 3:return this._state(t,e,this);case 4:return this._state[0].resolve(t,e);case 5:return e.get(this._state);default:throw d(5,this.$)}}getFactory(t){switch(this.$){case 1:case 2:return t.getFactory(this._state);case 5:return t.getResolver(this._state)?.getFactory?.(t)??null;case 0:return this.L;default:return null}}}class kt{get friendlyName(){return this.A}constructor(t,e=null,s=null){this.A=t,this.F=e,this._=s}prepare(t){this.F=t}get $isResolver(){return!0}resolve(){if(null==this.F)throw d(13,this.A);return this.F}getFactory(t){return null==this._?null:t.getFactory(this._)}dispose(){this.F=null}}class Tt{constructor(t,e){this.key=t,this.params=e}register(t){t.has(this.key,!0)?t.get(this.key).register(t,...this.params):t.register(...this.params.filter((t=>"object"==typeof t)))}}const xt=n([]),It=n({});function At(){}const $t=ft("IPlatform");function Et(t){return function(e){function s(t,e){gt(s)(t,e)}return s.$isResolver=!0,s.resolve=function(s,i){return t(e,s,i)},s}}const Rt=(t,e=!1)=>{function s(t,e){gt(s)(t,e)}return s.$isResolver=!0,s.resolve=(s,i)=>i.getAll(t,e),s},Nt=Et(((t,e,s)=>s.has(t,!0)?s.get(t):void 0)),Pt=Et(((t,e,s)=>(...i)=>e.getFactory(t).construct(s,i))),Ot=Et(((t,e,s)=>s.has(t,!1)?s.get(t):s.root.get(t))),Mt=Et(((t,e,s)=>s.has(t,!1)?s.get(t):s.root.has(t,!1)?s.root.get(t):void 0)),Bt=Et(((t,e,s)=>s===s.root?s.getAll(t,!1):s.has(t,!1)?s.getAll(t,!1).concat(s.root.getAll(t,!1)):s.root.getAll(t,!1))),Lt=Et(((t,e,s)=>jt(t,e,s))),jt=(t,e,s)=>{if(e.hasFactory(t))return e.getFactory(t).construct(s);if(Ft(t)){const i=c(t.register),n=e.getResolver(t,!1);let r;if(null==n?(i&&(r=(Dt??=K()).getResolver(t,!0)?.getFactory?.(e)),Dt.dispose()):r=n.getFactory?.(e),null!=r)return r.construct(s);throw d(17,t)}return e.getFactory(t).construct(s)},Ft=t=>!0===t?.$isInterface;let Dt;function Vt(t,e,s,i,n,r){function o(t){if(void 0!==t&&"function"!=typeof t)throw new TypeError("Function expected");return t}for(var a,h=i.kind,c="getter"===h?"get":"setter"===h?"set":"value",l=!e&&t?i.static?t:t.prototype:null,u=e||(l?Object.getOwnPropertyDescriptor(l,i.name):{}),d=!1,p=s.length-1;p>=0;p--){var f={};for(var g in i)f[g]="access"===g?{}:i[g];for(var g in i.access)f.access[g]=i.access[g];f.addInitializer=function(t){if(d)throw new TypeError("Cannot add initializers after decoration has completed");r.push(o(t||null))};var m=(0,s[p])("accessor"===h?{get:u.get,set:u.set}:u[c],f);if("accessor"===h){if(void 0===m)continue;if(null===m||"object"!=typeof m)throw new TypeError("Object expected");(a=o(m.get))&&(u.get=a),(a=o(m.set))&&(u.set=a),(a=o(m.init))&&n.unshift(a)}else(a=o(m))&&("field"===h?n.unshift(a):u[c]=a)}l&&Object.defineProperty(l,i.name,u),d=!0}n({trace:0,debug:1,info:2,warn:3,error:4,fatal:5,none:6});const Ht=ft("ILogConfig",(t=>t.instance(new zt("no-colors",3)))),qt=ft("ISink"),Ut=ft("ILogEventFactory",(t=>t.singleton(Xt))),Wt=ft("ILogger",(t=>t.singleton(te))),_t=ft("ILogScope"),Kt=n({key:B("logger-sink-handles"),define(t,e){h(e.handles,t,this.key)},getHandles(t){return a(this.key,t.constructor)}}),Qt=k({red:t=>`[31m${t}[39m`,green:t=>`[32m${t}[39m`,yellow:t=>`[33m${t}[39m`,blue:t=>`[34m${t}[39m`,magenta:t=>`[35m${t}[39m`,cyan:t=>`[36m${t}[39m`,white:t=>`[37m${t}[39m`,grey:t=>`[90m${t}[39m`});class zt{constructor(t,e){this.colorOptions=t,this.level=e}}const Gt=function(){const t={"no-colors":k({TRC:"TRC",DBG:"DBG",INF:"INF",WRN:"WRN",ERR:"ERR",FTL:"FTL",QQQ:"???"}),colors:k({TRC:Qt.grey("TRC"),DBG:Qt.grey("DBG"),INF:Qt.white("INF"),WRN:Qt.yellow("WRN"),ERR:Qt.red("ERR"),FTL:Qt.red("FTL"),QQQ:Qt.grey("???")})};return(e,s)=>e<=0?t[s].TRC:e<=1?t[s].DBG:e<=2?t[s].INF:e<=3?t[s].WRN:e<=4?t[s].ERR:e<=5?t[s].FTL:t[s].QQQ}(),Jt=(t,e)=>"no-colors"===e?t.join("."):t.map(Qt.cyan).join("."),Yt=(t,e)=>"no-colors"===e?new Date(t).toISOString():Qt.grey(new Date(t).toISOString());class Zt{constructor(t,e,s,i,n,r){this.severity=t,this.message=e,this.optionalParams=s,this.scope=i,this.colorOptions=n,this.timestamp=r}toString(){const{severity:t,message:e,scope:s,colorOptions:i,timestamp:n}=this;return 0===s.length?`${Yt(n,i)} [${Gt(t,i)}] ${e}`:`${Yt(n,i)} [${Gt(t,i)} ${Jt(s,i)}] ${e}`}getFormattedLogInfo(t=!1){const{severity:e,message:s,scope:i,colorOptions:n,timestamp:r,optionalParams:o}=this;let a=null,h="";t&&s instanceof Error?a=s:h=s;const c=0===i.length?"":` ${Jt(i,n)}`;let l=`${Yt(r,n)} [${Gt(e,n)}${c}] ${h}`;if(void 0===o||0===o.length)return null===a?[l]:[l,a];let u=0;for(;l.includes("%s");)l=l.replace("%s",String(o[u++]));return null!==a?[l,a,...o.slice(u)]:[l,...o.slice(u)]}}class Xt{constructor(){this.config=et(Ht)}createLogEvent(t,e,s,i){return new Zt(e,s,i,t.scope,this.config.colorOptions,Date.now())}}let te=(()=>{var t;let e,s,i,n,r,o,a=[];return t=class{constructor(t=et(Ht),e=et(Ut),s=et(Rt(qt)),i=et(Nt(_t))??[],n=null){let r,o,h,c,l,d;if(this.scope=(function(t,e,s){for(var i=arguments.length>2,n=0;n<e.length;n++)s=i?e[n].call(t,s):e[n].call(t)}(this,a),i),this.j=u(),this.config=t,this.f=e,this.sinks=s,null===n){this.root=this,this.parent=this,r=this.M=[],o=this.T=[],h=this.P=[],c=this.K=[],l=this.N=[],d=this.W=[];for(const t of s){const e=Kt.getHandles(t);(e?.includes(0)??1)&&r.push(t),(e?.includes(1)??1)&&o.push(t),(e?.includes(2)??1)&&h.push(t),(e?.includes(3)??1)&&c.push(t),(e?.includes(4)??1)&&l.push(t),(e?.includes(5)??1)&&d.push(t)}}else this.root=n.root,this.parent=n,r=this.M=n.M,o=this.T=n.T,h=this.P=n.P,c=this.K=n.K,l=this.N=n.N,d=this.W=n.W}trace(t,...e){this.config.level<=0&&this.G(this.M,0,t,e)}debug(t,...e){this.config.level<=1&&this.G(this.T,1,t,e)}info(t,...e){this.config.level<=2&&this.G(this.P,2,t,e)}warn(t,...e){this.config.level<=3&&this.G(this.K,3,t,e)}error(t,...e){this.config.level<=4&&this.G(this.N,4,t,e)}fatal(t,...e){this.config.level<=5&&this.G(this.W,5,t,e)}scopeTo(e){const s=this.j;let i=s[e];return void 0===i&&(i=s[e]=new t(this.config,this.f,null,this.scope.concat(e),this)),i}G(t,e,s,i){const n=c(s)?s():s,r=this.f.createLogEvent(this,e,n,i);for(let e=0,s=t.length;e<s;++e)t[e].handleEvent(r)}},(()=>{const h="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;e=[b],s=[b],i=[b],n=[b],r=[b],o=[b],Vt(t,null,e,{kind:"method",name:"trace",static:!1,private:!1,access:{has:t=>"trace"in t,get:t=>t.trace},metadata:h},null,a),Vt(t,null,s,{kind:"method",name:"debug",static:!1,private:!1,access:{has:t=>"debug"in t,get:t=>t.debug},metadata:h},null,a),Vt(t,null,i,{kind:"method",name:"info",static:!1,private:!1,access:{has:t=>"info"in t,get:t=>t.info},metadata:h},null,a),Vt(t,null,n,{kind:"method",name:"warn",static:!1,private:!1,access:{has:t=>"warn"in t,get:t=>t.warn},metadata:h},null,a),Vt(t,null,r,{kind:"method",name:"error",static:!1,private:!1,access:{has:t=>"error"in t,get:t=>t.error},metadata:h},null,a),Vt(t,null,o,{kind:"method",name:"fatal",static:!1,private:!1,access:{has:t=>"fatal"in t,get:t=>t.fatal},metadata:h},null,a),h&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:h})})(),t})();class ee{constructor(t,e){this.type=t,this.cb=e}handle(t){t instanceof this.type&&this.cb.call(null,t)}}const se=ft("IEventAggregator",(t=>t.singleton(ie)));class ie{constructor(){this.eventLookup={},this.messageHandlers=[]}publish(t,e){if(!t)throw d(18,t);if(l(t)){let s=this.eventLookup[t];if(void 0!==s){s=s.slice();let i=s.length;for(;i-- >0;)s[i](e,t)}}else{const e=this.messageHandlers.slice();let s=e.length;for(;s-- >0;)e[s].handle(t)}}subscribe(t,e){if(!t)throw d(19,t);let s,i;return l(t)?(void 0===this.eventLookup[t]&&(this.eventLookup[t]=[]),s=e,i=this.eventLookup[t]):(s=new ee(t,e),i=this.messageHandlers),i.push(s),{dispose(){const t=i.indexOf(s);-1!==t&&i.splice(t,1)}}}subscribeOnce(t,e){const s=this.subscribe(t,((t,i)=>{s.dispose(),e(t,i)}));return s}}},220:(t,e,s)=>{function i(){Symbol.metadata??=Symbol.for("Symbol.metadata")}function n(t){return"object"==typeof t&&null!==t||"function"==typeof t}s.d(e,{Gv:()=>n,OS:()=>r,b8:()=>i});const r={get:(t,e)=>e[Symbol.metadata]?.[t],define(t,e,...s){const i=e[Symbol.metadata]??=Object.create(null),n=s.length;switch(n){case 0:throw new Error("At least one key must be provided");case 1:return void(i[s[0]]=t);case 2:return void(i[s[0]]=i[s[1]]=t);default:for(let e=0;e<n;++e)i[s[e]]=t;return}},has(t,e){const s=e[Symbol.metadata];return null!=s&&t in s},delete(t,e){const s=e[Symbol.metadata];null!=s&&Reflect.deleteProperty(s,t)}}},303:(t,e,s)=>{s.d(e,{s:()=>r});var i=s(410);const n=new Map;class r extends i.OD{constructor(t,e={}){super(t,e),this.t=!1,this.i=-1,this.h=!1,this.u=-1,"Node Element HTMLElement CustomEvent CSSStyleSheet ShadowRoot MutationObserver window document customElements".split(" ").forEach((s=>this[s]=s in e?e[s]:t[s])),"fetch requestAnimationFrame cancelAnimationFrame".split(" ").forEach((s=>this[s]=s in e?e[s]:t[s]?.bind(t)??o(s))),this.flushDomRead=this.flushDomRead.bind(this),this.flushDomWrite=this.flushDomWrite.bind(this),this.domReadQueue=new i.Pq(this,this.requestDomRead.bind(this),this.cancelDomRead.bind(this)),this.domWriteQueue=new i.Pq(this,this.requestDomWrite.bind(this),this.cancelDomWrite.bind(this))}static getOrCreate(t,e={}){let s=n.get(t);return void 0===s&&n.set(t,s=new r(t,e)),s}static set(t,e){n.set(t,e)}requestDomRead(){this.t=!0,-1===this.u&&(this.u=this.requestAnimationFrame(this.flushDomWrite))}cancelDomRead(){this.t=!1,this.i>-1&&(this.clearTimeout(this.i),this.i=-1),!1===this.h&&this.u>-1&&(this.cancelAnimationFrame(this.u),this.u=-1)}flushDomRead(){this.i=-1,!0===this.t&&(this.t=!1,this.domReadQueue.flush())}requestDomWrite(){this.h=!0,-1===this.u&&(this.u=this.requestAnimationFrame(this.flushDomWrite))}cancelDomWrite(){this.h=!1,this.u>-1&&(!1===this.t||this.i>-1)&&(this.cancelAnimationFrame(this.u),this.u=-1)}flushDomWrite(){this.u=-1,!0===this.h&&(this.h=!1,this.domWriteQueue.flush()),!0===this.t&&-1===this.i&&(this.i=this.setTimeout(this.flushDomRead,0))}}const o=t=>()=>{throw new Error(`The PLATFORM did not receive a valid reference to the global function '${t}'.`)}},410:(t,e,s)=>{s.d(e,{OD:()=>c,Pq:()=>l,mE:()=>u});const i="pending",n="running",r="completed",o="canceled",a=new Map,h=t=>()=>{throw k(`AUR1005:${t}`)};class c{constructor(t,e={}){this.macroTaskRequested=!1,this.macroTaskHandle=-1,this.globalThis=t,"decodeURI decodeURIComponent encodeURI encodeURIComponent Date Reflect console".split(" ").forEach((s=>{this[s]=s in e?e[s]:t[s]})),"clearInterval clearTimeout queueMicrotask setInterval setTimeout".split(" ").forEach((s=>{this[s]=s in e?e[s]:t[s]?.bind(t)??h(s)})),this.performanceNow="performanceNow"in e?e.performanceNow:t.performance?.now?.bind(t.performance)??h("performance.now"),this.flushMacroTask=this.flushMacroTask.bind(this),this.taskQueue=new l(this,this.requestMacroTask.bind(this),this.cancelMacroTask.bind(this))}static getOrCreate(t,e={}){let s=a.get(t);return void 0===s&&a.set(t,s=new c(t,e)),s}static set(t,e){a.set(t,e)}requestMacroTask(){this.macroTaskRequested=!0,-1===this.macroTaskHandle&&(this.macroTaskHandle=this.setTimeout(this.flushMacroTask,0))}cancelMacroTask(){this.macroTaskRequested=!1,this.macroTaskHandle>-1&&(this.clearTimeout(this.macroTaskHandle),this.macroTaskHandle=-1)}flushMacroTask(){this.macroTaskHandle=-1,!0===this.macroTaskRequested&&(this.macroTaskRequested=!1,this.taskQueue.flush())}}class l{get isEmpty(){return 0===this.t&&0===this.i.length&&0===this.h.length&&0===this.u.length}get T(){return 0===this.t&&this.i.every(y)&&this.h.every(y)&&this.u.every(y)}constructor(t,e,s){this.platform=t,this.$request=e,this.$cancel=s,this.$=void 0,this.t=0,this.i=[],this.h=[],this.u=[],this.R=!1,this.A=void 0,this.P=[],this.M=0,this.U=0,this.q=0,this.I=()=>{this.R||(this.R=!0,this.U=this._(),this.$request())},this._=t.performanceNow,this.C=new f(t.console)}flush(t=this._()){if(this.R=!1,this.q=t,void 0===this.$){if(this.h.length>0&&(this.i.push(...this.h),this.h.length=0),this.u.length>0){let e=-1;for(;++e<this.u.length&&this.u[e].queueTime<=t;);this.i.push(...this.u.splice(0,e))}let e;for(;this.i.length>0;)if((e=this.i.shift()).run(),e.status===n){if(!0===e.suspend)return this.$=e,void this.I();++this.t}if(this.h.length>0&&(this.i.push(...this.h),this.h.length=0),this.u.length>0){let e=-1;for(;++e<this.u.length&&this.u[e].queueTime<=t;);this.i.push(...this.u.splice(0,e))}if((this.i.length>0||this.u.length>0||this.t>0)&&this.I(),void 0!==this.A&&this.T){const t=this.A;this.A=void 0,t.resolve()}}else this.I()}cancel(){this.R&&(this.$cancel(),this.R=!1)}async yield(){this.isEmpty||(void 0===this.A&&(this.A=b()),await this.A)}queueTask(t,e){const{delay:s,preempt:i,persistent:n,reusable:r,suspend:o}={...g,...e};if(i){if(s>0)throw C();if(n)throw S()}0===this.i.length&&this.I();const a=this._();let h;if(r){const e=this.P,c=this.M-1;c>=0?(h=e[c],e[c]=void 0,this.M=c,h.reuse(a,s,i,n,o,t)):h=new p(this.C,this,a,a+s,i,n,o,r,t)}else h=new p(this.C,this,a,a+s,i,n,o,r,t);return i?this.i[this.i.length]=h:0===s?this.h[this.h.length]=h:this.u[this.u.length]=h,h}remove(t){let e=this.i.indexOf(t);if(e>-1)this.i.splice(e,1);else if(e=this.h.indexOf(t),e>-1)this.h.splice(e,1);else{if(e=this.u.indexOf(t),!(e>-1))throw k(`Task #${t.id} could not be found`);this.u.splice(e,1)}}N(t){this.P[this.M++]=t}j(t){t.reset(this._()),t.createdTime===t.queueTime?this.h[this.h.length]=t:this.u[this.u.length]=t}F(t){if(!0===t.suspend){if(this.$!==t)throw k(`Async task completion mismatch: suspenderTask=${this.$?.id}, task=${t.id}`);this.$=void 0}else--this.t;if(void 0!==this.A&&this.T){const t=this.A;this.A=void 0,t.resolve()}this.isEmpty&&this.cancel()}}class u extends Error{constructor(t){super("Task was canceled."),this.task=t}}let d=0;class p{get result(){const t=this.O;if(void 0===t)switch(this.W){case i:{const t=this.O=b();return this.B=t.resolve,this.G=t.reject,t}case n:throw k("Trying to await task from within task will cause a deadlock.");case r:return this.O=Promise.resolve();case o:return this.O=Promise.reject(new u(this))}return t}get status(){return this.W}constructor(t,e,s,n,r,o,a,h,c){this.taskQueue=e,this.createdTime=s,this.queueTime=n,this.preempt=r,this.persistent=o,this.suspend=a,this.reusable=h,this.callback=c,this.id=++d,this.B=void 0,this.G=void 0,this.O=void 0,this.W=i,this.C=t}run(t=this.taskQueue.platform.performanceNow()){if(this.W!==i)throw k(`Cannot run task in ${this.W} state`);const{persistent:e,reusable:s,taskQueue:a,callback:h,B:c,G:l,createdTime:u}=this;let d;this.W=n;try{d=h(t-u),d instanceof Promise?d.then((t=>{this.persistent?a.j(this):(this.W=e?o:r,this.dispose()),a.F(this),void 0!==c&&c(t),!this.persistent&&s&&a.N(this)})).catch((t=>{if(this.persistent||this.dispose(),a.F(this),void 0===l)throw t;l(t)})):(this.persistent?a.j(this):(this.W=e?o:r,this.dispose()),void 0!==c&&c(d),!this.persistent&&s&&a.N(this))}catch(t){if(this.persistent||this.dispose(),void 0===l)throw t;l(t)}}cancel(){if(this.W===i){const t=this.taskQueue,e=this.reusable,s=this.G;return t.remove(this),t.isEmpty&&t.cancel(),this.W=o,this.dispose(),e&&t.N(this),void 0!==s&&s(new u(this)),!0}return!(this.W!==n||!this.persistent||(this.persistent=!1,0))}reset(t){const e=this.queueTime-this.createdTime;this.createdTime=t,this.queueTime=t+e,this.W=i,this.B=void 0,this.G=void 0,this.O=void 0}reuse(t,e,s,n,r,o){this.createdTime=t,this.queueTime=t+e,this.preempt=s,this.persistent=n,this.suspend=r,this.callback=o,this.W=i}dispose(){this.callback=void 0,this.B=void 0,this.G=void 0,this.O=void 0}}class f{constructor(t){this.console=t,this.enabled=!1,this.depth=0}enter(t,e){this.log(`${"  ".repeat(this.depth++)}> `,t,e)}leave(t,e){this.log(`${"  ".repeat(--this.depth)}< `,t,e)}trace(t,e){this.log(`${"  ".repeat(this.depth)}- `,t,e)}log(t,e,s){if(e instanceof l){const i=`processing=${e.i.length} pending=${e.h.length} delayed=${e.u.length} flushReq=${e.R} susTask=${!!e.$}`;this.console.log(`${t}[Q.${s}] ${i}`)}else{const i=e.id,n=Math.round(10*e.createdTime)/10,r=Math.round(10*e.queueTime)/10,o=e.preempt,a=e.reusable,h=e.persistent,c=e.suspend,l=`id=${i} created=${n} queue=${r} preempt=${o} persistent=${h} reusable=${a} status=${e.W} suspend=${c}`;this.console.log(`${t}[T.${s}] ${l}`)}}}const g={delay:0,preempt:!1,persistent:!1,reusable:!0,suspend:!1};let m,v;const w=(t,e)=>{m=t,v=e},b=()=>{const t=new Promise(w);return t.resolve=m,t.reject=v,t},y=t=>t.persistent,C=()=>k("AUR1006"),S=()=>k("AUR1007"),k=t=>new Error(t)},273:(t,e,s)=>{s.d(e,{NMh:()=>vi,KIi:()=>Ba,Zmt:()=>Ns,xIk:()=>ho,I6R:()=>Ei,K94:()=>Na,DEw:()=>Pa,MH3:()=>Bo,YFW:()=>la,OAD:()=>Kn,PyP:()=>ca,w3g:()=>ta,r_:()=>bi,mYM:()=>ha,yrA:()=>Tl,EMX:()=>da,_CO:()=>So});var i=s(529),n=s(452),r=s(220);const o=Object,a=o.prototype.hasOwnProperty,h=Reflect.defineProperty,c=t=>new Error(t),l=t=>"function"==typeof t,u=t=>t instanceof Array,d=t=>t instanceof Set,p=t=>t instanceof Map,f=o.is;function g(t,e,s){return h(t,e,{enumerable:!1,configurable:!0,writable:!0,value:s}),s}function m(t,e,s){e in t||g(t,e,s)}const v=Object.assign,w=Object.freeze,b=String,y=n.DI.createInterface,C=r.OS.get,S=r.OS.define,k=n.DI.createInterface("ICoercionConfiguration"),T=w({None:0,Observer:1,Node:2,Layout:4});function x(t=0){const e=Array(t);let s=0;for(;s<t;)e[s]=s++;return e.deletedIndices=[],e.deletedItems=[],e.isIndexMap=!0,e}new Map;const I=(()=>{function t(){return g(this,"subs",new A)}function e(t){return this.subs.add(t)}function s(t){return this.subs.remove(t)}const i=new WeakSet;function n(n){if(i.has(n))return;i.add(n);const r=n.prototype;h(r,"subs",{get:t}),m(r,"subscribe",e),m(r,"unsubscribe",s)}return function(t){return null==t?n:n(t)}})();class A{constructor(){this.count=0,this.t=[]}add(t){return!this.t.includes(t)&&(this.t[this.t.length]=t,++this.count,!0)}remove(t){const e=this.t.indexOf(t);return-1!==e&&(this.t.splice(e,1),--this.count,!0)}notify(t,e){const s=this.t.slice(0),i=s.length;let n=0;for(;n<i;++n)s[n].handleChange(t,e)}notifyCollection(t,e){const s=this.t.slice(0),i=s.length;let n=0;for(;n<i;++n)s[n].handleCollectionChange(t,e)}}const $=(t,...e)=>new Error(`AUR${b(t).padStart(4,"0")}:${e.map(b)}`);class E{constructor(t){this.owner=t,this.type=1,this.v=(this.o=t.collection).length}getValue(){return this.o.length}setValue(t){t!==this.v&&(Number.isNaN(t)||(this.o.splice(t),this.v=this.o.length))}handleCollectionChange(t,e){const s=this.v,i=this.o.length;(this.v=i)!==s&&this.subs.notify(this.v,s)}}class R{constructor(t){this.owner=t,this.type=1,this.v=(this.o=t.collection).size}getValue(){return this.o.size}setValue(){throw $(220)}handleCollectionChange(t,e){const s=this.v,i=this.o.size;(this.v=i)!==s&&this.subs.notify(this.v,s)}}function N(t){const e=t.prototype;m(e,"subscribe",P),m(e,"unsubscribe",O),I(t)}function P(t){this.subs.add(t)&&1===this.subs.count&&this.owner.subscribe(this)}function O(t){this.subs.remove(t)&&0===this.subs.count&&this.owner.subscribe(this)}N(E),N(R);const M=Symbol.for("__au_arr_obs__"),B=Array[M]??g(Array,M,new WeakMap);function L(t,e){return t===e?0:(t=null===t?"null":t.toString())<(e=null===e?"null":e.toString())?-1:1}function j(t,e){return void 0===t?void 0===e?0:1:void 0===e?-1:0}function F(t,e,s,i,n){let r,o,a,h,c,l,u;for(l=s+1;l<i;l++){for(r=t[l],o=e[l],u=l-1;u>=s&&(a=t[u],h=e[u],c=n(a,r),c>0);u--)t[u+1]=a,e[u+1]=h;t[u+1]=r,e[u+1]=o}}function D(t,e,s,i,n){let r,o,a,h,c,l,u,d,p,f,g,m,v,w,b,y,C,S,k,T=0,x=0;for(;;){if(i-s<=10)return void F(t,e,s,i,n);T=s+(i-s>>1),r=t[s],h=e[s],o=t[i-1],c=e[i-1],a=t[T],l=e[T],u=n(r,o),u>0&&(f=r,g=h,r=o,h=c,o=f,c=g),d=n(r,a),d>=0?(f=r,g=h,r=a,h=l,a=o,l=c,o=f,c=g):(p=n(o,a),p>0&&(f=o,g=c,o=a,c=l,a=f,l=g)),t[s]=r,e[s]=h,t[i-1]=a,e[i-1]=l,m=o,v=c,w=s+1,b=i-1,t[T]=t[w],e[T]=e[w],t[w]=m,e[w]=v;t:for(x=w+1;x<b;x++)if(y=t[x],C=e[x],S=n(y,m),S<0)t[x]=t[w],e[x]=e[w],t[w]=y,e[w]=C,w++;else if(S>0){do{if(b--,b==x)break t;k=t[b],S=n(k,m)}while(S>0);t[x]=t[b],e[x]=e[b],t[b]=y,e[b]=C,S<0&&(y=t[x],C=e[x],t[x]=t[w],e[x]=e[w],t[w]=y,e[w]=C,w++)}i-b<w-s?(D(t,e,b,i,n),i=w):(D(t,e,s,w,n),s=b)}}const V=Array.prototype,H=["push","unshift","pop","shift","splice","reverse","sort"];let q,U,W=!1;const _="__au_arr_on__";class K{constructor(t){this.type=1,W||(W=!0,function(){if(void 0===q&&function(){const t=V.push,e=V.unshift,s=V.pop,i=V.shift,n=V.splice,r=V.reverse,o=V.sort;U={push:t,unshift:e,pop:s,shift:i,splice:n,reverse:r,sort:o},q={push:function(...e){const s=B.get(this);if(void 0===s)return t.apply(this,e);const i=this.length,n=e.length;if(0===n)return i;this.length=s.indexMap.length=i+n;let r=i;for(;r<this.length;)this[r]=e[r-i],s.indexMap[r]=-2,r++;return s.notify(),this.length},unshift:function(...t){const s=B.get(this);if(void 0===s)return e.apply(this,t);const i=t.length,n=new Array(i);let r=0;for(;r<i;)n[r++]=-2;e.apply(s.indexMap,n);const o=e.apply(this,t);return s.notify(),o},pop:function(){const t=B.get(this);if(void 0===t)return s.call(this);const e=t.indexMap,i=s.call(this),n=e.length-1;return e[n]>-1&&(e.deletedIndices.push(e[n]),e.deletedItems.push(i)),s.call(e),t.notify(),i},shift:function(){const t=B.get(this);if(void 0===t)return i.call(this);const e=t.indexMap,s=i.call(this);return e[0]>-1&&(e.deletedIndices.push(e[0]),e.deletedItems.push(s)),i.call(e),t.notify(),s},splice:function(...t){const e=t[0],s=t[1],i=B.get(this);if(void 0===i)return n.apply(this,t);const r=this.length,o=0|e,a=o<0?Math.max(r+o,0):Math.min(o,r),h=i.indexMap,c=t.length,l=0===c?0:1===c?r-a:s;let u=a;if(l>0){const t=u+l;for(;u<t;)h[u]>-1&&(h.deletedIndices.push(h[u]),h.deletedItems.push(this[u])),u++}if(u=0,c>2){const t=c-2,i=new Array(t);for(;u<t;)i[u++]=-2;n.call(h,e,s,...i)}else n.apply(h,t);const d=n.apply(this,t);return(l>0||u>0)&&i.notify(),d},reverse:function(){const t=B.get(this);if(void 0===t)return r.call(this),this;const e=this.length,s=e/2|0;let i=0;for(;i!==s;){const s=e-i-1,n=this[i],r=t.indexMap[i],o=this[s],a=t.indexMap[s];this[i]=o,t.indexMap[i]=a,this[s]=n,t.indexMap[s]=r,i++}return t.notify(),this},sort:function(t){const e=B.get(this);if(void 0===e)return o.call(this,t),this;let s=this.length;if(s<2)return this;D(this,e.indexMap,0,s,j);let i=0;for(;i<s&&void 0!==this[i];)i++;void 0!==t&&l(t)||(t=L),D(this,e.indexMap,0,i,t);let n=!1;for(i=0,s=e.indexMap.length;s>i;++i)if(e.indexMap[i]!==i){n=!0;break}return n&&e.notify(),this}};for(const t of H)h(q[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1})}(),!C(_,Array)){S(!0,Array,_);for(const t of H)!0!==V[t].observing&&g(V,t,q[t])}}()),this.indexObservers={},this.collection=t,this.indexMap=x(t.length),this.lenObs=void 0,B.set(t,this)}notify(){this.subs;const t=this.indexMap;const e=this.collection,s=e.length;this.indexMap=x(s),this.subs.notifyCollection(e,t)}getLengthObserver(){return this.lenObs??=new E(this)}getIndexObserver(t){return this.indexObservers[t]??=new Q(this,t)}}class Q{constructor(t,e){this.owner=t,this.index=e,this.doNotCache=!0,this.value=this.getValue()}getValue(){return this.owner.collection[this.index]}setValue(t){if(t===this.getValue())return;const e=this.owner,s=this.index,i=e.indexMap;i[s]>-1&&i.deletedIndices.push(i[s]),i[s]=-2,e.collection[s]=t,e.notify()}handleCollectionChange(t,e){const s=this.index;if(e[s]===s)return;const i=this.value,n=this.value=this.getValue();i!==n&&this.subs.notify(n,i)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&this.owner.subscribe(this)}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.owner.unsubscribe(this)}}function z(t){let e=B.get(t);return void 0===e&&(e=new K(t)),e}I(K),I(Q);const G=Symbol.for("__au_set_obs__"),J=Set[G]??g(Set,G,new WeakMap),Y=Set.prototype,Z=Y.add,X=Y.clear,tt=Y.delete,et=["add","clear","delete"],st={add:function(t){const e=J.get(this);if(void 0===e)return Z.call(this,t),this;const s=this.size;return Z.call(this,t),this.size===s||(e.indexMap[s]=-2,e.notify()),this},clear:function(){const t=J.get(this);if(void 0===t)return X.call(this);if(this.size>0){const e=t.indexMap;let s=0;for(const t of this.keys())e[s]>-1&&(e.deletedIndices.push(e[s]),e.deletedItems.push(t)),s++;X.call(this),e.length=0,t.notify()}},delete:function(t){const e=J.get(this);if(void 0===e)return tt.call(this,t);if(0===this.size)return!1;let s=0;const i=e.indexMap;for(const n of this.keys()){if(n===t){i[s]>-1&&(i.deletedIndices.push(i[s]),i.deletedItems.push(n)),i.splice(s,1);const r=tt.call(this,t);return!0===r&&e.notify(),r}s++}return!1}},it={writable:!0,enumerable:!1,configurable:!0};for(const t of et)h(st[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let nt=!1;const rt="__au_set_on__";class ot{constructor(t){this.type=1,nt||(nt=!0,function(){if(!C(rt,Set)){S(!0,Set,rt);for(const t of et)!0!==Y[t].observing&&h(Y,t,{...it,value:st[t]})}}()),this.collection=t,this.indexMap=x(t.size),this.lenObs=void 0,J.set(t,this)}notify(){this.subs;const t=this.indexMap;const e=this.collection,s=e.size;this.indexMap=x(s),this.subs.notifyCollection(e,t)}getLengthObserver(){return this.lenObs??=new R(this)}}function at(t){let e=J.get(t);return void 0===e&&(e=new ot(t)),e}I(ot);const ht=Symbol.for("__au_map_obs__"),ct=Map[ht]??g(Map,ht,new WeakMap),lt=Map.prototype,ut=lt.set,dt=lt.clear,pt=lt.delete,ft=["set","clear","delete"],gt={set:function(t,e){const s=ct.get(this);if(void 0===s)return ut.call(this,t,e),this;const i=this.get(t),n=this.size;if(ut.call(this,t,e),this.size===n){let e=0;for(const n of this.entries()){if(n[0]===t)return n[1]!==i&&(s.indexMap.deletedIndices.push(s.indexMap[e]),s.indexMap.deletedItems.push(n),s.indexMap[e]=-2,s.notify()),this;e++}return this}return s.indexMap[n]=-2,s.notify(),this},clear:function(){const t=ct.get(this);if(void 0===t)return dt.call(this);if(this.size>0){const e=t.indexMap;let s=0;for(const t of this.keys())e[s]>-1&&(e.deletedIndices.push(e[s]),e.deletedItems.push(t)),s++;dt.call(this),e.length=0,t.notify()}},delete:function(t){const e=ct.get(this);if(void 0===e)return pt.call(this,t);if(0===this.size)return!1;let s=0;const i=e.indexMap;for(const n of this.keys()){if(n===t){i[s]>-1&&(i.deletedIndices.push(i[s]),i.deletedItems.push(n)),i.splice(s,1);const r=pt.call(this,t);return!0===r&&e.notify(),r}++s}return!1}},mt={writable:!0,enumerable:!1,configurable:!0};for(const t of ft)h(gt[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let vt=!1;const wt="__au_map_on__";class bt{constructor(t){this.type=1,vt||(vt=!0,function(){if(!C(wt,Map)){S(!0,Map,wt);for(const t of ft)!0!==lt[t].observing&&h(lt,t,{...mt,value:gt[t]})}}()),this.collection=t,this.indexMap=x(t.size),this.lenObs=void 0,ct.set(t,this)}notify(){const t=this.subs,e=this.indexMap;const s=this.collection,i=s.size;this.indexMap=x(i),t.notifyCollection(s,e)}getLengthObserver(){return this.lenObs??=new R(this)}}function yt(t){let e=ct.get(t);return void 0===e&&(e=new bt(t)),e}I(bt);class Ct{constructor(t){this.version=0,this.count=0,this.o=new Map,this.b=t}add(t){this.o.has(t)||(t.subscribe(this.b),++this.count),this.o.set(t,this.version)}clear(){this.o.forEach(kt,this),this.count=this.o.size}clearAll(){this.o.forEach(St,this),this.o.clear(),this.count=0}}function St(t,e){e.unsubscribe(this.b)}function kt(t,e){this.version!==t&&(e.unsubscribe(this.b),this.o.delete(e))}const Tt=(()=>{function t(){return g(this,"obs",new Ct(this))}function e(t,e){this.obs.add(this.oL.getObserver(t,e))}function s(t){let e;if(u(t))e=z(t);else if(d(t))e=at(t);else{if(!p(t))throw $(210,t);e=yt(t)}this.obs.add(e)}function i(t){this.obs.add(t)}function n(){throw $(99,"handleChange")}function r(){throw $(99,"handleCollectionChange")}return function(o,a){const c=o.prototype;return m(c,"observe",e),m(c,"observeCollection",s),m(c,"subscribeTo",i),h(c,"obs",{get:t}),m(c,"handleChange",n),m(c,"handleCollectionChange",r),o}})();function xt(t,e){return null==t?Tt:Tt(t,e)}class It{constructor(t,e){void 0!==t&&(this[t]=e)}}class At{constructor(t,e,s,i){this.parent=t,this.bindingContext=e,this.overrideContext=s,this.isBoundary=i}static getContext(t,e,s){if(null==t)throw $(203);let i=t.overrideContext,n=t;if(s>0){for(;s>0;)if(s--,n=n.parent,null==n)return;return i=n.overrideContext,e in i?i:n.bindingContext}for(;null!=n&&!n.isBoundary&&!(e in n.overrideContext)&&!(e in n.bindingContext);)n=n.parent;return null==n?t.bindingContext:(i=n.overrideContext,e in i?i:n.bindingContext)}static create(t,e,s){if(null==t)throw $(204);return new At(null,t,e??new $t,s??!1)}static fromParent(t,e){if(null==t)throw $(203);return new At(t,e,new $t,!1)}}class $t{}let Et=null;const Rt=[];let Nt=!1;function Pt(){return Et}function Ot(t){if(null==t)throw $(206);if(null==Et)return Et=t,Rt[0]=Et,void(Nt=!0);if(Et===t)throw $(207);Rt.push(t),Et=t,Nt=!0}function Mt(t){if(null==t)throw $(208);if(Et!==t)throw $(209);Rt.pop(),Et=Rt.length>0?Rt[Rt.length-1]:null,Nt=null!=Et}const Bt=w({get current(){return Et},get connecting(){return Nt},enter:Ot,exit:Mt,pause:function(){Nt=!1},resume:function(){Nt=!0}}),Lt=Reflect.get,jt=Object.prototype.toString,Ft=new WeakMap,Dt="__au_nw__";function Vt(t){switch(jt.call(t)){case"[object Object]":return!0!==t.constructor[Dt];case"[object Array]":case"[object Map]":case"[object Set]":return!0;default:return!1}}const Ht="__raw__";function qt(t){return Vt(t)?Ut(t):t}function Ut(t){return Ft.get(t)??function(t){const e=u(t)?zt:p(t)||d(t)?ve:Qt,s=new Proxy(t,e);return Ft.set(t,s),Ft.set(s,s),s}(t)}function Wt(t){return t[Ht]??t}function _t(t){return Vt(t)&&t[Ht]||t}function Kt(t,e){return"constructor"===e||"__proto__"===e||"$observers"===e||e===Symbol.toPrimitive||e===Symbol.toStringTag||!0===t.constructor[`__au_nw_${b(e)}__`]}const Qt={get(t,e,s){if(e===Ht)return t;const i=Pt();return!Nt||Kt(t,e)||null==i?Lt(t,e,s):(i.observe(t,e),qt(Lt(t,e,s)))}},zt={get(t,e,s){if(e===Ht)return t;if(!Nt||Kt(t,e)||null==Et)return Lt(t,e,s);switch(e){case"length":return Et.observe(t,"length"),t.length;case"map":return Gt;case"includes":return Zt;case"indexOf":return Xt;case"lastIndexOf":return te;case"every":return Jt;case"filter":return Yt;case"find":return se;case"findIndex":return ee;case"flat":return ie;case"flatMap":return ne;case"join":return re;case"push":return ae;case"pop":return oe;case"reduce":return ge;case"reduceRight":return me;case"reverse":return ue;case"shift":return he;case"unshift":return ce;case"slice":return fe;case"splice":return le;case"some":return de;case"sort":return pe;case"keys":return xe;case"values":case Symbol.iterator:return Ie;case"entries":return Ae}return Et.observe(t,e),qt(Lt(t,e,s))},ownKeys:t=>(Pt()?.observe(t,"length"),Reflect.ownKeys(t))};function Gt(t,e){const s=Wt(this),i=s.map(((s,i)=>_t(t.call(e,qt(s),i,this))));return $e(Et,s),qt(i)}function Jt(t,e){const s=Wt(this),i=s.every(((s,i)=>t.call(e,qt(s),i,this)));return $e(Et,s),i}function Yt(t,e){const s=Wt(this),i=s.filter(((s,i)=>_t(t.call(e,qt(s),i,this))));return $e(Et,s),qt(i)}function Zt(t){const e=Wt(this),s=e.includes(_t(t));return $e(Et,e),s}function Xt(t){const e=Wt(this),s=e.indexOf(_t(t));return $e(Et,e),s}function te(t){const e=Wt(this),s=e.lastIndexOf(_t(t));return $e(Et,e),s}function ee(t,e){const s=Wt(this),i=s.findIndex(((s,i)=>_t(t.call(e,qt(s),i,this))));return $e(Et,s),i}function se(t,e){const s=Wt(this),i=s.find(((e,s)=>t(qt(e),s,this)),e);return $e(Et,s),qt(i)}function ie(){const t=Wt(this);return $e(Et,t),qt(t.flat())}function ne(t,e){const s=Wt(this);return $e(Et,s),Ut(s.flatMap(((s,i)=>qt(t.call(e,qt(s),i,this)))))}function re(t){const e=Wt(this);return $e(Et,e),e.join(t)}function oe(){return qt(Wt(this).pop())}function ae(...t){return Wt(this).push(...t)}function he(){return qt(Wt(this).shift())}function ce(...t){return Wt(this).unshift(...t)}function le(...t){return qt(Wt(this).splice(...t))}function ue(...t){const e=Wt(this),s=e.reverse();return $e(Et,e),qt(s)}function de(t,e){const s=Wt(this),i=s.some(((s,i)=>_t(t.call(e,qt(s),i,this))));return $e(Et,s),i}function pe(t){const e=Wt(this),s=e.sort(t);return $e(Et,e),qt(s)}function fe(t,e){const s=Wt(this);return $e(Et,s),Ut(s.slice(t,e))}function ge(t,e){const s=Wt(this),i=s.reduce(((e,s,i)=>t(e,qt(s),i,this)),e);return $e(Et,s),qt(i)}function me(t,e){const s=Wt(this),i=s.reduceRight(((e,s,i)=>t(e,qt(s),i,this)),e);return $e(Et,s),qt(i)}const ve={get(t,e,s){if(e===Ht)return t;const i=Pt();if(!Nt||Kt(t,e)||null==i)return Lt(t,e,s);switch(e){case"size":return i.observe(t,"size"),t.size;case"clear":return ke;case"delete":return Te;case"forEach":return we;case"add":if(d(t))return Se;break;case"get":if(p(t))return ye;break;case"set":if(p(t))return Ce;break;case"has":return be;case"keys":return xe;case"values":return Ie;case"entries":return Ae;case Symbol.iterator:return p(t)?Ae:Ie}return qt(Lt(t,e,s))}};function we(t,e){const s=Wt(this);return $e(Et,s),s.forEach(((s,i)=>{t.call(e,qt(s),qt(i),this)}))}function be(t){const e=Wt(this);return $e(Et,e),e.has(_t(t))}function ye(t){const e=Wt(this);return $e(Et,e),qt(e.get(_t(t)))}function Ce(t,e){return qt(Wt(this).set(_t(t),_t(e)))}function Se(t){return qt(Wt(this).add(_t(t)))}function ke(){return qt(Wt(this).clear())}function Te(t){return qt(Wt(this).delete(_t(t)))}function xe(){const t=Wt(this);$e(Et,t);const e=t.keys();return{next(){const t=e.next(),s=t.value,i=t.done;return i?{value:void 0,done:i}:{value:qt(s),done:i}},[Symbol.iterator](){return this}}}function Ie(){const t=Wt(this);$e(Et,t);const e=t.values();return{next(){const t=e.next(),s=t.value,i=t.done;return i?{value:void 0,done:i}:{value:qt(s),done:i}},[Symbol.iterator](){return this}}}function Ae(){const t=Wt(this);$e(Et,t);const e=t.entries();return{next(){const t=e.next(),s=t.value,i=t.done;return i?{value:void 0,done:i}:{value:[qt(s[0]),qt(s[1])],done:i}},[Symbol.iterator](){return this}}}const $e=(t,e)=>t?.observeCollection(e),Ee=w({getProxy:Ut,getRaw:Wt,wrap:qt,unwrap:_t,rawKey:Ht});class Re{constructor(t,e,s,i,n){this.type=1,this.v=void 0,this.ir=!1,this.D=!1,this.cb=void 0,this.i=void 0,this.u=void 0,this.o=t,this.h=n?qt(t):t,this.$get=e,this.$set=s,this.oL=i}init(t){this.v=t,this.D=!1}getValue(){return 0===this.subs.count?this.$get.call(this.o,this.o,this):(this.D&&(this.compute(),this.D=!1),this.v)}setValue(t){if(!l(this.$set))throw $(221);void 0!==this.i&&(t=this.i.call(null,t,this.u)),f(t,this.v)||(this.ir=!0,this.$set.call(this.o,t),this.ir=!1,this.run())}useCoercer(t,e){return this.i=t,this.u=e,!0}useCallback(t){return this.cb=t,!0}handleChange(){this.D=!0,this.subs.count>0&&this.run()}handleCollectionChange(){this.D=!0,this.subs.count>0&&this.run()}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.compute(),this.D=!1)}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&(this.D=!0,this.obs.clearAll())}run(){if(this.ir)return;const t=this.v,e=this.compute();this.D=!1,f(e,t)||(this.cb?.(e,t),this.subs.notify(this.v,t))}compute(){this.ir=!0,this.obs.version++;try{return Ot(this),this.v=_t(this.$get.call(this.h,this.h,this))}finally{this.obs.clear(),this.ir=!1,Mt(this)}}}xt(Re,null),I(Re);const Ne=y("IDirtyChecker",void 0),Pe={timeoutsPerCheck:25,disabled:!1,throw:!1,resetToDefault(){this.timeoutsPerCheck=6,this.disabled=!1,this.throw=!1}};class Oe{constructor(t,e,s){this.obj=e,this.key=s,this.type=0,this.ov=void 0,this.A=t}getValue(){return this.obj[this.key]}setValue(t){throw c(`Trying to set value for property ${b(this.key)} in dirty checker`)}isDirty(){return this.ov!==this.obj[this.key]}flush(){const t=this.ov,e=this.getValue();this.ov=e,this.subs.notify(e,t)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.ov=this.obj[this.key],this.A.addProperty(this))}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.A.removeProperty(this)}}class Me{get doNotCache(){return!0}constructor(t,e){this.type=0,this.o=t,this.k=e}getValue(){return this.o[this.k]}setValue(){}subscribe(){}unsubscribe(){}}class Be{constructor(){this.type=0}getValue(t,e){return t[e]}setValue(t,e,s){e[s]=t}}class Le{constructor(t,e){this.type=1,this.v=void 0,this.iO=!1,this.cb=void 0,this.i=void 0,this.u=void 0,this.o=t,this.k=e}getValue(){return this.v}setValue(t){if(void 0!==this.i&&(t=this.i.call(void 0,t,this.u)),this.iO){if(f(t,this.v))return;je=this.v,this.v=t,this.cb?.(t,je),this.subs.notify(t,je)}else this.v=this.o[this.k]=t,this.cb?.(t,je)}useCallback(t){return this.cb=t,this.start(),!0}useCoercer(t,e){return this.i=t,this.u=e,this.start(),!0}subscribe(t){!1===this.iO&&this.start(),this.subs.add(t)}start(){return!1===this.iO&&(this.iO=!0,this.v=this.o[this.k],h(this.o,this.k,{enumerable:!0,configurable:!0,get:v((()=>this.getValue()),{getObserver:()=>this}),set:t=>{this.setValue(t)}})),this}stop(){return this.iO&&(h(this.o,this.k,{enumerable:!0,configurable:!0,writable:!0,value:this.v}),this.iO=!1),this}}let je;I(Le);const Fe=new Be,De=y("IObserverLocator",(t=>t.singleton(Ue))),Ve=y("INodeObserverLocator",(t=>t.cachedCallback((t=>new He))));class He{handles(){return!1}getObserver(){return Fe}getAccessor(){return Fe}}const qe=y("IComputedObserverLocator",(t=>t.singleton(class{getObserver(t,e,s,i){const n=new Re(t,s.get,s.set,i,!0);return h(t,e,{enumerable:s.enumerable,configurable:!0,get:v((()=>n.getValue()),{getObserver:()=>n}),set:t=>{n.setValue(t)}}),n}})));class Ue{constructor(){this.R=[],this.A=(0,n.hd)(Ne),this._=(0,n.hd)(Ve),this.P=(0,n.hd)(qe)}addAdapter(t){this.R.push(t)}getObserver(t,e){if(null==t)throw $(199,e);if(!(t=>t instanceof o)(t))return new Me(t,l(e)?"":e);if(l(e))return new Re(t,e,void 0,this,!0);const s=Ke(t);let i=s[e];return void 0===i&&(i=this.createObserver(t,e),i.doNotCache||(s[e]=i)),i}getAccessor(t,e){const s=t.$observers?.[e];return void 0!==s?s:this._.handles(t,e,this)?this._.getAccessor(t,e,this):Fe}getArrayObserver(t){return z(t)}getMapObserver(t){return yt(t)}getSetObserver(t){return at(t)}createObserver(t,e){if(this._.handles(t,e,this))return this._.getObserver(t,e,this);switch(e){case"length":if(u(t))return z(t).getLengthObserver();break;case"size":if(p(t))return yt(t).getLengthObserver();if(d(t))return at(t).getLengthObserver();break;default:if(u(t)&&(0,n.Zn)(e))return z(t).getIndexObserver(Number(e))}let s=_e(t,e);if(void 0===s){let i=We(t);for(;null!==i&&(s=_e(i,e),void 0===s);)i=We(i)}if(void 0!==s&&!a.call(s,"value")){let i=this.M(t,e,s);return null==i&&(i=(s.get?.getObserver)?.(t)),null==i?s.configurable?this.P.getObserver(t,e,s,this):this.A.createProperty(t,e):i}return new Le(t,e)}M(t,e,s){if(this.R.length>0)for(const i of this.R){const n=i.getObserver(t,e,s,this);if(null!=n)return n}return null}}const We=Object.getPrototypeOf,_e=Object.getOwnPropertyDescriptor,Ke=t=>{let e=t.$observers;return void 0===e&&h(t,"$observers",{enumerable:!1,value:e=o.create(null)}),e};xt(class{constructor(t,e){this.oL=t,this.fn=e,this.maxRunCount=10,this.queued=!1,this.running=!1,this.runCount=0,this.stopped=!1}handleChange(){this.queued=!0,this.run()}handleCollectionChange(){this.queued=!0,this.run()}run(){if(this.stopped)throw $(225);if(!this.running){++this.runCount,this.running=!0,this.queued=!1,++this.obs.version;try{Ot(this),this.fn(this)}finally{this.obs.clear(),this.running=!1,Mt(this)}if(this.queued){if(this.runCount>this.maxRunCount)throw this.runCount=0,$(226);this.run()}else this.runCount=0}}stop(){this.stopped=!0,this.obs.clearAll()}},null);var Qe=s(303),ze=s(410);const Ge=Object,Je=String,Ye=Ge.prototype,Ze=()=>Ge.create(null),Xe=Ye.hasOwnProperty,ts=Ge.freeze,es=Ge.assign,ss=Ge.getOwnPropertyNames,is=Ge.keys,ns=Ze(),rs=(t,e,s)=>{if(!0===ns[e])return!0;if(!ls(e))return!1;const i=e.slice(0,5);return ns[e]="aria-"===i||"data-"===i||s.isStandardSvgAttribute(t,e)},os=t=>t instanceof Promise,as=t=>t instanceof Array,hs=t=>"function"==typeof t,cs=t=>t instanceof Ge,ls=t=>"string"==typeof t,us=t=>{throw t},ds=Ge.is,ps=Reflect.defineProperty,fs=(t,e,s)=>(ps(t,e,{enumerable:!1,configurable:!0,writable:!0,value:s}),s),gs=(t,e,s)=>t.addSignalListener(e,s),ms=(t,e,s)=>t.removeSignalListener(e,s),vs="Interpolation",ws="IsIterator",bs="IsFunction",ys="IsProperty",Cs="pending",Ss="running",ks=T.Observer,Ts=T.Node,xs=T.Layout,Is=(t,...e)=>new Error(`AUR${Je(t).padStart(4,"0")}:${e.map(Je)}`),{astAssign:As,astEvaluate:$s,astBind:Es,astUnbind:Rs}=(()=>{const t="AccessThis",e="AccessBoundary",s="AccessGlobal",r="AccessScope",o="ArrayLiteral",a="ObjectLiteral",h="PrimitiveLiteral",c="Template",l="Unary",u="CallScope",d="CallMember",p="CallFunction",f="CallGlobal",g="AccessMember",m="AccessKeyed",v="TaggedTemplate",w="Binary",b="Conditional",y="Assign",C="ArrowFunction",S="ValueConverter",k="BindingBehavior",T="ArrayBindingPattern",x="ObjectBindingPattern",I="BindingIdentifier",A="ForOfStatement",$="Interpolation",E="ArrayDestructuring",R="ObjectDestructuring",N="DestructuringAssignmentLeaf",P="Custom",O=At.getContext;function M(i,n,V,H){switch(i.$kind){case t:{let t=n.overrideContext,e=n,s=i.ancestor;for(;s--&&t;)e=e.parent,t=e?.overrideContext??null;return s<1&&e?e.bindingContext:void 0}case e:{let t=n;for(;null!=t&&!t.isBoundary;)t=t.parent;return t?t.bindingContext:void 0}case r:{const t=O(n,i.name,i.ancestor);null!==H&&H.observe(t,i.name);const e=t[i.name];if(null==e&&"$host"===i.name)throw Is(105);return V?.strict?V?.boundFn&&hs(e)?e.bind(t):e:null==e?"":V?.boundFn&&hs(e)?e.bind(t):e}case s:return globalThis[i.name];case f:{const t=globalThis[i.name];if(hs(t))return t(...i.args.map((t=>M(t,n,V,H))));if(!V?.strictFnCall&&null==t)return;throw Is(107)}case o:return i.elements.map((t=>M(t,n,V,H)));case a:{const t={};for(let e=0;e<i.keys.length;++e)t[i.keys[e]]=M(i.values[e],n,V,H);return t}case h:return i.value;case c:{let t=i.cooked[0];for(let e=0;e<i.expressions.length;++e)t+=String(M(i.expressions[e],n,V,H)),t+=i.cooked[e+1];return t}case l:switch(i.operation){case"void":return void M(i.expression,n,V,H);case"typeof":return typeof M(i.expression,n,V,H);case"!":return!M(i.expression,n,V,H);case"-":return-M(i.expression,n,V,H);case"+":return+M(i.expression,n,V,H);default:throw Is(109,i.operation)}case u:{const t=i.args.map((t=>M(t,n,V,H))),e=O(n,i.name,i.ancestor),s=L(V?.strictFnCall,e,i.name);return s?s.apply(e,t):void 0}case d:{const t=M(i.object,n,V,H),e=i.args.map((t=>M(t,n,V,H))),s=L(V?.strictFnCall,t,i.name);let r;return s&&(r=s.apply(t,e),as(t)&&D.includes(i.name)&&H?.observeCollection(t)),r}case p:{const t=M(i.func,n,V,H);if(hs(t))return t(...i.args.map((t=>M(t,n,V,H))));if(!V?.strictFnCall&&null==t)return;throw Is(107)}case C:{const t=(...t)=>{const e=i.args,s=i.rest,r=e.length-1,o=e.reduce(((e,i,n)=>(e[i.name]=s&&n===r?t.slice(n):t[n],e)),{}),a=At.fromParent(n,o);return M(i.body,a,V,H)};return t}case g:{const t=M(i.object,n,V,H);let e;if(V?.strict){if(null==t)return;return null===H||i.accessGlobal||H.observe(t,i.name),e=t[i.name],V?.boundFn&&hs(e)?e.bind(t):e}return null!==H&&cs(t)&&!i.accessGlobal&&H.observe(t,i.name),t?(e=t[i.name],V?.boundFn&&hs(e)?e.bind(t):e):""}case m:{const t=M(i.object,n,V,H),e=M(i.key,n,V,H);return cs(t)?(null===H||i.accessGlobal||H.observe(t,e),t[e]):null==t?void 0:t[e]}case v:{const t=i.expressions.map((t=>M(t,n,V,H))),e=M(i.func,n,V,H);if(!hs(e))throw Is(110);return e(i.cooked,...t)}case w:{const t=i.left,e=i.right;switch(i.operation){case"&&":return M(t,n,V,H)&&M(e,n,V,H);case"||":return M(t,n,V,H)||M(e,n,V,H);case"??":return M(t,n,V,H)??M(e,n,V,H);case"==":return M(t,n,V,H)==M(e,n,V,H);case"===":return M(t,n,V,H)===M(e,n,V,H);case"!=":return M(t,n,V,H)!=M(e,n,V,H);case"!==":return M(t,n,V,H)!==M(e,n,V,H);case"instanceof":{const s=M(e,n,V,H);return!!hs(s)&&M(t,n,V,H)instanceof s}case"in":{const s=M(e,n,V,H);return!!cs(s)&&M(t,n,V,H)in s}case"+":{const s=M(t,n,V,H),i=M(e,n,V,H);if(V?.strict)return s+i;if(!s||!i){if(j(s)||j(i))return(s||0)+(i||0);if(F(s)||F(i))return(s||"")+(i||"")}return s+i}case"-":return M(t,n,V,H)-M(e,n,V,H);case"*":return M(t,n,V,H)*M(e,n,V,H);case"/":return M(t,n,V,H)/M(e,n,V,H);case"%":return M(t,n,V,H)%M(e,n,V,H);case"<":return M(t,n,V,H)<M(e,n,V,H);case">":return M(t,n,V,H)>M(e,n,V,H);case"<=":return M(t,n,V,H)<=M(e,n,V,H);case">=":return M(t,n,V,H)>=M(e,n,V,H);default:throw Is(108,i.operation)}}case b:return M(i.condition,n,V,H)?M(i.yes,n,V,H):M(i.no,n,V,H);case y:return B(i.target,n,V,M(i.value,n,V,H));case S:{const t=V?.getConverter?.(i.name);if(null==t)throw Is(103,i.name);return"toView"in t?t.toView(M(i.expression,n,V,H),...i.args.map((t=>M(t,n,V,H)))):M(i.expression,n,V,H)}case k:return M(i.expression,n,V,H);case I:return i.name;case A:return M(i.iterable,n,V,H);case $:if(i.isMulti){let t=i.parts[0],e=0;for(;e<i.expressions.length;++e)t+=Je(M(i.expressions[e],n,V,H)),t+=i.parts[e+1];return t}return`${i.parts[0]}${M(i.firstExpression,n,V,H)}${i.parts[1]}`;case N:return M(i.target,n,V,H);case E:return i.list.map((t=>M(t,n,V,H)));case T:case x:case R:default:return;case P:return i.evaluate(n,V,H)}}function B(t,e,s,o){switch(t.$kind){case r:if("$host"===t.name)throw Is(106);return O(e,t.name,t.ancestor)[t.name]=o;case g:{const i=M(t.object,e,s,null);return cs(i)?"length"===t.name&&as(i)&&!isNaN(o)?i.splice(o):i[t.name]=o:B(t.object,e,s,{[t.name]:o}),o}case m:{const i=M(t.object,e,s,null),r=M(t.key,e,s,null);if(as(i)){if("length"===r&&!isNaN(o))return i.splice(o),o;if((0,n.Zn)(r))return i.splice(r,1,o),o}return i[r]=o}case y:return B(t.value,e,s,o),B(t.target,e,s,o);case S:{const i=s?.getConverter?.(t.name);if(null==i)throw Is(103,t.name);return"fromView"in i&&(o=i.fromView(o,...t.args.map((t=>M(t,e,s,null))))),B(t.expression,e,s,o)}case k:return B(t.expression,e,s,o);case E:case R:{const i=t.list,n=i.length;let r,a;for(r=0;r<n;r++)switch(a=i[r],a.$kind){case N:B(a,e,s,o);break;case E:case R:{if("object"!=typeof o||null===o)throw Is(112);let t=M(a.source,At.create(o),s,null);void 0===t&&a.initializer&&(t=M(a.initializer,e,s,null)),B(a,e,s,t);break}}break}case N:if(t instanceof i.lJ){if(null==o)return;if("object"!=typeof o)throw Is(112);let i=M(t.source,At.create(o),s,null);void 0===i&&t.initializer&&(i=M(t.initializer,e,s,null)),B(t.target,e,s,i)}else{if(null==o)return;if("object"!=typeof o)throw Is(112);const i=t.indexOrProperties;let r;if((0,n.Zn)(i)){if(!Array.isArray(o))throw Is(112);r=o.slice(i)}else r=Object.entries(o).reduce(((t,[e,s])=>(i.includes(e)||(t[e]=s),t)),{});B(t.target,e,s,r)}break;case P:return t.assign(e,s,o);default:return}}const L=(t,e,s)=>{const i=null==e?null:e[s];if(hs(i))return i;if(!t&&null==i)return null;throw Is(111,s)},j=t=>{switch(typeof t){case"number":case"bigint":return!0;default:return!1}},F=t=>{switch(typeof t){case"string":return!0;case"object":return t instanceof Date;default:return!1}},D="at map filter includes indexOf lastIndexOf findIndex find flat flatMap join reduce reduceRight slice every some sort".split(" ");return{astEvaluate:M,astAssign:B,astBind:function t(e,s,i){switch(e.$kind){case k:{const n=e.name,r=e.key,o=i.getBehavior?.(n);if(null==o)throw Is(101,n);if(void 0!==i[r])throw Is(102,n);return i[r]=o,o.bind?.(s,i,...e.args.map((t=>M(t,s,i,null)))),void t(e.expression,s,i)}case S:{const n=e.name,r=i.getConverter?.(n);if(null==r)throw Is(103,n);const o=r.signals;if(null!=o){const t=i.getSignaler?.(),e=o.length;let s=0;for(;s<e;++s)t?.addSignalListener(o[s],i)}return void t(e.expression,s,i)}case A:t(e.iterable,s,i);break;case P:e.bind?.(s,i)}},astUnbind:function t(e,s,i){switch(e.$kind){case k:{const n=e.key,r=i;void 0!==r[n]&&(r[n].unbind?.(s,i),r[n]=void 0),t(e.expression,s,i);break}case S:{const n=i.getConverter?.(e.name);if(void 0===n?.signals)return;const r=i.getSignaler?.();let o=0;for(;o<n.signals.length;++o)r?.removeSignalListener(n.signals[o],i);t(e.expression,s,i);break}case A:t(e.iterable,s,i);break;case P:e.unbind?.(s,i)}}}})(),Ns=ts({oneTime:1,toView:2,fromView:4,twoWay:6,default:8}),Ps=r.OS.get,Os=r.OS.has,Ms=r.OS.define,{annotation:Bs}=n.Zs,Ls=Bs.keyFor,js=Ls("bindables"),Fs=ts({name:js,keyFrom:t=>`${js}:${t}`,from(...t){const e={},s=Array.isArray;function i(t,s){e[t]=s instanceof Ds?s:Ds.create(t,!0===s?{}:s)}return t.forEach((function(t){s(t)?t.forEach((t=>ls(t)?function(t){e[t]=Ds.create(t)}(t):i(t.name,t))):t instanceof Ds?e[t.name]=t:void 0!==t&&is(t).forEach((e=>i(e,t[e])))})),e},getAll(t){const e=[],s=(0,n.eA)(t);let i,r=s.length;for(;--r>=0;){i=s[r];const t=Ps(js,i);null!=t&&e.push(...Object.values(t))}return e}});class Ds{constructor(t,e,s,i,n,r){this.attribute=t,this.callback=e,this.mode=s,this.primary=i,this.name=n,this.set=r}static create(t,e={}){return new Ds(e.attribute??(0,n.kW)(t),e.callback??`${t}Changed`,e.mode??2,e.primary??!1,e.name??t,e.set??function(t={}){const e=t.type??null;if(null==e)return n.lQ;let s;switch(e){case Number:case Boolean:case String:case BigInt:s=e;break;default:{const t=e.coerce;s="function"==typeof t?t.bind(e):Vs.for(e)??n.lQ;break}}return s===n.lQ?s:function(t,e){return function(s,i){return i?.enableCoercion?(e??!i?.coerceNullish)&&null==s?s:t(s,i):s}}(s,t.nullable)}(e))}}const Vs={key:Ls("coercer"),define(t,e){Ms(t[e].bind(t),t,Vs.key)},for:t=>Ps(Vs.key,t)},Hs=n.DI.createInterface,qs=n.cH.singleton,Us=n.cH.aliasTo,Ws=n.cH.instance;n.cH.callback,n.cH.transient;const _s=(t,e,s)=>t.registerResolver(e,s),Ks="element",Qs="__au_static_resource__",zs=(t,e,s)=>{let i=Ps(Qs,t);return null==i&&t.$au?.type===e&&(i=s(t.$au,t),Ms(i,t,Qs)),i};class Gs{constructor(t,e,s,i){this.Type=t,this.name=e,this.aliases=s,this.key=i}static create(t,e){let s,i;return ls(t)?(s=t,i={name:s}):(s=t.name,i=t),new Gs(e,(0,n.c4)(Zs(e,"name"),s),(0,n.TR)(Zs(e,"aliases"),i.aliases,e.aliases),ti.keyFrom(s))}register(t,e){const s=this.Type,i="string"==typeof e?Xs(e):this.key,n=this.aliases;t.has(i,!1)||t.register(t.has(s,!1)?null:qs(s,s),Us(s,i),...n.map((t=>Us(s,Xs(t)))))}}const Js="binding-behavior",Ys=(0,n.r$)(Js),Zs=(t,e)=>Ps(Ls(e),t),Xs=t=>`${Ys}:${t}`,ti=ts({name:Ys,keyFrom:Xs,isType:t=>hs(t)&&(Os(Ys,t)||t.$au?.type===Js),define(t,e){const s=Gs.create(t,e),i=s.Type;return Ms(s,i,Ys,n.n_),i},getDefinition(t){const e=Ps(Ys,t)??zs(t,Js,Gs.create);if(void 0===e)throw Is(151,t);return e},find(t,e){const s=t.find(Js,e);return null==s?null:Ps(Ys,s)??zs(s,Js,Gs.create)??null},get:(t,e)=>t.get((0,n.Zc)(Xs(e)))}),ei=new Map,si=t=>({type:Js,name:t});class ii{bind(t,e){ei.set(e,e.mode),e.mode=this.mode}unbind(t,e){e.mode=ei.get(e),ei.delete(e)}}class ni extends ii{get mode(){return 1}}ni.$au=si("oneTime");class ri extends ii{get mode(){return 2}}ri.$au=si("toView");class oi extends ii{get mode(){return 4}}oi.$au=si("fromView");class ai extends ii{get mode(){return 6}}ai.$au=si("twoWay");const hi=new WeakMap;class ci{constructor(){this.p=(0,n.hd)(n.r_)}bind(t,e,s,i){const r={type:"debounce",delay:s??200,now:this.p.performanceNow,queue:this.p.taskQueue,signals:ls(i)?[i]:i??n.tR},o=e.limit?.(r);null==o||hi.set(e,o)}unbind(t,e){hi.get(e)?.dispose(),hi.delete(e)}}ci.$au={type:Js,name:"debounce"};const li=Hs("ISignaler",(t=>t.singleton(ui)));class ui{constructor(){this.signals=Ze()}dispatchSignal(t){const e=this.signals[t];if(void 0===e)return;let s;for(s of e.keys())s.handleChange(void 0,void 0)}addSignalListener(t,e){(this.signals[t]??=new Set).add(e)}removeSignalListener(t,e){this.signals[t]?.delete(e)}}class di{constructor(){this.i=new Map,this.u=(0,n.hd)(li)}bind(t,e,...s){if(!("handleChange"in e))throw Is(817);if(0===s.length)throw Is(818);let i;for(i of(this.i.set(e,s),s))gs(this.u,i,e)}unbind(t,e){const s=this.i.get(e);let i;for(i of(this.i.delete(e),s))ms(this.u,i,e)}}di.$au={type:Js,name:"signal"};const pi=new WeakMap;class fi{constructor(){({performanceNow:this.C,taskQueue:this.A}=(0,n.hd)(n.r_))}bind(t,e,s,i){const r={type:"throttle",delay:s??200,now:this.C,queue:this.A,signals:ls(i)?[i]:i??n.tR},o=e.limit?.(r);null==o||pi.set(e,o)}unbind(t,e){pi.get(e)?.dispose(),pi.delete(e)}}fi.$au={type:Js,name:"throttle"};const gi=Hs("IAppTask");class mi{constructor(t,e,s){this.c=void 0,this.slot=t,this.k=e,this.cb=s}register(t){return this.c=t.register(Ws(gi,this))}run(){const t=this.k,e=this.cb;return null===t?e():e(this.c.get(t))}}const vi=ts({creating:wi("creating"),hydrating:wi("hydrating"),hydrated:wi("hydrated"),activating:wi("activating"),activated:wi("activated"),deactivating:wi("deactivating"),deactivated:wi("deactivated")});function wi(t){return function(e,s){return hs(s)?new mi(t,e,s):new mi(t,null,e)}}const bi=n.r_,yi=(()=>{const t=new WeakMap;return ts({add(e,s){let i=t.get(e);null==i&&t.set(e,i=[]),i.push(s)},getDefinitions:e=>t.get(e)??n.tR})})();class Ci{get kind(){return"attribute"}constructor(t,e,s,i,n,r,o,a,h,c,l){this.Type=t,this.name=e,this.aliases=s,this.key=i,this.defaultBindingMode=n,this.isTemplateController=r,this.bindables=o,this.noMultiBindings=a,this.watches=h,this.dependencies=c,this.containerStrategy=l}static create(t,e){let s,i;return ls(t)?(s=t,i={name:s}):(s=t.name,i=t),new Ci(e,(0,n.c4)(xi(e,"name"),s),(0,n.TR)(xi(e,"aliases"),i.aliases,e.aliases),Ti(s),(0,n.c4)(xi(e,"defaultBindingMode"),i.defaultBindingMode,e.defaultBindingMode,2),(0,n.c4)(xi(e,"isTemplateController"),i.isTemplateController,e.isTemplateController,!1),Fs.from(...Fs.getAll(e),xi(e,"bindables"),e.bindables,i.bindables),(0,n.c4)(xi(e,"noMultiBindings"),i.noMultiBindings,e.noMultiBindings,!1),(0,n.TR)(yi.getDefinitions(e),e.watches),(0,n.TR)(xi(e,"dependencies"),i.dependencies,e.dependencies),(0,n.c4)(xi(e,"containerStrategy"),i.containerStrategy,e.containerStrategy,"reuse"))}register(t,e){const s=this.Type,i="string"==typeof e?Ti(e):this.key,n=this.aliases;t.has(i,!1)||t.register(t.has(s,!1)?null:qs(s,s),Us(s,i),...n.map((t=>Us(s,Ti(t)))))}toString(){return`au:ca:${this.name}`}}const Si="custom-attribute",ki=(0,n.r$)(Si),Ti=t=>`${ki}:${t}`,xi=(t,e)=>Ps(Ls(e),t),Ii=(t,e)=>Zo(t,Ti(e))??void 0,Ai=(t,e)=>{const s=Ci.create(t,e),i=s.Type;return Ms(s,i,ki,n.n_),i},$i=t=>{const e=Ps(ki,t)??zs(t,Si,Ci.create);if(void 0===e)throw Is(759,t);return e},Ei=ts({name:ki,keyFrom:Ti,isType:t=>hs(t)&&(Os(ki,t)||t.$au?.type===Si),for:Ii,closest:(t,e)=>{let s="",i="";if(ls(e))s=Ti(e),i=e;else{const t=$i(e);s=t.key,i=t.name}let n=t;for(;null!==n;){const t=Zo(n,s);if(t?.is(i))return t;n=na(n)}return null},define:Ai,getDefinition:$i,annotate(t,e,s){Ms(s,t,Ls(e))},getAnnotation:xi,find(t,e){const s=t.find(Si,e);return null===s?null:Ps(ki,s)??zs(s,Si,Ci.create)??null}}),Ri=Hs("ILifecycleHooks");class Ni{constructor(t,e){this.definition=t,this.instance=e}}class Pi{constructor(t,e){this.Type=t,this.propertyNames=e}static create(t,e){const s=new Set;let i=e.prototype;for(;i!==Ye;){for(const t of ss(i))"constructor"===t||t.startsWith("_")||s.add(t);i=Object.getPrototypeOf(i)}return new Pi(e,s)}}const Oi=(()=>{const t=new WeakMap,e=new WeakMap;return ts({define(t,s){const i=Pi.create(t,s),r=i.Type;return e.set(r,i),n.hb.define(r,(t=>{qs(Ri,r).register(t)}))},resolve(s){let i=t.get(s);if(void 0===i){t.set(s,i=new Mi);const n=s.root,r=n===s?s.getAll(Ri):s.has(Ri,!1)?n.getAll(Ri).concat(s.getAll(Ri)):n.getAll(Ri);let o,a,h,c,l;for(o of r)for(c of(a=e.get(o.constructor),h=new Ni(a,o),a.propertyNames))l=i[c],void 0===l?i[c]=[h]:l.push(h)}return i}})})();class Mi{}class Bi{constructor(t,e,s,i){this.Type=t,this.name=e,this.aliases=s,this.key=i}static create(t,e){let s,i;return ls(t)?(s=t,i={name:s}):(s=t.name,i=t),new Bi(e,(0,n.c4)(Fi(e,"name"),s),(0,n.TR)(Fi(e,"aliases"),i.aliases,e.aliases),Vi.keyFrom(s))}register(t,e){const s=this.Type,i="string"==typeof e?Di(e):this.key,n=this.aliases;t.has(i,!1)||t.register(t.has(s,!1)?null:qs(s,s),Us(s,i),...n.map((t=>Us(s,Di(t)))))}}const Li="value-converter",ji=(0,n.r$)(Li),Fi=(t,e)=>Ps(Ls(e),t),Di=t=>`${ji}:${t}`,Vi=ts({name:ji,keyFrom:Di,isType:t=>hs(t)&&(Os(ji,t)||t.$au?.type===Li),define(t,e){const s=Bi.create(t,e),i=s.Type;return Ms(s,i,ji,n.n_),i},getDefinition(t){const e=Ps(ji,t)??zs(t,Li,Bi.create);if(void 0===e)throw Is(152,t);return e},annotate(t,e,s){Ms(s,t,Ls(e))},getAnnotation:Fi,find(t,e){const s=t.find(Li,e);return null==s?null:Ps(ji,s)??zs(s,Li,Bi.create)??null},get:(t,e)=>t.get((0,n.Zc)(Di(e)))});class Hi{constructor(t,e){this.v=void 0,this.b=t,this.B=e}flush(){this.b.updateSource(this.v)}handleChange(t,e){const s=this.b;t!==$s(s.ast,s.s,s,null)&&(this.v=t,this.B.add(this))}}const qi=t=>{fs(t.prototype,"useScope",Gi)},Ui=(t,e=!0)=>s=>{const i=s.prototype;null!=t&&ps(i,"strict",{enumerable:!0,get:function(){return t}}),ps(i,"strictFnCall",{enumerable:!0,get:function(){return e}}),fs(i,"get",Ji),fs(i,"getSignaler",Yi),fs(i,"getConverter",Zi),fs(i,"getBehavior",Xi)},Wi=new WeakMap,_i=new WeakMap;class Ki{}const Qi=Hs("IFlushQueue",(t=>t.singleton(zi)));class zi{constructor(){this.R=!1,this.T=new Set}get count(){return this.T.size}add(t){if(this.T.add(t),!this.R){this.R=!0;try{this.T.forEach(tn)}finally{this.R=!1}}}clear(){this.T.clear(),this.R=!1}}function Gi(t){this.s=t}function Ji(t){return this.l.get(t)}function Yi(){return this.l.root.get(li)}function Zi(t){let e=Wi.get(this);return null==e&&Wi.set(this,e=new Ki),e[t]??=Vi.get(this.l,t)}function Xi(t){let e=_i.get(this);return null==e&&_i.set(this,e=new Ki),e[t]??=ti.get(this.l,t)}function tn(t,e,s){s.delete(t),t.flush()}const en=new WeakSet,sn=(t,e)=>{fs(t.prototype,"limit",(function(t){if(en.has(this))throw Is(9996);en.add(this);const s=e(this,t),i=t.signals,n=i.length>0?this.get(li):null,r=this[s],o=(...t)=>r.call(this,...t),a="debounce"===t.type?nn(t,o,this):rn(t,o,this),h=n?{handleChange:a.flush}:null;return this[s]=a,n&&i.forEach((t=>gs(n,t,h))),{dispose:()=>{n&&i.forEach((t=>ms(n,t,h))),en.delete(this),a.dispose(),delete this[s]}}}))},nn=(t,e,s)=>{let i,n,r,o=!1;const a=t.queue,h=()=>e(r),c=e=>{r=e,s.isBound?(n=i,i=a.queueTask(h,{delay:t.delay,reusable:!1}),n?.cancel()):h()},l=c.dispose=()=>{n?.cancel(),i?.cancel(),n=i=void 0};return c.flush=()=>{o=i?.status===Cs,l(),o&&h()},c},rn=(t,e,s)=>{let i,n,r,o=0,a=0,h=!1;const c=t.queue,l=()=>t.now(),u=()=>e(r),d=e=>{r=e,s.isBound?(a=l()-o,n=i,a>t.delay?(o=l(),u()):i=c.queueTask((()=>{o=l(),u()}),{delay:t.delay-a,reusable:!1}),n?.cancel()):u()},p=d.dispose=()=>{n?.cancel(),i?.cancel(),n=i=void 0};return d.flush=()=>{h=i?.status===Cs,p(),h&&u()},d},on={reusable:!1,preempt:!0};class an{constructor(t,e,s,i,n,r,o,a,h){this.targetAttribute=o,this.targetProperty=a,this.mode=h,this.isBound=!1,this.s=void 0,this.I=null,this.v=void 0,this.boundFn=!1,this.l=e,this.ast=n,this.P=t,this.target=r,this.oL=s,this.A=i}updateTarget(t){const e=this.target,s=this.targetAttribute,i=this.targetProperty;switch(s){case"class":e.classList.toggle(i,!!t);break;case"style":{let s="",n=Je(t);ls(n)&&n.includes("!important")&&(s="important",n=n.replace("!important","")),e.style.setProperty(i,n,s);break}default:null==t?e.removeAttribute(s):e.setAttribute(s,Je(t))}}handleChange(){if(!this.isBound)return;let t;this.obs.version++;const e=$s(this.ast,this.s,this,(2&this.mode)>0?this:null);this.obs.clear(),e!==this.v&&(this.v=e,this.P.state!==Eo?(t=this.I,this.I=this.A.queueTask((()=>{this.I=null,this.updateTarget(e)}),on),t?.cancel()):this.updateTarget(e))}handleCollectionChange(){this.handleChange()}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,Es(this.ast,t,this),3&this.mode&&this.updateTarget(this.v=$s(this.ast,t,this,(2&this.mode)>0?this:null)),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,Rs(this.ast,this.s,this),this.s=void 0,this.v=void 0,this.I?.cancel(),this.I=null,this.obs.clearAll())}}qi(an),sn(an,(()=>"updateTarget")),xt(an,null),Ui(!0)(an);const hn={reusable:!1,preempt:!0};class cn{constructor(t,e,s,i,n,r,o,a){this.ast=n,this.target=r,this.targetProperty=o,this.mode=a,this.isBound=!1,this.s=void 0,this.I=null,this.P=t,this.oL=s,this.A=i,this.L=s.getAccessor(r,o);const h=n.expressions,c=this.partBindings=Array(h.length),l=h.length;let u=0;for(;l>u;++u)c[u]=new ln(h[u],r,o,e,s,this)}M(){this.updateTarget()}updateTarget(){const t=this.partBindings,e=this.ast.parts,s=t.length;let i="",n=0;if(1===s)i=e[0]+t[0].v+e[1];else for(i=e[0];s>n;++n)i+=t[n].v+e[n+1];const r=this.L;let o;this.P.state!==Eo&&(r.type&xs)>0?(o=this.I,this.I=this.A.queueTask((()=>{this.I=null,r.setValue(i,this.target,this.targetProperty)}),hn),o?.cancel(),o=null):r.setValue(i,this.target,this.targetProperty)}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t;const e=this.partBindings,s=e.length;let i=0;for(;s>i;++i)e[i].bind(t);this.updateTarget(),this.isBound=!0}unbind(){if(!this.isBound)return;this.isBound=!1,this.s=void 0;const t=this.partBindings,e=t.length;let s=0;for(;e>s;++s)t[s].unbind();this.I?.cancel(),this.I=null}}class ln{constructor(t,e,s,i,n,r){this.ast=t,this.target=e,this.targetProperty=s,this.owner=r,this.mode=2,this.task=null,this.isBound=!1,this.v="",this.boundFn=!1,this.l=i,this.oL=n}updateTarget(){this.owner.M()}handleChange(){if(!this.isBound)return;this.obs.version++;const t=$s(this.ast,this.s,this,(2&this.mode)>0?this:null);this.obs.clear(),t!=this.v&&(this.v=t,as(t)&&this.observeCollection(t),this.updateTarget())}handleCollectionChange(){this.updateTarget()}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,Es(this.ast,t,this),this.v=$s(this.ast,this.s,this,(2&this.mode)>0?this:null),as(this.v)&&this.observeCollection(this.v),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,Rs(this.ast,this.s,this),this.s=void 0,this.obs.clearAll())}}qi(ln),sn(ln,(()=>"updateTarget")),xt(ln,null),Ui(!0)(ln);const un={reusable:!1,preempt:!0};class dn{constructor(t,e,s,i,n,r,o){this.p=n,this.ast=r,this.target=o,this.isBound=!1,this.mode=2,this.I=null,this.v="",this._=!1,this.boundFn=!1,this.strict=!0,this.l=e,this.P=t,this.oL=s,this.A=i}updateTarget(t){const e=this.target,s=this.v;this.v=t,this._&&(s.parentNode?.removeChild(s),this._=!1),t instanceof this.p.Node&&(e.parentNode?.insertBefore(t,e),t="",this._=!0),e.textContent=Je(t??"")}handleChange(){if(!this.isBound)return;this.obs.version++;const t=$s(this.ast,this.s,this,(2&this.mode)>0?this:null);if(this.obs.clear(),t===this.v)return this.I?.cancel(),void(this.I=null);this.P.state!==Eo?this.q(t):this.updateTarget(t)}handleCollectionChange(){if(!this.isBound)return;this.obs.version++;const t=this.v=$s(this.ast,this.s,this,(2&this.mode)>0?this:null);this.obs.clear(),as(t)&&this.observeCollection(t),this.P.state!==Eo?this.q(t):this.updateTarget(t)}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,Es(this.ast,t,this);const e=this.v=$s(this.ast,this.s,this,(2&this.mode)>0?this:null);as(e)&&this.observeCollection(e),this.updateTarget(e),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,Rs(this.ast,this.s,this),this._&&this.v.parentNode?.removeChild(this.v),this.s=void 0,this.obs.clearAll(),this.I?.cancel(),this.I=null)}q(t){const e=this.I;this.I=this.A.queueTask((()=>{this.I=null,this.updateTarget(t)}),un),e?.cancel()}}qi(dn),sn(dn,(()=>"updateTarget")),xt(dn,null),Ui(void 0,!1)(dn);class pn{constructor(t,e,s,i,n=!1){this.ast=s,this.targetProperty=i,this.isBound=!1,this.s=void 0,this.target=null,this.boundFn=!1,this.l=t,this.oL=e,this.F=n}updateTarget(){this.target[this.targetProperty]=this.v}handleChange(){this.isBound&&(this.obs.version++,this.v=$s(this.ast,this.s,this,this),this.obs.clear(),this.updateTarget())}handleCollectionChange(){this.handleChange()}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,this.target=this.F?t.bindingContext:t.overrideContext,Es(this.ast,t,this),this.v=$s(this.ast,this.s,this,this),this.updateTarget(),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,Rs(this.ast,this.s,this),this.s=void 0,this.obs.clearAll())}}qi(pn),sn(pn,(()=>"updateTarget")),xt(pn,null),Ui(!0)(pn);class fn{constructor(t,e,s,i,n,r,o,a){this.ast=n,this.target=r,this.targetProperty=o,this.mode=a,this.isBound=!1,this.s=void 0,this.L=void 0,this.I=null,this.O=null,this.boundFn=!1,this.l=e,this.P=t,this.A=i,this.oL=s}updateTarget(t){this.L.setValue(t,this.target,this.targetProperty)}updateSource(t){As(this.ast,this.s,this,t)}handleChange(){if(!this.isBound)return;this.obs.version++;const t=$s(this.ast,this.s,this,(2&this.mode)>0?this:null);this.obs.clear(),this.P.state!==Eo&&(this.L.type&xs)>0?(gn=this.I,this.I=this.A.queueTask((()=>{this.updateTarget(t),this.I=null}),mn),gn?.cancel(),gn=null):this.updateTarget(t)}handleCollectionChange(){this.handleChange()}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,Es(this.ast,t,this);const e=this.oL,s=this.mode;let i=this.L;i||(i=4&s?e.getObserver(this.target,this.targetProperty):e.getAccessor(this.target,this.targetProperty),this.L=i);const n=(2&s)>0;3&s&&this.updateTarget($s(this.ast,this.s,this,n?this:null)),4&s&&(i.subscribe(this.O??=new Hi(this,this.l.get(Qi))),n||this.updateSource(i.getValue(this.target,this.targetProperty))),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,Rs(this.ast,this.s,this),this.s=void 0,this.O&&(this.L.unsubscribe(this.O),this.O=null),this.I?.cancel(),this.I=null,this.obs.clearAll())}useTargetObserver(t){this.L?.unsubscribe(this),(this.L=t).subscribe(this)}useTargetSubscriber(t){if(null!=this.O)throw Is(9995);this.O=t}}qi(fn),sn(fn,(t=>4&t.mode?"updateSource":"updateTarget")),xt(fn,null),Ui(!0,!1)(fn);let gn=null;const mn={reusable:!1,preempt:!0};class vn{constructor(t,e,s){this.ast=e,this.target=s,this.isBound=!1,this.s=void 0,this.l=t}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,Es(this.ast,t,this),As(this.ast,this.s,this,this.target),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,$s(this.ast,this.s,this,null)===this.target&&As(this.ast,this.s,this,null),Rs(this.ast,this.s,this),this.s=void 0)}}Ui(!1)(vn);class wn{constructor(t,e=!1){this.prevent=t,this.capture=e}}class bn{constructor(t,e,s,i,n,r){this.ast=e,this.target=s,this.targetEvent=i,this.isBound=!1,this.self=!1,this.boundFn=!0,this.H=null,this.l=t,this.V=n,this.H=r}callSource(t){const e=this.s.overrideContext;e.$event=t;let s=$s(this.ast,this.s,this,null);return delete e.$event,hs(s)&&(s=s(t)),!0!==s&&this.V.prevent&&t.preventDefault(),s}handleEvent(t){this.self&&this.target!==t.composedPath()[0]||!1!==this.H?.(t)&&this.callSource(t)}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,Es(this.ast,t,this),this.target.addEventListener(this.targetEvent,this,this.V),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,Rs(this.ast,this.s,this),this.s=void 0,this.target.removeEventListener(this.targetEvent,this,this.V))}}qi(bn),sn(bn,(()=>"callSource")),Ui(!0,!0)(bn);const yn=Hs("IEventModifier"),Cn=Hs("IKeyMapping",(t=>t.instance({meta:ts(["ctrl","alt","shift","meta"]),keys:{escape:"Escape",enter:"Enter",space:"Space",tab:"tab",...Array.from({length:25}).reduce(((t,e,s)=>{let i=String.fromCharCode(s+65);return t[s+65]=i,i=String.fromCharCode(s+97),t[s+97]=t[i]=i,t}),{})}})));class Sn{constructor(){this.type=["click","mousedown","mousemove","mouseup","dblclick","contextmenu"],this.$=(0,n.hd)(Cn),this.N=["left","middle","right"]}static register(t){t.register(qs(yn,Sn))}getHandler(t){const e=t.split(/[:+.]/);return t=>{let s,i=!1,n=!1;for(s of e){switch(s){case"prevent":i=!0;continue;case"stop":n=!0;continue;case"left":case"middle":case"right":if(t.button!==this.N.indexOf(s))return!1;continue}if(this.$.meta.includes(s)&&!0!==t[`${s}Key`])return!1}return i&&t.preventDefault(),n&&t.stopPropagation(),!0}}}class kn{constructor(){this.$=(0,n.hd)(Cn),this.type=["keydown","keyup"]}static register(t){t.register(qs(yn,kn))}getHandler(t){const e=t.split(/[:+.]/);return t=>{let s,i=!1,n=!1;for(s of e){switch(s){case"prevent":i=!0;continue;case"stop":n=!0;continue}if(this.$.meta.includes(s)){if(!0!==t[`${s}Key`])return!1}else if(this.$.keys[s]!==t.key)return!1}return i&&t.preventDefault(),n&&t.stopPropagation(),!0}}}const Tn=Hs("IEventModifierHandler",(t=>t.instance({getHandler:()=>null})));class xn{constructor(){this.j=(0,n.hd)((0,n.Q7)(yn)).reduce(((t,e)=>((as(e.type)?e.type:[e.type]).forEach((s=>t[s]=e)),t)),{})}static register(t){t.register(qs(Tn,xn))}getHandler(t,e){return ls(e)?this.j[t]?.getHandler(e)??null:null}}const In={register(t){t.register(xn,Sn,kn)}},An=Hs("IViewFactory");class $n{constructor(t,e){this.isCaching=!1,this.W=null,this.U=-1,this.name=e.name,this.container=t,this.def=e}setCacheSize(t,e){t&&("*"===t?t=$n.maxCacheSize:ls(t)&&(t=parseInt(t,10)),-1!==this.U&&e||(this.U=t)),this.U>0?this.W=[]:this.W=null,this.isCaching=this.U>0}canReturnToCache(t){return null!=this.W&&this.W.length<this.U}tryReturnToCache(t){return!!this.canReturnToCache(t)&&(this.W.push(t),!0)}create(t){const e=this.W;let s;return null!=e&&e.length>0?(s=e.pop(),s):(s=ho.$view(this,t),s)}}$n.maxCacheSize=65535;const En=(t,e)=>t.document.createComment(e),Rn=(t,e,s)=>t.insertBefore(e,s),Nn=(t,e,s)=>{if(null===t)return;const i=s.length;let n=0;for(;i>n;)t.insertBefore(s[n],e),++n},Pn=(t,e)=>t.content.appendChild(e),On=(t,e)=>{const s=e.length;let i=0;for(;s>i;)t.content.appendChild(e[i]),++i},Mn=(t,e)=>new t.ownerDocument.defaultView.MutationObserver(e),Bn=t=>1===t.nodeType,Ln=t=>3===t.nodeType,jn="default",Fn="au-slot",Dn=Hs("IAuSlotsInfo");class Vn{constructor(t){this.projectedSlots=t}}const Hn=Hs("IAuSlotWatcher");class qn{static create(t,e,s,i,r,o,a,h){const c=[],l=i.renderers,u=e=>{let s=e,i=t;for(;null!=i&&s>0;)i=i.parent,--s;if(null==i)throw Is(9999);return i},d=t=>{const i=u(t),p=new qn(i),f=r.compileSpread(i.controller.definition,i.instruction?.captures??n.tR,i.controller.container,e,s);let g;for(g of f)switch(g.type){case Wn:d(t+1);break;case _n:l[g.instructions.type].render(p,Aa(e),g.instructions,o,a,h);break;default:l[g.type].render(p,e,g,o,a,h)}c.push(p)};return d(0),c}get container(){return this.locator}get definition(){return this.$controller.definition}get state(){return this.$controller.state}constructor(t){this.isBound=!1,this.Z=[],this.locator=(this.$controller=(this.J=t).controller).container}get(t){return this.locator.get(t)}bind(t){if(this.isBound)return;this.isBound=!0;const e=this.scope=this.J.controller.scope.parent??void 0;if(null==e)throw Is(9999);this.Z.forEach((t=>t.bind(e)))}unbind(){this.Z.forEach((t=>t.unbind())),this.isBound=!1}addBinding(t){this.Z.push(t)}addChild(t){if(t.vmKind!==Io)throw Is(9998);this.$controller.addChild(t)}}const Un="rg",Wn="hs",_n="hp",Kn=Hs("Instruction");class Qn{constructor(t,e){this.from=t,this.to=e,this.type="rf"}}class zn{constructor(t,e,s){this.from=t,this.to=e,this.mode=s,this.type=Un}}class Gn{constructor(t,e,s){this.forOf=t,this.to=e,this.props=s,this.type="rk"}}class Jn{constructor(t,e){this.from=t,this.to=e,this.type="rj"}}class Yn{constructor(t,e){this.value=t,this.to=e,this.type="re"}}class Zn{constructor(t,e,s){this.value=t,this.to=e,this.command=s,this.type="rl"}}class Xn{constructor(t,e,s,i,n,r){this.res=t,this.props=e,this.projections=s,this.containerless=i,this.captures=n,this.data=r,this.type="ra"}}class tr{constructor(t,e,s){this.res=t,this.alias=e,this.props=s,this.type="rb"}}class er{constructor(t,e,s,i){this.def=t,this.res=e,this.alias=s,this.props=i,this.type="rc"}}class sr{constructor(t,e){this.instructions=t,this.toBindingContext=e,this.type="rd"}}class ir{constructor(t,e){this.from=t,this.to=e,this.type="ri"}}class nr{constructor(t){this.from=t,this.type="ha"}}class rr{constructor(t,e,s,i){this.from=t,this.to=e,this.capture=s,this.modifier=i,this.type="hb"}}class or{constructor(t,e){this.value=t,this.to=e,this.type="he"}}class ar{constructor(t){this.value=t,this.type="hf"}}class hr{constructor(t){this.value=t,this.type="hg"}}class cr{constructor(t,e,s){this.attr=t,this.from=e,this.to=s,this.type="hc"}}class lr{constructor(){this.type=Wn}}class ur{constructor(t){this.instructions=t,this.type=_n}}const dr=Hs("ITemplateCompiler"),pr=Hs("IRenderer");function fr(t){return function(e){return ps(e.prototype,"target",{configurable:!0,get:()=>t}),n.hb.define(e,(function(t){qs(pr,this).register(t)}))}}function gr(t,e,s){return ls(e)?t.parse(e,s):e}function mr(t){return null!=t.viewModel?t.viewModel:t}class vr{render(t,e,s){const i=mr(e);void 0!==i.$observers?.[s.to]?i.$observers[s.to].setValue(s.value):i[s.to]=s.value}}fr("re")(vr,null);class wr{constructor(){this.r=(0,n.hd)(_r)}render(t,e,s,i,r,o){let a,h,c;const l=s.res,u=s.projections,d=t.container;if("string"==typeof l){if(a=Na.find(d,l),null==a)throw Is(752,s,t)}else a=l;const p=s.containerless||a.containerless?ra(e):null,f=function(t,e,s,i,r,o){const a=e.container.createChild();return ua(a,t,s),_s(a,Bo,new n.JF(Br,e)),_s(a,Kn,new n.JF(Lr,i)),_s(a,ea,null==r?qr:new Hr(r)),_s(a,An,Ur),_s(a,Dn,null==o?Wr:new n.JF(Fr,o)),a}(i,t,e,s,p,null==u?void 0:new Vn(is(u)));h=f.invoke(a.Type),c=ho.$el(f,h,e,s,a,p),Xo(e,a.key,c);const g=this.r.renderers,m=s.props,v=m.length;let w,b=0;for(;v>b;)w=m[b],g[w.type].render(t,c,w,i,r,o),++b;t.addChild(c)}}fr("ra")(wr,null);class br{constructor(){this.r=(0,n.hd)(_r)}render(t,e,s,i,n,r){let o,a=t.container;if("string"==typeof s.res){if(o=Ei.find(a,s.res),null==o)throw Is(753,s,t)}else o=s.res;const h=Vr(i,o,t,e,s,void 0,void 0),c=ho.$attr(h.ctn,h.vm,e,o);Xo(e,o.key,c);const l=this.r.renderers,u=s.props,d=u.length;let p,f=0;for(;d>f;)p=u[f],l[p.type].render(t,c,p,i,n,r),++f;t.addChild(c)}}fr("rb")(br,null);class yr{constructor(){this.r=(0,n.hd)(_r)}render(t,e,s,i,n,r){let o,a=t.container;if("string"==typeof s.res){if(o=Ei.find(a,s.res),null==o)throw Is(754,s,t)}else o=s.res;const h=this.r.getViewFactory(s.def,"new"===o.containerStrategy?a.createChild({inheritParentResources:!0}):a),c=ra(e),l=Vr(i,o,t,e,s,h,c),u=ho.$attr(l.ctn,l.vm,e,o);Xo(c,o.key,u),l.vm.link?.(t,u,e,s);const d=this.r.renderers,p=s.props,f=p.length;let g,m=0;for(;f>m;)g=p[m],d[g.type].render(t,u,g,i,n,r),++m;t.addChild(u)}}fr("rc")(yr,null);class Cr{render(t,e,s,i,n,r){e.remove();const o=s.instructions,a=s.toBindingContext,h=t.container,c=o.length;let l,u,d=0;for(;c>d;)l=o[d],u=gr(n,l.from,ys),t.addBinding(new pn(h,r,u,l.to,a)),++d}}fr("rd")(Cr,null);class Sr{render(t,e,s,i,n){t.addBinding(new vn(t.container,gr(n,s.from,ys),function(t,e){if("element"===e)return t;switch(e){case"controller":return Aa(t);case"view":throw Is(750);case"component":return Aa(t).viewModel;default:{const s=Ii(t,e);if(void 0!==s)return s.viewModel;const i=Aa(t,{name:e});if(void 0===i)throw Is(751,e);return i.viewModel}}}(e,s.to)))}}fr("rj")(Sr,null);class kr{render(t,e,s,i,n,r){t.addBinding(new cn(t,t.container,r,i.domWriteQueue,gr(n,s.from,vs),mr(e),s.to,2))}}fr("rf")(kr,null);class Tr{render(t,e,s,i,n,r){t.addBinding(new fn(t,t.container,r,i.domWriteQueue,gr(n,s.from,ys),mr(e),s.to,s.mode))}}fr(Un)(Tr,null);class xr{render(t,e,s,i,n,r){t.addBinding(new fn(t,t.container,r,i.domWriteQueue,gr(n,s.forOf,ws),mr(e),s.to,2))}}fr("rk")(xr,null);class Ir{render(t,e,s,i,n,r){t.addBinding(new dn(t,t.container,r,i.domWriteQueue,i,gr(n,s.from,ys),e))}}fr("ha")(Ir,null);const Ar=Hs("IListenerBindingOptions",(t=>t.instance({prevent:!1})));class $r{constructor(){this.tt=(0,n.hd)(Tn),this.et=(0,n.hd)(Ar)}render(t,e,s,i,n){t.addBinding(new bn(t.container,gr(n,s.from,bs),e,s.to,new wn(this.et.prevent,s.capture),this.tt.getHandler(s.to,s.modifier)))}}fr("hb")($r,null);class Er{render(t,e,s){e.setAttribute(s.to,s.value)}}fr("he")(Er,null);class Rr{render(t,e,s){!function(t,e){const s=e.length;let i=0;for(let n=0;n<s;++n)32===e.charCodeAt(n)?(n!==i&&t.add(e.slice(i,n)),i=n+1):n+1===s&&t.add(e.slice(i))}(e.classList,s.value)}}fr("hf")(Rr,null);class Nr{render(t,e,s){e.style.cssText+=s.value}}fr("hg")(Nr,null);class Pr{render(t,e,s,i,n,r){t.addBinding(new fn(t,t.container,r,i.domWriteQueue,gr(n,s.from,ys),e.style,s.to,2))}}fr("hd")(Pr,null);class Or{render(t,e,s,i,n,r){const o=t.container,a=o.has(sa,!1)?o.get(sa):null;t.addBinding(new an(t,o,r,i.domWriteQueue,gr(n,s.from,ys),e,s.attr,null==a?s.to:s.to.split(/\s/g).map((t=>a[t]??t)).join(" "),2))}}fr("hc")(Or,null);class Mr{constructor(){this.it=(0,n.hd)(dr),this.r=(0,n.hd)(_r)}render(t,e,s,i,n,r){qn.create(t.container.get(Lo),e,void 0,this.r,this.it,i,n,r).forEach((e=>t.addBinding(e)))}}fr(Wn)(Mr,null);const Br="IController",Lr="IInstruction",jr="IRenderLocation",Fr="ISlotsInfo";class Dr{get $isResolver(){return!0}constructor(t){this.f=t}resolve(){const t=this.f;if(null===t)throw Is(755);if(!ls(t.name)||0===t.name.length)throw Is(756);return t}}function Vr(t,e,s,i,r,o,a,h){const c=s instanceof ho?s:s.$controller,l=c.container.createChild();return ua(l,t,i),_s(l,Bo,new n.JF(Br,c)),_s(l,Kn,new n.JF(Lr,r)),_s(l,ea,null==a?qr:new n.JF(jr,a)),_s(l,An,null==o?Ur:new Dr(o)),_s(l,Dn,null==h?Wr:new n.JF(Fr,h)),{vm:l.invoke(e.Type),ctn:l}}class Hr{get name(){return"IRenderLocation"}get $isResolver(){return!0}constructor(t){this.l=t}resolve(){return this.l}}const qr=new Hr(null),Ur=new Dr(null),Wr=new n.JF(Fr,new Vn(n.tR)),_r=Hs("IRendering",(t=>t.singleton(Kr)));class Kr{get renderers(){return this.st??=this.nt.getAll(pr,!1).reduce(((t,e)=>(t[e.target]=e,t)),Ze())}constructor(){this.rt=new WeakMap,this.ot=new WeakMap;const t=this.nt=(0,n.hd)(n.p7).root;this.p=t.get(bi),this.ep=t.get(i.JW),this.oL=t.get(De),this.lt=new aa(this.p,this.p.document.createDocumentFragment())}compile(t,e,s){if(!1!==t.needsCompile){const i=this.rt,n=e.get(dr);let r=i.get(t);return null==r?i.set(t,r=n.compile(fa.getOrCreate(t),e,s)):e.register(...r.dependencies),r}return t}getViewFactory(t,e){return new $n(e,fa.getOrCreate(t))}createNodes(t){if(!0===t.enhance)return new aa(this.p,this.ht(t.template));let e,s=!1;const i=this.ot,n=this.p,r=n.document;if(i.has(t))e=i.get(t);else{const o=t.template;let a;null===o?e=null:o instanceof n.Node?"TEMPLATE"===o.nodeName?(e=o.content,s=!0):(e=r.createDocumentFragment()).appendChild(o.cloneNode(!0)):(a=r.createElement("template"),ls(o)&&(a.innerHTML=o),e=a.content,s=!0),this.ht(e),i.set(t,e)}return null==e?this.lt:new aa(this.p,s?r.importNode(e,!0):r.adoptNode(e.cloneNode(!0)))}render(t,e,s,i){const n=s.instructions,r=this.renderers,o=e.length;let a,h,c,l=0,u=0,d=n.length;if(o!==d)throw Is(757,o,d);if(o>0)for(;o>l;){for(a=n[l],c=e[l],u=0,d=a.length;d>u;)h=a[u],r[h.type].render(t,c,h,this.p,this.ep,this.oL),++u;++l}if(null!=i&&(a=s.surrogates,(d=a.length)>0))for(u=0;d>u;)h=a[u],r[h.type].render(t,i,h,this.p,this.ep,this.oL),++u}ct(){return this.p.document.createElement("au-m")}ht(t){if(null==t)return null;let e=t,s=e.firstChild,i=null;for(;null!=s;)if(8===s.nodeType&&"au*"===s.nodeValue&&(i=s.nextSibling,e.removeChild(s),e.insertBefore(this.ct(),i),s=8===i.nodeType?i.nextSibling:i),i=s?.firstChild,null==i)if(i=s?.nextSibling,null==i)for(s=e.nextSibling,e=e.parentNode;null==s&&null!=e;)s=e.nextSibling,e=e.parentNode;else s=i;else e=s,s=i;return t}}const Qr=(t,e,s,i)=>{t.addEventListener(e,s,i)},zr=(t,e,s,i)=>{t.removeEventListener(e,s,i)},Gr=t=>{let e;const s=t.prototype;fs(s,"subscribe",(function(t){if(this.subs.add(t)&&1===this.subs.count){for(e of this.cf.events)Qr(this.ut,e,this);this.ft=!0,this.dt?.()}})),fs(s,"unsubscribe",(function(t){if(this.subs.remove(t)&&0===this.subs.count){for(e of this.cf.events)zr(this.ut,e,this);this.ft=!1,this.gt?.()}})),fs(s,"useConfig",(function(t){if(this.cf=t,this.ft){for(e of this.cf.events)zr(this.ut,e,this);for(e of this.cf.events)Qr(this.ut,e,this)}}))},Jr=t=>{fs(t.prototype,"subscribe",n.lQ),fs(t.prototype,"unsubscribe",n.lQ)};class Yr{get doNotCache(){return!0}constructor(t){this.obj=t,this.type=Ts|xs,this.v="",this.vt={},this.bt=0}getValue(){return this.v}setValue(t){t!==this.v&&(this.v=t,this.wt())}wt(){const t=this.vt,e=++this.bt,s=this.obj.classList,i=Zr(this.v),n=i.length;let r,o=0;if(n>0)for(;o<n;o++)r=i[o],0!==r.length&&(t[r]=this.bt,s.add(r));if(1!==e)for(r in t)t[r]!==e&&s.remove(r)}}function Zr(t){if(ls(t))return Xr(t);if("object"!=typeof t)return n.tR;if(t instanceof Array){const e=t.length;if(e>0){const s=[];let i=0;for(;e>i;++i)s.push(...Zr(t[i]));return s}return n.tR}const e=[];let s;for(s in t)Boolean(t[s])&&(s.includes(" ")?e.push(...Xr(s)):e.push(s));return e}function Xr(t){const e=t.match(/\S+/g);return null===e?n.tR:e}Jr(Yr);const to=Hs("IShadowDOMStyles"),eo=Hs("IShadowDOMGlobalStyles",(t=>t.instance({applyTo:n.lQ}))),{enter:so,exit:io}=Bt,{wrap:no,unwrap:ro}=Ee;class oo{get value(){return this.v}constructor(t,e,s,i,n){this.obj=t,this.$get=s,this.useProxy=n,this.isBound=!1,this.running=!1,this.v=void 0,this.cb=i,this.oL=e}handleChange(){this.run()}handleCollectionChange(){this.run()}bind(){this.isBound||(this.compute(),this.isBound=!0)}unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll())}run(){if(!this.isBound||this.running)return;const t=this.obj,e=this.v,s=this.compute();ds(s,e)||this.cb.call(t,s,e,t)}compute(){this.running=!0,this.obs.version++;try{return so(this),this.v=ro(this.$get.call(void 0,this.useProxy?no(this.obj):this.obj,this))}finally{this.obs.clear(),this.running=!1,io(this)}}}class ao{get value(){return this.v}constructor(t,e,s,i,n){this.scope=t,this.l=e,this.oL=s,this.isBound=!1,this.boundFn=!1,this.obj=t.bindingContext,this.xt=i,this.cb=n}handleChange(t){const e=this.xt,s=this.obj,i=this.v;"AccessScope"===e.$kind&&1===this.obs.count||(this.obs.version++,t=$s(e,this.scope,this,this),this.obs.clear()),ds(t,i)||(this.v=t,this.cb.call(s,t,i,s))}bind(){this.isBound||(this.obs.version++,this.v=$s(this.xt,this.scope,this,this),this.obs.clear(),this.isBound=!0)}unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll(),this.v=void 0)}}xt(oo,null),xt(ao,null),Ui(!0)(ao);class ho{get lifecycleHooks(){return this.Ct}get isActive(){return(this.state&(Eo|Ro))>0&&!(this.state&No)}get name(){if(null===this.parent)switch(this.vmKind){case Io:return`[${this.definition.name}]`;case xo:return this.definition.name;case Ao:return this.viewFactory.name}switch(this.vmKind){case Io:return`${this.parent.name}>[${this.definition.name}]`;case xo:return`${this.parent.name}>${this.definition.name}`;case Ao:return this.viewFactory.name===this.parent.definition?.name?`${this.parent.name}[view]`:`${this.parent.name}[view:${this.viewFactory.name}]`}}get viewModel(){return this.kt}set viewModel(t){this.kt=t,this.At=null==t||this.vmKind===Ao?ko.none:new ko(t)}constructor(t,e,s,i,n,r,o){this.container=t,this.vmKind=e,this.definition=s,this.viewFactory=i,this.host=r,this.head=null,this.tail=null,this.next=null,this.parent=null,this.bindings=null,this.children=null,this.hasLockedScope=!1,this.scope=null,this.isBound=!1,this.Bt=!1,this.hostController=null,this.mountTarget=lo,this.shadowRoot=null,this.nodes=null,this.location=null,this.Ct=null,this.state=$o,this.St=!1,this.$initiator=null,this.$resolve=void 0,this.$reject=void 0,this.$promise=void 0,this.Rt=0,this.Tt=0,this.Et=0,this.kt=n,this.At=e===Ao?ko.none:new ko(n),this.location=o,this.r=t.root.get(_r),this.coercion=e===Ao?void 0:t.get(vo)}static getCached(t){return co.get(t)}static getCachedOrThrow(t){const e=ho.getCached(t);if(void 0===e)throw Is(500,t);return e}static $el(t,e,s,i,r=void 0,o=null){if(co.has(e))return co.get(e);r=r??Ea(e.constructor),_s(t,r.Type,new n.JF(r.key,e,r.Type));const a=new ho(t,xo,r,null,e,s,o),h=t.get((0,n.lq)(Lo));return r.dependencies.length>0&&t.register(...r.dependencies),_s(t,Lo,new n.JF("IHydrationContext",new jo(a,i,h))),co.set(e,a),null!=i&&!1===i.hydrate||a.hE(i,h),a}static $attr(t,e,s,i){if(co.has(e))return co.get(e);i=i??$i(e.constructor),_s(t,i.Type,new n.JF(i.key,e,i.Type));const r=new ho(t,Io,i,null,e,s,null);return i.dependencies.length>0&&t.register(...i.dependencies),co.set(e,r),r.It(),r}static $view(t,e=void 0){const s=new ho(t.container,Ao,null,t,null,null,null);return s.parent=e??null,s.Pt(),s}hE(t,e){const s=this.container,i=this.kt,r=this.definition;this.scope=At.create(i,null,!0),r.watches.length>0&&Co(this,s,r,i),wo(this,r,i),this.Ct=Oi.resolve(s),s.register(r.Type),null!==r.injectable&&_s(s,r.injectable,new n.JF("definition.injectable",i)),null!=t&&!1===t.hydrate||(this.hS(t),this.hC())}hS(t){null!=this.Ct.hydrating&&this.Ct.hydrating.forEach(Vo,this),this.At.Lt&&this.kt.hydrating(this);const e=this.definition,s=this.Dt=this.r.compile(e,this.container,t),i=s.shadowOptions,n=s.hasSlots,r=s.containerless;let o=this.host,a=this.location;if(null!==(this.hostController=Aa(o,mo))&&(o=this.host=this.container.root.get(bi).document.createElement(e.name),r&&null==a&&(a=this.location=ra(o))),Xo(o,Sa,this),Xo(o,e.key,this),null!==i||n){if(null!=a)throw Is(501);Xo(this.shadowRoot=o.attachShadow(i??To),Sa,this),Xo(this.shadowRoot,e.key,this),this.mountTarget=po}else null!=a?(Xo(a,Sa,this),Xo(a,e.key,this),this.mountTarget=fo):this.mountTarget=uo;this.kt.$controller=this,this.nodes=this.r.createNodes(s),void 0!==this.Ct.hydrated&&this.Ct.hydrated.forEach(Ho,this),this.At.Mt&&this.kt.hydrated(this)}hC(){this.r.render(this,this.nodes.findTargets(),this.Dt,this.host),void 0!==this.Ct.created&&this.Ct.created.forEach(Do,this),this.At._t&&this.kt.created(this)}It(){const t=this.definition,e=this.kt;t.watches.length>0&&Co(this,this.container,t,e),wo(this,t,e),e.$controller=this,this.Ct=Oi.resolve(this.container),void 0!==this.Ct.created&&this.Ct.created.forEach(Do,this),this.At._t&&this.kt.created(this)}Pt(){this.Dt=this.r.compile(this.viewFactory.def,this.container,null),this.r.render(this,(this.nodes=this.r.createNodes(this.Dt)).findTargets(),this.Dt,void 0)}activate(t,e,s){switch(this.state){case $o:case Po:if(null!==e&&!e.isActive)return;this.state=Eo;break;case Ro:return;case Mo:throw Is(502,this.name);default:throw Is(503,this.name,function(t){const e=[];return(t&Eo)===Eo&&e.push("activating"),(t&Ro)===Ro&&e.push("activated"),(t&No)===No&&e.push("deactivating"),(t&Po)===Po&&e.push("deactivated"),(t&Oo)===Oo&&e.push("released"),(t&Mo)===Mo&&e.push("disposed"),0===e.length?"none":e.join("|")}(this.state))}switch(this.parent=e,this.vmKind){case xo:this.scope.parent=s??null;break;case Io:this.scope=s??null;break;case Ao:if(null==s)throw Is(504,this.name);this.hasLockedScope||(this.scope=s)}let i;return this.$initiator=t,this.qt(),this.vmKind!==Ao&&null!=this.Ct.binding&&(i=(0,n.jY)(...this.Ct.binding.map(qo,this))),this.At.Ft&&(i=(0,n.jY)(i,this.kt.binding(this.$initiator,this.parent))),os(i)?(this.Ot(),i.then((()=>{this.Bt=!0,this.state!==Eo?this.Ht():this.bind()})).catch((t=>{this.Vt(t)})),this.$promise):(this.Bt=!0,this.bind(),this.$promise)}bind(){let t,e=0,s=0;if(null!==this.bindings)for(e=0,s=this.bindings.length;s>e;)this.bindings[e].bind(this.scope),++e;if(this.vmKind!==Ao&&null!=this.Ct.bound&&(t=(0,n.jY)(...this.Ct.bound.map(Uo,this))),this.At.$t&&(t=(0,n.jY)(t,this.kt.bound(this.$initiator,this.parent))),os(t))return this.Ot(),void t.then((()=>{this.isBound=!0,this.state!==Eo?this.Ht():this.Nt()})).catch((t=>{this.Vt(t)}));this.isBound=!0,this.Nt()}jt(...t){switch(this.mountTarget){case uo:this.host.append(...t);break;case po:this.shadowRoot.append(...t);break;case fo:{let e=0;for(;e<t.length;++e)this.location.parentNode.insertBefore(t[e],this.location);break}}}Nt(){if(null!==this.hostController)switch(this.mountTarget){case uo:case po:this.hostController.jt(this.host);break;case fo:this.hostController.jt(this.location.$start,this.location)}switch(this.mountTarget){case uo:this.nodes.appendTo(this.host,null!=this.definition&&this.definition.enhance);break;case po:{const t=this.container;(t.has(to,!1)?t.get(to):t.get(eo)).applyTo(this.shadowRoot),this.nodes.appendTo(this.shadowRoot);break}case fo:this.nodes.insertBefore(this.location)}let t,e=0;if(this.vmKind!==Ao&&null!=this.Ct.attaching&&(t=(0,n.jY)(...this.Ct.attaching.map(Wo,this))),this.At.Wt&&(t=(0,n.jY)(t,this.kt.attaching(this.$initiator,this.parent))),os(t)&&(this.Ot(),this.qt(),t.then((()=>{this.Ht()})).catch((t=>{this.Vt(t)}))),null!==this.children)for(;e<this.children.length;++e)this.children[e].activate(this.$initiator,this,this.scope);this.Ht()}deactivate(t,e){let s;switch(this.state&~Oo){case Ro:this.state=No;break;case Eo:this.state=No,s=this.$promise?.catch(n.lQ);break;case $o:case Po:case Mo:case Po|Mo:return;default:throw Is(505,this.name,this.state)}this.$initiator=t,t===this&&this.Ut();let i,r=0;if(null!==this.children)for(r=0;r<this.children.length;++r)this.children[r].deactivate(t,this);return(0,n.ui)(s,(()=>{if(this.isBound&&(this.vmKind!==Ao&&null!=this.Ct.detaching&&(i=(0,n.jY)(...this.Ct.detaching.map(Ko,this))),this.At.zt&&(i=(0,n.jY)(i,this.kt.detaching(this.$initiator,this.parent)))),os(i)&&(this.Ot(),t.Ut(),i.then((()=>{t.Gt()})).catch((e=>{t.Vt(e)}))),null===t.head?t.head=this:t.tail.next=this,t.tail=this,t===this)return this.Gt(),this.$promise}))}removeNodes(){switch(this.vmKind){case xo:case Ao:this.nodes.remove(),this.nodes.unlink()}if(null!==this.hostController)switch(this.mountTarget){case uo:case po:this.host.remove();break;case fo:this.location.$start.remove(),this.location.remove()}}unbind(){let t=0;if(null!==this.bindings)for(;t<this.bindings.length;++t)this.bindings[t].unbind();switch(this.parent=null,this.vmKind){case Io:this.scope=null;break;case Ao:this.hasLockedScope||(this.scope=null),(this.state&Oo)!==Oo||this.viewFactory.tryReturnToCache(this)||this.$initiator!==this||this.dispose();break;case xo:this.scope.parent=null}this.state=Po,this.$initiator=null,this.Kt()}Ot(){void 0===this.$promise&&(this.$promise=new Promise(((t,e)=>{this.$resolve=t,this.$reject=e})),this.$initiator!==this&&this.parent.Ot())}Kt(){void 0!==this.$promise&&(zo=this.$resolve,this.$resolve=this.$reject=this.$promise=void 0,zo(),zo=void 0)}Vt(t){void 0!==this.$promise&&(Go=this.$reject,this.$resolve=this.$reject=this.$promise=void 0,Go(t),Go=void 0),this.$initiator!==this&&this.parent.Vt(t)}qt(){++this.Rt,this.$initiator!==this&&this.parent.qt()}Ht(){if(this.state!==Eo)return--this.Rt,this.Kt(),void(this.$initiator!==this&&this.parent.Ht());if(0==--this.Rt){if(this.vmKind!==Ao&&null!=this.Ct.attached&&(Jo=(0,n.jY)(...this.Ct.attached.map(_o,this))),this.At.Xt&&(Jo=(0,n.jY)(Jo,this.kt.attached(this.$initiator))),os(Jo))return this.Ot(),Jo.then((()=>{this.state=Ro,this.Kt(),this.$initiator!==this&&this.parent.Ht()})).catch((t=>{this.Vt(t)})),void(Jo=void 0);Jo=void 0,this.state=Ro,this.Kt()}this.$initiator!==this&&this.parent.Ht()}Ut(){++this.Tt}Gt(){if(0==--this.Tt){this.Qt(),this.removeNodes();let t,e=this.$initiator.head;for(;null!==e;)e!==this&&(e.debug&&e.logger.trace("detach()"),e.removeNodes()),e.Bt&&(e.vmKind!==Ao&&null!=e.Ct.unbinding&&(t=(0,n.jY)(...e.Ct.unbinding.map(Qo,e))),e.At.Yt&&(e.debug&&e.logger.trace("unbinding()"),t=(0,n.jY)(t,e.viewModel.unbinding(e.$initiator,e.parent)))),os(t)&&(this.Ot(),this.Qt(),t.then((()=>{this.Zt()})).catch((t=>{this.Vt(t)}))),t=void 0,e=e.next;this.Zt()}}Qt(){++this.Et}Zt(){if(0==--this.Et){let t=this.$initiator.head,e=null;for(;null!==t;)t!==this&&(t.Bt=!1,t.isBound=!1,t.unbind()),e=t.next,t.next=null,t=e;this.head=this.tail=null,this.Bt=!1,this.isBound=!1,this.unbind()}}addBinding(t){null===this.bindings?this.bindings=[t]:this.bindings[this.bindings.length]=t}addChild(t){null===this.children?this.children=[t]:this.children[this.children.length]=t}is(t){switch(this.vmKind){case Io:case xo:return this.definition.name===t;case Ao:return this.viewFactory.name===t}}lockScope(t){this.scope=t,this.hasLockedScope=!0}setHost(t){return this.vmKind===xo&&(Xo(t,Sa,this),Xo(t,this.definition.key,this)),this.host=t,this.mountTarget=uo,this}setShadowRoot(t){return this.vmKind===xo&&(Xo(t,Sa,this),Xo(t,this.definition.key,this)),this.shadowRoot=t,this.mountTarget=po,this}setLocation(t){return this.vmKind===xo&&(Xo(t,Sa,this),Xo(t,this.definition.key,this)),this.location=t,this.mountTarget=fo,this}release(){this.state|=Oo}dispose(){(this.state&Mo)!==Mo&&(this.state|=Mo,this.At.Jt&&this.kt.dispose(),null!==this.children&&(this.children.forEach(Fo),this.children=null),this.hostController=null,this.scope=null,this.nodes=null,this.location=null,this.viewFactory=null,null!==this.kt&&(co.delete(this.kt),this.kt=null),this.kt=null,this.host=null,this.shadowRoot=null,this.container.disposeResolvers())}accept(t){if(!0===t(this))return!0;if(this.At.te&&!0===this.kt.accept(t))return!0;if(null!==this.children){const{children:e}=this;for(let s=0,i=e.length;s<i;++s)if(!0===e[s].accept(t))return!0}}}const co=new WeakMap,lo=0,uo=1,po=2,fo=3,go=ts({none:lo,host:uo,shadowRoot:po,location:fo}),mo={optional:!0},vo=(0,n.HN)(k);function wo(t,e,s){const i=e.bindables,r=ss(i),o=r.length,a=t.container.get(De);if(o>0)for(let e=0;e<o;++e){const o=r[e],h=i[o],c=h.callback,l=a.getObserver(s,o);if(h.set!==n.lQ&&!0!==l.useCoercer?.(h.set,t.coercion))throw Is(507,o);if(null!=s[c]||null!=s.propertyChanged){const e=(e,i)=>{t.isBound&&(s[c]?.(e,i),s.propertyChanged?.(o,e,i))};if(!0!==l.useCallback?.(e))throw Is(508,o)}}}const bo=new Map,yo=t=>{let e=bo.get(t);return null==e&&(e=new i.DC(t,0),bo.set(t,e)),e};function Co(t,e,s,n){const r=e.get(De),o=e.get(i.JW),a=s.watches,h=t.vmKind===xo?t.scope:At.create(n,null,!0),c=a.length;let l,u,d,p=0;for(;c>p;++p){if(({expression:l,callback:u}=a[p]),u=hs(u)?u:Reflect.get(n,u),!hs(u))throw Is(506,u);hs(l)?t.addBinding(new oo(n,r,l,u,!0)):(d=ls(l)?o.parse(l,ys):yo(l),t.addBinding(new ao(h,e,r,d,u)))}}function So(t){return(0,r.Gv)(t)&&Ia(t.constructor)}class ko{constructor(t){this.ee="define"in t,this.Lt="hydrating"in t,this.Mt="hydrated"in t,this._t="created"in t,this.Ft="binding"in t,this.$t="bound"in t,this.Wt="attaching"in t,this.Xt="attached"in t,this.zt="detaching"in t,this.Yt="unbinding"in t,this.Jt="dispose"in t,this.te="accept"in t}}ko.none=new ko({});const To={mode:"open"},xo="customElement",Io="customAttribute",Ao="synthetic",$o=0,Eo=1,Ro=2,No=4,Po=8,Oo=16,Mo=32,Bo=Hs("IController"),Lo=Hs("IHydrationContext");class jo{constructor(t,e,s){this.instruction=e,this.parent=s,this.controller=t}}function Fo(t){t.dispose()}function Do(t){t.instance.created(this.kt,this)}function Vo(t){t.instance.hydrating(this.kt,this)}function Ho(t){t.instance.hydrated(this.kt,this)}function qo(t){return t.instance.binding(this.kt,this.$initiator,this.parent)}function Uo(t){return t.instance.bound(this.kt,this.$initiator,this.parent)}function Wo(t){return t.instance.attaching(this.kt,this.$initiator,this.parent)}function _o(t){return t.instance.attached(this.kt,this.$initiator)}function Ko(t){return t.instance.detaching(this.kt,this.$initiator,this.parent)}function Qo(t){return t.instance.unbinding(this.kt,this.$initiator,this.parent)}let zo,Go,Jo;class Yo{}function Zo(t,e){return t.$au?.[e]??null}function Xo(t,e,s){(t.$au??=new Yo)[e]=s}const ta=Hs("INode"),ea=Hs("IRenderLocation"),sa=Hs("CssModules"),ia=new WeakMap;function na(t){if(ia.has(t))return ia.get(t);let e=0,s=t.nextSibling;for(;null!==s;){if(8===s.nodeType)switch(s.textContent){case"au-start":++e;break;case"au-end":if(0==e--)return s}s=s.nextSibling}if(null===t.parentNode&&11===t.nodeType){const e=Aa(t,{optional:!0});if(null==e)return null;if(e.mountTarget===go.shadowRoot)return na(e.host)}return t.parentNode}function ra(t){if(oa(t))return t;const e=t.ownerDocument.createComment("au-end"),s=e.$start=t.ownerDocument.createComment("au-start"),i=t.parentNode;return null!==i&&(i.replaceChild(e,t),i.insertBefore(s,e)),e}function oa(t){return"au-end"===t.textContent}class aa{get firstChild(){return this.ie}get lastChild(){return this.se}constructor(t,e){this.platform=t,this.next=void 0,this.ne=!1,this.re=!1,this.ref=null;const s=(this.f=e).querySelectorAll("au-m");let i,n,r=0,o=s.length,a=this.t=Array(o);for(;o>r;)n=s[r],i=n.nextSibling,n.remove(),8===i.nodeType&&(n=i,(i=i.nextSibling).$start=n),a[r]=i,++r;const h=e.childNodes,c=this.childNodes=Array(o=h.length);for(r=0;o>r;)c[r]=h[r],++r;this.ie=e.firstChild,this.se=e.lastChild}findTargets(){return this.t}insertBefore(t){if(this.re&&this.ref)this.addToLinked();else{const e=t.parentNode;if(this.ne){let s,i=this.ie;const n=this.se;for(;null!=i&&(s=i.nextSibling,e.insertBefore(i,t),i!==n);)i=s}else this.ne=!0,t.parentNode.insertBefore(this.f,t)}}appendTo(t,e=!1){if(this.ne){let e,s=this.ie;const i=this.se;for(;null!=s&&(e=s.nextSibling,t.appendChild(s),s!==i);)s=e}else this.ne=!0,e||t.appendChild(this.f)}remove(){if(this.ne){this.ne=!1;const t=this.f,e=this.se;let s,i=this.ie;for(;null!==i&&(s=i.nextSibling,t.appendChild(i),i!==e);)i=s}}addToLinked(){const t=this.ref,e=t.parentNode;if(this.ne){let s,i=this.ie;const n=this.se;for(;null!=i&&(s=i.nextSibling,e.insertBefore(i,t),i!==n);)i=s}else this.ne=!0,e.insertBefore(this.f,t)}unlink(){this.re=!1,this.next=void 0,this.ref=void 0}link(t){this.re=!0,oa(t)?this.ref=t:(this.next=t,this.oe())}oe(){void 0!==this.next?this.ref=this.next.firstChild:this.ref=void 0}}const ha=Hs("IWindow",(t=>t.callback((t=>t.get(bi).window)))),ca=Hs("ILocation",(t=>t.callback((t=>t.get(ha).location)))),la=Hs("IHistory",(t=>t.callback((t=>t.get(ha).history)))),ua=(t,e,s)=>(_s(t,e.HTMLElement,_s(t,e.Element,_s(t,ta,new n.JF("ElementResolver",s)))),t);function da(t){return function(e,s){return s.addInitializer((function(){xa(t,this)})),e}}const pa=new WeakMap;class fa{get kind(){return Ks}constructor(t,e,s,i,n,r,o,a,h,c,l,u,d,p,f,g,m,v,w){this.Type=t,this.name=e,this.aliases=s,this.key=i,this.cache=n,this.capture=r,this.template=o,this.instructions=a,this.dependencies=h,this.injectable=c,this.needsCompile=l,this.surrogates=u,this.bindables=d,this.containerless=p,this.shadowOptions=f,this.hasSlots=g,this.enhance=m,this.watches=v,this.processContent=w}static create(t,e=null){if(null===e){const s=t;if(ls(s))throw Is(761,t);const i=(0,n.M6)("name",s,Ta);return e=hs(s.Type)?s.Type:Ra((0,n.fL)(i)),new fa(e,i,(0,n.TR)(s.aliases),(0,n.M6)("key",s,(()=>ka(i))),(0,n.M6)("cache",s,ma),(0,n.nf)("capture",s,e,wa),(0,n.M6)("template",s,va),(0,n.TR)(s.instructions),(0,n.TR)($a(e,"dependencies"),s.dependencies),(0,n.M6)("injectable",s,va),(0,n.M6)("needsCompile",s,ba),(0,n.TR)(s.surrogates),Fs.from($a(e,"bindables"),s.bindables),(0,n.nf)("containerless",s,e,wa),(0,n.M6)("shadowOptions",s,va),(0,n.M6)("hasSlots",s,wa),(0,n.M6)("enhance",s,wa),(0,n.M6)("watches",s,ya),(0,n.fv)("processContent",e,va))}if(ls(t))return new fa(e,t,(0,n.TR)($a(e,"aliases"),e.aliases),ka(t),(0,n.fv)("cache",e,ma),(0,n.fv)("capture",e,wa),(0,n.fv)("template",e,va),(0,n.TR)($a(e,"instructions"),e.instructions),(0,n.TR)($a(e,"dependencies"),e.dependencies),(0,n.fv)("injectable",e,va),(0,n.fv)("needsCompile",e,ba),(0,n.TR)($a(e,"surrogates"),e.surrogates),Fs.from(...Fs.getAll(e),$a(e,"bindables"),e.bindables),(0,n.fv)("containerless",e,wa),(0,n.fv)("shadowOptions",e,va),(0,n.fv)("hasSlots",e,wa),(0,n.fv)("enhance",e,wa),(0,n.TR)(yi.getDefinitions(e),e.watches),(0,n.fv)("processContent",e,va));const s=(0,n.M6)("name",t,Ta);return new fa(e,s,(0,n.TR)($a(e,"aliases"),t.aliases,e.aliases),ka(s),(0,n.nf)("cache",t,e,ma),(0,n.nf)("capture",t,e,wa),(0,n.nf)("template",t,e,va),(0,n.TR)($a(e,"instructions"),t.instructions,e.instructions),(0,n.TR)($a(e,"dependencies"),t.dependencies,e.dependencies),(0,n.nf)("injectable",t,e,va),(0,n.nf)("needsCompile",t,e,ba),(0,n.TR)($a(e,"surrogates"),t.surrogates,e.surrogates),Fs.from(...Fs.getAll(e),$a(e,"bindables"),e.bindables,t.bindables),(0,n.nf)("containerless",t,e,wa),(0,n.nf)("shadowOptions",t,e,va),(0,n.nf)("hasSlots",t,e,wa),(0,n.nf)("enhance",t,e,wa),(0,n.TR)(t.watches,yi.getDefinitions(e),e.watches),(0,n.nf)("processContent",t,e,va))}static getOrCreate(t){if(t instanceof fa)return t;if(pa.has(t))return pa.get(t);const e=fa.create(t);return pa.set(t,e),Ms(e,e.Type,Sa),e}register(t,e){const s=this.Type,i="string"==typeof e?ka(e):this.key,n=this.aliases;t.has(i,!1)||t.register(t.has(s,!1)?null:qs(s,s),Us(s,i),...n.map((t=>Us(s,ka(t)))))}toString(){return`au:ce:${this.name}`}}const ga={name:void 0,searchParents:!1,optional:!1},ma=()=>0,va=()=>null,wa=()=>!1,ba=()=>!0,ya=()=>n.tR,Ca="custom-element",Sa=(0,n.r$)(Ca),ka=t=>`${Sa}:${t}`,Ta=(t=>()=>"unnamed-"+ ++t)(0),xa=(t,e)=>{const s=fa.create(t,e),i=s.Type;return Ms(s,i,Sa,n.n_),i},Ia=t=>hs(t)&&(Os(Sa,t)||t.$au?.type===Ca),Aa=(t,e=ga)=>{if(void 0===e.name&&!0!==e.searchParents){const s=Zo(t,Sa);if(null===s){if(!0===e.optional)return null;throw Is(762,t)}return s}if(void 0!==e.name){if(!0!==e.searchParents){const s=Zo(t,Sa);if(null===s)throw Is(763,t);return s.is(e.name)?s:void 0}let s=t,i=!1;for(;null!==s;){const t=Zo(s,Sa);if(null!==t&&(i=!0,t.is(e.name)))return t;s=na(s)}if(i)return;throw Is(764,t)}let s=t;for(;null!==s;){const t=Zo(s,Sa);if(null!==t)return t;s=na(s)}throw Is(765,t)},$a=(t,e)=>Ps(Ls(e),t),Ea=t=>{const e=Ps(Sa,t)??zs(t,Ca,fa.create);if(null==e)throw Is(760,t);return e},Ra=function(){const t={value:"",writable:!1,enumerable:!1,configurable:!0},e={};return function(s,i=e){const n=class{};return t.value=s,ps(n,"name",t),i!==e&&es(n.prototype,i),n}}(),Na=ts({name:Sa,keyFrom:ka,isType:Ia,for:Aa,define:xa,getDefinition:Ea,annotate:(t,e,s)=>{Ms(s,t,Ls(e))},getAnnotation:$a,generateName:Ta,createInjectable:()=>{const t={$isInterface:!1,register:()=>({$isResolver:!0,resolve:(e,s)=>s.has(t,!0)?s.get(t):null})};return t},generateType:Ra,find(t,e){const s=t.find(Ca,e);return null==s?null:Ps(Sa,s)??zs(s,Ca,fa.create)??null}}),Pa=Hs("IAppRoot");class Oa{get controller(){return this.P}constructor(t,e,s,i=!1){this.config=t,this.container=e,this.le=void 0,this.ae=i;const r=this.host=t.host;s.prepare(this),ua(e,this.platform=this.he(e,r),r),this.le=(0,n.ui)(this.ce("creating"),(()=>{0!=!t.allowActionlessForm&&r.addEventListener("submit",(t=>{const e=t.target,s=(e.getAttribute("action")?.length??0)>0;"FORM"!==e.tagName||s||t.preventDefault()}),!1);const s=i?e:e.createChild(),o=t.component;let a;hs(o)?(a=s.invoke(o),Ws(o,a)):a=t.component;const h={hydrate:!1,projections:null},c=i?fa.create({name:Ta(),template:this.host,enhance:!0}):void 0,l=this.P=ho.$el(s,a,r,h,c);return l.hE(h,null),(0,n.ui)(this.ce("hydrating"),(()=>(l.hS(null),(0,n.ui)(this.ce("hydrated"),(()=>{l.hC(),this.le=void 0})))))}))}activate(){return(0,n.ui)(this.le,(()=>(0,n.ui)(this.ce("activating"),(()=>(0,n.ui)(this.P.activate(this.P,null,void 0),(()=>this.ce("activated")))))))}deactivate(){return(0,n.ui)(this.ce("deactivating"),(()=>(0,n.ui)(this.P.deactivate(this.P,null),(()=>this.ce("deactivated")))))}ce(t){const e=this.container,s=this.ae&&!e.has(gi,!1)?[]:e.getAll(gi);return(0,n.jY)(...s.reduce(((e,s)=>(s.slot===t&&e.push(s.run()),e)),[]))}he(t,e){let s;if(t.has(bi,!1))s=t.get(bi);else{if(null===e.ownerDocument.defaultView)throw Is(769);s=new Qe.s(e.ownerDocument.defaultView),t.register(Ws(bi,s))}return s}dispose(){this.P?.dispose()}}const Ma=Hs("IAurelia");class Ba{get isRunning(){return this.ir}get isStarting(){return this.ue}get isStopping(){return this.fe}get root(){if(null==this.de){if(null==this.next)throw Is(767);return this.next}return this.de}constructor(t=n.DI.createContainer()){if(this.container=t,this.ir=!1,this.ue=!1,this.fe=!1,this.de=void 0,this.next=void 0,this.me=void 0,this.ge=void 0,t.has(Ma,!0)||t.has(Ba,!0))throw Is(768);_s(t,Ma,new n.JF("IAurelia",this)),_s(t,Ba,new n.JF("Aurelia",this)),_s(t,Pa,this.pe=new n.JF("IAppRoot"))}register(...t){return this.container.register(...t),this}app(t){return this.next=new Oa(t,this.container,this.pe),this}enhance(t){const e=new Oa({host:t.host,component:t.component},t.container??this.container.createChild(),new n.JF("IAppRoot"),!0);return(0,n.ui)(e.activate(),(()=>e))}async waitForIdle(){const t=this.root.platform;await t.domWriteQueue.yield(),await t.domReadQueue.yield(),await t.taskQueue.yield()}start(t=this.next){if(null==t)throw Is(770);return os(this.me)?this.me:this.me=(0,n.ui)(this.stop(),(()=>(Reflect.set(t.host,"$aurelia",this),this.pe.prepare(this.de=t),this.ue=!0,(0,n.ui)(t.activate(),(()=>{this.ir=!0,this.ue=!1,this.me=void 0,this.ve(t,"au-started",t.host)})))))}stop(t=!1){if(os(this.ge))return this.ge;if(!0===this.ir){const e=this.de;return this.ir=!1,this.fe=!0,this.ge=(0,n.ui)(e.deactivate(),(()=>{Reflect.deleteProperty(e.host,"$aurelia"),t&&e.dispose(),this.de=void 0,this.pe.dispose(),this.fe=!1,this.ve(e,"au-stopped",e.host)}))}}dispose(){if(this.ir||this.fe)throw Is(771);this.container.dispose()}ve(t,e,s){const i=new t.platform.window.CustomEvent(e,{detail:this,bubbles:!0,cancelable:!0});s.dispatchEvent(i)}}class La{constructor(t,e,s,i){if(this.chars=t,this.repeat=e,this.isSymbol=s,this.isInverted=i,i)switch(t.length){case 0:this.has=this.be;break;case 1:this.has=this.we;break;default:this.has=this.ye}else switch(t.length){case 0:this.has=this.xe;break;case 1:this.has=this.Ce;break;default:this.has=this.ke}}equals(t){return this.chars===t.chars&&this.repeat===t.repeat&&this.isSymbol===t.isSymbol&&this.isInverted===t.isInverted}ke(t){return this.chars.includes(t)}Ce(t){return this.chars===t}xe(t){return!1}ye(t){return!this.chars.includes(t)}we(t){return this.chars!==t}be(t){return!0}}class ja{constructor(){this.parts=n.tR,this.Ae="",this.Be={},this.Se={}}get pattern(){const t=this.Ae;return""===t?null:t}set pattern(t){null==t?(this.Ae="",this.parts=n.tR):(this.Ae=t,this.parts=this.Se[t])}append(t,e){const s=this.Be;void 0===s[t]?s[t]=e:s[t]+=e}next(t){const e=this.Be;let s;void 0!==e[t]&&(s=this.Se,void 0===s[t]?s[t]=[e[t]]:s[t].push(e[t]),e[t]=void 0)}}class Fa{get Ae(){return this.Re?this.Te[0]:null}constructor(t,...e){this.charSpec=t,this.Ee=[],this.Ie=null,this.Re=!1,this.Te=e}findChild(t){const e=this.Ee,s=e.length;let i=null,n=0;for(;n<s;++n)if(i=e[n],t.equals(i.charSpec))return i;return null}append(t,e){const s=this.Te;s.includes(e)||s.push(e);let i=this.findChild(t);return null==i&&(i=new Fa(t,e),this.Ee.push(i),t.repeat&&i.Ee.push(i)),i}findMatches(t,e){const s=[],i=this.Ee,n=i.length;let r=0,o=null,a=0,h=0;for(;a<n;++a)if(o=i[a],o.charSpec.has(t))if(s.push(o),r=o.Te.length,h=0,o.charSpec.isSymbol)for(;h<r;++h)e.next(o.Te[h]);else for(;h<r;++h)e.append(o.Te[h],t);return s}}class Da{constructor(t){this.text=t;const e=this.Pe=t.length,s=this.Le=[];let i=0;for(;e>i;++i)s.push(new La(t[i],!1,!1,!1))}eachChar(t){const e=this.Pe,s=this.Le;let i=0;for(;e>i;++i)t(s[i])}}class Va{constructor(t){this.text="PART",this.De=new La(t,!0,!1,!0)}eachChar(t){t(this.De)}}class Ha{constructor(t){this.text=t,this.De=new La(t,!1,!0,!1)}eachChar(t){t(this.De)}}class qa{constructor(){this.statics=0,this.dynamics=0,this.symbols=0}}const Ua=Hs("ISyntaxInterpreter",(t=>t.singleton(Wa)));class Wa{constructor(){this.Me=new Fa(null),this._e=[this.Me]}add(t){t=t.slice(0).sort(((t,e)=>t.pattern>e.pattern?1:-1));const e=t.length;let s,i,n,r,o,a,h,c,l=0;for(;e>l;){for(s=this.Me,i=t[l],n=i.pattern,r=new qa,o=this.qe(i,r),a=o.length,h=t=>s=s.append(t,n),c=0;a>c;++c)o[c].eachChar(h);s.Ie=r,s.Re=!0,++l}}interpret(t){const e=new ja,s=t.length;let i,n=this._e,r=0;for(;r<s&&(n=this.Fe(n,t.charAt(r),e),0!==n.length);++r);return n=n.filter(_a),n.length>0&&(n.sort(Ka),i=n[0],i.charSpec.isSymbol||e.next(i.Ae),e.pattern=i.Ae),e}Fe(t,e,s){const i=[];let n=null;const r=t.length;let o=0;for(;o<r;++o)n=t[o],i.push(...n.findMatches(e,s));return i}qe(t,e){const s=[],i=t.pattern,n=i.length,r=t.symbols;let o=0,a=0,h="";for(;o<n;)h=i.charAt(o),0!==r.length&&r.includes(h)?o!==a?(s.push(new Da(i.slice(a,o))),++e.statics,a=o):(s.push(new Ha(i.slice(a,o+1))),++e.symbols,a=++o):o===a&&"P"===h&&"PART"===i.slice(o,o+4)?(a=o+=4,s.push(new Va(r)),++e.dynamics):++o;return a!==o&&(s.push(new Da(i.slice(a,o))),++e.statics),s}}function _a(t){return t.Re}function Ka(t,e){const s=t.Ie,i=e.Ie;return s.statics!==i.statics?i.statics-s.statics:s.dynamics!==i.dynamics?i.dynamics-s.dynamics:s.symbols!==i.symbols?i.symbols-s.symbols:0}class Qa{constructor(t,e,s,i,n=null){this.rawName=t,this.rawValue=e,this.target=s,this.command=i,this.parts=n}}const za=Hs("IAttributePattern"),Ga=Hs("IAttributeParser",(t=>t.singleton(Ja)));class Ja{constructor(){this.W={};const t=this.Oe=(0,n.hd)(Ua),e=Xa.findAll((0,n.hd)(n.p7)),s=this.Te={},i=e.reduce(((t,e)=>{const i=Ya(e.constructor);return i.forEach((t=>s[t.pattern]=e)),t.concat(i)}),n.tR);t.add(i)}parse(t,e){let s=this.W[t];null==s&&(s=this.W[t]=this.Oe.interpret(t));const i=s.pattern;return null==i?new Qa(t,e,t,null,null):this.Te[i][i](t,e,s.parts)}}const Ya=t=>Za.get(t)??n.tR,Za=new WeakMap,Xa=ts({name:(0,n.r$)("attribute-pattern"),define:(t,e)=>(Za.set(e,t),n.hb.define(e,(t=>{qs(za,e).register(t)}))),getPatternDefinitions:Ya,findAll:t=>t.root.getAll(za)});class th{"PART.PART"(t,e,s){return new Qa(t,e,s[0],s[1])}"PART.PART.PART"(t,e,s){return new Qa(t,e,`${s[0]}.${s[1]}`,s[2])}}Xa.define([{pattern:"PART.PART",symbols:"."},{pattern:"PART.PART.PART",symbols:"."}],th);class eh{ref(t,e,s){return new Qa(t,e,"element","ref")}"PART.ref"(t,e,s){let i=s[0];return"view-model"===i&&(i="component"),new Qa(t,e,i,"ref")}}Xa.define([{pattern:"ref",symbols:""},{pattern:"PART.ref",symbols:"."}],eh);class sh{"PART.trigger:PART"(t,e,s){return new Qa(t,e,s[0],"trigger",s)}"PART.capture:PART"(t,e,s){return new Qa(t,e,s[0],"capture",s)}}Xa.define([{pattern:"PART.trigger:PART",symbols:".:"},{pattern:"PART.capture:PART",symbols:".:"}],sh);Xa.define([{pattern:":PART",symbols:":"}],class{":PART"(t,e,s){return new Qa(t,e,s[0],"bind")}});Xa.define([{pattern:"@PART",symbols:"@"},{pattern:"@PART:PART",symbols:"@:"}],class{"@PART"(t,e,s){return new Qa(t,e,s[0],"trigger")}"@PART:PART"(t,e,s){return new Qa(t,e,s[0],"trigger",[s[0],"trigger",...s.slice(1)])}});class ih{"...$attrs"(t,e,s){return new Qa(t,e,"","...$attrs")}}Xa.define([{pattern:"...$attrs",symbols:""}],ih);class nh{constructor(t,e,s,i){this.Type=t,this.name=e,this.aliases=s,this.key=i}static create(t,e){let s,i;return ls(t)?(s=t,i={name:s}):(s=t.name,i=t),new nh(e,(0,n.c4)(hh(e,"name"),s),(0,n.TR)(hh(e,"aliases"),i.aliases,e.aliases),ah(s))}register(t,e){const s=this.Type,i="string"==typeof e?ah(e):this.key,n=this.aliases;t.has(i,!1)||t.register(t.has(s,!1)?null:qs(s,s),Us(s,i),...n.map((t=>Us(s,ah(t)))))}}const rh="binding-command",oh=(0,n.r$)(rh),ah=t=>`${oh}:${t}`,hh=(t,e)=>Ps(Ls(e),t),ch=ts({name:oh,keyFrom:ah,define(t,e){const s=nh.create(t,e),i=s.Type;return Ms(s,i,oh,n.n_),i},getAnnotation:hh,find(t,e){const s=t.find(rh,e);return null==s?null:Ps(oh,s)??zs(s,rh,nh.create)??null},get:(t,e)=>t.get((0,n.Zc)(ah(e)))});class lh{get ignoreAttr(){return!1}build(t,e,s){let i=t.attr.target,r=t.attr.rawValue;return null==t.bindable?i=s.map(t.node,i)??(0,n.xQ)(i):(""===r&&t.def.kind===Ks&&(r=(0,n.xQ)(i)),i=t.bindable.name),new zn(e.parse(r,ys),i,1)}}lh.$au={type:rh,name:"one-time"};class uh{get ignoreAttr(){return!1}build(t,e,s){let i=t.attr.target,r=t.attr.rawValue;return null==t.bindable?i=s.map(t.node,i)??(0,n.xQ)(i):(""===r&&t.def.kind===Ks&&(r=(0,n.xQ)(i)),i=t.bindable.name),new zn(e.parse(r,ys),i,2)}}uh.$au={type:rh,name:"to-view"};class dh{get ignoreAttr(){return!1}build(t,e,s){const i=t.attr;let r=i.target,o=i.rawValue;return null==t.bindable?r=s.map(t.node,r)??(0,n.xQ)(r):(""===o&&t.def.kind===Ks&&(o=(0,n.xQ)(r)),r=t.bindable.name),new zn(e.parse(o,ys),r,4)}}dh.$au={type:rh,name:"from-view"};class ph{get ignoreAttr(){return!1}build(t,e,s){const i=t.attr;let r=i.target,o=i.rawValue;return null==t.bindable?r=s.map(t.node,r)??(0,n.xQ)(r):(""===o&&t.def.kind===Ks&&(o=(0,n.xQ)(r)),r=t.bindable.name),new zn(e.parse(o,ys),r,6)}}ph.$au={type:rh,name:"two-way"};class fh{get ignoreAttr(){return!1}build(t,e,s){const i=t.attr,r=t.bindable;let o,a,h=i.target,c=i.rawValue;return null==r?(a=s.isTwoWay(t.node,h)?6:2,h=s.map(t.node,h)??(0,n.xQ)(h)):(""===c&&t.def.kind===Ks&&(c=(0,n.xQ)(h)),o=t.def.defaultBindingMode,a=8===r.mode||null==r.mode?null==o||8===o?2:o:r.mode,h=r.name),new zn(e.parse(c,ys),h,a)}}fh.$au={type:rh,name:"bind"};class gh{constructor(){this.He=(0,n.hd)(Ga)}get ignoreAttr(){return!1}build(t,e){const s=null===t.bindable?(0,n.xQ)(t.attr.target):t.bindable.name,i=e.parse(t.attr.rawValue,ws);let r=n.tR;if(i.semiIdx>-1){const e=t.attr.rawValue.slice(i.semiIdx+1),s=e.indexOf(":");if(s>-1){const t=e.slice(0,s).trim(),i=e.slice(s+1).trim(),n=this.He.parse(t,i);r=[new Zn(i,n.target,n.command)]}}return new Gn(i,s,r)}}gh.$au={type:rh,name:"for"};class mh{get ignoreAttr(){return!0}build(t,e){return new rr(e.parse(t.attr.rawValue,bs),t.attr.target,!1,t.attr.parts?.[2]??null)}}mh.$au={type:rh,name:"trigger"};class vh{get ignoreAttr(){return!0}build(t,e){return new rr(e.parse(t.attr.rawValue,bs),t.attr.target,!0,t.attr.parts?.[2]??null)}}vh.$au={type:rh,name:"capture"};class wh{get ignoreAttr(){return!0}build(t,e){return new cr(t.attr.target,e.parse(t.attr.rawValue,ys),t.attr.target)}}wh.$au={type:rh,name:"attr"};class bh{get ignoreAttr(){return!0}build(t,e){return new cr("style",e.parse(t.attr.rawValue,ys),t.attr.target)}}bh.$au={type:rh,name:"style"};class yh{get ignoreAttr(){return!0}build(t,e){return new cr("class",e.parse(t.attr.rawValue,ys),t.attr.target)}}yh.$au={type:rh,name:"class"};class Ch{get ignoreAttr(){return!0}build(t,e){return new Jn(e.parse(t.attr.rawValue,ys),t.attr.target)}}Ch.$au={type:rh,name:"ref"};class Sh{get ignoreAttr(){return!0}build(t){return new lr}}Sh.$au={type:rh,name:"...$attrs"};const kh=Hs("ISVGAnalyzer",(t=>t.singleton(Th)));class Th{isStandardSvgAttribute(t,e){return!1}}const xh=Hs("IAttrMapper",(t=>t.singleton(Ih)));class Ih{constructor(){this.fns=[],this.je=Ze(),this.We=Ze(),this.svg=(0,n.hd)(kh),this.useMapping({LABEL:{for:"htmlFor"},IMG:{usemap:"useMap"},INPUT:{maxlength:"maxLength",minlength:"minLength",formaction:"formAction",formenctype:"formEncType",formmethod:"formMethod",formnovalidate:"formNoValidate",formtarget:"formTarget",inputmode:"inputMode"},TEXTAREA:{maxlength:"maxLength"},TD:{rowspan:"rowSpan",colspan:"colSpan"},TH:{rowspan:"rowSpan",colspan:"colSpan"}}),this.useGlobalMapping({accesskey:"accessKey",contenteditable:"contentEditable",tabindex:"tabIndex",textcontent:"textContent",innerhtml:"innerHTML",scrolltop:"scrollTop",scrollleft:"scrollLeft",readonly:"readOnly"})}useMapping(t){let e,s,i,n;for(i in t)for(n in e=t[i],s=this.je[i]??=Ze(),e){if(void 0!==s[n])throw Ah(n,i);s[n]=e[n]}}useGlobalMapping(t){const e=this.We;for(const s in t){if(void 0!==e[s])throw Ah(s,"*");e[s]=t[s]}}useTwoWay(t){this.fns.push(t)}isTwoWay(t,e){return function(t,e){switch(t.nodeName){case"INPUT":switch(t.type){case"checkbox":case"radio":return"checked"===e;default:return"value"===e||"files"===e||"value-as-number"===e||"value-as-date"===e}case"TEXTAREA":case"SELECT":return"value"===e;default:switch(e){case"textcontent":case"innerhtml":return t.hasAttribute("contenteditable");case"scrolltop":case"scrollleft":return!0;default:return!1}}}(t,e)||this.fns.length>0&&this.fns.some((s=>s(t,e)))}map(t,e){return this.je[t.nodeName]?.[e]??this.We[e]??(rs(t,e,this.svg)?e:null)}}function Ah(t,e){return Is(719,t,e)}const $h=Ze();class Eh{static forNs(t){return $h[t]??=new Eh(t)}constructor(t){this.ns=t,this.type=Ts|xs}getValue(t,e){return t.getAttributeNS(this.ns,e)}setValue(t,e,s){null==t?e.removeAttributeNS(this.ns,s):e.setAttributeNS(this.ns,s,t)}}Jr(Eh);class Rh{constructor(){this.type=Ts|xs}getValue(t,e){return t.getAttribute(e)}setValue(t,e,s){null==t?e.removeAttribute(s):e.setAttribute(s,t)}}Jr(Rh);const Nh=new Rh,Ph={childList:!0,subtree:!0,characterData:!0};function Oh(t,e){return t===e}class Mh{constructor(t,e,s,i){this.type=Ts|ks|xs,this.v=void 0,this.ov=void 0,this.Ue=!1,this.ze=void 0,this.Ge=void 0,this.iO=!1,this.ft=!1,this.ut=t,this.oL=i,this.cf=s}getValue(){return this.iO?this.v:this.ut.multiple?function(t){const e=[];if(0===t.length)return e;const s=t.length;let i,n=0;for(;s>n;)i=t[n],i.selected&&(e[e.length]=Xe.call(i,"model")?i.model:i.value),++n;return e}(this.ut.options):this.ut.value}setValue(t){this.ov=this.v,this.v=t,this.Ue=t!==this.ov,this.Ke(t instanceof Array?t:null),this.wt()}wt(){this.Ue&&(this.Ue=!1,this.syncOptions())}handleCollectionChange(){this.syncOptions()}syncOptions(){const t=this.v,e=this.ut,s=as(t),i=e.matcher??Oh,n=e.options;let r=n.length;for(;r-- >0;){const e=n[r],o=Xe.call(e,"model")?e.model:e.value;e.selected=s?-1!==t.findIndex((t=>!!i(o,t))):!!i(o,t)}}syncValue(){const t=this.ut,e=t.options,s=e.length,i=this.v;let n=0;if(t.multiple){if(!(i instanceof Array))return!0;let r;const o=t.matcher||Oh,a=[];for(;n<s;)r=e[n],r.selected&&a.push(Xe.call(r,"model")?r.model:r.value),++n;let h;for(n=0;n<i.length;)h=i[n],-1===a.findIndex((t=>!!o(h,t)))?i.splice(n,1):++n;for(n=0;n<a.length;)h=a[n],-1===i.findIndex((t=>!!o(h,t)))&&i.push(h),++n;return!1}let r,o=null;for(;n<s;){if(r=e[n],r.selected){o=Xe.call(r,"model")?r.model:r.value;break}++n}return this.ov=this.v,this.v=o,!0}dt(){(this.Ge=Mn(this.ut,this.Xe.bind(this))).observe(this.ut,Ph),this.Ke(this.v instanceof Array?this.v:null),this.iO=!0}gt(){this.Ge.disconnect(),this.ze?.unsubscribe(this),this.Ge=this.ze=void 0,this.iO=!1}Ke(t){if(this.ze?.unsubscribe(this),this.ze=void 0,null!=t){if(!this.ut.multiple)throw new Error("AUR0654");(this.ze=this.oL.getArrayObserver(t)).subscribe(this)}}handleEvent(){this.syncValue()&&this.Qe()}Xe(t){this.syncOptions(),this.syncValue()&&this.Qe()}Qe(){Bh=this.ov,this.ov=this.v,this.subs.notify(this.v,Bh)}}let Bh,Lh;Gr(Mh),I(Mh);class jh{constructor(t){this.obj=t,this.type=Ts|xs,this.v="",this.ov="",this.styles={},this.version=0,this.Ue=!1}getValue(){return this.obj.style.cssText}setValue(t){this.v=t,this.Ue=t!==this.ov,this.wt()}Ye(t){const e=[],s=/url\([^)]+$/;let i,n,r,o,a=0,h="";for(;a<t.length;)i=t.indexOf(";",a),-1===i&&(i=t.length),h+=t.substring(a,i),a=i+1,s.test(h)?h+=";":(n=h.indexOf(":"),r=h.substring(0,n).trim(),o=h.substring(n+1).trim(),e.push([r,o]),h="");return e}Ze(t){let e,s;const i=[];for(s in t)if(e=t[s],null!=e)if(ls(e)){if(s.startsWith("--")){i.push([s,e]);continue}i.push([(0,n.kW)(s),e])}else i.push(...this.Je(e));return i}ti(t){const e=t.length;if(e>0){const s=[];let i=0;for(;e>i;++i)s.push(...this.Je(t[i]));return s}return n.tR}Je(t){return ls(t)?this.Ye(t):t instanceof Array?this.ti(t):t instanceof Object?this.Ze(t):n.tR}wt(){if(this.Ue){this.Ue=!1;const t=this.v,e=this.styles,s=this.Je(t);let i,n,r,o,a=this.version;this.ov=t;let h=0;const c=s.length;for(;h<c;++h)n=s[h],r=n[0],o=n[1],this.setProperty(r,o),e[r]=a;if(this.styles=e,this.version+=1,0===a)return;for(i in a-=1,e)Xe.call(e,i)&&e[i]===a&&this.obj.style.removeProperty(i)}}setProperty(t,e){let s="";null!=e&&hs(e.indexOf)&&e.includes("!important")&&(s="important",e=e.replace("!important","")),this.obj.style.setProperty(t,e,s)}bind(){this.v=this.ov=this.obj.style.cssText}}Jr(jh);class Fh{constructor(t,e,s){this.type=Ts|ks|xs,this.v="",this.ov="",this.Ue=!1,this.ft=!1,this.ut=t,this.k=e,this.cf=s}getValue(){return this.v}setValue(t){ds(t,this.v)||(this.ov=this.v,this.v=t,this.Ue=!0,this.cf.readonly||this.wt())}wt(){this.Ue&&(this.Ue=!1,this.ut[this.k]=this.v??this.cf.default,this.Qe())}handleEvent(){this.ov=this.v,this.v=this.ut[this.k],this.ov!==this.v&&(this.Ue=!1,this.Qe())}dt(){this.v=this.ov=this.ut[this.k]}Qe(){Lh=this.ov,this.ov=this.v,this.subs.notify(this.v,Lh)}}Gr(Fh),I(Fh);const Dh="http://www.w3.org/1999/xlink",Vh="http://www.w3.org/XML/1998/namespace",Hh="http://www.w3.org/2000/xmlns/",qh=es(Ze(),{"xlink:actuate":["actuate",Dh],"xlink:arcrole":["arcrole",Dh],"xlink:href":["href",Dh],"xlink:role":["role",Dh],"xlink:show":["show",Dh],"xlink:title":["title",Dh],"xlink:type":["type",Dh],"xml:lang":["lang",Vh],"xml:space":["space",Vh],xmlns:["xmlns",Hh],"xmlns:xlink":["xlink",Hh]}),Uh=new Be;Uh.type=Ts|xs;class Wh{static register(t){t.register(qs(this,this),Us(this,Ve))}constructor(){this.allowDirtyCheck=!0,this.ei=Ze(),this.ii=Ze(),this.si=Ze(),this.ni=Ze(),this.ri=(0,n.hd)(n.Nt),this.p=(0,n.hd)(bi),this.oi=(0,n.hd)(Ne),this.svg=(0,n.hd)(kh);const t=["change","input"],e={events:t,default:""};this.useConfig({INPUT:{value:e,valueAsNumber:{events:t,default:0},checked:{type:Qh,events:t},files:{events:t,readonly:!0}},SELECT:{value:{type:Mh,events:["change"],default:""}},TEXTAREA:{value:e}});const s={events:["change","input","blur","keyup","paste"],default:""},i={events:["scroll"],default:0};this.useConfigGlobal({scrollTop:i,scrollLeft:i,textContent:s,innerHTML:s}),this.overrideAccessorGlobal("css","style","class"),this.overrideAccessor({INPUT:["value","checked","model"],SELECT:["value"],TEXTAREA:["value"]})}handles(t,e){return t instanceof this.p.Node}useConfig(t,e,s){const i=this.ei;let n;if(ls(t))n=i[t]??=Ze(),null==n[e]?n[e]=s:_h(t,e);else for(const s in t){n=i[s]??=Ze();const r=t[s];for(e in r)null==n[e]?n[e]=r[e]:_h(s,e)}}useConfigGlobal(t,e){const s=this.ii;if("object"==typeof t)for(const e in t)null==s[e]?s[e]=t[e]:_h("*",e);else null==s[t]?s[t]=e:_h("*",t)}getAccessor(t,e,s){if(e in this.ni||e in(this.si[t.tagName]??n.vB))return this.getObserver(t,e,s);switch(e){case"src":case"href":case"role":case"minLength":case"maxLength":case"placeholder":case"size":case"pattern":case"title":case"popovertarget":case"popovertargetaction":return Nh;default:{const s=qh[e];return void 0!==s?Eh.forNs(s[1]):rs(t,e,this.svg)?Nh:Uh}}}overrideAccessor(t,e){let s;if(ls(t))s=this.si[t]??=Ze(),s[e]=!0;else for(const e in t)for(const i of t[e])s=this.si[e]??=Ze(),s[i]=!0}overrideAccessorGlobal(...t){for(const e of t)this.ni[e]=!0}getNodeObserverConfig(t,e){return this.ei[t.tagName]?.[e]??this.ii[e]}getNodeObserver(t,e,s){const i=this.ei[t.tagName]?.[e]??this.ii[e];let n;return null!=i?(n=new(i.type??Fh)(t,e,i,s,this.ri),n.doNotCache||(Ke(t)[e]=n),n):null}getObserver(t,e,s){switch(e){case"class":return new Yr(t);case"css":case"style":return new jh(t)}const i=this.getNodeObserver(t,e,s);if(null!=i)return i;const n=qh[e];if(void 0!==n)return Eh.forNs(n[1]);if(rs(t,e,this.svg))return Nh;if(e in t.constructor.prototype){if(this.allowDirtyCheck)return this.oi.createProperty(t,e);throw Is(652,e)}return new Le(t,e)}}function _h(t,e){throw Is(653,t,e)}function Kh(t,e){return t===e}class Qh{constructor(t,e,s,i){this.type=Ts|ks|xs,this.v=void 0,this.ov=void 0,this.li=void 0,this.ai=void 0,this.ft=!1,this.ut=t,this.oL=i,this.cf=s}getValue(){return this.v}setValue(t){const e=this.v;t!==e&&(this.v=t,this.ov=e,this.hi(),this.ui(),this.Qe())}handleCollectionChange(){this.ui()}handleChange(t,e){this.ui()}ui(){const t=this.v,e=this.ut,s=Xe.call(e,"model")?e.model:e.value,i="radio"===e.type,n=void 0!==e.matcher?e.matcher:Kh;if(i)e.checked=!!n(t,s);else if(!0===t)e.checked=!0;else{let i=!1;if(as(t))i=-1!==t.findIndex((t=>!!n(t,s)));else if(t instanceof Set){for(const e of t)if(n(e,s)){i=!0;break}}else if(t instanceof Map)for(const e of t){const t=e[0],r=e[1];if(n(t,s)&&!0===r){i=!0;break}}e.checked=i}}handleEvent(){let t=this.ov=this.v;const e=this.ut,s=Xe.call(e,"model")?e.model:e.value,i=e.checked,n=void 0!==e.matcher?e.matcher:Kh;if("checkbox"===e.type){if(as(t)){const e=t.findIndex((t=>!!n(t,s)));return void(i&&-1===e?t.push(s):i||-1===e||t.splice(e,1))}if(t instanceof Set){const e={};let r=e;for(const e of t)if(!0===n(e,s)){r=e;break}return void(i&&r===e?t.add(s):i||r===e||t.delete(r))}if(t instanceof Map){let e;for(const i of t){const t=i[0];if(!0===n(t,s)){e=t;break}}return void t.set(e,i)}t=i}else{if(!i)return;t=s}this.v=t,this.Qe()}dt(){this.hi()}gt(){this.li?.unsubscribe(this),this.ai?.unsubscribe(this),this.li=this.ai=void 0}Qe(){zh=this.ov,this.ov=this.v,this.subs.notify(this.v,zh)}hi(){const t=this.ut;(this.ai??=t.$observers?.model??t.$observers?.value)?.subscribe(this),this.li?.unsubscribe(this),this.li=void 0,"checkbox"===t.type&&(this.li=function(t,e){return t instanceof Array?e.getArrayObserver(t):t instanceof Map?e.getMapObserver(t):t instanceof Set?e.getSetObserver(t):void 0}(this.v,this.oL))?.subscribe(this)}}let zh;Gr(Qh),I(Qh);class Gh{bind(t,e){if(!(e instanceof fn))throw Is(9994,e);e.useTargetObserver(Nh)}}Gh.$au={type:Js,name:"attr"};class Jh{bind(t,e){if(!(e instanceof bn))throw Is(801);e.self=!0}unbind(t,e){e.self=!1}}Jh.$au={type:Js,name:"self"};class Yh{constructor(){this.oL=(0,n.hd)(De),this.fi=(0,n.hd)(Ve)}bind(t,e,...s){if(!(this.fi instanceof Wh))throw Is(9993);if(0===s.length)throw Is(802);if(!(e instanceof fn&&4&e.mode))throw Is(803);const i=this.fi.getNodeObserverConfig(e.target,e.targetProperty);if(null==i)throw Is(9992,e);const n=this.fi.getNodeObserver(e.target,e.targetProperty,this.oL);n.useConfig({readonly:i.readonly,default:i.default,events:s}),e.useTargetObserver(n)}}Yh.$au={type:Js,name:"updateTrigger"};class Zh{constructor(){this.elseFactory=void 0,this.elseView=void 0,this.ifView=void 0,this.view=void 0,this.value=!1,this.cache=!0,this.pending=void 0,this.di=!1,this.mi=0,this.gi=(0,n.hd)(An),this.l=(0,n.hd)(ea)}attaching(t,e){return this.pi(this.value)}detaching(t,e){return this.di=!0,(0,n.ui)(this.pending,(()=>{this.di=!1,this.pending=void 0,this.view?.deactivate(t,this.$controller)}))}valueChanged(t,e){if(this.$controller.isActive)return(t=!!t)!=(e=!!e)?this.pi(t):void 0}pi(t){const e=this.view,s=this.$controller,i=this.mi++,r=()=>!this.di&&this.mi===i+1;let o;return(0,n.ui)(this.pending,(()=>this.pending=(0,n.ui)(e?.deactivate(e,s),(()=>{if(r()&&(o=this.view=t?this.ifView=this.cache&&null!=this.ifView?this.ifView:this.gi.create():this.elseView=this.cache&&null!=this.elseView?this.elseView:this.elseFactory?.create(),null!=o))return o.setLocation(this.l),(0,n.ui)(o.activate(o,s,s.scope),(()=>{r()&&(this.pending=void 0)}))}))))}dispose(){this.ifView?.dispose(),this.elseView?.dispose(),this.ifView=this.elseView=this.view=void 0}accept(t){if(!0===this.view?.accept(t))return!0}}Zh.$au={type:Si,name:"if",isTemplateController:!0,bindables:{value:!0,cache:{set:t=>""===t||!!t&&"false"!==t}}};class Xh{constructor(){this.f=(0,n.hd)(An)}link(t,e,s,i){const n=t.children,r=n[n.length-1];if(r instanceof Zh)r.elseFactory=this.f;else{if(!(r.viewModel instanceof Zh))throw Is(810);r.viewModel.elseFactory=this.f}}}function tc(t){t.dispose()}Xh.$au={type:"custom-attribute",name:"else",isTemplateController:!0};const ec=["BindingBehavior","ValueConverter"];class sc{constructor(t,e,s,i,n){this.views=[],this.vi=[],this.key=null,this.bi=new Map,this.wi=new Map,this.yi=void 0,this.xi=!1,this.Ci=!1,this.ki=null,this.Ai=void 0,this.Bi=!1;const r=t.props[0].props[0];if(void 0!==r){const{to:t,value:s,command:i}=r;if("key"!==t)throw Is(776,t);if(null===i)this.key=s;else{if("bind"!==i)throw Is(775,i);this.key=e.parse(s,ys)}}this.l=s,this.Si=i,this.f=n}binding(t,e){const s=this.Si.bindings,i=s.length;let n,r,o=0;for(;i>o;++o)if(n=s[o],n.target===this&&"items"===n.targetProperty){r=this.forOf=n.ast,this.Ri=n;let t=r.iterable;for(;null!=t&&ec.includes(t.$kind);)t=t.expression,this.xi=!0;this.ki=t;break}this.Ti();const a=r.declaration;(this.Bi="ArrayDestructuring"===a.$kind||"ObjectDestructuring"===a.$kind)||(this.local=$s(a,this.$controller.scope,n,null))}attaching(t,e){return this.Ei(),this.Ii(t)}detaching(t,e){return this.Ti(),this.Pi(t)}unbinding(t,e){this.wi.clear(),this.bi.clear()}itemsChanged(){this.$controller.isActive&&(this.Ti(),this.Ei(),this.Li(this.items,void 0))}handleCollectionChange(t,e){const s=this.$controller;if(s.isActive){if(this.xi){if(this.Ci)return;return this.Ci=!0,this.items=$s(this.forOf.iterable,s.scope,this.Ri,null),void(this.Ci=!1)}this.Ei(),this.Li(t,e)}}Li(t,e){const s=this.views;this.vi=s.slice();const i=s.length,r=this.key,o=null!==r;if(o||void 0===e){const t=this.local,n=this.Ai,a=n.length,h=this.forOf,c=h.declaration,l=this.Ri,u=this.Bi;e=x(a);let d=0;if(0===i)for(;d<a;++d)e[d]=-2;else if(0===a)if(u)for(d=0;d<i;++d)e.deletedIndices.push(d),e.deletedItems.push($s(c,s[d].scope,l,null));else for(d=0;d<i;++d)e.deletedIndices.push(d),e.deletedItems.push(s[d].scope.bindingContext[t]);else{const p=Array(i);if(u)for(d=0;d<i;++d)p[d]=$s(c,s[d].scope,l,null);else for(d=0;d<i;++d)p[d]=s[d].scope.bindingContext[t];let f,g,m,v,w=0;const b=i-1,y=a-1,C=new Map,S=new Map,k=this.bi,T=this.wi,x=this.$controller.scope;d=0;t:{for(;;){if(o?(f=p[d],g=n[d],m=fc(k,r,f,gc(T,f,h,x,l,t,u),l),v=fc(k,r,g,gc(T,g,h,x,l,t,u),l)):(f=m=mc(p[d],d),g=v=mc(n[d],d)),m!==v){k.set(f,m),k.set(g,v);break}if(++d,d>b||d>y)break t}if(b===y)for(w=y;;){if(o?(f=p[w],g=n[w],m=fc(k,r,f,gc(T,f,h,x,l,t,u),l),v=fc(k,r,g,gc(T,g,h,x,l,t,u),l)):(f=m=mc(p[d],d),g=v=mc(n[d],d)),m!==v){k.set(f,m),k.set(g,v);break}if(--w,d>w)break t}}const I=d,A=d;for(d=A;d<=y;++d)k.has(g=o?n[d]:mc(n[d],d))?v=k.get(g):(v=o?fc(k,r,g,gc(T,g,h,x,l,t,u),l):g,k.set(g,v)),S.set(v,d);for(d=I;d<=b;++d)m=k.has(f=o?p[d]:mc(p[d],d))?k.get(f):o?fc(k,r,f,s[d].scope,l):f,C.set(m,d),S.has(m)?e[S.get(m)]=d:(e.deletedIndices.push(d),e.deletedItems.push(f));for(d=A;d<=y;++d)C.has(k.get(o?n[d]:mc(n[d],d)))||(e[d]=-2);C.clear(),S.clear()}}if(void 0===e){const t=(0,n.ui)(this.Pi(null),(()=>this.Ii(null)));os(t)&&t.catch(us)}else if(e.deletedIndices.length>0){const t=(0,n.ui)(this.Di(e),(()=>this.Mi(i,e)));os(t)&&t.catch(us)}else this.Mi(i,e)}Ti(){const t=this.$controller.scope;let e,s=this._i,i=this.xi;i&&(s=this._i=$s(this.ki,t,this.Ri,null)??null,i=this.xi=!ds(this.items,s));const n=this.yi;this.$controller.isActive?(e=this.yi=(t=>{let e;return u(t)?e=z(t):p(t)?e=yt(t):d(t)&&(e=at(t)),e})(i?s:this.items),n!==e&&(n?.unsubscribe(this),e?.subscribe(this))):(n?.unsubscribe(this),this.yi=void 0)}Ei(){const{items:t}=this;if(as(t))return void(this.Ai=t);const e=[];cc(t,((t,s)=>{e[s]=t})),this.Ai=e}Ii(t){let e,s,i,n;const{$controller:r,f:o,local:a,l:h,items:c,wi:l,Ri:u,forOf:d,Bi:p}=this,f=r.scope,g=hc(c),m=this.views=Array(g);if(cc(c,((c,v)=>{i=m[v]=o.create().setLocation(h),i.nodes.unlink(),n=gc(l,c,d,f,u,a,p),oc(n.overrideContext,v,g),s=i.activate(t??i,r,n),os(s)&&(e??(e=[])).push(s)})),void 0!==e)return 1===e.length?e[0]:Promise.all(e)}Pi(t){let e,s,i,n=0;const{views:r,$controller:o}=this,a=r.length;for(;a>n;++n)i=r[n],i.release(),s=i.deactivate(t??i,o),os(s)&&(e??(e=[])).push(s);if(void 0!==e)return 1===e.length?e[0]:Promise.all(e)}Di(t){let e,s,i;const{$controller:n,views:r}=this,o=t.deletedIndices.slice().sort(vc),a=o.length;let h=0;for(;a>h;++h)i=r[o[h]],i.release(),s=i.deactivate(i,n),os(s)&&(e??(e=[])).push(s);for(h=0;a>h;++h)r.splice(o[h]-h,1);if(void 0!==e)return 1===e.length?e[0]:Promise.all(e)}Mi(t,e){let s,i,n,r,o=0;const{$controller:a,f:h,local:c,Ai:l,l:u,views:d,Bi:p,Ri:f,wi:g,vi:m,forOf:v}=this,w=e.length;for(;w>o;++o)-2===e[o]&&(n=h.create(),d.splice(o,0,n));if(d.length!==w)throw Is(814,[d.length,w]);const b=a.scope,y=e.length;let C=0;for(o=0;o<e.length;++o)-2!==(C=e[o])&&(d[o]=m[C]);const S=function(t){const e=t.length;e>ic&&(ic=e,nc=new Int32Array(e),rc=new Int32Array(e));let s=0,i=0,n=0,r=0,o=0,a=0,h=0,c=0;for(;r<e;r++)if(i=t[r],-2!==i){if(o=nc[s],n=t[o],-2!==n&&n<i){rc[r]=o,nc[++s]=r;continue}for(a=0,h=s;a<h;)c=a+h>>1,n=t[nc[c]],-2!==n&&n<i?a=c+1:h=c;n=t[nc[a]],(i<n||-2===n)&&(a>0&&(rc[r]=nc[a-1]),nc[a]=r)}r=++s;const l=new Int32Array(r);for(i=nc[s-1];s-- >0;)l[s]=i,i=rc[i];for(;r-- >0;)nc[r]=0;return l}(e),k=S.length,T=v.declaration;let x,I=k-1;for(o=y-1;o>=0;--o)n=d[o],x=d[o+1],n.nodes.link(x?.nodes??u),-2===e[o]?(r=gc(g,l[o],v,b,f,c,p),oc(r.overrideContext,o,y),n.setLocation(u),i=n.activate(n,a,r),os(i)&&(s??(s=[])).push(i)):I<0||1===k||o!==S[I]?(p?As(T,n.scope,f,l[o]):n.scope.bindingContext[c]=l[o],oc(n.scope.overrideContext,o,y),n.nodes.insertBefore(n.location)):(p?As(T,n.scope,f,l[o]):n.scope.bindingContext[c]=l[o],t!==y&&oc(n.scope.overrideContext,o,y),--I);if(void 0!==s)return 1===s.length?s[0]:Promise.all(s)}dispose(){this.views.forEach(tc),this.views=void 0}accept(t){const{views:e}=this;if(void 0!==e)for(let s=0,i=e.length;s<i;++s)if(!0===e[s].accept(t))return!0}}sc.$au={type:Si,name:"repeat",isTemplateController:!0,bindables:["items"]},sc.inject=[Kn,i.JW,ea,Bo,An];let ic=16,nc=new Int32Array(ic),rc=new Int32Array(ic);const oc=(t,e,s)=>{const i=0===e,n=e===s-1,r=e%2==0;t.$index=e,t.$first=i,t.$last=n,t.$middle=!i&&!n,t.$even=r,t.$odd=!r,t.$length=s},ac=Ye.toString,hc=t=>{switch(ac.call(t)){case"[object Array]":return t.length;case"[object Map]":case"[object Set]":return t.size;case"[object Number]":return t;case"[object Null]":case"[object Undefined]":return 0;default:throw Is(778,t)}},cc=(t,e)=>{switch(ac.call(t)){case"[object Array]":return lc(t,e);case"[object Map]":return uc(t,e);case"[object Set]":return dc(t,e);case"[object Number]":return pc(t,e);case"[object Null]":case"[object Undefined]":return;default:Is(777,t)}},lc=(t,e)=>{const s=t.length;let i=0;for(;i<s;++i)e(t[i],i,t)},uc=(t,e)=>{let s,i=-0;for(s of t.entries())e(s,i++,t)},dc=(t,e)=>{let s,i=0;for(s of t.keys())e(s,i++,t)},pc=(t,e)=>{let s=0;for(;s<t;++s)e(s,s,t)},fc=(t,e,s,i,n)=>{let r=t.get(s);return void 0===r&&(r="string"==typeof e?s[e]:$s(e,i,n,null),t.set(s,r)),r},gc=(t,e,s,i,n,r,o)=>{let a=t.get(e);return void 0===a&&(o?As(s.declaration,a=At.fromParent(i,new It),n,e):a=At.fromParent(i,new It(r,e)),t.set(e,a)),a},mc=(t,e)=>{const s=typeof t;switch(s){case"object":if(null!==t)return t;case"string":case"number":case"bigint":case"undefined":case"boolean":return`${e}${s}${t}`;default:return t}},vc=(t,e)=>t-e;class wc{constructor(){this.view=(0,n.hd)(An).create().setLocation((0,n.hd)(ea))}valueChanged(t,e){const s=this.$controller,i=this.view.bindings;let n,r=0,o=0;if(s.isActive&&null!=i)for(n=At.fromParent(s.scope,void 0===t?{}:t),o=i.length;o>r;++r)i[r].bind(n)}attaching(t,e){const{$controller:s,value:i}=this,n=At.fromParent(s.scope,void 0===i?{}:i);return this.view.activate(t,s,n)}detaching(t,e){return this.view.deactivate(t,this.$controller)}dispose(){this.view.dispose(),this.view=void 0}accept(t){if(!0===this.view?.accept(t))return!0}}wc.$au={type:Si,name:"with",isTemplateController:!0,bindables:["value"]};class bc{constructor(){this.cases=[],this.activeCases=[],this.promise=void 0,this.f=(0,n.hd)(An),this.l=(0,n.hd)(ea)}link(t,e,s,i){this.view=this.f.create(this.$controller).setLocation(this.l)}attaching(t,e){const s=this.view,i=this.$controller;return this.queue((()=>s.activate(t,i,i.scope))),this.queue((()=>this.swap(t,this.value))),this.promise}detaching(t,e){return this.queue((()=>this.view.deactivate(t,this.$controller))),this.promise}dispose(){this.view?.dispose(),this.view=void 0}valueChanged(t,e){this.$controller.isActive&&this.queue((()=>this.swap(null,this.value)))}caseChanged(t){this.queue((()=>this.qi(t)))}qi(t){const e=t.isMatch(this.value),s=this.activeCases,i=s.length;if(!e)return i>0&&s[0].id===t.id?this.Fi(null):void 0;if(i>0&&s[0].id<t.id)return;const r=[];let o=t.fallThrough;if(o){const e=this.cases,s=e.indexOf(t);for(let t=s,i=e.length;t<i&&o;t++){const s=e[t];r.push(s),o=s.fallThrough}}else r.push(t);return(0,n.ui)(this.Fi(null,r),(()=>(this.activeCases=r,this.Oi(null))))}swap(t,e){const s=[];let i=!1;for(const t of this.cases)if((i||t.isMatch(e))&&(s.push(t),i=t.fallThrough),s.length>0&&!i)break;const r=this.defaultCase;return 0===s.length&&void 0!==r&&s.push(r),(0,n.ui)(this.activeCases.length>0?this.Fi(t,s):void 0,(()=>{if(this.activeCases=s,0!==s.length)return this.Oi(t)}))}Oi(t){const e=this.$controller;if(!e.isActive)return;const s=this.activeCases,i=s.length;if(0===i)return;const r=e.scope;return 1===i?s[0].activate(t,r):(0,n.jY)(...s.map((e=>e.activate(t,r))))}Fi(t,e=[]){const s=this.activeCases,i=s.length;if(0!==i){if(1===i){const i=s[0];return e.includes(i)?void 0:(s.length=0,i.deactivate(t))}return(0,n.ui)((0,n.jY)(...s.reduce(((s,i)=>(e.includes(i)||s.push(i.deactivate(t)),s)),[])),(()=>{s.length=0}))}}queue(t){const e=this.promise;let s;s=this.promise=(0,n.ui)((0,n.ui)(e,t),(()=>{this.promise===s&&(this.promise=void 0)}))}accept(t){return!0===this.$controller.accept(t)||!!this.activeCases.some((e=>e.accept(t)))||void 0}}bc.$au={type:Si,name:"switch",isTemplateController:!0,bindables:["value"]};let yc=0;class Cc{constructor(){this.id=++yc,this.fallThrough=!1,this.view=void 0,this.f=(0,n.hd)(An),this.ri=(0,n.hd)(De),this.l=(0,n.hd)(ea),this.Hi=(0,n.hd)(n.gF).scopeTo(`${this.constructor.name}-#${this.id}`)}link(t,e,s,i){const n=t.parent,r=n?.viewModel;if(!(r instanceof bc))throw Is(815);this.$switch=r,this.linkToSwitch(r)}detaching(t,e){return this.deactivate(t)}isMatch(t){this.Hi.debug("isMatch()");const e=this.value;return as(e)?(void 0===this.yi&&(this.yi=this.Vi(e)),e.includes(t)):e===t}valueChanged(t,e){as(t)?(this.yi?.unsubscribe(this),this.yi=this.Vi(t)):void 0!==this.yi&&this.yi.unsubscribe(this),this.$switch.caseChanged(this)}handleCollectionChange(){this.$switch.caseChanged(this)}activate(t,e){let s=this.view;if(void 0===s&&(s=this.view=this.f.create().setLocation(this.l)),!s.isActive)return s.activate(t??s,this.$controller,e)}deactivate(t){const e=this.view;if(void 0!==e&&e.isActive)return e.deactivate(t??e,this.$controller)}dispose(){this.yi?.unsubscribe(this),this.view?.dispose(),this.view=void 0}linkToSwitch(t){t.cases.push(this)}Vi(t){const e=this.ri.getArrayObserver(t);return e.subscribe(this),e}accept(t){return!0===this.$controller.accept(t)||this.view?.accept(t)}}class Sc extends Cc{linkToSwitch(t){if(void 0!==t.defaultCase)throw Is(816);t.defaultCase=this}}const kc=["value",{name:"fallThrough",mode:1,set(t){switch(t){case"true":return!0;case"false":return!1;default:return!!t}}}];Ai({name:"default-case",bindables:kc,isTemplateController:!0},Sc),Ai({name:"case",bindables:kc,isTemplateController:!0},Cc);class Tc{constructor(){this.preSettledTask=null,this.postSettledTask=null,this.f=(0,n.hd)(An),this.l=(0,n.hd)(ea),this.p=(0,n.hd)(bi),this.logger=(0,n.hd)(n.gF).scopeTo("promise.resolve")}link(t,e,s,i){this.view=this.f.create(this.$controller).setLocation(this.l)}attaching(t,e){const s=this.view,i=this.$controller;return(0,n.ui)(s.activate(t,i,this.viewScope=At.fromParent(i.scope,{})),(()=>this.swap(t)))}valueChanged(t,e){this.$controller.isActive&&this.swap(null)}swap(t){const e=this.value;if(!os(e))return;const s=this.p.domWriteQueue,i=this.fulfilled,r=this.rejected,o=this.pending,a=this.viewScope;let h;const c={reusable:!1},l=()=>{(0,n.jY)(h=(this.preSettledTask=s.queueTask((()=>(0,n.jY)(i?.deactivate(t),r?.deactivate(t),o?.activate(t,a))),c)).result.catch((t=>{if(!(t instanceof ze.mE))throw t})),e.then((l=>{if(this.value!==e)return;const u=()=>{this.postSettlePromise=(this.postSettledTask=s.queueTask((()=>(0,n.jY)(o?.deactivate(t),r?.deactivate(t),i?.activate(t,a,l))),c)).result};this.preSettledTask.status===Ss?h.then(u):(this.preSettledTask.cancel(),u())}),(l=>{if(this.value!==e)return;const u=()=>{this.postSettlePromise=(this.postSettledTask=s.queueTask((()=>(0,n.jY)(o?.deactivate(t),i?.deactivate(t),r?.activate(t,a,l))),c)).result};this.preSettledTask.status===Ss?h.then(u):(this.preSettledTask.cancel(),u())})))};this.postSettledTask?.status===Ss?this.postSettlePromise.then(l):(this.postSettledTask?.cancel(),l())}detaching(t,e){return this.preSettledTask?.cancel(),this.postSettledTask?.cancel(),this.preSettledTask=this.postSettledTask=null,this.view.deactivate(t,this.$controller)}dispose(){this.view?.dispose(),this.view=void 0}}Tc.$au={type:Si,name:"promise",isTemplateController:!0,bindables:["value"]};class xc{constructor(){this.view=void 0,this.f=(0,n.hd)(An),this.l=(0,n.hd)(ea)}link(t,e,s,i){$c(t).pending=this}activate(t,e){let s=this.view;if(void 0===s&&(s=this.view=this.f.create().setLocation(this.l)),!s.isActive)return s.activate(s,this.$controller,e)}deactivate(t){const e=this.view;if(void 0!==e&&e.isActive)return e.deactivate(e,this.$controller)}detaching(t){return this.deactivate(t)}dispose(){this.view?.dispose(),this.view=void 0}}xc.$au={type:Si,name:"pending",isTemplateController:!0,bindables:{value:{mode:2}}};class Ic{constructor(){this.view=void 0,this.f=(0,n.hd)(An),this.l=(0,n.hd)(ea)}link(t,e,s,i){$c(t).fulfilled=this}activate(t,e,s){this.value=s;let i=this.view;if(void 0===i&&(i=this.view=this.f.create().setLocation(this.l)),!i.isActive)return i.activate(i,this.$controller,e)}deactivate(t){const e=this.view;if(void 0!==e&&e.isActive)return e.deactivate(e,this.$controller)}detaching(t,e){return this.deactivate(t)}dispose(){this.view?.dispose(),this.view=void 0}}Ic.$au={type:Si,name:"then",isTemplateController:!0,bindables:{value:{mode:4}}};class Ac{constructor(){this.view=void 0,this.f=(0,n.hd)(An),this.l=(0,n.hd)(ea)}link(t,e,s,i){$c(t).rejected=this}activate(t,e,s){this.value=s;let i=this.view;if(void 0===i&&(i=this.view=this.f.create().setLocation(this.l)),!i.isActive)return i.activate(i,this.$controller,e)}deactivate(t){const e=this.view;if(void 0!==e&&e.isActive)return e.deactivate(e,this.$controller)}detaching(t,e){return this.deactivate(t)}dispose(){this.view?.dispose(),this.view=void 0}}function $c(t){const e=t.parent,s=e?.viewModel;if(s instanceof Tc)return s;throw Is(813)}Ac.$au={type:Si,name:"catch",isTemplateController:!0,bindables:{value:{mode:4}}};class Ec{"promise.resolve"(t,e){return new Qa(t,e,"promise","bind")}}Xa.define([{pattern:"promise.resolve",symbols:""}],Ec);class Rc{then(t,e){return new Qa(t,e,"then","from-view")}}Xa.define([{pattern:"then",symbols:""}],Rc);class Nc{catch(t,e){return new Qa(t,e,"catch","from-view")}}Xa.define([{pattern:"catch",symbols:""}],Nc);class Pc{constructor(){this.$i=!1,this.Ni=(0,n.hd)(ta),this.p=(0,n.hd)(bi)}binding(){this.valueChanged()}valueChanged(){this.$controller.isActive?this.ji():this.$i=!0}attached(){this.$i&&(this.$i=!1,this.ji()),this.Ni.addEventListener("focus",this),this.Ni.addEventListener("blur",this)}detaching(){const t=this.Ni;t.removeEventListener("focus",this),t.removeEventListener("blur",this)}handleEvent(t){"focus"===t.type?this.value=!0:this.Wi||(this.value=!1)}ji(){const t=this.Ni,e=this.Wi,s=this.value;s&&!e?t.focus():!s&&e&&t.blur()}get Wi(){return this.Ni===this.p.document.activeElement}}Pc.$au={type:Si,name:"focus",bindables:{value:{mode:6}}};class Oc{constructor(){this.position="beforeend",this.strict=!1;const t=(0,n.hd)(An),e=(0,n.hd)(ea),s=(0,n.hd)(bi);this.p=s,this.Ui=s.document.createElement("div"),(this.view=t.create()).setLocation(this.zi=(t=>{const e=En(t,"au-end");return e.$start=En(t,"au-start"),e})(s)),function(t,e){if(void 0===t.platform||t instanceof t.platform.Node)ia.set(t,e);else{const s=t.childNodes;for(let t=0,i=s.length;t<i;++t)ia.set(s[t],e)}}(this.view.nodes,e)}attaching(t){null==this.callbackContext&&(this.callbackContext=this.$controller.scope.bindingContext);const e=this.Ui=this.Gi();return this.Ki(e,this.position),this.Xi(t,e)}detaching(t){return this.Qi(t,this.Ui)}targetChanged(){const{$controller:t}=this;if(!t.isActive)return;const e=this.Gi();if(this.Ui===e)return;this.Ui=e;const s=(0,n.ui)(this.Qi(null,e),(()=>(this.Ki(e,this.position),this.Xi(null,e))));os(s)&&s.catch(us)}positionChanged(){const{$controller:t,Ui:e}=this;if(!t.isActive)return;const s=(0,n.ui)(this.Qi(null,e),(()=>(this.Ki(e,this.position),this.Xi(null,e))));os(s)&&s.catch(us)}Xi(t,e){const{activating:s,callbackContext:i,view:r}=this;return(0,n.ui)(s?.call(i,e,r),(()=>this.Yi(t,e)))}Yi(t,e){const{$controller:s,view:i}=this;return null!==t?(0,n.ui)(i.activate(t??i,s,s.scope),(()=>this.Zi(e))):(i.nodes.insertBefore(this.zi),this.Zi(e))}Zi(t){const{activated:e,callbackContext:s,view:i}=this;return e?.call(s,t,i)}Qi(t,e){const{deactivating:s,callbackContext:i,view:r}=this;return(0,n.ui)(s?.call(i,e,r),(()=>this.Ji(t,e)))}Ji(t,e){const{$controller:s,view:i}=this;return null!==t?(0,n.ui)(i.deactivate(t,s),(()=>this.ts(e))):(i.nodes.remove(),this.ts(e))}ts(t){const{deactivated:e,callbackContext:s,view:i}=this;return(0,n.ui)(e?.call(s,t,i),(()=>this.es()))}Gi(){const t=this.p,e=t.document;let s=this.target,i=this.renderContext;if(""===s){if(this.strict)throw Is(811);return e.body}if(ls(s)){let n=e;ls(i)&&(i=e.querySelector(i)),i instanceof t.Node&&(n=i),s=n.querySelector(s)}if(s instanceof t.Node)return s;if(null==s){if(this.strict)throw Is(812);return e.body}return s}es(){this.zi.remove(),this.zi.$start.remove()}Ki(t,e){const s=this.zi,i=s.$start,n=t.parentNode,r=[i,s];switch(e){case"beforeend":Nn(t,null,r);break;case"afterbegin":Nn(t,t.firstChild,r);break;case"beforebegin":Nn(n,t,r);break;case"afterend":Nn(n,t.nextSibling,r);break;default:throw new Error("Invalid portal insertion position")}}dispose(){this.view.dispose(),this.view=void 0,this.callbackContext=null}accept(t){if(!0===this.view?.accept(t))return!0}}let Mc;Oc.$au={type:Si,name:"portal",isTemplateController:!0,bindables:[{name:"target",primary:!0},"position","activated","activating","callbackContext",{name:"renderContext",callback:"targetChanged"},"strict","deactivated","deactivating"]};class Bc{constructor(){this.ss=null,this.rs=null,this.Xt=!1,this.expose=null,this.slotchange=null,this.os=new Set,this.yi=null;const t=(0,n.hd)(Lo),e=(0,n.hd)(ea),s=(0,n.hd)(Kn),i=(0,n.hd)(_r),r=this.name=s.data.name,o=s.projections?.[jn],a=t.instruction?.projections?.[r],h=t.controller.container;let c,l;null==a?(l=h.createChild({inheritParentResources:!0}),c=i.getViewFactory(o??(Mc??=fa.create({name:"au-slot-empty-template",template:"",needsCompile:!1})),l),this.ls=!1):(l=h.createChild(),l.useResources(t.parent.controller.container),_s(l,Lo,new n.JF(void 0,t.parent)),c=i.getViewFactory(a,l),this.ls=!0,this.cs=h.getAll(Hn,!1)?.filter((t=>"*"===t.slotName||t.slotName===r))??n.tR),this.us=(this.cs??=n.tR).length>0,this.ds=t,this.view=c.create().setLocation(this.l=e)}get nodes(){const t=[],e=this.l;let s=e.$start.nextSibling;for(;null!=s&&s!==e;)8!==s.nodeType&&t.push(s),s=s.nextSibling;return t}subscribe(t){this.os.add(t)}unsubscribe(t){this.os.delete(t)}binding(t,e){let s;this.ss=this.$controller.scope.parent,this.ls&&(s=this.ds.controller.scope.parent,(this.rs=At.fromParent(s,s.bindingContext)).overrideContext.$host=this.expose??this.ss.bindingContext)}attaching(t,e){return(0,n.ui)(this.view.activate(t,this.$controller,this.ls?this.rs:this.ss),(()=>{this.us&&(this.cs.forEach((t=>t.watch(this))),this.hi(),this.gs(),this.Xt=!0)}))}detaching(t,e){return this.Xt=!1,this.ps(),this.cs.forEach((t=>t.unwatch(this))),this.view.deactivate(t,this.$controller)}exposeChanged(t){this.ls&&null!=this.rs&&(this.rs.overrideContext.$host=t)}dispose(){this.view.dispose(),this.view=void 0}accept(t){if(!0===this.view?.accept(t))return!0}hi(){if(null!=this.yi)return;const t=this.l,e=t.parentElement;null!=e&&(this.yi=Mn(e,(e=>{jc(t,e)&&this.gs()}))).observe(e,{childList:!0})}ps(){this.yi?.disconnect(),this.yi=null}gs(){const t=this.nodes,e=new Set(this.os);let s;for(s of(this.Xt&&this.slotchange?.call(void 0,this.name,t),e))s.handleSlotChange(this,t)}}Bc.$au={type:Ca,name:"au-slot",template:null,containerless:!0,processContent(t,e,s){s.name=t.getAttribute("name")??jn;let i=t.firstChild,n=null;for(;null!==i;)n=i.nextSibling,Bn(i)&&i.hasAttribute(Fn)&&t.removeChild(i),i=n},bindables:["expose","slotchange"]};const Lc=(t,e)=>t.compareDocumentPosition(e),jc=(t,e)=>{for(const{addedNodes:s,removedNodes:i,nextSibling:n}of e){let e,r=0,o=s.length;for(;r<o;++r)if(e=s[r],4===Lc(t.$start,e)&&2===Lc(t,e))return!0;if(i.length>0&&null!=n&&4===Lc(t.$start,n)&&2===Lc(t,n))return!0}};class Fc{constructor(){this.scopeBehavior="auto",this.bs=void 0,this.tag=null,this.c=(0,n.hd)(n.p7),this.parent=(0,n.hd)(Bo),this.ws=(0,n.hd)(ta),this.l=(0,n.hd)(ea),this.p=(0,n.hd)(bi),this.r=(0,n.hd)(_r),this.ys=(0,n.hd)(Kn),this.xs=(0,n.hd)((0,n.do)(Vc,null)),this.it=(0,n.hd)(dr),this.J=(0,n.hd)(Lo),this.ep=(0,n.hd)(i.JW),this.oL=(0,n.hd)(De)}get composing(){return this.Cs}get composition(){return this.bs}attaching(t,e){return this.Cs=(0,n.ui)(this.queue(new Hc(this.template,this.component,this.model,void 0),t),(t=>{this.xs.ks(t)&&(this.Cs=void 0)}))}detaching(t){const e=this.bs,s=this.Cs;return this.xs.invalidate(),this.bs=this.Cs=void 0,(0,n.ui)(s,(()=>e?.deactivate(t)))}propertyChanged(t){"composing"!==t&&"composition"!==t&&("model"!==t||null==this.bs?"tag"===t&&this.bs?.controller.vmKind===xo||(this.Cs=(0,n.ui)(this.Cs,(()=>(0,n.ui)(this.queue(new Hc(this.template,this.component,this.model,t),void 0),(t=>{this.xs.ks(t)&&(this.Cs=void 0)}))))):this.bs.update(this.model))}queue(t,e){const s=this.xs,i=this.bs;return(0,n.ui)(s.create(t),(t=>s.ks(t)?(0,n.ui)(this.compose(t),(r=>s.ks(t)?(0,n.ui)(r.activate(e),(()=>s.ks(t)?(this.bs=r,(0,n.ui)(i?.deactivate(e),(()=>t))):(0,n.ui)(r.controller.deactivate(r.controller,this.$controller),(()=>(r.controller.dispose(),t))))):(r.controller.dispose(),t))):t))}compose(t){const{As:e,Bs:s,Ss:i}=t.change,{c:r,$controller:o,l:a,ys:h}=this,c=this.Rs(this.J.controller.container,s),l=r.createChild(),u=this.p.document.createElement(null==c?this.tag??"div":c.name);let d;a.parentNode.insertBefore(u,a),d=null==c?null==this.tag?ra(u):null:c.containerless?ra(u):null;const p=()=>{if(u.remove(),null!=d){let t=d.$start.nextSibling,e=null;for(;null!==t&&t!==d;)e=t.nextSibling,t.remove(),t=e;d.$start?.remove(),d.remove()}},f=this.Ts(l,"string"==typeof s?c.Type:s,u,d),g=()=>{const s=h.captures??n.tR;if(null!==c){const e=c.capture,[i,r]=s.reduce(((t,s)=>(t[!(s.target in c.bindables)&&(!0===e||hs(e)&&e(s.target))?0:1].push(s),t)),[[],[]]),a=ho.$el(l,f,u,{projections:h.projections,captures:i},c,d);return this.Es(u,c,r).forEach((t=>a.addBinding(t))),new Wc(a,(t=>a.activate(t??a,o,o.scope.parent)),(t=>(0,n.ui)(a.deactivate(t??a,o),p)),(t=>f.activate?.(t)),t)}{const i=fa.create({name:Na.generateName(),template:e}),r=this.r.getViewFactory(i,l),a=ho.$view(r,o),h="auto"===this.scopeBehavior?At.fromParent(this.parent.scope,f):At.create(f);return a.setHost(u),null==d?this.Es(u,i,s).forEach((t=>a.addBinding(t))):a.setLocation(d),new Wc(a,(t=>a.activate(t??a,o,h)),(t=>(0,n.ui)(a.deactivate(t??a,o),p)),(t=>f.activate?.(t)),t)}};return"activate"in f?(0,n.ui)(f.activate(i),(()=>g())):g()}Ts(t,e,s,i){if(null==e)return new Dc;if("object"==typeof e)return e;const r=this.p;ua(t,r,s),_s(t,ea,new n.JF("IRenderLocation",i));const o=t.invoke(e);return _s(t,e,new n.JF("au-compose.component",o)),o}Rs(t,e){if("string"==typeof e){const s=Na.find(t,e);if(null==s)throw Is(806,e);return s}const s=hs(e)?e:e?.constructor;return Na.isType(s,void 0)?Na.getDefinition(s,null):null}Es(t,e,s){const i=new jo(this.$controller,{projections:null,captures:s},this.J.parent);return qn.create(i,t,e,this.r,this.it,this.p,this.ep,this.oL)}}Fc.$au={type:Ca,name:"au-compose",capture:!0,containerless:!0,bindables:["template","component","model",{name:"scopeBehavior",set:t=>{if("scoped"===t||"auto"===t)return t;throw Is(805,t)}},{name:"composing",mode:4},{name:"composition",mode:4},"tag"]};class Dc{}class Vc{constructor(){this.id=0}ks(t){return t.id===this.id}create(t){return(0,n.ui)(t.load(),(t=>new Uc(++this.id,t)))}invalidate(){this.id++}}class Hc{constructor(t,e,s,i){this.As=t,this.Bs=e,this.Ss=s,this.Is=i}load(){return os(this.As)||os(this.Bs)?Promise.all([this.As,this.Bs]).then((([t,e])=>new qc(t,e,this.Ss,this.Is))):new qc(this.As,this.Bs,this.Ss,this.Is)}}class qc{constructor(t,e,s,i){this.As=t,this.Bs=e,this.Ss=s,this.Is=i}}class Uc{constructor(t,e){this.id=t,this.change=e}}class Wc{constructor(t,e,s,i,n){this.controller=t,this.start=e,this.stop=s,this.update=i,this.context=n,this.state=0}activate(t){if(0!==this.state)throw Is(807,this);return this.state=1,this.start(t)}deactivate(t){switch(this.state){case 1:return this.state=-1,this.stop(t);case-1:throw Is(808);default:this.state=-1}}}const _c=Hs("ISanitizer",(t=>t.singleton(class{sanitize(){throw Is(99,"sanitize")}})));class Kc{constructor(){this.Ps=(0,n.hd)(_c)}toView(t){return null==t?null:this.Ps.sanitize(t)}}Kc.$au={type:Li,name:"sanitize"};const Qc=Hs("ITemplateElementFactory",(t=>t.singleton(Gc))),zc={};class Gc{constructor(){this.p=(0,n.hd)(bi),this.As=this.t()}t(){return this.p.document.createElement("template")}createTemplate(t){if(ls(t)){let e=zc[t];if(void 0===e){const s=this.As;s.innerHTML=t;const i=s.content.firstElementChild;!function(t){if(null==t)return!0;if("TEMPLATE"!==t.nodeName)return!0;if(null!=t.nextElementSibling)return!0;const e=t.previousSibling;if(null!=e&&3===e.nodeType)return e.textContent.trim().length>0;const s=t.nextSibling;return null!=s&&3===s.nodeType&&s.textContent.trim().length>0}(i)?(s.content.removeChild(i),e=i):(this.As=this.t(),e=s),zc[t]=e}return e.cloneNode(!0)}if("TEMPLATE"!==t.nodeName){const e=this.t();return e.content.appendChild(t),e}return t.parentNode?.removeChild(t),t.cloneNode(!0)}}const Jc="TEMPLATE",Yc="au-start",Zc="au-end",Xc=t=>"au*"===t.nodeValue;class tl{constructor(t,e,s,r,o,a){this.hasSlot=!1;const h=null!==r;this.c=e,this.root=null===o?this:o,this.def=t,this.ci=s,this.parent=r,this.Zs=h?r.Zs:e.get(cl),this.Ds=h?r.Ds:e.get(Qc),this.He=h?r.He:e.get(Ga),this.ep=h?r.ep:e.get(i.JW),this.m=h?r.m:e.get(xh),this.Hi=h?r.Hi:e.get(n.gF),this.p=h?r.p:e.get(bi),this.localEls=h?r.localEls:new Set,this.rows=a??[]}Ys(t){return(this.root.deps??=[]).push(t),this.root.c.register(t),t}Qs(t){return((t,e)=>t.document.createTextNode(e))(this.p,t)}Gs(t){return En(this.p,t)}ct(){return this.Gs("au*")}h(t){const e=((t,e)=>t.document.createElement(e))(this.p,t);return"template"===t&&this.p.document.adoptNode(e.content),e}t(){return this.h("template")}Fs(t){return this.Zs.el(this.c,t)}Hs(t){return this.Zs.attr(this.c,t)}Xs(t){return new tl(this.def,this.c,this.ci,this,this.root,t)}Os(t){const e=t.command;return null===e?null:this.Zs.command(this.c,e)}}const el=t=>{const e=t.length;let s=0,i=0;for(;e>i;){if(s=t.charCodeAt(i),92===s)++i;else{if(58===s)return!0;if(36===s&&123===t.charCodeAt(i+1))return!1}++i}return!1},sl=()=>{rl.node=rl.attr=rl.bindable=rl.def=null},il={projections:null},nl={name:"unnamed"},rl={node:null,attr:null,bindable:null,def:null},ol=es(Ze(),{id:!0,name:!0,"au-slot":!0,"as-element":!0}),al={checkbox:1,radio:1},hl=Hs("IBindablesInfoResolver",(t=>{class e{constructor(t,e,s){this.attrs=t,this.bindables=e,this.primary=s}}return t.singleton(class{constructor(){this.W=new WeakMap}get(t){let s=this.W.get(t);if(null==s){const i=t.bindables,n=Ze();let r,o,a,h,c=!1;for(o in i){if(r=i[o],h=r.attribute,!0===r.primary){if(c)throw Is(714,t);c=!0,a=r}else c||null!=a||(a=r);n[h]=Ds.create(o,r)}null==r&&"attribute"===t.kind&&(a=n.value=Ds.create("value",{mode:null!=t.defaultBindingMode?t.defaultBindingMode:8})),this.W.set(t,s=new e(n,i,a??null))}return s}})})),cl=Hs("IResourceResolver",(t=>t.singleton(ll)));class ll{constructor(){this.Js=new WeakMap,this.tn=new WeakMap}el(t,e){let s=this.Js.get(t);return null==s&&this.Js.set(t,s=new ul),e in s.element?s.element[e]:s.element[e]=Na.find(t,e)}attr(t,e){let s=this.Js.get(t);return null==s&&this.Js.set(t,s=new ul),e in s.attr?s.attr[e]:s.attr[e]=Ei.find(t,e)}command(t,e){let s=this.tn.get(t);null==s&&this.tn.set(t,s=Ze());let i=s[e];if(void 0===i){let n=this.Js.get(t);if(null==n&&this.Js.set(t,n=new ul),null==(e in n.command?n.command[e]:n.command[e]=ch.find(t,e)))throw Is(713,e);s[e]=i=ch.get(t,e)}return i}}class ul{constructor(){this.element=Ze(),this.attr=Ze(),this.command=Ze()}}const dl=ts(["name","attribute","mode"]),pl="as-custom-element",fl=(t,e,s)=>{const i=e.getAttribute(pl);if(null===i||""===i)throw Is(715,t);if(s.has(i))throw Is(716,i,t);return s.add(i),e.removeAttribute(pl),i},gl=t=>{switch(t.getAttribute("mode")){case"oneTime":return 1;case"toView":return 2;case"fromView":return 4;case"twoWay":return 6;default:return 8}},ml=Hs("ITemplateCompilerHooks"),vl=ts({name:(0,n.r$)("compiler-hooks"),define:t=>n.hb.define(t,(function(t){qs(ml,this).register(t)})),findAll:t=>t.get((0,n.ff)(ml))});class wl{constructor(){this.el=(0,n.hd)(ta),this.p=(0,n.hd)(bi),this.en=!1,this.I=null,this.$val="",this.$prio="",this.update=()=>{this.I=null,Boolean(this.value)!==this.sn&&(this.sn===this.nn?(this.sn=!this.nn,this.$val=this.el.style.getPropertyValue("display"),this.$prio=this.el.style.getPropertyPriority("display"),this.el.style.setProperty("display","none","important")):(this.sn=this.nn,this.el.style.setProperty("display",this.$val,this.$prio),""===this.el.getAttribute("style")&&this.el.removeAttribute("style")))};const t=(0,n.hd)(Kn);this.sn=this.nn="hide"!==t.alias}binding(){this.en=!0,this.update()}detaching(){this.en=!1,this.I?.cancel(),this.I=null}valueChanged(){this.en&&null===this.I&&(this.I=this.p.domWriteQueue.queueTask(this.update))}}wl.$au={type:Si,name:"show",bindables:["value"],aliases:["hide"]};const bl=[class{constructor(){this.Ls=(0,n.hd)(hl),this.debug=!1,this.resolveResources=!0}static register(t){t.register(qs(this,this),Us(this,dr))}compile(t,e,s){if(null==t.template||!1===t.needsCompile)return t;s??=il;const i=new tl(t,e,s,null,null,void 0),r=ls(t.template)||!t.enhance?i.Ds.createTemplate(t.template):t.template,o=r.nodeName===Jc&&null!=r.content,a=o?r.content:r,h=vl.findAll(e),c=h.length;let l=0;if(c>0)for(;c>l;)h[l].compiling?.(r),++l;if(r.hasAttribute(pl))throw Is(701,t);this.Ms(a,i),this._s(a,i);const u=fa.create({...t,name:t.name||Ta(),dependencies:(t.dependencies??n.tR).concat(i.deps??n.tR),instructions:i.rows,surrogates:o?this.qs(r,i):n.tR,template:r,hasSlots:i.hasSlot,needsCompile:!1});if(null!=i.deps){const t=[u.Type,...u.dependencies,...i.deps];for(const e of i.deps)Ea(e).dependencies.push(...t.filter((t=>t!==e)))}return u}compileSpread(t,e,s,i,r){const o=new tl(t,s,il,null,null,void 0),a=[],h=r??o.Fs(i.nodeName.toLowerCase()),c=null!==h,l=o.ep,u=e.length;let d,p,f,g,m,v,w,b,y,C,S=0,k=null,T=null;for(;u>S;++S)if(d=e[S],y=d.target,C=d.rawValue,T=o.Os(d),null!==T&&T.ignoreAttr)rl.node=i,rl.attr=d,rl.bindable=null,rl.def=null,a.push(T.build(rl,o.ep,o.m));else if(k=o.Hs(y),null===k)if(null===T){if(w=l.parse(C,vs),c&&(g=this.Ls.get(h),m=g.attrs[y],void 0!==m)){w=l.parse(C,vs),a.push(new ur(null==w?new Yn(C,m.name):new Qn(w,m.name)));continue}if(null!=w)a.push(new Qn(w,o.m.map(i,y)??(0,n.xQ)(y)));else switch(y){case"class":a.push(new ar(C));break;case"style":a.push(new hr(C));break;default:a.push(new or(C,y))}}else{if(c&&(g=this.Ls.get(h),m=g.attrs[y],void 0!==m)){rl.node=i,rl.attr=d,rl.bindable=m,rl.def=h,a.push(new ur(T.build(rl,o.ep,o.m)));continue}rl.node=i,rl.attr=d,rl.bindable=null,rl.def=null,a.push(T.build(rl,o.ep,o.m))}else{if(k.isTemplateController)throw Is(9998,y);g=this.Ls.get(k),b=!1===k.noMultiBindings&&null===T&&el(C),b?f=this.Vs(i,C,k,o):(v=g.primary,null===T?(w=l.parse(C,vs),f=[null===w?new Yn(C,v.name):new Qn(w,v.name)]):(rl.node=i,rl.attr=d,rl.bindable=v,rl.def=k,f=[T.build(rl,o.ep,o.m)])),(p??=[]).push(new tr(this.resolveResources?k:k.name,null!=k.aliases&&k.aliases.includes(y)?y:void 0,f))}return sl(),null!=p?p.concat(a):a}qs(t,e){const s=[],i=t.attributes,r=e.ep;let o,a,h,c,l,u,d,p,f,g,m,v,w=i.length,b=0,y=null,C=null;for(;w>b;++b){if(o=i[b],a=o.name,h=o.value,c=e.He.parse(a,h),m=c.target,v=c.rawValue,ol[m])throw Is(702,a);if(C=e.Os(c),null!==C&&C.ignoreAttr)rl.node=t,rl.attr=c,rl.bindable=null,rl.def=null,s.push(C.build(rl,e.ep,e.m));else if(y=e.Hs(m),null===y)if(null===C)if(f=r.parse(v,vs),null!=f)t.removeAttribute(a),--b,--w,s.push(new Qn(f,e.m.map(t,m)??(0,n.xQ)(m)));else switch(a){case"class":s.push(new ar(v));break;case"style":s.push(new hr(v));break;default:s.push(new or(v,a))}else rl.node=t,rl.attr=c,rl.bindable=null,rl.def=null,s.push(C.build(rl,e.ep,e.m));else{if(y.isTemplateController)throw Is(703,m);d=this.Ls.get(y),g=!1===y.noMultiBindings&&null===C&&el(v),g?u=this.Vs(t,v,y,e):(p=d.primary,null===C?(f=r.parse(v,vs),u=null===f?""===v?[]:[new Yn(v,p.name)]:[new Qn(f,p.name)]):(rl.node=t,rl.attr=c,rl.bindable=p,rl.def=y,u=[C.build(rl,e.ep,e.m)])),t.removeAttribute(a),--b,--w,(l??=[]).push(new tr(this.resolveResources?y:y.name,null!=y.aliases&&y.aliases.includes(m)?m:void 0,u))}}return sl(),null!=l?l.concat(s):s}_s(t,e){switch(t.nodeType){case 1:return"LET"===t.nodeName?this.$s(t,e):this.Ns(t,e);case 3:return this.js(t,e);case 11:{let s=t.firstChild;for(;null!==s;)s=this._s(s,e);break}}return t.nextSibling}$s(t,e){const s=t.attributes,r=s.length,o=[],a=e.ep;let h,c,l,u,d,p,f,g,m=!1,v=0;for(;r>v;++v)if(h=s[v],l=h.name,u=h.value,"to-binding-context"!==l)if(c=e.He.parse(l,u),p=c.target,f=c.rawValue,d=e.Os(c),null===d)g=a.parse(f,vs),o.push(new ir(null===g?new i.fU(f):g,(0,n.xQ)(p)));else{if("bind"!==c.command)throw Is(704,c);o.push(new ir(a.parse(f,ys),(0,n.xQ)(p)))}else m=!0;return e.rows.push([new sr(o,m)]),this.Ws(t,e).nextSibling}Ns(t,e){const s=t.nextSibling,i=(t.getAttribute("as-element")??t.nodeName).toLowerCase(),r=e.Fs(i),o=null!==r,a=o&&null!=r.shadowOptions,h=r?.capture,c=null!=h&&"boolean"!=typeof h,l=h?[]:n.tR,u=e.ep,d=this.debug?n.lQ:()=>{t.removeAttribute(g),--B,--M};let p,f,g,m,v,w,b,y,C,S,k,T,x,I,A,$,E,R,N,P,O=t.attributes,M=O.length,B=0,L=null,j=!1,F=null,D=!0,V=!1,H=!1,q=!1;if("slot"===i){if(null==e.root.def.shadowOptions)throw Is(717,e.root.def.name);e.root.hasSlot=!0}for(o&&(N={},D=r.processContent?.call(r.Type,t,e.p,N),O=t.attributes,M=O.length);M>B;++B){switch(f=O[B],g=f.name,m=f.value,g){case"as-element":case"containerless":d(),V||(V="containerless"===g);continue}if(v=e.He.parse(g,m),F=e.Os(v),E=v.target,R=v.rawValue,h&&(!c||c&&h(E))){if(null!=F&&F.ignoreAttr){d(),l.push(v);continue}if(H=E!==Fn&&"slot"!==E,H&&(A=this.Ls.get(r),null==A.attrs[E]&&!e.Hs(E)?.isTemplateController)){d(),l.push(v);continue}}F?.ignoreAttr?(rl.node=t,rl.attr=v,rl.bindable=null,rl.def=null,(w??=[]).push(F.build(rl,e.ep,e.m)),d()):o&&(A=this.Ls.get(r),y=A.attrs[E],void 0!==y)?(null===F?(x=u.parse(R,vs),(b??=[]).push(null==x?new Yn(R,y.name):new Qn(x,y.name))):(rl.node=t,rl.attr=v,rl.bindable=y,rl.def=r,(b??=[]).push(F.build(rl,e.ep,e.m))),d()):(L=e.Hs(E),null===L?null!==F?(rl.node=t,rl.attr=v,rl.bindable=null,rl.def=null,(w??=[]).push(F.build(rl,e.ep,e.m)),d()):(x=u.parse(R,vs),null!=x&&(d(),(w??=[]).push(new Qn(x,e.m.map(t,E)??(0,n.xQ)(E))))):(A=this.Ls.get(L),j=!1===L.noMultiBindings&&null===F&&el(R),j?S=this.Vs(t,R,L,e):($=A.primary,null===F?(x=u.parse(R,vs),S=null===x?""===R?[]:[new Yn(R,$.name)]:[new Qn(x,$.name)]):(rl.node=t,rl.attr=v,rl.bindable=$,rl.def=L,S=[F.build(rl,e.ep,e.m)])),d(),L.isTemplateController?(k??=[]).push(new er(nl,this.resolveResources?L:L.name,void 0,S)):(C??=[]).push(new tr(this.resolveResources?L:L.name,null!=L.aliases&&L.aliases.includes(E)?E:void 0,S))))}if(sl(),this.Us(t,w)&&null!=w&&w.length>1&&this.zs(t,w),o&&(I=new Xn(this.resolveResources?r:r.name,b??n.tR,null,V,l,N)),null==w&&null==I&&null==C||(p=n.tR.concat(I??n.tR,C??n.tR,w??n.tR),q=!0),null!=k){let s;M=k.length-1,B=M,T=k[B],Xc(t)?(s=e.t(),On(s,[e.ct(),e.Gs(Yc),e.Gs(Zc)])):(this.Ks(t,e),"TEMPLATE"===t.nodeName?s=t:(s=e.t(),Pn(s,t)));const n=s,h=e.Xs(null==p?[]:[p]);let c,l,u,d,f,g,m,v,w=!1,b=0,y=0,C=t.firstChild,S=!1;if(!1!==D)for(;null!==C;){if(l=Bn(C)?C.getAttribute(Fn):null,w=null!==l||o&&!a,c=C.nextSibling,w){if(!o)throw Is(706,l,i);C.removeAttribute?.(Fn),S=Ln(C)&&""===C.textContent.trim(),S||((d??={})[l||jn]??=[]).push(C),t.removeChild(C)}C=c}if(null!=d){for(l in u={},d){for(s=e.t(),f=d[l],b=0,y=f.length;y>b;++b)g=f[b],"TEMPLATE"===g.nodeName?g.attributes.length>0?Pn(s,g):Pn(s,g.content):Pn(s,g);v=e.Xs(),this._s(s.content,v),u[l]=fa.create({name:Ta(),template:s,instructions:v.rows,needsCompile:!1})}I.projections=u}if(q&&(o&&(V||r.containerless)?this.Ks(t,e):this.Ws(t,e)),P=!o||!r.containerless&&!V&&!1!==D,P)if(t.nodeName===Jc)this._s(t.content,h);else for(C=t.firstChild;null!==C;)C=this._s(C,h);for(T.def=fa.create({name:Ta(),template:n,instructions:h.rows,needsCompile:!1});B-- >0;)T=k[B],s=e.t(),m=e.ct(),On(s,[m,e.Gs(Yc),e.Gs(Zc)]),T.def=fa.create({name:Ta(),template:s,needsCompile:!1,instructions:[[k[B+1]]]});e.rows.push([T])}else{null!=p&&e.rows.push(p);let s,n,h,c,l,u,d,f=t.firstChild,g=!1,m=null,v=!1,w=0,b=0;if(!1!==D)for(;null!==f;){if(n=Bn(f)?f.getAttribute(Fn):null,g=null!==n||o&&!a,s=f.nextSibling,g){if(!o)throw Is(706,n,i);f.removeAttribute?.(Fn),v=Ln(f)&&""===f.textContent.trim(),v||((h??={})[n||jn]??=[]).push(f),t.removeChild(f)}f=s}if(null!=h){for(n in m={},h){for(u=e.t(),c=h[n],w=0,b=c.length;b>w;++w)l=c[w],l.nodeName===Jc?l.attributes.length>0?Pn(u,l):Pn(u,l.content):Pn(u,l);d=e.Xs(),this._s(u.content,d),m[n]=fa.create({name:Ta(),template:u,instructions:d.rows,needsCompile:!1})}I.projections=m}if(q&&(o&&(V||r.containerless)?this.Ks(t,e):this.Ws(t,e)),P=!o||!r.containerless&&!V&&!1!==D,P&&t.childNodes.length>0)for(f=t.firstChild;null!==f;)f=this._s(f,e)}return s}js(t,e){const s=t.parentNode,i=e.ep.parse(t.textContent,vs),n=t.nextSibling;let r,o,a,h,c;if(null!==i){for(({parts:r,expressions:o}=i),(c=r[0])&&Rn(s,e.Qs(c),t),a=0,h=o.length;h>a;++a)Nn(s,t,[e.ct(),e.Qs(" ")]),(c=r[a+1])&&Rn(s,e.Qs(c),t),e.rows.push([new nr(o[a])]);s.removeChild(t)}return n}Vs(t,e,s,i){const n=this.Ls.get(s),r=e.length,o=[];let a,h,c,l,u,d,p=0,f=0;for(let g=0;g<r;++g)if(f=e.charCodeAt(g),92===f)++g;else if(58===f){for(a=e.slice(p,g);e.charCodeAt(++g)<=32;);for(p=g;g<r;++g)if(f=e.charCodeAt(g),92===f)++g;else if(59===f){h=e.slice(p,g);break}if(void 0===h&&(h=e.slice(p)),l=i.He.parse(a,h),u=i.Os(l),d=n.attrs[l.target],null==d)throw Is(707,l.target,s.name);for(null===u?(c=i.ep.parse(h,vs),o.push(null===c?new Yn(h,d.name):new Qn(c,d.name))):(rl.node=t,rl.attr=l,rl.bindable=d,rl.def=s,o.push(u.build(rl,i.ep,i.m)));g<r&&e.charCodeAt(++g)<=32;);p=g,a=void 0,h=void 0}return sl(),o}Ms(t,e){const s=e.root.def.name,i=t,r=(0,n.$r)(i.querySelectorAll("template[as-custom-element]")),o=r.length;if(0===o)return;if(o===i.childElementCount)throw Is(708,s);const a=new Set;for(const t of r){if(t.parentNode!==i)throw Is(709,s);const r=fl(s,t,a),o=t.content,h=(0,n.$r)(o.querySelectorAll("bindable")),c=new Set,l=new Set,u=h.reduce(((t,e)=>{if(e.parentNode!==o)throw Is(710,r);const s=e.getAttribute("name");if(null===s)throw Is(711,e,r);const i=e.getAttribute("attribute");if(null!==i&&l.has(i)||c.has(s))throw Is(712,c,i);null!==i&&l.add(i),c.add(s);const a=(0,n.$r)(e.attributes).filter((t=>!dl.includes(t.name)));return a.length,e.remove(),t[s]={attribute:i??void 0,mode:gl(e)},t}),{});class d{}ps(d,"name",{value:r}),e.Ys(xa({name:r,template:t,bindables:u},d)),i.removeChild(t)}}Us(t,e){const s=t.nodeName;return"INPUT"===s&&1===al[t.type]||"SELECT"===s&&(t.hasAttribute("multiple")||e?.some((t=>t.type===Un&&"multiple"===t.to)))}zs(t,e){switch(t.nodeName){case"INPUT":{const t=e;let s,i,n,r=0;for(let e=0;e<t.length&&r<3;e++)switch(n=t[e],n.to){case"model":case"value":case"matcher":s=e,r++;break;case"checked":i=e,r++}void 0!==i&&void 0!==s&&i<s&&([t[s],t[i]]=[t[i],t[s]]);break}case"SELECT":{const t=e;let s,i=0,n=0,r=0;for(let e=0;e<t.length&&r<2;++e){switch(s=t[e],s.to){case"multiple":n=e,r++;break;case"value":i=e,r++}2===r&&i<n&&([t[n],t[i]]=[t[i],t[n]])}}}}Ws(t,e){return Rn(t.parentNode,e.Gs("au*"),t),t}Ks(t,e){if(Xc(t))return t;const s=t.parentNode,i=e.ct();return Nn(s,t,[i,e.Gs(Yc),e.Gs(Zc)]),s.removeChild(t),i}},class{static register(t){t.register(n.cH.singleton(this,this),n.cH.aliasTo(this,Ne))}constructor(){this.tracked=[],this.O=null,this.C=0,this.p=(0,n.hd)(n.r_),this.check=()=>{if(Pe.disabled)return;if(++this.C<Pe.timeoutsPerCheck)return;this.C=0;const t=this.tracked,e=t.length;let s,i=0;for(;i<e;++i)s=t[i],s.isDirty()&&s.flush()},I(Oe)}createProperty(t,e){if(Pe.throw)throw c(`AUR0222:${b(e)}`);return new Oe(this,t,e)}addProperty(t){this.tracked.push(t),1===this.tracked.length&&(this.O=this.p.taskQueue.queueTask(this.check,{persistent:!0}))}removeProperty(t){this.tracked.splice(this.tracked.indexOf(t),1),0===this.tracked.length&&(this.O.cancel(),this.O=null)}},Wh],yl=[eh,th,ih,sh,In],Cl=[fh,lh,dh,uh,ph,gh,Ch,mh,vh,yh,bh,wh,Sh],Sl=[ci,ni,ri,oi,di,fi,ai,Kc,Zh,Xh,sc,wc,bc,Cc,Sc,Tc,xc,Ic,Ac,Ec,Rc,Nc,Gh,Jh,Yh,Fc,Oc,Pc,wl,Bc],kl=[Tr,xr,Sr,kr,vr,wr,br,yr,Cr,$r,Or,Er,Rr,Nr,Pr,Ir,Mr],Tl=xl(n.lQ);function xl(t){return{optionsProvider:t,register(e){const s={coercingOptions:{enableCoercion:!1,coerceNullish:!1}};return t(s),e.register(Ws(k,s.coercingOptions),...bl,...Sl,...yl,...Cl,...kl)},customize:e=>xl(e??t)}}}},i={};function n(t){var e=i[t];if(void 0!==e)return e.exports;var r=i[t]={id:t,exports:{}};return s[t](r,r.exports,n),r.exports}n.m=s,n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var s in e)n.o(e,s)&&!n.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},n.f={},n.e=t=>Promise.all(Object.keys(n.f).reduce(((e,s)=>(n.f[s](t,e),e)),[])),n.u=t=>t+".5f073d62bf28707439bf.bundle.js",n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),t={},e="plugins-demo:",n.l=(s,i,r,o)=>{if(t[s])t[s].push(i);else{var a,h;if(void 0!==r)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var u=c[l];if(u.getAttribute("src")==s||u.getAttribute("data-webpack")==e+r){a=u;break}}a||(h=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",e+r),a.src=s),t[s]=[i];var d=(e,i)=>{a.onerror=a.onload=null,clearTimeout(p);var n=t[s];if(delete t[s],a.parentNode&&a.parentNode.removeChild(a),n&&n.forEach((t=>t(i))),e)return e(i)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),h&&document.head.appendChild(a)}},n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var s=e.getElementsByTagName("script");if(s.length)for(var i=s.length-1;i>-1&&(!t||!/^http(s?):/.test(t));)t=s[i--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})(),(()=>{var t={201:0};n.f.j=(e,s)=>{var i=n.o(t,e)?t[e]:void 0;if(0!==i)if(i)s.push(i[2]);else{var r=new Promise(((s,n)=>i=t[e]=[s,n]));s.push(i[2]=r);var o=n.p+n.u(e),a=new Error;n.l(o,(s=>{if(n.o(t,e)&&(0!==(i=t[e])&&(t[e]=void 0),i)){var r=s&&("load"===s.type?"missing":s.type),o=s&&s.target&&s.target.src;a.message="Loading chunk "+e+" failed.\n("+r+": "+o+")",a.name="ChunkLoadError",a.type=r,a.request=o,i[1](a)}}),"chunk-"+e,e)}};var e=(e,s)=>{var i,r,[o,a,h]=s,c=0;if(o.some((e=>0!==t[e]))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);h&&h(n)}for(e&&e(s);c<o.length;c++)r=o[c],n.o(t,r)&&t[r]&&t[r][0](),t[r]=0},s=self.webpackChunkplugins_demo=self.webpackChunkplugins_demo||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))})(),n.nc=void 0;var r={};(()=>{n.d(r,{$:()=>Ue});var t={};n.r(t),n.d(t,{default:()=>Fe,dependencies:()=>De,name:()=>Le,register:()=>He,template:()=>je});var e=n(452),s=n(273),i=n(303);n(410),n(529);const o=i.s.getOrCreate(globalThis);class a extends s.KIi{constructor(t=function(){return e.DI.createContainer().register(e.cH.instance(s.r_,o),s.yrA)}()){super(t)}static app(t){return(new a).app(t)}static enhance(t){return(new a).enhance(t)}static register(...t){return(new a).register(...t)}app(t){if(s.K94.isType(t)){const e=s.K94.getDefinition(t);let i=document.querySelector(e.name);return null===i&&(i=document.body),super.app({host:i,component:t})}return super.app(t)}}var h=n(220);class c{constructor(t,e,s,i){this.name=t,this.isOptional=e,this.isStar=s,this.pattern=i}satisfiesPattern(t){return null===this.pattern||(this.pattern.lastIndex=0,this.pattern.test(t))}}class l{constructor(t,e,s){this.path=t,this.caseSensitive=e,this.handler=s}}class u{get residualEndpoint(){return this.t}set residualEndpoint(t){if(null!==this.t)throw new Error("Residual endpoint is already set");this.t=t}constructor(t,e){this.route=t,this.params=e,this.t=null}equalsOrResidual(t){return null!=t&&this===t||this.t===t}}class d{constructor(t,e){this.endpoint=t;const s=Object.create(null);for(const t in e){const i=e[t];s[t]=null!=i?decodeURIComponent(i):i}this.params=Object.freeze(s)}}class p{constructor(t,e,s,i){this.chars=t,this.states=e,this.skippedStates=s,this.result=i,this.params=null,this.isConstrained=!1,this.satisfiesConstraints=null,this.head=e[e.length-1],this.endpoint=this.head?.endpoint}advance(t){const{chars:e,states:s,skippedStates:i,result:n}=this;let r=null,o=0;const a=s[s.length-1];function h(c,l){if(c.isMatch(t)&&(1==++o?r=c:n.add(new p(e.concat(t),s.concat(c),null===l?i:i.concat(l),n))),null===a.segment&&c.isOptional&&null!==c.nextStates){if(c.nextStates.length>1)throw k(`${c.nextStates.length} nextStates`);const t=c.nextStates[0];if(!t.isSeparator)throw k("Not a separator");if(null!==t.nextStates)for(const e of t.nextStates)h(e,c)}}if(a.isDynamic&&h(a,null),null!==a.nextStates)for(const t of a.nextStates)h(t,null);null!==r&&(s.push(this.head=r),e.push(t),this.isConstrained=this.isConstrained||r.isDynamic&&r.segment.isConstrained,null!==r.endpoint&&(this.endpoint=r.endpoint)),0===o&&n.remove(this)}i(){return function t(e,s){const i=s.nextStates;if(null!==i)if(1===i.length&&null===i[0].segment)t(e,i[0]);else for(const s of i)if(s.isOptional&&null!==s.endpoint){if(e.push(s),null!==s.nextStates)for(const i of s.nextStates)t(e,i);break}}(this.skippedStates,this.head),!this.isConstrained||(this.u(),this.satisfiesConstraints)}u(){let t=this.params;if(null!=t)return t;const{states:e,chars:s,endpoint:i}=this;t={},this.satisfiesConstraints=!0;for(const e of i.params)t[e.name]=void 0;for(let i=0,n=e.length;i<n;++i){const n=e[i];if(n.isDynamic){const r=n.segment,o=r.name;if(void 0===t[o]?t[o]=s[i]:t[o]+=s[i],!n.isConstrained||Object.is(e[i+1]?.segment,r))continue;this.satisfiesConstraints=this.satisfiesConstraints&&n.satisfiesConstraint(t[o])}}return this.satisfiesConstraints&&(this.params=t),t}compareTo(t){const e=this.states,s=t.states;for(let t=0,i=0,n=Math.max(e.length,s.length);t<n;++t){let n=e[t];if(void 0===n)return 1;let r=s[i];if(void 0===r)return-1;let o=n.segment,a=r.segment;if(null===o){if(null===a){++i;continue}if(void 0===(n=e[++t]))return 1;o=n.segment}else if(null===a){if(void 0===(r=s[++i]))return-1;a=r.segment}if(o.kind<a.kind)return 1;if(o.kind>a.kind)return-1;++i}const i=this.skippedStates,n=t.skippedStates,r=i.length,o=n.length;if(r<o)return 1;if(r>o)return-1;for(let t=0;t<r;++t){const e=i[t],s=n[t];if(e.length<s.length)return 1;if(e.length>s.length)return-1}return 0}}function f(t,e){return t.compareTo(e)}class g{get isEmpty(){return 0===this.candidates.length}constructor(t){this.candidates=[],this.candidates=[new p([""],[t],[],this)]}getSolution(){const t=this.candidates.filter((t=>function(t){return null!==t.head.endpoint}(t)&&t.i()));return 0===t.length?null:(t.sort(f),t[0])}add(t){this.candidates.push(t)}remove(t){this.candidates.splice(this.candidates.indexOf(t),1)}advance(t){const e=this.candidates.slice();for(const s of e)s.advance(t)}}const m="$$residue",v=/^:(?<name>[^?\s{}]+)(?:\{\{(?<constraint>.+)\}\})?(?<optional>\?)?$/g;class w{constructor(t,e,s){switch(this.prevState=t,this.segment=e,this.value=s,this.nextStates=null,this.endpoint=null,this.isConstrained=!1,e?.kind){case 3:this.length=t.length+1,this.isSeparator=!1,this.isDynamic=!0,this.isOptional=e.optional,this.isConstrained=e.isConstrained;break;case 2:case 1:this.length=t.length+1,this.isSeparator=!1,this.isDynamic=!0,this.isOptional=!1;break;case 4:this.length=t.length+1,this.isSeparator=!1,this.isDynamic=!1,this.isOptional=!1;break;case void 0:this.length=null===t?0:t.length,this.isSeparator=!0,this.isDynamic=!1,this.isOptional=!1}}append(t,e){let s,i=this.nextStates;return null===i?(s=void 0,i=this.nextStates=[]):s=null===t?i.find((t=>t.value===e)):i.find((e=>e.segment?.equals(t))),void 0===s&&i.push(s=new w(this,t,e)),s}setEndpoint(t){if(null!==this.endpoint)throw k(`Cannot add ambiguous route. The pattern '${t.route.path}' clashes with '${this.endpoint.route.path}'`);this.endpoint=t,this.isOptional&&(this.prevState.setEndpoint(t),this.prevState.isSeparator&&null!==this.prevState.prevState&&this.prevState.prevState.setEndpoint(t))}isMatch(t){const e=this.segment;switch(e?.kind){case 3:return!this.value.includes(t);case 2:case 1:return!0;case 4:case void 0:return this.value.includes(t)}}satisfiesConstraint(t){return!this.isConstrained||this.segment.satisfiesPattern(t)}}function b(t){return t.length>0}class y{get kind(){return 4}constructor(t,e){this.value=t,this.caseSensitive=e}appendTo(t){const{value:e,value:{length:s}}=this;if(this.caseSensitive)for(let i=0;i<s;++i)t=t.append(this,e.charAt(i));else for(let i=0;i<s;++i){const s=e.charAt(i);t=t.append(this,s.toUpperCase()+s.toLowerCase())}return t}equals(t){return 4===t.kind&&t.caseSensitive===this.caseSensitive&&t.value===this.value}}class C{get kind(){return 3}constructor(t,e,s){if(this.name=t,this.optional=e,this.pattern=s,void 0===s)throw new Error("Pattern is undefined");this.isConstrained=null!==s}appendTo(t){return t.append(this,"/")}equals(t){return 3===t.kind&&t.optional===this.optional&&t.name===this.name}satisfiesPattern(t){return null===this.pattern||(this.pattern.lastIndex=0,this.pattern.test(t))}}class S{constructor(t,e){this.name=t,this.kind=e}appendTo(t){return t.append(this,"")}equals(t){return(2===t.kind||1===t.kind)&&t.name===this.name}}const k=t=>new Error(t);let T=class{constructor(t,e,s,i={}){this.router=t,this.name=e,this.connectedCE=s,this.options=i,this.contents=[],this.transitionAction="",this.path=null}getContent(){return this.contents[0]}getNextContent(){return this.contents.length>1?this.contents[this.contents.length-1]:null}getTimeContent(t=1/0){return this.getContent()}getNavigationContent(t){return t instanceof dt&&(t=t.navigation),t instanceof _?this.contents.find((e=>e.navigation===t))??null:null}get activeContent(){return this.getNextContent()??this.getContent()}get connectedScope(){return this.activeContent?.connectedScope}get scope(){return this.connectedScope.scope}get owningScope(){return this.connectedScope.owningScope}get connectedController(){return this.connectedCE?.$controller??null}get isViewport(){return this instanceof Y}get isViewportScope(){return this instanceof q}get isEmpty(){return!1}get pathname(){return this.connectedScope.pathname}toString(){throw new Error("Method 'toString' needs to be implemented in all endpoints!")}setNextContent(t,e){throw new Error("Method 'setNextContent' needs to be implemented in all endpoints!")}setConnectedCE(t,e){throw new Error("Method 'setConnectedCE' needs to be implemented in all endpoints!")}transition(t){throw new Error("Method 'transition' needs to be implemented in all endpoints!")}finalizeContentChange(t,e){throw new Error("Method 'finalizeContentChange' needs to be implemented in all endpoints!")}cancelContentChange(t,e=null){throw new Error("Method 'cancelContentChange' needs to be implemented in all endpoints!")}getRoutes(){throw new Error("Method 'getRoutes' needs to be implemented in all endpoints!")}getTitle(t){throw new Error("Method 'getTitle' needs to be implemented in all endpoints!")}removeEndpoint(t,e){return this.contents.forEach((t=>t.delete())),!0}canUnload(t,e){return!0}canLoad(t,e){return!0}unload(t,e){}load(t,e){}};class x{constructor(t,e,s,i,n=X.create(""),r=_.create({instruction:"",fullStateInstruction:""})){this.router=t,this.endpoint=e,this.instruction=n,this.navigation=r,this.completed=!1,this.connectedScope=new rt(t,i,s,this),null!==this.router.rootScope&&(this.endpoint.connectedScope?.parent??this.router.rootScope.scope).addChild(this.connectedScope)}get isActive(){return this.endpoint.activeContent===this}delete(){this.connectedScope.parent?.removeChild(this.connectedScope)}}class I{constructor(t=null,e="",s=[],i="",n={}){this.match=t,this.matching=e,this.instructions=s,this.remaining=i,this.params=n}get foundConfiguration(){return null!==this.match}get foundInstructions(){return this.instructions.some((t=>!t.component.none))}get hasRemaining(){return this.instructions.some((t=>t.hasNextScopeInstructions))}}class A{static parse(t,e,s,i){if(!e)return{instructions:[],remaining:""};if(e.startsWith(t.sibling)&&!A.isAdd(t,e))throw new Error(`Instruction parser error: Unnecessary siblings separator ${t.sibling} in beginning of instruction part "${e}".`);const n=[];let r=1e3;for(;e.length&&r;)if(r--,e.startsWith(t.scope)){if(0===n.length)throw new Error(`Instruction parser error: Children without parent in instruction part "(${e}" is not allowed.`);i=!1;const r=(e=e.slice(t.scope.length)).startsWith(t.groupStart);r&&(e=e.slice(t.groupStart.length),s=!0);const{instructions:o,remaining:a}=A.parse(t,e,r,!1);n[n.length-1].nextScopeInstructions=o,e=a}else if(e.startsWith(t.groupStart)){e=e.slice(t.groupStart.length);const{instructions:s,remaining:r}=A.parse(t,e,!0,i);n.push(...s),e=r}else if(e.startsWith(t.groupEnd)){s&&(e=e.slice(t.groupEnd.length));let i=0;const r=e.length;for(;i<r;i++){if(e.slice(i,i+t.sibling.length)===t.sibling)return{instructions:n,remaining:e};if(e.slice(i,i+t.groupEnd.length)!==t.groupEnd){if(n.length>1)throw new Error(`Instruction parser error: Children below scope ${t.groupStart}${t.groupEnd} in instruction part "(${e}" is not allowed.`);e=e.slice(i);break}}if(i>=r)return{instructions:n,remaining:e}}else if(e.startsWith(t.sibling)&&!A.isAdd(t,e)){if(!s)return{instructions:n,remaining:e};e=e.slice(t.sibling.length)}else{const{instruction:s,remaining:i}=A.parseOne(t,e);n.push(s),e=i}return{instructions:n,remaining:e}}static isAdd(t,e){return e===t.add||e.startsWith(`${t.add}${t.viewport}`)}static parseOne(t,e){const s=[t.parameters,t.viewport,t.noScope,t.groupEnd,t.scope,t.sibling];let i,n,r,o,a,h=!0;const c=e,l=[t.add,t.clear];for(const n of l)if(e===n){i=e,e="",s.shift(),s.shift(),o=t.viewport;break}if(void 0===i)for(const n of l)if(e.startsWith(`${n}${t.viewport}`)){i=n,e=e.slice(`${n}${t.viewport}`.length),s.shift(),s.shift(),o=t.viewport;break}if(void 0===i&&(({token:o,pos:a}=A.findNextToken(e,s)),i=-1!==a?e.slice(0,a):e,e=-1!==a?e.slice(a+o.length):"",s.shift(),o===t.parameters&&(({token:o,pos:a}=A.findNextToken(e,[t.parametersEnd])),n=e.slice(0,a),e=e.slice(a+o.length),({token:o}=A.findNextToken(e,s)),e=e.slice(o.length)),s.shift()),o===t.viewport&&(({token:o,pos:a}=A.findNextToken(e,s)),r=-1!==a?e.slice(0,a):e,e=-1!==a?e.slice(a+o.length):""),s.shift(),o===t.noScope&&(h=!1),o!==t.groupEnd&&o!==t.scope&&o!==t.sibling||(e=`${o}${e}`),""===(i??""))throw new Error(`Instruction parser error: No component specified in instruction part "${e}".`);const u=X.create(i,r,n,h);return u.unparsed=c,{instruction:u,remaining:e}}static findNextToken(t,e){const s={};for(const i of e)t.indexOf(i)>-1&&(s[i]=t.indexOf(i));const i=Math.min(...Object.values(s));for(const t in s)if(s[t]===i)return{token:t,pos:i};return{token:"",pos:-1}}}class ${constructor(t="${componentTitles}${appTitleSeparator}Aurelia",e=" | ",s="top-down",i=" > ",n=!0,r="app-",o){this.appTitle=t,this.appTitleSeparator=e,this.componentTitleOrder=s,this.componentTitleSeparator=i,this.useComponentNames=n,this.componentPrefix=r,this.transformTitle=o}static create(t={}){return new $((t="string"==typeof t?{appTitle:t}:t).appTitle,t.appTitleSeparator,t.componentTitleOrder,t.componentTitleSeparator,t.useComponentNames,t.componentPrefix,t.transformTitle)}static for(t){return N.for(t).title}apply(t={}){t="string"==typeof t?{appTitle:t}:t,this.appTitle=t.appTitle??this.appTitle,this.appTitleSeparator=t.appTitleSeparator??this.appTitleSeparator,this.componentTitleOrder=t.componentTitleOrder??this.componentTitleOrder,this.componentTitleSeparator=t.componentTitleSeparator??this.componentTitleSeparator,this.useComponentNames=t.useComponentNames??this.useComponentNames,this.componentPrefix=t.componentPrefix??this.componentPrefix,this.transformTitle="transformTitle"in t?t.transformTitle:this.transformTitle}}class E{constructor(t="@",e="+",s="/",i="(",n=")",r="!",o="(",a=")",h=",",c="=",l="+",u="-",d="."){this.viewport=t,this.sibling=e,this.scope=s,this.groupStart=i,this.groupEnd=n,this.noScope=r,this.parameters=o,this.parametersEnd=a,this.parameterSeparator=h,this.parameterKeySeparator=c,this.add=l,this.clear=u,this.action=d}static create(t={}){return new E(t.viewport,t.sibling,t.scope,t.groupStart,t.groupEnd,t.noScope,t.parameters,t.parametersEnd,t.parameterSeparator,t.parameterKeySeparator,t.add,t.clear,t.action)}static for(t){return N.for(t).separators}apply(t={}){this.viewport=t.viewport??this.viewport,this.sibling=t.sibling??this.sibling,this.scope=t.scope??this.scope,this.groupStart=t.groupStart??this.groupStart,this.groupEnd=t.groupEnd??this.groupEnd,this.noScope=t.noScope??this.noScope,this.parameters=t.parameters??this.parameters,this.parametersEnd=t.parametersEnd??this.parametersEnd,this.parameterSeparator=t.parameterSeparator??this.parameterSeparator,this.parameterKeySeparator=t.parameterKeySeparator??this.parameterKeySeparator,this.add=t.add??this.add,this.clear=t.clear??this.clear,this.action=t.action??this.action}}class R{constructor(t="active",e="navigating"){this.loadActive=t,this.viewportNavigating=e}static create(t={}){return new R(t.loadActive,t.viewportNavigating)}static for(t){return N.for(t).indicators}apply(t={}){this.loadActive=t.loadActive??this.loadActive,this.viewportNavigating=t.viewportNavigating??this.viewportNavigating}}class N{constructor(t=E.create(),e=R.create(),s=!0,i=null,n=!0,r=0,o=!0,a=!0,h=!0,c=$.create(),l=["guardedUnload","swapped","completed"],u="attach-next-detach-current",d="",p="abort"){this.separators=t,this.indicators=e,this.useUrlFragmentHash=s,this.basePath=i,this.useHref=n,this.statefulHistoryLength=r,this.useDirectRouting=o,this.useConfiguredRoutes=a,this.additiveInstructionDefault=h,this.title=c,this.navigationSyncStates=l,this.swapOrder=u,this.fallback=d,this.fallbackAction=p,this.registrationHooks=[]}static create(t={}){return new N(E.create(t.separators),R.create(t.indicators),t.useUrlFragmentHash,t.basePath,t.useHref,t.statefulHistoryLength,t.useDirectRouting,t.useConfiguredRoutes,t.additiveInstructionDefault,$.create(t.title),t.navigationSyncStates,t.swapOrder,t.fallback,t.fallbackAction)}static for(t){return t instanceof Wt?t.options:(t=t instanceof vt?t.configuration:t.get(Ht)).options}apply(t){t=t??{},this.separators.apply(t.separators),this.indicators.apply(t.indicators),this.useUrlFragmentHash=t.useUrlFragmentHash??this.useUrlFragmentHash,this.basePath=t.basePath??this.basePath,this.useHref=t.useHref??this.useHref,this.statefulHistoryLength=t.statefulHistoryLength??this.statefulHistoryLength,this.useDirectRouting=t.useDirectRouting??this.useDirectRouting,this.useConfiguredRoutes=t.useConfiguredRoutes??this.useConfiguredRoutes,this.additiveInstructionDefault=t.additiveInstructionDefault??this.additiveInstructionDefault,this.title.apply(t.title),this.navigationSyncStates=t.navigationSyncStates??this.navigationSyncStates,this.swapOrder=t.swapOrder??this.swapOrder,this.fallback=t.fallback??this.fallback,this.fallbackAction=t.fallbackAction??this.fallbackAction,Array.isArray(t.hooks)&&(void 0!==this.routerConfiguration?t.hooks.forEach((t=>this.routerConfiguration.addHook(t.hook,t.options))):this.registrationHooks=t.hooks)}setRouterConfiguration(t){this.routerConfiguration=t,this.registrationHooks.forEach((t=>this.routerConfiguration.addHook(t.hook,t.options))),this.registrationHooks.length=0}}class P{constructor(){this.parametersString=null,this.parametersRecord=null,this.parametersList=null,this.parametersType="none"}get none(){return"none"===this.parametersType}static create(t){const e=new P;return e.set(t),e}static parse(t,e,s=!1){if(null==e||0===e.length)return[];const i=E.for(t),n=i.parameterSeparator,r=i.parameterKeySeparator;if("string"==typeof e){const t=[],i=e.split(n);for(const e of i){let i,n;[i,n]=e.split(r),void 0===n?(n=s?decodeURIComponent(i):i,i=void 0):s&&(i=decodeURIComponent(i),n=decodeURIComponent(n)),t.push({key:i,value:n})}return t}if(Array.isArray(e))return e.map((t=>({key:void 0,value:t})));const o=Object.keys(e);return o.sort(),o.map((t=>({key:t,value:e[t]})))}get typedParameters(){switch(this.parametersType){case"string":return this.parametersString;case"array":return this.parametersList;case"object":return this.parametersRecord;default:return null}}static stringify(t,e,s=!1){if(!Array.isArray(e)||0===e.length)return"";const i=E.for(t);return e.map((t=>{const e=void 0!==t.key&&s?encodeURIComponent(t.key):t.key,n=s?encodeURIComponent(t.value):t.value;return void 0!==e&&e!==n?e+i.parameterKeySeparator+n:n})).join(i.parameterSeparator)}static contains(t,e){return Object.keys(e).every((s=>e[s]===t[s]))}parameters(t){return P.parse(t,this.typedParameters)}set(t){this.parametersString=null,this.parametersList=null,this.parametersRecord=null,null==t||""===t?(this.parametersType="none",t=null):"string"==typeof t?(this.parametersType="string",this.parametersString=t):Array.isArray(t)?(this.parametersType="array",this.parametersList=t):(this.parametersType="object",this.parametersRecord=t)}get(t,e){if(void 0===e)return this.parameters(t);const s=this.parameters(t).filter((t=>t.key===e)).map((t=>t.value));return 0!==s.length?1===s.length?s[0]:s:void 0}addParameters(t){if("none"===this.parametersType)return this.set(t);if("object"!==this.parametersType)throw new Error("Can't add object parameters to existing non-object parameters!");this.set({...this.parametersRecord,...t})}toSpecifiedParameters(t,e){e=e??[];const s=this.parameters(t),i={};for(const t of e){let e=s.findIndex((e=>e.key===t));if(e>=0){const[n]=s.splice(e,1);i[t]=n.value}else if(e=s.findIndex((t=>void 0===t.key)),e>=0){const[n]=s.splice(e,1);i[t]=n.value}}for(const t of s.filter((t=>void 0!==t.key)))i[t.key]=t.value;let n=e.length;for(const t of s.filter((t=>void 0===t.key)))i[n++]=t.value;return i}toSortedParameters(t,e){e=e||[];const s=this.parameters(t),i=[];for(const t of e){let e=s.findIndex((e=>e.key===t));if(e>=0){const t={...s.splice(e,1)[0]};t.key=void 0,i.push(t)}else if(e=s.findIndex((t=>void 0===t.key)),e>=0){const t={...s.splice(e,1)[0]};i.push(t)}else i.push({value:void 0})}const n=s.filter((t=>void 0!==t.key));return n.sort(((t,e)=>(t.key||"")<(e.key||"")?1:(e.key||"")<(t.key||"")?-1:0)),i.push(...n),i.push(...s.filter((t=>void 0===t.key))),i}same(t,e,s){const i=null!==s?s.parameters:[],n=this.toSpecifiedParameters(t,i),r=e.toSpecifiedParameters(t,i);return Object.keys(n).every((t=>n[t]===r[t]))&&Object.keys(r).every((t=>r[t]===n[t]))}}class O{constructor(){this.name=null,this.type=null,this.instance=null,this.promise=null,this.func=null}static create(t){const e=new O;return e.set(t),e}static isName(t){return"string"==typeof t}static isDefinition(t){return s.K94.isType(t.Type)}static isType(t){return s.K94.isType(t)}static isInstance(t){return(0,s._CO)(t)}static isAppelation(t){return O.isName(t)||O.isType(t)||O.isInstance(t)}static getName(t){return O.isName(t)?t:O.isType(t)?s.K94.getDefinition(t).name:O.getName(t.constructor)}static getType(t){return O.isName(t)?null:O.isType(t)?t:t.constructor}static getInstance(t){return O.isName(t)||O.isType(t)?null:t}set(t){let e=null,s=null,i=null,n=null,r=null;t instanceof Promise?n=t:O.isName(t)?e=O.getName(t):O.isType(t)?(e=this.getNewName(t),s=O.getType(t)):O.isInstance(t)?(e=this.getNewName(O.getType(t)),s=O.getType(t),i=O.getInstance(t)):"function"==typeof t&&(r=t),this.name=e,this.type=s,this.instance=i,this.promise=n,this.func=r}resolve(t){if(null!==this.func&&this.set(this.func(t)),this.promise instanceof Promise)return this.promise.then((t=>{if(O.isAppelation(t))return void this.set(t);if(null!=t.default)return void this.set(t.default);const e=Object.keys(t).filter((t=>!t.startsWith("__")));if(0===e.length)throw new Error("Failed to load component Type from resolved Promise since no export was specified.");if(e.length>1)throw new Error("Failed to load component Type from resolved Promise since no 'default' export was specified when having multiple exports.");const s=e[0];this.set(t[s])}))}get none(){return!(this.isName()||this.isType()||this.isInstance()||this.isFunction()||this.isPromise())}isName(){return null!=this.name&&""!==this.name&&!this.isType()&&!this.isInstance()}isType(){return null!==this.type&&!this.isInstance()}isInstance(){return null!==this.instance}isPromise(){return null!==this.promise}isFunction(){return null!==this.func}toType(t,e){if(this.resolve(e),null!==this.type)return this.type;if(null!==this.name&&"string"==typeof this.name){if(null===t)throw new Error(`No container available when trying to resolve component '${this.name}'!`);if(t.has(s.K94.keyFrom(this.name),!0)){const e=t.getResolver(s.K94.keyFrom(this.name));if(null!==e&&void 0!==e.getFactory){const s=e.getFactory(t);if(s)return s.Type}}}return null}toInstance(t,e,i,n){if(this.resolve(n),null!==this.instance)return this.instance;if(null==t)return null;const r=t.createChild(),o=this.isType()?this.type:r.getResolver(s.K94.keyFrom(this.name)).getFactory(r).Type,a=r.invoke(o);if(null==a)throw new Error(`Failed to create instance when trying to resolve component '${this.name}'!`);return s.xIk.$el(r,a,i,null).parent=e,a}same(t,e=!1){return e?this.type===t.type:this.name===t.name}getNewName(t){return null===this.name?O.getName(t):this.name}}function M(t,e){const s=[];let i=t.findIndex(e);for(;i>=0;)s.push(t.splice(i,1)[0]),i=t.findIndex(e);return s}function B(t,e=!1){return t.filter(((t,s,i)=>(e||null!=t)&&i.indexOf(t)===s))}class L{constructor(){this.isPending=!0,this.promise=new Promise(((t,e)=>{this.t=t,this.i=e}))}resolve(t){this.t(t),this.isPending=!1}reject(t){this.i(t),this.isPending=!1}}class j{constructor(){this.isDone=!1,this.isCancelled=!1,this.isResolved=!1,this.isRejected=!1,this.isAsync=!1}static run(t,...e){if(0===e.length)return;let s=!1;null===t&&(t=new F,s=!0);const i=new F(e.shift());return j.connect(t,i,(t?.runParallel??!1)||s),e.length>0&&j.add(i,!1,...e),s?(j.process(t),t.result instanceof Promise&&this.runners.set(t.result,t),t.result):i}static runParallel(t,...e){if(0===(e?.length??0))return[];let s=!1;return null===t?(t=new F,s=!0):t=j.connect(t,new F,!0),j.add(t,!0,...e),s&&j.process(t),t.result instanceof Promise&&this.runners.set(t.result,t),s?t.result??[]:t}static step(t){if(t instanceof Promise)return j.runners.get(t)}static cancel(t){const e=j.step(t);void 0!==e&&e.cancel()}static add(t,e,...s){let i=new F(s.shift(),e);null!==t&&(i=j.connect(t,i,e));const n=i;for(;s.length>0;)i=j.connect(i,new F(s.shift(),e),!1);return n}static connect(t,e,s){if(s){const s=t.child;t.child=e,e.parent=t,e.next=s,null!==s&&(s.parent=null,s.previous=e)}else{const s=t.next;t.next=e,e.previous=t,e.next=s,null!==s&&(s.previous=e,s.parent=null)}return e}static process(t){const e=t.root;for(;null!==t&&!t.isDoing&&!t.isDone;)if(e.current=t,t.isParallelParent){t.isDone=!0;let e=t.child;for(;null!==e;)j.process(e),e=e.next}else{for(t.isDoing=!0,t.value=t.step;t.value instanceof Function&&!t.isCancelled&&!t.isExited&&!t.isDone;)t.value=t.value(t);if(!t.isCancelled)if(t.value instanceof Promise){const s=t.value;j.ensurePromise(e),((t,e)=>{e.then((e=>{t.value=e,j.settlePromise(t),t.isDone=!0,t.isDoing=!1;const s=t.nextToDo();null===s||t.isExited?(t.root.doneAll||t.isExited)&&j.settlePromise(t.root):j.process(s)})).catch((t=>{throw t}))})(t,s)}else t.isDone=!0,t.isDoing=!1,t=t.isExited?null:t.nextToDo()}e.isCancelled?j.settlePromise(e,"reject"):(e.doneAll||e.isExited)&&j.settlePromise(e)}static ensurePromise(t){return null===t.finally&&(t.finally=new L,t.promise=t.finally.promise,!0)}static settlePromise(t,e="resolve"){if(t.finally?.isPending)switch(t.promise=null,e){case"resolve":t.finally?.resolve(t.result);break;case"reject":t.finally?.reject(t.result)}}}j.runners=new WeakMap,j.roots={};class F{constructor(t=void 0,e=!1){this.step=t,this.runParallel=e,this.promise=null,this.previous=null,this.next=null,this.parent=null,this.child=null,this.current=null,this.finally=null,this.isDoing=!1,this.isDone=!1,this.isCancelled=!1,this.isExited=!1,this.exited=null,this.id="-1",this.id=""+F.id++}get isParallelParent(){return this.child?.runParallel??!1}get result(){if(null!==this.promise)return this.promise;if(null!==this.child){if(this.isParallelParent){const t=[];let e=this.child;for(;null!==e;)t.push(e.result),e=e.next;return t}return this===this.root&&null!==this.exited?this.exited.result:this.child?.tail?.result}let t=this.value;for(;t instanceof F;)t=t.result;return t}get asValue(){return this.result}get previousValue(){return this.runParallel?this.head.parent?.parent?.previous?.result:this.previous?.result}get name(){let t=`${this.id}`;return this.runParallel&&(t=`:${t}`),(this.value instanceof Promise||this.promise instanceof Promise)&&(t=`${t}*`),null!==this.finally&&(t=`${t}*`),null!==this.child&&(t=`${t}>`),this.isDone&&(t=`(${t})`),t}get root(){let t=this.head;for(;null!==t.parent;)t=t.parent.head;return t}get head(){let t=this;for(;null!==t.previous;)t=t.previous;return t}get tail(){let t=this;for(;null!==t.next;)t=t.next;return t}get done(){if(!this.isDone)return!1;let t=this.child;for(;null!==t;){if(!t.done)return!1;t=t.next}return!0}get doneAll(){return!(!this.isDone||null!==this.child&&!this.child.doneAll||null!==this.next&&!this.next.doneAll)}cancel(t=!0){return t?this.root.cancel(!1):!this.isCancelled&&(this.isCancelled=!0,this.child?.cancel(!1),this.next?.cancel(!1),!0)}exit(t=!0){return t?(this.root.exited=this,this.root.exit(!1)):!this.isExited&&(this.isExited=!0,this.child?.exit(!1),this.next?.exit(!1),!0)}nextToDo(){return null===this.child||this.child.isDoing||this.child.isDone?this.runParallel&&!this.head.parent.done?null:this.nextOrUp():this.child}nextOrUp(){let t=this.next;for(;null!==t;){if(!t.isDoing&&!t.isDone)return t;t=t.next}const e=this.head.parent??null;return null!==e&&e.done?e.nextOrUp():null}get path(){return`${this.head.parent?.path??""}/${this.name}`}get tree(){let t="",e=this.head,s=e.parent,i="";for(;null!==s;)i=`${s.path}${i}`,s=s.head.parent;do{if(t+=`${i}/${e.name}\n`,e===this)break;e=e.next}while(null!==e);return t}get report(){let t=`${this.path}\n`;return t+=this.child?.report??"",t+=this.next?.report??"",t}}F.id=0;class D{constructor(t,e,s,i,n,r,o,a){this.path=t,this.id=e,this.redirectTo=s,this.instructions=i,this.caseSensitive=n,this.title=r,this.reloadBehavior=o,this.data=a}static configure(t,e){const s=D.create(t,e);return h.OS.define(s,e,D.resourceKey),e}static getConfiguration(t){const e=h.OS.get(D.resourceKey,t)??{};return Array.isArray(t.parameters)&&(e.parameters=t.parameters),"title"in t&&(e.title=t.title),e instanceof D?e:D.create(e,t)}static create(t,e=null){null!==e&&(t=D.transferTypeToComponent(t,e)),s.K94.isType(t)?t=D.getConfiguration(t):null===e&&(t={...t});const i=D.transferIndividualIntoInstructions(t);D.validateRouteConfiguration(i);let n=i.path;return Array.isArray(n)&&(n=n.join(",")),new D(i.path??"",i.id??n??null,i.redirectTo??null,i.instructions??null,i.caseSensitive??!1,i.title??null,i.reloadBehavior??null,i.data??null)}static transferTypeToComponent(t,e){if(s.K94.isType(t))throw new Error("Invalid route configuration: A component can't be specified in a component route configuration.");const i={...t};if("component"in i||"instructions"in i)throw new Error("Invalid route configuration: The 'component' and 'instructions' properties can't be specified in a component route configuration.");return"redirectTo"in i||(i.component=e),"path"in i||"redirectTo"in i||(i.path=s.K94.getDefinition(e).name),i}static transferIndividualIntoInstructions(t){if(null==t)throw new Error("Invalid route configuration: expected an object.");if(null!==(t.component??null)||null!==(t.viewport??null)||null!==(t.parameters??null)||null!==(t.children??null)){if(null!=t.instructions)throw new Error("Invalid route configuration: The 'instructions' property can't be used together with the 'component', 'viewport', 'parameters' or 'children' properties.");t.instructions=[{component:t.component,viewport:t.viewport,parameters:t.parameters,children:t.children}]}return t}static validateRouteConfiguration(t){if(null===t.redirectTo&&null===t.instructions)throw new Error("Invalid route configuration: either 'redirectTo' or 'instructions' need to be specified.")}}D.resourceKey=(0,e.r$)("route");const V={name:(0,e.r$)("routes"),isConfigured:t=>h.OS.has(V.name,t)||"routes"in t,configure(t,e){const s=t.map((t=>D.create(t)));return h.OS.define(s,e,V.name),e},getConfiguration(t){const e=t,s=[],i=h.OS.get(V.name,t);return Array.isArray(i)&&s.push(...i),Array.isArray(e.routes)&&s.push(...e.routes),s.map((t=>t instanceof D?t:D.create(t)))}};class H extends x{}class q extends T{constructor(t,e,s,i,n,r=null,o={catches:[],source:null}){super(t,e,s),this.rootComponentType=r,this.options=o,this.instruction=null,this.available=!0,this.sourceItem=null,this.sourceItemIndex=-1,this.remove=!1,this.add=!1,this.contents.push(new H(t,this,i,n)),this.catches.length>0&&(this.instruction=X.create(this.catches[0],this.name))}get isEmpty(){return null===this.instruction}get passThroughScope(){return null===this.rootComponentType&&0===this.catches.length}get siblings(){const t=this.connectedScope.parent;return null===t?[this]:t.enabledChildren.filter((t=>t.isViewportScope&&t.endpoint.name===this.name)).map((t=>t.endpoint))}get source(){return this.options.source??null}get catches(){let t=this.options.catches??[];return"string"==typeof t&&(t=t.split(",")),t}get default(){if(this.catches.length>0)return this.catches[0]}toString(){const t=this.instruction?.component.name??"",e=this.getNextContent()?.instruction.component.name??"";return`vs:${this.name}[${t}->${e}]`}setNextContent(t,e){return t.endpoint.set(this),this.remove=t.isClear(this.router)||t.isClearAll(this.router),this.add=t.isAdd(this.router)&&Array.isArray(this.source),this.add&&(t.component.name=null),void 0!==this.default&&null===t.component.name&&(t.component.name=this.default),this.contents.push(new H(this.router,this,this.owningScope,this.scope.hasScope,t,e)),"swap"}transition(t){j.run(null,(e=>t.setEndpointStep(this,e.root)),(()=>t.addEndpointState(this,"guardedUnload")),(()=>t.addEndpointState(this,"guardedLoad")),(()=>t.addEndpointState(this,"guarded")),(()=>t.addEndpointState(this,"loaded")),(()=>t.addEndpointState(this,"unloaded")),(()=>t.addEndpointState(this,"routed")),(()=>t.addEndpointState(this,"swapped")),(()=>t.addEndpointState(this,"completed")))}finalizeContentChange(t,e){const s=this.contents.findIndex((e=>e.navigation===t.navigation));let i=this.contents[s];if(this.remove){const t=new H(this.router,this,this.owningScope,this.scope.hasScope);this.contents.splice(s,1,t),i.delete(),i=t}i.completed=!0;let n=0;for(let t=0,e=s;t<e&&this.contents[0].navigation.completed;t++)n++;this.contents.splice(0,n),this.remove&&Array.isArray(this.source)&&this.removeSourceItem()}cancelContentChange(t,e=null){[...new Set(this.scope.children.map((t=>t.endpoint)))].forEach((s=>s.cancelContentChange(t,e)));const s=this.contents.findIndex((e=>e.navigation===t.navigation));if(!(s<0)&&(this.contents.splice(s,1),this.add)){const t=this.source.indexOf(this.sourceItem);this.source.splice(t,1),this.sourceItem=null}}acceptSegment(t){return null===t&&void 0===t||0===t.length||t===X.clear(this.router)||t===X.add(this.router)||t===this.name||0===this.catches.length||!!this.catches.includes(t)||!!this.catches.filter((t=>t.includes("*"))).length}binding(){(this.source||[]).length>0&&null===this.sourceItem&&(this.sourceItem=this.getAvailableSourceItem())}unbinding(){null!==this.sourceItem&&null!==this.source&&M(this.source,(t=>t===this.sourceItem)),this.sourceItem=null}getAvailableSourceItem(){if(null===this.source)return null;const t=this.siblings;for(const e of this.source)if(t.every((t=>t.sourceItem!==e)))return e;return null}addSourceItem(){const t={};return this.source.push(t),t}removeSourceItem(){this.sourceItemIndex=this.source.indexOf(this.sourceItem),this.sourceItemIndex>=0&&this.source.splice(this.sourceItemIndex,1)}getRoutes(){const t=[];if(null!==this.rootComponentType){const e=this.rootComponentType.constructor===this.rootComponentType.constructor.constructor?this.rootComponentType:this.rootComponentType.constructor;t.push(...V.getConfiguration(e)??[])}return t}}class U{constructor(t={instruction:"",fullStateInstruction:""}){this.instruction=t.instruction,this.fullStateInstruction=t.fullStateInstruction,this.scope=t.scope,this.index=t.index,this.firstEntry=t.firstEntry,this.path=t.path,this.title=t.title,this.query=t.query,this.fragment=t.fragment,this.parameters=t.parameters,this.data=t.data}toStoredNavigation(){return{instruction:this.instruction,fullStateInstruction:this.fullStateInstruction,scope:this.scope,index:this.index,firstEntry:this.firstEntry,path:this.path,title:this.title,query:this.query,fragment:this.fragment,parameters:this.parameters,data:this.data}}}class W{constructor(){this.first=!1,this.new=!1,this.refresh=!1,this.forward=!1,this.back=!1,this.replace=!1}}class _ extends U{constructor(t={instruction:"",fullStateInstruction:""}){super(t),this.navigation=new W,this.repeating=!1,this.previous=null,this.fromBrowser=!1,this.origin=null,this.replacing=!1,this.refreshing=!1,this.untracked=!1,this.process=null,this.completed=!0,this.fromBrowser=t.fromBrowser??this.fromBrowser,this.origin=t.origin??this.origin,this.replacing=t.replacing??this.replacing,this.refreshing=t.refreshing??this.refreshing,this.untracked=t.untracked??this.untracked,this.historyMovement=t.historyMovement??this.historyMovement,this.process=null,this.timestamp=Date.now()}get useFullStateInstruction(){return(this.navigation.back??!1)||(this.navigation.forward??!1)||(this.navigation.refresh??!1)}static create(t={instruction:"",fullStateInstruction:""}){return new _(t)}}class K{constructor(){this.map=new Map}set(t,e){const s=this.map.get(t);s instanceof L&&s.resolve(e),this.map.set(t,e)}delete(t){const e=this.map.get(t);e instanceof L&&e.reject(),this.map.delete(t)}await(t){if(!this.map.has(t)){const e=new L;return this.map.set(t,e),e.promise}const e=this.map.get(t);return e instanceof L?e.promise:e}has(t){return this.map.has(t)&&!(this.map.get(t)instanceof L)}clone(){const t=new K;return t.map=new Map(this.map),t}}const Q=(t,...e)=>new Error(`AUR${String(t).padStart(4,"0")}:${e.map(String)}`);class z extends x{constructor(t,e,s,i,n=X.create(""),r=_.create({instruction:"",fullStateInstruction:""}),o=null){super(t,e,s,i,n,r),this.router=t,this.instruction=n,this.navigation=r,this.contentStates=new K,this.fromCache=!1,this.fromHistory=!1,this.reload=!1,this.activatedResolve=null,this.instruction.component.isType()||null==o?.container||(this.instruction.component.type=this.toComponentType(o.container))}get componentInstance(){return this.instruction.component.instance}get reloadBehavior(){return this.instruction.route instanceof I&&null!==this.instruction.route.match?.reloadBehavior?this.instruction.route.match?.reloadBehavior:null!==this.instruction.component.instance&&"reloadBehavior"in this.instruction.component.instance&&void 0!==this.instruction.component.instance.reloadBehavior?this.instruction.component.instance.reloadBehavior:"default"}get controller(){return this.instruction.component.instance?.$controller}equalComponent(t){return this.instruction.sameComponent(this.router,t.instruction)}equalParameters(t){return this.instruction.sameComponent(this.router,t.instruction,!0)&&(this.navigation.query??"")===(t.navigation.query??"")}isCacheEqual(t){return this.instruction.sameComponent(this.router,t.instruction,!0)}contentController(t){return s.xIk.$el(t.container.createChild(),this.instruction.component.instance,t.element,null)}createComponent(t,e,s){if(!this.contentStates.has("created")){if(!this.fromCache&&!this.fromHistory)try{this.instruction.component.set(this.toComponentInstance(t.container,t.controller,t.element))}catch(i){if(!i.message.startsWith("AUR0009:"))throw i;if(""===(e??"")){const t=this.instruction.component.name;throw Q(2006,t)}"process-children"===s?this.instruction.parameters.set([this.instruction.component.name]):(this.instruction.parameters.set([this.instruction.unparsed??this.instruction.component.name]),this.instruction.nextScopeInstructions=null),this.instruction.component.set(e);try{this.instruction.component.set(this.toComponentInstance(t.container,t.controller,t.element))}catch(t){if(!t.message.startsWith("AUR0009:"))throw t;const e=this.instruction.component.name;throw Q(2006,e,t)}}this.contentStates.set("created",void 0)}}canLoad(){if(!this.contentStates.has("created")||this.contentStates.has("checkedLoad")&&!this.reload)return!0;const t=this.instruction.component.instance;if(null==t)return!0;this.contentStates.set("checkedLoad",void 0);const e=this.endpoint.parentViewport?.getTimeContent(this.navigation.timestamp)?.instruction?.typeParameters(this.router),s=this.instruction.typeParameters(this.router),i={...this.navigation.parameters,...e,...s},n=this.h(t,"canLoad").map((e=>s=>!1!==s?.previousValue&&e(t,i,this.instruction,this.navigation)));return null!=t.canLoad&&n.push((e=>!1!==e?.previousValue&&t.canLoad(i,this.instruction,this.navigation))),0===n.length||(1===n.length?n[0](null):j.run(null,...n))}canUnload(t){if(this.contentStates.has("checkedUnload")&&!this.reload)return!0;if(this.contentStates.set("checkedUnload",void 0),!this.contentStates.has("loaded"))return!0;const e=this.instruction.component.instance;null===t&&(t=_.create({instruction:"",fullStateInstruction:"",previous:this.navigation}));const s=this.h(e,"canUnload").map((s=>i=>!1!==i?.previousValue&&s(e,this.instruction,t)));return null!=e.canUnload&&s.push((s=>{if(!1===s?.previousValue)return!1;const i=e.canUnload?.(this.instruction,t);return i instanceof Promise?i.then(Boolean):Boolean(i)})),0===s.length||(1===s.length?s[0](null):j.run(null,...s))}load(t){return j.run(t,(()=>this.contentStates.await("checkedLoad")),(()=>{if(!this.contentStates.has("created")||this.contentStates.has("loaded")&&!this.reload)return;this.reload=!1,this.contentStates.set("loaded",void 0);const t=this.instruction.component.instance,e=this.endpoint.parentViewport?.getTimeContent(this.navigation.timestamp)?.instruction?.typeParameters(this.router),s=this.instruction.typeParameters(this.router),i={...this.navigation.parameters,...e,...s},n=this.h(t,"loading").map((e=>()=>e(t,i,this.instruction,this.navigation)));return n.push(...this.h(t,"load").map((e=>()=>(console.warn(`[Deprecated] Found deprecated hook name "load" in ${this.instruction.component.name}. Please use the new name "loading" instead.`),e(t,i,this.instruction,this.navigation))))),0!==n.length?("function"==typeof t.loading&&n.push((()=>t.loading(i,this.instruction,this.navigation))),G(t,"load")&&(console.warn(`[Deprecated] Found deprecated hook name "load" in ${this.instruction.component.name}. Please use the new name "loading" instead.`),n.push((()=>t.load(i,this.instruction,this.navigation)))),j.run(null,...n)):G(t,"loading")?t.loading(i,this.instruction,this.navigation):G(t,"load")?(console.warn(`[Deprecated] Found deprecated hook name "load" in ${this.instruction.component.name}. Please use the new name "loading" instead.`),t.load(i,this.instruction,this.navigation)):void 0}))}unload(t){if(!this.contentStates.has("loaded"))return;this.contentStates.delete("loaded");const e=this.instruction.component.instance;null===t&&(t=_.create({instruction:"",fullStateInstruction:"",previous:this.navigation}));const s=this.h(e,"unloading").map((s=>()=>s(e,this.instruction,t)));return s.push(...this.h(e,"unload").map((s=>()=>(console.warn(`[Deprecated] Found deprecated hook name "unload" in ${this.instruction.component.name}. Please use the new name "unloading" instead.`),s(e,this.instruction,t))))),0!==s.length?(G(e,"unloading")&&s.push((()=>e.unloading(this.instruction,t))),G(e,"unload")&&(console.warn(`[Deprecated] Found deprecated hook name "unload" in ${this.instruction.component.name}. Please use the new name "unloading" instead.`),s.push((()=>e.unload(this.instruction,t)))),j.run(null,...s)):G(e,"unloading")?e.unloading(this.instruction,t):G(e,"unload")?(console.warn(`[Deprecated] Found deprecated hook name "unload" in ${this.instruction.component.name}. Please use the new name "unloading" instead.`),e.unload(this.instruction,t)):void 0}activateComponent(t,e,s,i,n,r){return j.run(t,(()=>this.contentStates.await("loaded")),(()=>this.waitForParent(s)),(()=>{if(!this.contentStates.has("activating")&&!this.contentStates.has("activated"))return this.contentStates.set("activating",void 0),this.controller?.activate(e??this.controller,s,void 0)}),(()=>{this.contentStates.set("activated",void 0)}))}deactivateComponent(t,e,s,i,n=!1){if(this.contentStates.has("activated")||this.contentStates.has("activating"))return j.run(t,(()=>{if(n&&null!==i.element){const t=Array.from(i.element.getElementsByTagName("*"));for(const e of t)(e.scrollTop>0||e.scrollLeft)&&e.setAttribute("au-element-scroll",`${e.scrollTop},${e.scrollLeft}`)}return this.contentStates.delete("activated"),this.contentStates.delete("activating"),this.controller?.deactivate(e??this.controller,s)}))}disposeComponent(t,e,s=!1){if(this.contentStates.has("created")&&null!=this.instruction.component.instance)return s?void e.push(this):(this.contentStates.delete("created"),this.controller?.dispose())}freeContent(t,e,s,i,n=!1){return j.run(t,(()=>this.unload(s)),(t=>this.deactivateComponent(t,null,e.controller,e,n)),(()=>this.disposeComponent(e,i,n)))}toComponentName(){return this.instruction.component.name}toComponentType(t){return this.instruction.component.none?null:this.instruction.component.toType(t,this.instruction)}toComponentInstance(t,e,s){return this.instruction.component.none?null:this.instruction.component.toInstance(t,e,s,this.instruction)}waitForParent(t){if(null!==t)return t.isActive?void 0:new Promise((t=>{this.endpoint.activeResolve=t}))}h(t,e){return(t.$controller.lifecycleHooks[e]??[]).map((t=>t.instance[e].bind(t.instance)))}}function G(t,e){return"function"==typeof t[e]}class J{constructor(t=!0,e=[],s="",i="",n="",r=!1,o=!1,a=!1,h=!1,c=!1){this.scope=t,this.usedBy=e,this.fallback=i,this.fallbackAction=n,this.noLink=r,this.noTitle=o,this.stateful=a,this.forceDescription=h,this.noHistory=c,this.default=void 0,this.default=s}static create(t){const e=new J;return void 0!==t&&e.apply(t),e}apply(t){this.scope=t.scope??this.scope,this.usedBy=("string"==typeof t.usedBy?t.usedBy.split(",").filter((t=>t.length>0)):t.usedBy)??this.usedBy,this.default=t.default??this.default,this.fallback=t.fallback??this.fallback,this.fallbackAction=t.fallbackAction??this.fallbackAction,this.noLink=t.noLink??this.noLink,this.noTitle=t.noTitle??this.noTitle,this.stateful=t.stateful??this.stateful,this.forceDescription=t.forceDescription??this.forceDescription,this.noHistory=t.noHistory??this.noHistory}}class Y extends T{constructor(t,e,s,i,n,r){super(t,e,s),this.contents=[],this.forceRemove=!1,this.options=new J,this.activeResolve=null,this.connectionResolve=null,this.clear=!1,this.coordinators=[],this.previousViewportState=null,this.cache=[],this.historyCache=[],this.contents.push(new z(t,this,i,n)),this.contents[0].completed=!0,void 0!==r&&this.options.apply(r)}getContent(){if(1===this.contents.length)return this.contents[0];let t;for(let e=0,s=this.contents.length;e<s&&this.contents[e].completed;e++)t=this.contents[e];return t}getNextContent(){if(1===this.contents.length)return null;const t=this.contents.indexOf(this.getContent());return this.contents.length>t?this.contents[t+1]:null}getTimeContent(t){let e=null;for(let s=0,i=this.contents.length;s<i&&!(this.contents[s].navigation.timestamp>t);s++)e=this.contents[s];return e}getNavigationContent(t){return super.getNavigationContent(t)}get parentViewport(){let t=this.connectedScope;for(;null!=t?.parent;)if(t=t.parent,t.endpoint.isViewport)return t.endpoint;return null}get isEmpty(){return null===this.getContent().componentInstance}get doForceRemove(){let t=this.connectedScope;for(;null!==t;){if(t.isViewport&&t.endpoint.forceRemove)return!0;t=t.parent}return!1}isActiveNavigation(t){return this.coordinators[this.coordinators.length-1]===t}toString(){const t=this.getContent()?.instruction.component.name??"",e=this.getNextContent()?.instruction.component.name??"";return`v:${this.name}[${t}->${e}]`}setNextContent(t,e){t.endpoint.set(this),this.clear=t.isClear(this.router);const s=this.getContent(),i=new z(this.router,this,this.owningScope,this.scope.hasScope,this.clear?void 0:t,e,this.connectedCE??null);if(this.contents.push(i),i.fromHistory=!(null===i.componentInstance||null==e.navigation||!e.navigation.back&&!e.navigation.forward),this.options.stateful){const t=this.cache.find((t=>i.isCacheEqual(t)));void 0!==t?(this.contents.splice(this.contents.indexOf(i),1,t),i.fromCache=!0):this.cache.push(i)}return null!==i.componentInstance&&s.componentInstance===i.componentInstance?(i.delete(),this.contents.splice(this.contents.indexOf(i),1),this.transitionAction="skip"):!s.equalComponent(i)||e.navigation.refresh||"refresh"===s.reloadBehavior?this.transitionAction="swap":"disallow"===s.reloadBehavior?(i.delete(),this.contents.splice(this.contents.indexOf(i),1),this.transitionAction="skip"):"reload"===s.reloadBehavior?(s.reload=!0,i.instruction.component.set(s.componentInstance),i.contentStates=s.contentStates.clone(),i.reload=s.reload,this.transitionAction="reload"):this.options.stateful&&s.equalParameters(i)||s.equalParameters(i)?(i.delete(),this.contents.splice(this.contents.indexOf(i),1),this.transitionAction="skip"):this.transitionAction="swap"}setConnectedCE(t,e){e=e??{},this.connectedCE!==t&&(this.previousViewportState={...this},this.clearState(),this.connectedCE=t,this.options.apply(e),this.connectionResolve?.());const s=(this.scope.parent?.endpoint.getRoutes()??[]).filter((t=>(Array.isArray(t.path)?t.path:[t.path]).includes(""))).length>0;if(null===this.getContent().componentInstance&&null==this.getNextContent()?.componentInstance&&(this.options.default||s)){const t=X.parse(this.router,this.options.default??"");if(0===t.length&&s){const e=this.scope.parent?.findInstructions([X.create("")],!1,this.router.configuration.options.useConfiguredRoutes);e?.foundConfiguration&&t.push(...e.instructions)}for(const e of t)e.endpoint.set(this),e.scope=this.owningScope,e.default=!0;this.router.load(t,{append:!0}).catch((t=>{throw t}))}}remove(t,e){return this.connectedCE===e&&j.run(t,(t=>{if(null!==this.getContent().componentInstance)return this.getContent().freeContent(t,this.connectedCE,this.getNextContent()?.navigation??null,this.historyCache,!this.doForceRemove&&(this.router.statefulHistory||this.options.stateful))}),(t=>{if(this.doForceRemove){const e=[];for(const t of this.historyCache)e.push((e=>t.freeContent(e,null,null,this.historyCache,!1)));return e.push((()=>{this.historyCache=[]})),j.run(t,...e)}return!0}))}async transition(t){const e=this.router.configuration.options.indicators.viewportNavigating;for(this.coordinators.push(t);this.coordinators[0]!==t;)await this.coordinators[0].waitForSyncState("completed");let s=this.parentViewport;null!==s&&"reload"!==s.transitionAction&&"swap"!==s.transitionAction&&(s=null);const i=[e=>{if(this.isActiveNavigation(t))return this.canUnload(t,e)},e=>{if(this.isActiveNavigation(t))if(e.previousValue){if(this.router.isRestrictedNavigation){const e=this.router.configuration.options;this.getNavigationContent(t).createComponent(this.connectedCE,this.options.fallback||e.fallback,this.options.fallbackAction||e.fallbackAction)}}else t.cancel();t.addEndpointState(this,"guardedUnload")},()=>t.waitForSyncState("guardedUnload",this),()=>null!==s?t.waitForEndpointState(s,"guardedLoad"):void 0,e=>{if(this.isActiveNavigation(t))return this.canLoad(t,e)},e=>{if(this.isActiveNavigation(t)){let s=e.previousValue;if("boolean"!=typeof s){if(this.getNavigationContent(t).instruction.nextScopeInstructions=null,"string"==typeof s){const t=this.scope,e=this.router.configuration.options;let i=X.parse(this.router,s);const n=t.parent?.findInstructions(i,e.useDirectRouting,e.useConfiguredRoutes);(n?.foundConfiguration||n?.foundInstructions)&&(i=n.instructions);for(const e of i)e.endpoint.set(this),e.scope=t.owningScope;s=i}return j.run(e,(e=>this.cancelContentChange(t,e)),(t=>(this.router.load(s,{append:!0}),t.exit())))}if(!s)return e.cancel(),t.cancel(),void(this.getNavigationContent(t).instruction.nextScopeInstructions=null)}t.addEndpointState(this,"guardedLoad"),t.addEndpointState(this,"guarded")}],n=[()=>t.waitForSyncState("guarded",this),e=>{if(this.isActiveNavigation(t))return this.unload(t,e)},()=>t.addEndpointState(this,"unloaded"),()=>t.waitForSyncState("unloaded",this),()=>null!==s?t.waitForEndpointState(s,"loaded"):void 0,e=>{if(this.isActiveNavigation(t))return this.load(t,e)},()=>t.addEndpointState(this,"loaded"),()=>t.addEndpointState(this,"routed")],r=[()=>t.waitForSyncState("routed",this),()=>t.waitForEndpointState(this,"routed")];switch(this.router.configuration.options.swapOrder){case"detach-current-attach-next":r.push((e=>{if(this.isActiveNavigation(t))return this.removeContent(e,t)}),(e=>{if(this.isActiveNavigation(t))return this.addContent(e,t)}));break;case"attach-next-detach-current":r.push((e=>{if(this.isActiveNavigation(t))return this.addContent(e,t)}),(e=>{if(this.isActiveNavigation(t))return this.removeContent(e,t)}));break;case"detach-attach-simultaneously":r.push((e=>j.runParallel(e,(e=>{if(this.isActiveNavigation(t))return this.removeContent(e,t)}),(e=>{if(this.isActiveNavigation(t))return this.addContent(e,t)}))));break;case"attach-detach-simultaneously":r.push((e=>j.runParallel(e,(e=>{if(this.isActiveNavigation(t))return this.addContent(e,t)}),(e=>{if(this.isActiveNavigation(t))return this.removeContent(e,t)}))))}r.push((()=>t.addEndpointState(this,"swapped"))),this.connectedCE?.setActivity?.(e,!0),this.connectedCE?.setActivity?.(t.navigation.navigation,!0);const o=j.run(null,(e=>t.setEndpointStep(this,e.root)),...i,...n,...r,(()=>t.addEndpointState(this,"completed")),(()=>t.waitForSyncState("bound")),(()=>{this.connectedCE?.setActivity?.(e,!1),this.connectedCE?.setActivity?.(t.navigation.navigation,!1)}));o instanceof Promise&&o.catch((t=>{}))}canUnload(t,e){return j.run(e,(e=>this.getContent().connectedScope.canUnload(t,e)),(e=>!!e.previousValue&&this.getContent().canUnload(t.navigation)))}canLoad(t,e){return!!this.clear||j.run(e,(()=>this.waitForConnected()),(()=>{const e=this.router.configuration.options,s=this.getNavigationContent(t);return s.createComponent(this.connectedCE,this.options.fallback||e.fallback,this.options.fallbackAction||e.fallbackAction),s.canLoad()}))}load(t,e){if(!this.clear)return this.getNavigationContent(t).load(e)}addContent(t,e){return this.activate(t,null,this.connectedController,e)}removeContent(t,e){if(this.isEmpty)return;const s=this.router.statefulHistory||(this.options.stateful??!1);return j.run(t,(()=>e.addEndpointState(this,"bound")),(()=>e.waitForSyncState("bound")),(t=>this.deactivate(t,null,this.connectedController)),(()=>s?this.dispose():void 0))}activate(t,e,s,i){if(null!==this.activeContent.componentInstance)return j.run(t,(()=>this.activeContent.canLoad()),(t=>this.activeContent.load(t)),(t=>this.activeContent.activateComponent(t,e,s,this.connectedCE,(()=>i?.addEndpointState(this,"bound")),i?.waitForSyncState("bound"))))}deactivate(t,e,s){const i=this.getContent();if(null!=i?.componentInstance&&!i.reload&&i.componentInstance!==this.getNextContent()?.componentInstance)return i.deactivateComponent(t,e,s,this.connectedCE,this.router.statefulHistory||this.options.stateful)}unload(t,e){return j.run(e,(e=>this.getContent().connectedScope.unload(t,e)),(()=>null!=this.getContent().componentInstance?this.getContent().unload(t.navigation??null):void 0))}dispose(){null===this.getContent().componentInstance||this.getContent().reload||this.getContent().componentInstance===this.getNextContent()?.componentInstance||this.getContent().disposeComponent(this.connectedCE,this.historyCache,this.router.statefulHistory||this.options.stateful)}finalizeContentChange(t,e){const s=this.contents.findIndex((e=>e.navigation===t.navigation));let i=this.contents[s];const n=this.contents[s-1];if(this.clear){const t=new z(this.router,this,this.owningScope,this.scope.hasScope,void 0,i.navigation);this.contents.splice(s,1,t),i.delete(),i=t}else i.reload=!1;n.delete(),i.completed=!0,this.transitionAction="",i.contentStates.delete("checkedUnload"),i.contentStates.delete("checkedLoad"),this.previousViewportState=null;const r=this.router.configuration.options.indicators.viewportNavigating;this.connectedCE?.setActivity?.(r,!1),this.connectedCE?.setActivity?.(t.navigation.navigation,!1);let o=0;for(let t=0,e=s;t<e&&this.contents[0].navigation.completed;t++)o++;this.contents.splice(0,o),M(this.coordinators,(e=>e===t))}cancelContentChange(t,e=null){[...new Set(this.scope.children.map((t=>t.endpoint)))].forEach((s=>s.cancelContentChange(t,e)));const s=this.contents.findIndex((e=>e.navigation===t.navigation));if(s<0)return;const i=t.getEndpointStep(this)?.current??null,n=this.contents[s],r=this.contents[s-1];return n.instruction.cancelled=!0,j.run(i,(t=>n.freeContent(t,this.connectedCE,n.navigation,this.historyCache,this.router.statefulHistory||this.options.stateful)),(()=>{this.previousViewportState&&Object.assign(this,this.previousViewportState),n?.delete(),null!==n&&this.contents.splice(this.contents.indexOf(n),1),this.transitionAction="",r?.contentStates.delete("checkedUnload"),r?.contentStates.delete("checkedLoad");const e=this.router.configuration.options.indicators.viewportNavigating;this.connectedCE?.setActivity?.(e,!1),this.connectedCE?.setActivity?.(t.navigation.navigation,!1),t.removeEndpoint(this),M(this.coordinators,(e=>e===t))}),(()=>{if(i!==e)return i?.exit()}))}wantComponent(t){return this.options.usedBy.includes(t)}acceptComponent(t){if("-"===t||null===t)return!0;const e=this.options.usedBy;return 0===e.length||!!e.includes(t)||!!e.filter((t=>t.includes("*"))).length}freeContent(t,e){const s=this.historyCache.find((t=>t.componentInstance===e));if(void 0!==s)return j.run(t,(t=>(this.forceRemove=!0,s.freeContent(t,null,null,this.historyCache,!1))),(()=>{this.forceRemove=!1,M(this.historyCache,(t=>t===s))}))}getRoutes(){const t=[];let e=this.getComponentType();return null!=e&&(e=e.constructor===e.constructor.constructor?e:e.constructor,t.push(...V.getConfiguration(e)??[])),t}getTitle(t){if(this.options.noTitle)return"";const e=this.getComponentType();if(null===e)return"";let s="";const i=e.title;if(void 0!==i)if("string"==typeof i)s=i;else{const e=this.getComponentInstance();s=i.call(e,e,t)}else if(this.router.configuration.options.title.useComponentNames){let t=this.getContentInstruction().component.name??"";const e=this.router.configuration.options.title.componentPrefix??"";t.startsWith(e)&&(t=t.slice(e.length)),t=t.replace("-"," "),s=t.slice(0,1).toLocaleUpperCase()+t.slice(1)}return s}getComponentType(){let t=this.getContentInstruction().component.type??null;return null===t&&(t=s.K94.for(this.connectedCE.element).container.componentType),t??null}getComponentInstance(){return this.getContentInstruction().component.instance??null}getContentInstruction(){return this.getNextContent()?.instruction??this.getContent().instruction??null}clearState(){this.options=J.create();const t=this.owningScope,e=this.scope.hasScope;if(this.getContent().delete(),this.contents.shift(),this.contents.length<1)throw new Error("no content!");this.contents.push(new z(this.router,this,t,e)),this.cache=[]}waitForConnected(){if(null===this.connectedCE)return new Promise((t=>{this.connectionResolve=t}))}}class Z{constructor(){this.name=null,this.instance=null,this.scope=null}get none(){return null===this.name&&null===this.instance}get endpointType(){return this.instance instanceof Y?"Viewport":this.instance instanceof q?"ViewportScope":null}static create(t){const e=new Z;return e.set(t),e}static isName(t){return"string"==typeof t}static isInstance(t){return t instanceof T}static getName(t){return Z.isName(t)?t:t?t.name:null}static getInstance(t){return Z.isName(t)?null:t}set(t){void 0!==t&&""!==t||(t=null),"string"==typeof t?(this.name=t,this.instance=null):(this.instance=t,null!==t&&(this.name=t.name,this.scope=t.owningScope))}toInstance(t){return null!==this.instance?this.instance:t.getEndpoint(this.endpointType,this.name)}same(t,e){return null!==this.instance&&null!==t.instance?this.instance===t.instance:!(null!==this.endpointType&&null!==t.endpointType&&this.endpointType!==t.endpointType||e&&this.scope!==t.scope||(null!==this.instance?this.instance.name:this.name)!==(null!==t.instance?t.instance.name:t.name))}}class X{constructor(t,e,s){this.ownsScope=!0,this.nextScopeInstructions=null,this.scope=null,this.scopeModifier="",this.needsEndpointDescribed=!1,this.route=null,this.routeStart=!1,this.default=!1,this.topInstruction=!1,this.unparsed=null,this.cancelled=!1,this.component=O.create(t),this.endpoint=Z.create(e),this.parameters=P.create(s)}static create(t,e,s,i=!0,n=null){const r=new X(t,e,s);return r.ownsScope=i,r.nextScopeInstructions=n,r}static createClear(t,e){return X.create(X.clear(t),e)}static from(t,e){Array.isArray(e)||(e=[e]);const i=[];for(const n of e)if("string"==typeof n)i.push(...X.parse(t,n));else if(n instanceof X)i.push(n);else if(n instanceof Promise)i.push(X.create(n));else if(O.isAppelation(n))i.push(X.create(n));else if(O.isDefinition(n))i.push(X.create(n.Type));else if("component"in n||"id"in n){const e=n,s=X.create(e.component,e.viewport,e.parameters);s.route=n.id??null,void 0!==e.children&&null!==e.children&&(s.nextScopeInstructions=X.from(t,e.children)),i.push(s)}else if("object"==typeof n&&null!==n){const t=s.K94.define(n);i.push(X.create(t))}else i.push(X.create(n));return i}static clear(t){return E.for(t).clear}static add(t){return E.for(t).add}static parse(t,e){const s=E.for(t);let i="";const n=/^[./]+/.exec(e);Array.isArray(n)&&n.length>0&&(i=n[0],e=e.slice(i.length));const r=A.parse(s,e,!0,!0).instructions;for(const t of r)t.scopeModifier=i;return r}static stringify(t,e,s=!1,i=!1){return"string"==typeof e?e:e.map((e=>e.stringify(t,s,i))).filter((t=>t.length>0)).join(E.for(t).sibling)}static resolve(t){const e=t.filter((t=>t.isUnresolved)).map((t=>t.resolve())).filter((t=>t instanceof Promise));if(e.length>0)return Promise.all(e)}static containsSiblings(t,e){return null!==e&&(e.filter((e=>!e.isClear(t)&&!e.isClearAll(t))).length>1||e.some((e=>X.containsSiblings(t,e.nextScopeInstructions))))}static flat(t){const e=[];for(const s of t)e.push(s),s.hasNextScopeInstructions&&e.push(...X.flat(s.nextScopeInstructions));return e}static clone(t,e=!1,s=!1){return t.map((t=>t.clone(e,s)))}static contains(t,e,s,i){return s.every((s=>s.isIn(t,e,i)))}get viewport(){return this.endpoint.instance instanceof Y||null===this.endpoint.endpointType?this.endpoint:null}get viewportScope(){return this.endpoint.instance instanceof q||null===this.endpoint.endpointType?this.endpoint:null}get previous(){return this.endpoint.instance?.getContent()?.instruction}isAdd(t){return this.component.name===E.for(t).add}isClear(t){return this.component.name===E.for(t).clear}isAddAll(t){return this.isAdd(t)&&0===(this.endpoint.name?.length??0)}isClearAll(t){return this.isClear(t)&&0===(this.endpoint.name?.length??0)}get hasNextScopeInstructions(){return(this.nextScopeInstructions?.length??0)>0}get isUnresolved(){return this.component.isFunction()||this.component.isPromise()}resolve(){return this.component.resolve(this)}typeParameters(t){return this.parameters.toSpecifiedParameters(t,this.component.type?.parameters??[])}sameRoute(t){const e=this.route?.match,s=t.route?.match;return null!=e&&null!=s&&("string"==typeof e||"string"==typeof s?e===s:e.id===s.id)}sameComponent(t,e,s=!1,i=!1){return!(s&&!this.sameParameters(t,e,i))&&this.component.same(e.component,i)}sameEndpoint(t,e){return this.endpoint.same(t.endpoint,e)}sameParameters(t,e,s=!1){return!!this.component.same(e.component,s)&&this.parameters.same(t,e.parameters,this.component.type)}stringify(t,e=!1,s=!1,i=!1){const n=E.for(t);let r=e,o=!1;if(s){const t=this.viewport?.instance??null;if(t?.options.noLink)return"";this.needsEndpointDescribed||t?.options.forceDescription&&null==this.viewportScope?.instance||(r=!0),t?.options.fallback===this.component.name&&(o=!0),t?.options.default===this.component.name&&(o=!0)}const a=this.nextScopeInstructions;let h=this.scopeModifier;if(this.route instanceof I&&!this.routeStart)return!i&&Array.isArray(a)?X.stringify(t,a,e,s):"";const c=this.stringifyShallow(t,r,o);if(h+=c.endsWith(n.scope)?c.slice(0,-n.scope.length):c,!i&&Array.isArray(a)&&a.length>0){const i=X.stringify(t,a,e,s);i.length>0&&(h+=n.scope,h+=1===a.length?i:`${n.groupStart}${i}${n.groupEnd}`)}return h}clone(t=!1,e=!1,s=!1){const i=X.create(this.component.func??this.component.promise??this.component.type??this.component.name,this.endpoint.name,this.parameters.typedParameters??void 0);return t&&(i.component.set(this.component.instance??this.component.type??this.component.name),i.endpoint.set(this.endpoint.instance??this.endpoint.name)),i.component.name=this.component.name,i.needsEndpointDescribed=this.needsEndpointDescribed,i.route=this.route,i.routeStart=this.routeStart,i.default=this.default,e&&(i.scopeModifier=this.scopeModifier),i.scope=t?this.scope:null,this.hasNextScopeInstructions&&!s&&(i.nextScopeInstructions=X.clone(this.nextScopeInstructions,t,e)),i}isIn(t,e,s){const i=e.filter((e=>{if(null!=this.route||null!=e.route){if(!e.sameRoute(this))return!1}else if(!e.sameComponent(t,this))return!1;const s=e.component.type??this.component.type,i=this.component.type??e.component.type,n=e.parameters.toSpecifiedParameters(t,s?.parameters),r=this.parameters.toSpecifiedParameters(t,i?.parameters);return!!P.contains(n,r)&&(this.endpoint.none||e.sameEndpoint(this,!1))}));return!(0===i.length||s&&this.hasNextScopeInstructions&&!i.some((e=>X.contains(t,e.nextScopeInstructions??[],this.nextScopeInstructions,s))))}getTitle(t){if(this.route instanceof I){const e=this.route.match?.title;if(null!=e)return this.routeStart?"string"==typeof e?e:e(this,t):""}return this.endpoint.instance.getTitle(t)}toJSON(){return{component:this.component.name??void 0,viewport:this.endpoint.name??void 0,parameters:this.parameters.parametersRecord??void 0,children:this.hasNextScopeInstructions?this.nextScopeInstructions:void 0}}stringifyShallow(t,e=!1,s=!1){if(null!=this.route)return(this.route instanceof I?this.route.matching:this.route).split("/").map((e=>e.startsWith(":")?this.parameters.get(t,e.slice(1)):e)).join("/");const i=E.for(t);let n=s?"":this.component.name??"";const r=this.component.type?this.component.type.parameters:null,o=P.stringify(t,this.parameters.toSortedParameters(t,r));return o.length>0&&(n+=s?o:`${i.parameters}${o}${i.parametersEnd}`),null==this.endpoint.name||e||(n+=`${i.viewport}${this.endpoint.name}`),this.ownsScope||(n+=i.noScope),n||""}}class tt{constructor(t,e){this.eventName=t,this.navigation=e}static create(t){return new tt(tt.eventName,t)}}tt.eventName="au:router:navigation-navigate";class et{constructor(){this.lastNavigationIndex=-1,this.navigations=[],this.options={statefulHistoryLength:0},this.isActive=!1,this.uninitializedNavigation=_.create({instruction:"NAVIGATOR UNINITIALIZED",fullStateInstruction:"",index:0,completed:!0}),this.ea=(0,e.hd)(e.xe),this.container=(0,e.hd)(e.p7)}start(t){if(this.isActive)throw new Error("Navigator has already been started");this.isActive=!0,this.options={...t}}stop(){if(!this.isActive)throw new Error("Navigator has not been started");this.isActive=!1}navigate(t){t instanceof _||(t=_.create(t));const e=new W;return-1===this.lastNavigationIndex&&(this.loadState(),-1!==this.lastNavigationIndex?e.refresh=!0:(e.first=!0,e.new=!0,this.lastNavigationIndex=0,this.navigations=[_.create({index:0,instruction:"",fullStateInstruction:""})])),void 0===t.index||t.replacing||t.refreshing?t.refreshing||e.refresh?((t=this.navigations[this.lastNavigationIndex]).replacing=!0,t.refreshing=!0):t.replacing?(e.replace=!0,e.new=!0,t.index=this.lastNavigationIndex):(e.new=!0,t.index=this.lastNavigationIndex+1,this.navigations[t.index]=t):(t.historyMovement=t.index-Math.max(this.lastNavigationIndex,0),t.instruction=null!=this.navigations[t.index]?this.navigations[t.index].fullStateInstruction:t.fullStateInstruction,t.replacing=!0,t.historyMovement>0?e.forward=!0:t.historyMovement<0&&(e.back=!0)),t.navigation=e,t.previous=this.navigations[Math.max(this.lastNavigationIndex,0)],t.process=new L,this.lastNavigationIndex=t.index,this.notifySubscribers(t),t.process.promise}async finalize(t,e){if(t.untracked)t.fromBrowser&&null!=this.options.store&&await this.options.store.popNavigatorState();else if(t.replacing)0===(t.historyMovement??0)&&(this.navigations[t.previous.index]=t),await this.saveState(t.index,!1);else{const s=t.index;if(e&&(this.navigations=this.navigations.slice(0,s)),this.navigations[s]=t,(this.options.statefulHistoryLength??0)>0){const t=this.navigations.length-(this.options.statefulHistoryLength??0);for(const e of this.navigations.slice(s))"string"==typeof e.instruction&&"string"==typeof e.fullStateInstruction||await this.serializeNavigation(e,this.navigations.slice(t,s))}await this.saveState(t.index,!t.fromBrowser)}}async cancel(t){null!=this.options.store&&(t.navigation?.new?t.fromBrowser&&await this.options.store.popNavigatorState():0!==(t.historyMovement??0)&&await this.options.store.go(-t.historyMovement,!0))}async go(t){let e=this.lastNavigationIndex+t;e=Math.min(e,this.navigations.length-1),await this.options.store.go(t,!0);const s=this.navigations[e];return this.navigate(s)}getState(){const t=null!=this.options.store?{...this.options.store.state}:{};return{navigations:t?.navigations??[],navigationIndex:t?.navigationIndex??-1}}loadState(){const{navigations:t,navigationIndex:e}=this.getState();this.navigations=t.map((t=>_.create(t))),this.lastNavigationIndex=e}async saveState(t,e){for(let t=0;t<this.navigations.length;t++)this.navigations[t]=_.create(this.navigations[t].toStoredNavigation());if((this.options.statefulHistoryLength??0)>0){const t=this.navigations.length-(this.options.statefulHistoryLength??0);for(let e=0;e<t;e++){const s=this.navigations[e];"string"==typeof s.instruction&&"string"==typeof s.fullStateInstruction||await this.serializeNavigation(s,this.navigations.slice(t))}}if(null==this.options.store)return Promise.resolve();const s={navigations:(this.navigations??[]).map((t=>this.toStoreableNavigation(t))),navigationIndex:t};return e?this.options?.store?.pushNavigatorState(s):this.options.store.replaceNavigatorState(s)}async refresh(){if(-1===this.lastNavigationIndex)return Promise.reject();const t=this.navigations[this.lastNavigationIndex];return t.replacing=!0,t.refreshing=!0,this.navigate(t)}notifySubscribers(t){this.ea.publish(tt.eventName,tt.create(t))}toStoreableNavigation(t){const e=t instanceof _?t.toStoredNavigation():t;return e.instruction=X.stringify(this.container,e.instruction),e.fullStateInstruction=X.stringify(this.container,e.fullStateInstruction,!1,!0),"string"!=typeof e.scope&&(e.scope=null),e}async serializeNavigation(t,e){let s=[];for(const t of e)"string"!=typeof t.instruction&&s.push(...X.flat(t.instruction).filter((t=>null!==t.endpoint.instance)).map((t=>t.component.instance))),"string"!=typeof t.fullStateInstruction&&s.push(...X.flat(t.fullStateInstruction).filter((t=>null!==t.endpoint.instance)).map((t=>t.component.instance)));s=B(s);let i=[];"string"!=typeof t.fullStateInstruction&&(i.push(...t.fullStateInstruction),t.fullStateInstruction=X.stringify(this.container,t.fullStateInstruction,!1,!0)),"string"!=typeof t.instruction&&(i.push(...t.instruction),t.instruction=X.stringify(this.container,t.instruction)),i=i.filter(((t,e,s)=>null!=t.component.instance&&s.indexOf(t)===e));const n=[];for(const t of i)await this.freeInstructionComponents(t,s,n)}freeInstructionComponents(t,e,s){const i=t.component.instance,n=t.viewport?.instance??null;if(null!==i&&null!==n&&!s.some((t=>t===i))){if(!e.some((t=>t===i)))return j.run(null,(t=>n.freeContent(t,i)),(()=>{s.push(i)}));if(t.hasNextScopeInstructions)for(const i of t.nextScopeInstructions)return this.freeInstructionComponents(i,e,s)}}}const st=class{constructor(){this.rootState=new w(null,null,""),this.cache=new Map,this.endpointLookup=new Map}add(t,e=!1){let s,i;if(t instanceof Array)for(const n of t)i=this.$add(n,!1),s=i.params,e&&!s[s.length-1]?.isStar&&(i.residualEndpoint=this.$add({...n,path:`${n.path}/*${m}`},!0));else i=this.$add(t,!1),s=i.params,e&&!s[s.length-1]?.isStar&&(i.residualEndpoint=this.$add({...t,path:`${t.path}/*${m}`},!0));this.cache.clear()}$add(t,e){const s=t.path,i=this.endpointLookup;if(i.has(s))throw k(`Cannot add duplicate path '${s}'.`);const n=new l(s,!0===t.caseSensitive,t.handler),r=""===s?[""]:s.split("/").filter(b),o=[];let a=this.rootState;for(const t of r)switch(a=a.append(null,"/"),t.charAt(0)){case":":{v.lastIndex=0;const e=v.exec(t),{name:s,optional:i}=e?.groups??{},n="?"===i;if(s===m)throw new Error(`Invalid parameter name; usage of the reserved parameter name '${m}' is used.`);const r=e?.groups?.constraint,h=null!=r?new RegExp(r):null;o.push(new c(s,n,!1,h)),a=new C(s,n,h).appendTo(a);break}case"*":{const s=t.slice(1);let i;if(s===m){if(!e)throw new Error(`Invalid parameter name; usage of the reserved parameter name '${m}' is used.`);i=1}else i=2;o.push(new c(s,!0,!0,null)),a=new S(s,i).appendTo(a);break}default:a=new y(t,n.caseSensitive).appendTo(a)}const h=new u(n,o);return a.setEndpoint(h),i.set(s,h),h}recognize(t){let e=this.cache.get(t);return void 0===e&&this.cache.set(t,e=this.$recognize(t)),e}$recognize(t){(t=decodeURI(t)).startsWith("/")||(t=`/${t}`),t.length>1&&t.endsWith("/")&&(t=t.slice(0,-1));const e=new g(this.rootState);for(let s=0,i=t.length;s<i;++s){const i=t.charAt(s);if(e.advance(i),e.isEmpty)return null}const s=e.getSolution();if(null===s)return null;const{endpoint:i}=s,n=s.u();return new d(i,n)}getEndpoint(t){return this.endpointLookup.get(t)??null}};class it extends Array{constructor(){super(...arguments),this.currentIndex=-1}next(){return this.length>this.currentIndex+1?this[++this.currentIndex]:(this.currentIndex=-1,null)}removeCurrent(){this.splice(this.currentIndex--,1)}remove(t){M(this,(e=>e===t))}}class nt{static matchEndpoints(t,e,s,i=!1){const n=[],r=t.getOwnedRoutingScopes(1/0).map((t=>t.endpoint)).filter((t=>null!==t&&!s.some((e=>t===e.endpoint.instance&&!e.cancelled)))),o=new it(...e.slice());let a=null;for(nt.matchKnownEndpoints(t.router,"ViewportScope",o,r,n,!1),i||nt.matchKnownEndpoints(t.router,"Viewport",o,r,n,!1),nt.matchViewportScopeSegment(t.router,t,o,r,n);null!==(a=o.next());)a.needsEndpointDescribed=!0;return nt.matchViewportConfiguration(o,r,n),i||nt.matchSpecifiedViewport(o,r,n,!1),nt.matchLastViewport(o,r,n),i&&nt.matchSpecifiedViewport(o,r,n,!1),{matchedInstructions:n,remainingInstructions:[...o]}}static matchKnownEndpoints(t,e,s,i,n,r=!1){let o;for(;null!==(o=s.next());)null===o.endpoint.instance||o.isAdd(t)||o.endpoint.endpointType!==e||(nt.matchEndpoint(o,o.endpoint.instance,r),n.push(o),M(i,(t=>t===o.endpoint.instance)),s.removeCurrent())}static matchViewportScopeSegment(t,e,s,i,n){let r;for(;null!==(r=s.next());)for(let o of i)if(o instanceof q&&o.acceptSegment(r.component.name)){if(Array.isArray(o.source)){let s=i.find((t=>t instanceof q&&t.name===o.name));if(void 0===s||r.isAdd(t)){const t=o.addSourceItem();s=e.getOwnedScopes().filter((t=>t.isViewportScope)).map((t=>t.endpoint)).find((e=>e.sourceItem===t))}o=s}nt.matchEndpoint(r,o,!1),n.push(r),M(i,(t=>t===r.endpoint.instance)),s.removeCurrent();break}}static matchViewportConfiguration(t,e,s){let i;for(;null!==(i=t.next());)for(const n of e)if(n instanceof Y&&n?.wantComponent(i.component.name)){nt.matchEndpoint(i,n,!0),s.push(i),M(e,(t=>t===i.endpoint.instance)),t.removeCurrent();break}}static matchSpecifiedViewport(t,e,s,i){let n;for(;null!==(n=t.next());){let r=n.endpoint.instance;if(null==r){const t=n.endpoint.name;if(0===(t?.length??0))continue;for(const s of e)if(s instanceof Y&&t===s.name){r=s;break}}r?.acceptComponent(n.component.name)&&(nt.matchEndpoint(n,r,i),s.push(n),M(e,(t=>t===n.endpoint.instance)),t.removeCurrent())}}static matchLastViewport(t,e,s){let i;for(;null!==(i=t.next());){const n=[];for(const t of e)t instanceof Y&&t.acceptComponent(i.component.name)&&n.push(t);if(1===n.length){const r=n[0];nt.matchEndpoint(i,r,!0),s.push(i),M(e,(t=>t===i.endpoint.instance)),t.removeCurrent()}}}static matchEndpoint(t,e,s){t.endpoint.set(e),s&&(t.needsEndpointDescribed=!1),t.hasNextScopeInstructions&&t.nextScopeInstructions.forEach((t=>{null===t.scope&&(t.scope=e instanceof Y?e.scope:e.scope.scope)}))}}class rt{constructor(t,e,s,i){this.id=++rt.lastId,this.parent=null,this.children=[],this.router=t,this.hasScope=e,this.owningScope=s??this,this.endpointContent=i}static for(t,e){if(null==t)return{scope:null,instruction:e};if(t instanceof rt||t instanceof Y||t instanceof q)return{scope:t.scope,instruction:e};let i;if("res"in t)i=t;else if("container"in t)i=t.container;else if("$controller"in t)i=t.$controller.container;else{const e=s.K94.for(t,{searchParents:!0});i=e?.container}if(null==i)return{scope:null,instruction:e};const n=i.has(vt.closestEndpointKey,!0)?i.get(vt.closestEndpointKey):null;let r=n?.scope??null;if(null===r||void 0===e){const t=e??"";return{scope:r,instruction:t.startsWith("/")?t.slice(1):e}}if(e.startsWith("/"))return{scope:null,instruction:e.slice(1)};for(;e.startsWith(".");)if(e.startsWith("./"))e=e.slice(2);else{if(!e.startsWith("../"))break;r=r.parent??r,e=e.slice(3)}return{scope:r,instruction:e}}get scope(){return this.hasScope?this:this.owningScope.scope}get endpoint(){return this.endpointContent.endpoint}get isViewport(){return this.endpoint instanceof Y}get isViewportScope(){return this.endpoint instanceof q}get type(){return this.isViewport?"Viewport":"ViewportScope"}get enabled(){return this.endpointContent.isActive}get passThroughScope(){return this.isViewportScope&&this.endpoint.passThroughScope}get pathname(){return`${this.owningScope!==this?this.owningScope.pathname:""}/${this.endpoint.name}`}get path(){return`${this.parent?.path??""}${this.routingInstruction?.stringify(this.router,!1,!0,!0)??""}${this.routingInstruction?E.for(this.router).scope:""}`}toString(t=!1){return`${this.owningScope!==this?this.owningScope.toString():""}/${this.enabled?"":"("}${this.endpoint.toString()}#${this.id}${this.enabled?"":")"}`+(t?"\n"+this.children.map((t=>t.toString(!0))).join(""):"")}toStringOwning(t=!1){return`${this.owningScope!==this?this.owningScope.toString():""}/${this.enabled?"":"("}${this.endpoint.toString()}#${this.id}${this.enabled?"":")"}`+(t?"\n"+this.ownedScopes.map((t=>t.toStringOwning(!0))).join(""):"")}get enabledChildren(){return this.children.filter((t=>t.enabled))}get hoistedChildren(){const t=this.enabledChildren;for(;t.some((t=>t.passThroughScope));)for(const e of t.slice())if(e.passThroughScope){const s=t.indexOf(e);t.splice(s,1,...e.enabledChildren)}return t}get ownedScopes(){return this.getOwnedScopes()}get routingInstruction(){return this.endpoint.isViewportScope?this.endpoint.instruction:this.isViewport?this.endpoint.activeContent.instruction:null}getOwnedScopes(t=!1){const e=this.allScopes(t).filter((t=>t.owningScope===this));for(const t of e.slice())if(t.passThroughScope){const s=e.indexOf(t);e.splice(s,1,...t.getOwnedScopes())}return e}async processInstructions(t,e,s,i,n=""){const r=this.router,o=r.configuration.options,a=t.filter((t=>!(t.route instanceof D)));if(a.length>0){const e=this.findInstructions(a,o.useDirectRouting,o.useConfiguredRoutes);if(a.some((t=>!t.component.none||null!=t.route))&&!e.foundConfiguration&&!e.foundInstructions)throw this.createUnknownRouteError(a);(t=[...t.filter((t=>t.route instanceof D)),...e.instructions]).some((t=>t.scope!==this))&&console.warn("Not the current scope for instruction(s)!",this,t),e.foundConfiguration&&(n=(n??"")+e.matching)}const h=X.resolve(t);h instanceof Promise&&await h,o.additiveInstructionDefault||(t=this.ensureClearStateInstruction(t));let c=[];({clearEndpoints:c,instructions:t}=this.getClearAllEndpoints(t));for(const e of t.filter((t=>t.isAddAll(r))))e.endpoint.set(e.scope.endpoint.name),e.scope=e.scope.owningScope;let l=[],{matchedInstructions:u,remainingInstructions:d}=this.matchEndpoints(t,e),p=100;do{p--||r.unresolvedInstructionsError(s,d);const o=[],a=u.map((t=>t.endpoint.instance));u.push(...c.filter((t=>!a.includes(t))).map((t=>X.createClear(r,t))));const h=await pt.invokeBeforeNavigation(u,s);if(!1===h)return r.cancelNavigation(s,i),[];if(!0!==h&&h!==u){const t=X.flat(u);d=d.filter((e=>!t.includes(e))),u=h}for(const t of u){const a=t.endpoint.instance;if(null!==a){const h=a.setNextContent(t,s);"skip"!==h&&(o.push(a),i.addEndpoint(a));const d=[a];if("swap"===h&&d.push(...a.getContent().connectedScope.allScopes(!0).map((t=>t.endpoint))),M(c,(t=>d.includes(t))),M(u,(e=>e!==t&&e.isClear(r)&&d.includes(e.endpoint.instance))),!t.isClear(r)&&t.scope?.parent?.isViewportScope&&(M(c,(e=>e===t.scope.parent.endpoint)),M(u,(e=>e!==t&&e.isClear(r)&&e.endpoint.instance===t.scope.parent.endpoint))),"skip"!==h&&t.hasNextScopeInstructions)for(const e of t.nextScopeInstructions)e.scope=a.scope,e.endpoint.instance=null;"skip"!==h||t.hasNextScopeInstructions||l.push(...await a.scope.processInstructions([],e,s,i,n))}}const f=u.filter((t=>"skip"===t.endpoint.instance?.transitionAction)),g=f.filter((t=>t.hasNextScopeInstructions));if((0===f.length||0===g.length)&&(r.isRestrictedNavigation||i.finalEndpoint(),i.run(),i.hasAllEndpoints)){const t=i.waitForSyncState("guardedUnload");t instanceof Promise&&await t}if(i.cancelled)return r.cancelNavigation(s,i),[];for(const t of o)l.every((e=>e!==t))&&l.push(t);if(e.push(...u.splice(0)),d.length>0&&({matchedInstructions:u,remainingInstructions:d}=this.matchEndpoints(d,e)),!r.isRestrictedNavigation&&(u.length>0||d.length>0)&&i.running){const t=i.waitForSyncState("swapped");t instanceof Promise&&await t}if(0===u.length&&0===d.length){const r=[];for(const o of t){if(!o.hasNextScopeInstructions)continue;const t=o.endpoint.instance?.scope??o.endpoint.scope;r.push(t.processInstructions(o.nextScopeInstructions,e,s,i,n))}l.push(...(await Promise.all(r)).flat())}if(({matchedInstructions:u,remainingInstructions:d}=i.dequeueAppendedInstructions(u,e,d)),0===u.length&&0===d.length){const t=e.map((t=>(t.endpoint.instance?.connectedCE).pendingPromise?.promise)).filter((t=>null!=t));t.length>0?(await Promise.any(t),({matchedInstructions:u,remainingInstructions:d}=i.dequeueAppendedInstructions(u,e,d))):u=c.map((t=>X.createClear(r,t)))}const m=X.resolve(u);m instanceof Promise&&await m,l=l.filter((t=>![...e].reverse().find((e=>e.endpoint.instance===t))?.cancelled))}while(u.length>0||d.length>0);return l}createUnknownRouteError(t){const e=this.router.configuration.options,s=X.stringify(this.router,t);return null!=t[0].route?e.useConfiguredRoutes?new Error("No matching configured route found for '"+s+"'."):new Error("Can not match '"+s+"' since the router is configured to not use configured routes."):e.useConfiguredRoutes&&e.useDirectRouting?new Error("No matching configured route or component found for '"+s+"'."):e.useConfiguredRoutes?new Error("No matching configured route found for '"+s+"'."):new Error("No matching route/component found for '"+s+"'.")}ensureClearStateInstruction(t){const e=this.router;if(!t.some((t=>t.isClearAll(e)))){const s=X.create(X.clear(e));return s.scope=this,[s,...t]}return t}getClearAllEndpoints(t){const e=this.router;let s=[];return t.some((t=>(t.scope??this)===this&&t.isClearAll(e)))&&(s=this.enabledChildren.filter((t=>!t.endpoint.isEmpty)).map((t=>t.endpoint)),t=t.filter((t=>!((t.scope??this)===this&&t.isClearAll(e))))),{clearEndpoints:s,instructions:t}}findInstructions(t,e,s){const i=this.router;let n=new I;if(s&&!X.containsSiblings(i,t)){let s=t.filter((t=>t.isClear(i)||t.isClearAll(i)));const r=t.filter((t=>!t.isClear(i)&&!t.isClearAll(i)));if(r.length>0)for(const o of r){const r="string"==typeof o.route?o.route:o.unparsed??X.stringify(i,[o]),a=this.findMatchingRoute(r,o.parameters.parametersRecord??{});if(a.foundConfiguration)n=a,n.instructions=[...s,...n.instructions],s=[];else{if(!e)throw new Error(`No route found for: ${X.stringify(i,t)}!`);n.instructions=[...s,...n.instructions,o],s=[],n.remaining=X.stringify(i,o.nextScopeInstructions??[])}}else n.instructions=[...s]}else{if(!e)throw new Error(`No way to process sibling viewport routes with direct routing disabled: ${X.stringify(i,t)}!`);n.instructions.push(...t)}n.instructions=n.instructions.filter((t=>""!==t.component.name));for(const t of n.instructions)null===t.scope&&(t.scope=this);return n}matchEndpoints(t,e,s=!1){const i=[],n=t.filter((t=>(t.scope??this)===this)),r=t.filter((t=>(t.scope??this)!==this)),{matchedInstructions:o,remainingInstructions:a}=nt.matchEndpoints(this,n,e,s);return i.push(...o),r.push(...a),{matchedInstructions:i,remainingInstructions:r}}addEndpoint(t,e,s,i={}){let n=this.getOwnedScopes().find((s=>s.type===t&&s.endpoint.name===e))?.endpoint??null;return null!=s&&null!=n?.connectedCE&&n.connectedCE!==s&&(n=this.getOwnedScopes(!0).find((i=>i.type===t&&i.endpoint.name===e&&i.endpoint.connectedCE===s))?.endpoint??null),null==n&&(n="Viewport"===t?new Y(this.router,e,s,this.scope,!!i.scope,i):new q(this.router,e,s,this.scope,!0,null,i),this.addChild(n.connectedScope)),null!=s&&n.setConnectedCE(s,i),n}removeEndpoint(t,e,s){return!(null===(s??null)&&!e.removeEndpoint(t,s)||(this.removeChild(e.connectedScope),0))}addChild(t){this.children.some((e=>e===t))||(null!==t.parent&&t.parent.removeChild(t),this.children.push(t),t.parent=this)}removeChild(t){const e=this.children.indexOf(t);e>=0&&(this.children.splice(e,1),t.parent=null)}allScopes(t=!1){const e=t?this.children.slice():this.enabledChildren;for(const s of e.slice())e.push(...s.allScopes(t));return e}reparentRoutingInstructions(){const t=this.hoistedChildren.filter((t=>null!==t.routingInstruction&&t.routingInstruction.component.name));if(!t.length)return null;for(const e of t){const t=e.reparentRoutingInstructions();e.routingInstruction.nextScopeInstructions=null!==t&&t.length>0?t:null}return t.map((t=>t.routingInstruction))}getChildren(t){return this.children.map((e=>e.endpoint.getTimeContent(t))).filter((t=>null!==t)).map((t=>t.connectedScope))}getAllRoutingScopes(t){const e=this.getChildren(t);for(const s of e.slice())e.push(...s.getAllRoutingScopes(t));return e}getOwnedRoutingScopes(t){const e=this.getAllRoutingScopes(t).filter((t=>t.owningScope===this));for(const s of e.slice())if(s.passThroughScope){const i=e.indexOf(s);e.splice(i,1,...s.getOwnedRoutingScopes(t))}return B(e)}getRoutingInstructions(t){const e=B(this.getOwnedRoutingScopes(t).map((t=>t.endpoint))).map((e=>e.getTimeContent(t))).filter((t=>null!==t)),s=[];for(const i of e){const e=i.instruction.clone(!0,!1,!1);""!==(e.component.name??"")&&(e.nextScopeInstructions=i.connectedScope.getRoutingInstructions(t),s.push(e))}return s}canUnload(t,e){return j.run(e,(e=>j.runParallel(e,...this.children.map((e=>null!==e.endpoint?s=>e.endpoint.canUnload(t,s):s=>e.canUnload(t,s))))),(t=>t.previousValue.every((t=>t))))}unload(t,e){return j.runParallel(e,...this.children.map((e=>null!==e.endpoint?s=>e.endpoint.unload(t,s):s=>e.unload(t,s))))}matchScope(t,e=!1){const s=[];for(const i of t)i.scope===this?s.push(i):e&&i.hasNextScopeInstructions&&s.push(...this.matchScope(i.nextScopeInstructions,e));return s}findMatchingRoute(t,e){let s=new I;if(this.isViewportScope&&!this.passThroughScope)s=this.findMatchingRouteInRoutes(t,this.endpoint.getRoutes(),e);else if(this.isViewport)s=this.findMatchingRouteInRoutes(t,this.endpoint.getRoutes(),e);else for(const i of this.enabledChildren)if(s=i.findMatchingRoute(t,e),s.foundConfiguration)break;return s.foundConfiguration?s:null!=this.parent?this.parent.findMatchingRoute(t,e):s}findMatchingRouteInRoutes(t,e,s){const i=new I;if(0===e.length)return i;e=e.map((t=>this.ensureProperRoute(t)));const n=[];for(const t of e){const e=Array.isArray(t.path)?t.path:[t.path];for(const s of e)n.push({...t,path:s,handler:t}),""!==s&&n.push({...t,path:`${s}/*remainingPath`,handler:t})}(t.startsWith("/")||t.startsWith("+"))&&(t=t.slice(1));const r=e.find((e=>e.id===t));let o={params:{},endpoint:{}};if(null!=r){o.endpoint={route:{handler:r}};const e=(t=Array.isArray(r.path)?r.path[0]:r.path).split("/").map((t=>{if(t.startsWith(":")){const e=t.slice(1).replace(/\?$/,""),i=s[e];return o.params[e]=i,i}return t}));t=e.join("/")}else{const e=new st;e.add(n),o=e.recognize(t)}if(null!=o){i.match=o.endpoint.route.handler,i.matching=t;const n={...o.params};if(null!=n.remainingPath&&(i.remaining=n.remainingPath,Reflect.deleteProperty(n,"remainingPath"),i.matching=i.matching.slice(0,i.matching.indexOf(i.remaining))),i.params=n,null!=i.match?.redirectTo){let t=i.match?.redirectTo;return(i.remaining??"").length>0&&(t+=`/${i.remaining}`),this.findMatchingRouteInRoutes(t,e,s)}}if(i.foundConfiguration){i.instructions=X.clone(i.match.instructions,!1,!0);const t=i.instructions.slice();for(;t.length>0;){const e=t.shift();e.parameters.addParameters(i.params),e.route=i,e.hasNextScopeInstructions&&t.unshift(...e.nextScopeInstructions)}i.instructions.length>0&&(i.instructions[0].routeStart=!0);const e=X.parse(this.router,i.remaining);if(e.length>0){let t=i.instructions[0];for(;t.hasNextScopeInstructions;)t=t.nextScopeInstructions[0];t.nextScopeInstructions=e}}return i}ensureProperRoute(t){return void 0===t.id&&(t.id=Array.isArray(t.path)?t.path.join(","):t.path),void 0===t.instructions&&(t.instructions=[{component:t.component,viewport:t.viewport,parameters:t.parameters,children:t.children}]),null===t.redirectTo&&(t.instructions=X.from(this.router,t.instructions)),t}}rt.lastId=0;class ot{constructor(t,e,s=0){this.taskQueue=t,this.item=e,this.cost=s,this.done=!1,this.promise=new Promise(((t,e)=>{this.resolve=()=>{this.taskQueue.resolve(this,t)},this.reject=t=>{this.taskQueue.reject(this,e,t)}}))}async execute(){"execute"in this.item?await this.item.execute(this):await this.item(this)}wait(){return this.promise}}class at{get isActive(){return null!==this.task}constructor(t){this.callback=t,this.pending=[],this.processing=null,this.allowedExecutionCostWithinTick=null,this.currentExecutionCostInCurrentTick=0,this.platform=null,this.task=null,this.dequeue=t=>{null===this.processing&&(void 0!==t&&(this.currentExecutionCostInCurrentTick=0),0!==this.pending.length&&(null!==this.allowedExecutionCostWithinTick&&void 0===t&&this.currentExecutionCostInCurrentTick+(this.pending[0].cost||0)>this.allowedExecutionCostWithinTick||(this.processing=this.pending.shift()||null,this.processing&&(this.currentExecutionCostInCurrentTick+=this.processing.cost??0,void 0!==this.callback?this.callback(this.processing):this.processing.execute().catch((t=>{throw t}))))))}}get length(){return this.pending.length}start(t){this.platform=t.platform,this.allowedExecutionCostWithinTick=t.allowedExecutionCostWithinTick,this.task=this.platform.domWriteQueue.queueTask(this.dequeue,{persistent:!0})}stop(){this.task.cancel(),this.task=null,this.allowedExecutionCostWithinTick=null,this.clear()}enqueue(t,e){const s=Array.isArray(t),i=s?t:[t],n=i.map(((t,s)=>Array.isArray(e)?e[s]:e)).map((t=>void 0!==t?t:1)),r=[];for(const t of i)r.push(t instanceof ot?t:this.createQueueTask(t,n.shift()));return this.pending.push(...r),this.dequeue(),s?r:r[0]}createQueueTask(t,e){return new ot(this,t,e)}clear(){this.pending.length=0}resolve(t,e){e(),this.processing=null,this.dequeue()}reject(t,e,s){e(s),this.processing=null,this.dequeue()}}class ht{constructor(){this.allowedExecutionCostWithinTick=2,this.pendingCalls=new at,this.isActive=!1,this.options={useUrlFragmentHash:!0},this.forwardedState={eventTask:null,suppressPopstate:!1},this.platform=(0,e.hd)(s.r_),this.window=(0,e.hd)(s.mYM),this.history=(0,e.hd)(s.YFW),this.location=(0,e.hd)(s.PyP),this.ea=(0,e.hd)(e.xe)}start(t){if(this.isActive)throw new Error("Browser navigation has already been started");this.isActive=!0,null!=t.useUrlFragmentHash&&(this.options.useUrlFragmentHash=t.useUrlFragmentHash),this.pendingCalls.start({platform:this.platform,allowedExecutionCostWithinTick:this.allowedExecutionCostWithinTick}),this.window.addEventListener("popstate",this)}stop(){if(!this.isActive)throw new Error("Browser navigation has not been started");this.window.removeEventListener("popstate",this),this.pendingCalls.stop(),this.options={useUrlFragmentHash:!0},this.isActive=!1}get length(){return this.history.length}get state(){return this.history.state}get viewerState(){const{pathname:t,search:e,hash:s}=this.location,i=this.options.useUrlFragmentHash?s.slice(1):`${t}${e}`,n=this.options.useUrlFragmentHash?s.slice(1).includes("#")?s.slice(s.slice(1).indexOf("#",1)):"":s.slice(1);return new ct(t,e.slice(1),n,i)}async go(t,e=!1){const s=this.pendingCalls.createQueueTask((t=>t.resolve()),1);return this.pendingCalls.enqueue([t=>{const i=s,n=e;this.forwardState({eventTask:i,suppressPopstate:n}),t.resolve()},e=>{const s=this.history,i=t;s.go(i),e.resolve()}],[0,1]),s.wait()}async pushNavigatorState(t){const{title:e,path:s}=t.navigations[t.navigationIndex],i=this.options.useUrlFragmentHash?"#/":"";return this.pendingCalls.enqueue((n=>{const r=this.history,o=t,a=e||"",h=`${i}${s}`;try{r.pushState(o,a,h),this.setTitle(a)}catch(t){const e=this.tryCleanState(o,"push",t);r.pushState(e,a,h),this.setTitle(a)}n.resolve()}),1).wait()}async replaceNavigatorState(t,e,s){const i=t.navigations[t.navigationIndex];e??=i.title,s??=i.path;const n=this.options.useUrlFragmentHash?"#/":"";return this.pendingCalls.enqueue((i=>{const r=this.history,o=t,a=e||"",h=`${n}${s}`;try{r.replaceState(o,a,h),this.setTitle(a)}catch(t){const e=this.tryCleanState(o,"replace",t);r.replaceState(e,a,h),this.setTitle(a)}i.resolve()}),1).wait()}async popNavigatorState(){const t=this.pendingCalls.createQueueTask((t=>t.resolve()),1);return this.pendingCalls.enqueue((async e=>{const s=t;await this.popState(s),e.resolve()}),1),t.wait()}setTitle(t){this.window.document.title=t}handleEvent(t){this.handlePopStateEvent(t)}handlePopStateEvent(t){const{eventTask:e,suppressPopstate:s}=this.forwardedState;this.forwardedState={eventTask:null,suppressPopstate:!1},this.pendingCalls.enqueue((async i=>{s||this.notifySubscribers(t),null!==e&&await e.execute(),i.resolve()}),1)}notifySubscribers(t){this.ea.publish(lt.eventName,lt.create(this.viewerState,t,this.history.state))}async popState(t){await this.go(-1,!0);const e=this.history.state,s=e?.navigations?.[e?.navigationIndex??0];null==s||s.firstEntry||(await this.go(-1,!0),await this.pushNavigatorState(e)),await t.execute()}forwardState(t){this.forwardedState=t}tryCleanState(t,e,s){try{return JSON.parse(JSON.stringify(t))}catch(t){throw new Error(`Failed to ${e} state, probably due to unserializable data and/or parameters: ${t}${s}`)}}}class ct{constructor(t,e,s,i){this.path=t,this.query=e,this.hash=s,this.instruction=i}}class lt{constructor(t,e,s,i){this.eventName=t,this.viewerState=e,this.event=s,this.state=i}static create(t,e,s){return new lt(lt.eventName,t,e,s)}}lt.eventName="au:router:navigation-state-change";class ut{constructor(t){this.endpoint=t,this.running=!1,this.states=new Map,this.checkedStates=[],this.syncingState=null,this.syncPromise=null,this.step=null}hasReachedState(t){return this.states.has(t)&&null===this.states.get(t)}}class dt{constructor(t,e){this.router=t,this.navigation=e,this.running=!1,this.completed=!1,this.cancelled=!1,this.hasAllEndpoints=!1,this.appendedInstructions=[],this.entities=[],this.syncStates=new Map,this.checkedSyncStates=new Set}static create(t,e,s){const i=new dt(t,e);return s.syncStates.forEach((t=>i.addSyncState(t))),i}run(){if(!this.running){this.running=!0;for(const t of this.entities)t.running||(t.running=!0,t.endpoint.transition(this))}}addSyncState(t){const e=new L;this.syncStates.set(t,e)}addEndpoint(t){const e=new ut(t);return this.entities.push(e),this.recheckSyncStates(),this.running&&e.endpoint.transition(this),e}removeEndpoint(t){const e=this.entities.find((e=>e.endpoint===t));void 0!==e&&M(this.entities,(t=>t===e))}setEndpointStep(t,e){let s=this.entities.find((e=>e.endpoint===t));void 0===s&&(s=this.addEndpoint(t)),s.step=e}getEndpointStep(t){const e=this.entities.find((e=>e.endpoint===t));return e?.step??null}addEndpointState(t,e){let s=this.entities.find((e=>e.endpoint===t));void 0===s&&(s=this.addEndpoint(t));const i=s.states.get(e);i instanceof L&&i.resolve(),s.states.set(e,null),this.checkSyncState(e)}waitForSyncState(t,e=null){if(0===this.entities.length)return;const s=this.syncStates.get(t);if(void 0!==s){if(null!==e){const i=this.entities.find((t=>t.endpoint===e));if(null===i?.syncPromise&&s.isPending)return i.syncingState=t,i.syncPromise=new L,i.checkedStates.push(t),this.checkedSyncStates.add(t),Promise.resolve().then((()=>{this.checkSyncState(t)})).catch((t=>{throw t})),i.syncPromise.promise}return s.isPending?s.promise:void 0}}waitForEndpointState(t,e){if(!this.syncStates.has(e))return;let s=this.entities.find((e=>e.endpoint===t));if(null==s&&(s=this.addEndpoint(t)),s.hasReachedState(e))return;let i=s.states.get(e);return null==i&&(i=new L,s.states.set(e,i)),i.promise}finalEndpoint(){this.hasAllEndpoints=!0,this.syncStates.forEach(((t,e)=>this.checkSyncState(e)))}finalize(){this.entities.forEach((t=>t.endpoint.finalizeContentChange(this,null))),this.completed=!0,this.navigation.completed=!0,this.syncStates.clear()}cancel(){this.cancelled=!0,this.entities.forEach((t=>{const e=t.endpoint.cancelContentChange(this);e instanceof Promise&&e.catch((t=>{throw t}))})),this.router.navigator.cancel(this.navigation).then((()=>{this.navigation.process?.resolve(!1)})).catch((t=>{throw t})),this.completed=!0,this.navigation.completed=!0,[...this.syncStates.values()].forEach((t=>{t.isPending&&t.resolve()})),this.syncStates.clear()}enqueueAppendedInstructions(t){this.appendedInstructions.push(...t)}dequeueAppendedInstructions(t,e,s){let i=[...this.appendedInstructions];t=[...t],s=[...s];const n=i.filter((t=>!t.default)),r=i.filter((t=>t.default));for(i=n.length>0?[...n]:[...r];i.length>0;){const n=i.shift();M(this.appendedInstructions,(t=>t===n));const r=e.some((t=>!t.cancelled&&t.sameEndpoint(n,!0))),o=t.find((t=>t.sameEndpoint(n,!0))),a=s.find((t=>t.sameEndpoint(n,!0)));n.default&&(r||void 0!==o&&!o.default||void 0!==a&&!a.default)||(void 0!==o&&M(t,(t=>t===o)),void 0!==a&&M(s,(t=>t===a)),null!==n.endpoint.instance?t.push(n):s.push(n))}return{matchedInstructions:t,remainingInstructions:s}}checkSyncState(t){const e=this.syncStates.get(t);if(void 0!==e&&this.hasAllEndpoints&&e.isPending&&this.entities.every((e=>e.hasReachedState(t)))&&(!this.checkedSyncStates.has(t)||this.entities.every((e=>e.checkedStates.includes(t))))){for(const e of this.entities)e.syncingState===t&&(e.syncPromise?.resolve(),e.syncPromise=null,e.syncingState=null);e.resolve()}}recheckSyncStates(){this.syncStates.forEach(((t,e)=>{t.isPending||this.entities.every((t=>t.hasReachedState(e)))||this.addSyncState(e)}))}}class pt{constructor(t,e,s){this.hook=t,this.id=s,this.type="beforeNavigation",this.includeTargets=[],this.excludeTargets=[],void 0!==e.type&&(this.type=e.type);for(const t of e.include??[])this.includeTargets.push(new ft(t));for(const t of e.exclude??[])this.excludeTargets.push(new ft(t))}static add(t,e){const s=new pt(t,e??{},++this.lastIdentity);return this.hooks[s.type].push(s),this.lastIdentity}static remove(t){for(const e in this.hooks)if(Object.prototype.hasOwnProperty.call(this.hooks,e)){const s=this.hooks[e].findIndex((e=>e.id===t));s>=0&&this.hooks[e].splice(s,1)}}static removeAll(){for(const t in this.hooks)this.hooks[t]=[]}static async invokeBeforeNavigation(t,e){return this.invoke("beforeNavigation",e,t)}static async invokeTransformFromUrl(t,e){return this.invoke("transformFromUrl",e,t)}static async invokeTransformToUrl(t,e){return this.invoke("transformToUrl",e,t)}static async invokeTransformTitle(t,e){return this.invoke("transformTitle",e,t)}static async invoke(t,e,s){let i=s;for(const n of this.hooks[t])if(!n.wantsMatch||n.matches(s))if(i=await n.invoke(e,s),"boolean"==typeof i){if(!i)return!1}else s=i;return i}get wantsMatch(){return this.includeTargets.length>0||this.excludeTargets.length>0}matches(t){return!(this.includeTargets.length&&!this.includeTargets.some((e=>e.matches(t)))||this.excludeTargets.length&&this.excludeTargets.some((e=>e.matches(t))))}invoke(t,e){return this.hook(e,t)}}pt.hooks={beforeNavigation:[],transformFromUrl:[],transformToUrl:[],transformTitle:[]},pt.lastIdentity=0;class ft{constructor(t){if(this.componentType=null,this.componentName=null,this.viewport=null,this.viewportName=null,"string"==typeof t)this.componentName=t;else if(O.isType(t))this.componentType=t,this.componentName=O.getName(t);else{const e=t;null!=e.component&&(this.componentType=O.isType(e.component)?O.getType(e.component):null,this.componentName=O.getName(e.component)),null!=e.viewport&&(this.viewport=Z.isInstance(e.viewport)?e.viewport:null,this.viewportName=Z.getName(e.viewport))}}matches(t){const e=t.slice();e.length||e.push(X.create(""));for(const t of e)if(null!==this.componentName&&this.componentName===t.component.name||null!==this.componentType&&this.componentType===t.component.type||null!==this.viewportName&&this.viewportName===t.endpoint.name||null!==this.viewport&&this.viewport===t.endpoint.instance)return!0;return!1}}class gt{static async getTitle(t,e,s){let i=await pt.invokeTransformTitle(t,e);if("string"!=typeof i){const t=gt.stringifyTitles(i,e,s);i=s.appTitle,i=i.replace(/\${componentTitles}/g,t),i=i.replace(/\${appTitleSeparator}/g,""!==t?s.appTitleSeparator:"")}return i=await pt.invokeTransformTitle(i,e),i}static stringifyTitles(t,e,s){return t.map((t=>gt.stringifyTitle(t,e,s))).filter((t=>(t?.length??0)>0)).join(" + ")}static stringifyTitle(t,e,s){const i=t.nextScopeInstructions;let n=gt.resolveTitle(t,e,s);if(Array.isArray(i)&&i.length>0){let t=gt.stringifyTitles(i,e,s);t.length>0&&(1!==i.length&&(t=`[ ${t} ]`),n=n.length>0?"top-down"===s.componentTitleOrder?n+s.componentTitleSeparator+t:t+s.componentTitleSeparator+n:t)}return n}static resolveTitle(t,e,s){let i=t.getTitle(e);return null!=s.transformTitle&&(i=s.transformTitle(i,t,e)),i}}const mt=e.DI.createInterface("IRouter",(t=>t.singleton(vt)));class vt{constructor(){this.rootScope=null,this.activeComponents=[],this.appendedInstructions=[],this.isActive=!1,this.coordinators=[],this.loadedFirst=!1,this.u=!1,this.R=(0,e.hd)(e.gF),this.container=(0,e.hd)(e.p7),this.ea=(0,e.hd)(e.xe),this.navigator=(0,e.hd)(et),this.viewer=(0,e.hd)(ht),this.store=(0,e.hd)(ht),this.configuration=(0,e.hd)(Ht),this.handleNavigatorNavigateEvent=t=>{this.I(t)},this.handleNavigatorStateChangeEvent=t=>{if(null!=t.state?.navigationIndex){const e=_.create(t.state.navigations[t.state.navigationIndex]);e.instruction=t.viewerState.instruction,e.fromBrowser=!0,this.navigator.navigate(e).catch((t=>{throw t}))}else this.load(t.viewerState.instruction,{fromBrowser:!0}).catch((t=>{throw t}))},this.processNavigation=async t=>{this.loadedFirst=!0;const e=this.configuration.options,s=dt.create(this,t,{syncStates:this.configuration.options.navigationSyncStates});this.coordinators.push(s),s.appendedInstructions.push(...this.appendedInstructions.splice(0)),this.ea.publish(St.eventName,St.create(t));let i="string"!=typeof t.instruction||t.useFullStateInstruction?t.useFullStateInstruction?t.fullStateInstruction:t.instruction:await pt.invokeTransformFromUrl(t.instruction,s.navigation);const n=e.basePath;null!==n&&"string"==typeof i&&i.startsWith(n)&&!e.useUrlFragmentHash&&(i=i.slice(n.length)),"/"===i&&(i=""),"string"==typeof i&&(i=""===i?[new X("")]:X.parse(this,i)),t.scope??=this.rootScope.scope;const r=await t.scope.processInstructions(i,[],t,s);return j.run(null,(()=>(s.finalEndpoint(),s.waitForSyncState("completed"))),(()=>(s.finalize(),this.updateNavigation(t))),(()=>{t.navigation.new&&!t.navigation.first&&!t.repeating&&r.every((t=>t.options.noHistory))&&(t.untracked=!0)}),(async()=>{for(;this.coordinators.length>0&&this.coordinators[0].completed;){const t=this.coordinators.shift();await this.navigator.finalize(t.navigation,!1),this.ea.publish(xt.eventName,xt.create(t.navigation)),this.ea.publish(kt.eventName,kt.create(t.navigation)),t.navigation.process?.resolve(!0)}}))}}get isNavigating(){return this.coordinators.length>0}get isRestrictedNavigation(){const t=this.configuration.options.navigationSyncStates;return t.includes("guardedLoad")||t.includes("unloaded")||t.includes("loaded")||t.includes("guarded")||t.includes("routed")}get statefulHistory(){return void 0!==this.configuration.options.statefulHistoryLength&&this.configuration.options.statefulHistoryLength>0}start(){if(this.isActive)throw Q(2e3);this.isActive=!0;const t=this.container.get(s.DEw);this.rootScope=new q(this,"rootScope",t.controller.viewModel,null,!0,t.config.component);const e=this.configuration.options;if(null===e.basePath){const s=new URL(t.host.baseURI);e.basePath=s.pathname}e.basePath.endsWith("/")&&(e.basePath=e.basePath.slice(0,-1)),this.navigator.start({store:this.store,viewer:this.viewer,statefulHistoryLength:this.configuration.options.statefulHistoryLength}),this.C=this.ea.subscribe(lt.eventName,this.handleNavigatorStateChangeEvent),this.N=this.ea.subscribe(tt.eventName,this.handleNavigatorNavigateEvent),this.viewer.start({useUrlFragmentHash:this.configuration.options.useUrlFragmentHash}),this.ea.publish(bt.eventName,bt.create())}stop(){if(!this.isActive)throw Q(2001);this.ea.publish(yt.eventName,yt.create()),this.navigator.stop(),this.viewer.stop(),this.C.dispose(),this.N.dispose()}async initialLoad(){const{instruction:t,hash:e}=this.viewer.viewerState,s=this.load(t,{fragment:e,replacing:!0,fromBrowser:!1});return this.loadedFirst=!0,s}async I(t){if(this.u)return this.$&&this.$.navigation.process?.resolve(!1),void(this.$=t);this.u=!0;try{await this.processNavigation(t.navigation)}catch(e){t.navigation.process?.reject(e)}finally{this.u=!1}if(this.$){const t=this.$;this.$=void 0,await this.I(t)}}get isProcessingNav(){return this.u||null!=this.$}getEndpoint(t,e){return this.allEndpoints(t).find((t=>t.name===e))??null}allEndpoints(t,e=!1){return this.rootScope.scope.allScopes(e).filter((e=>null===t||e.type===t)).map((t=>t.endpoint))}addEndpoint(t,...e){throw new Error("Not implemented")}connectEndpoint(t,s,i,n,r){const o=i.container,a=(o.has(vt.closestEndpointKey,!0)?o.get(vt.closestEndpointKey):this.rootScope).connectedScope;return null===t&&(t=a.addEndpoint(s,n,i,r),e.cH.instance(vt.closestEndpointKey,t).register(o)),t}disconnectEndpoint(t,e,s){if(!e.connectedScope.parent.removeEndpoint(t,e,s))throw Q(2002,e.name)}async load(t,e){e=e??{},t=this.extractFragment(t,e),t=this.extractQuery(t,e);let s=null;if(({instructions:t,scope:s}=this.applyLoadOptions(t,e)),e.append&&(!this.loadedFirst||this.isNavigating))return t=X.from(this,t),this.appendInstructions(t,s),Promise.resolve();const i=_.create({instruction:t,fullStateInstruction:"",scope:s,title:e.title,data:e.data,query:e.query,fragment:e.fragment,parameters:e.parameters,replacing:(e.replacing??!1)||e.replace,repeating:e.append,fromBrowser:e.fromBrowser??!1,origin:e.origin,completed:!1});return this.navigator.navigate(i)}applyLoadOptions(t,e,s=!0){"origin"in(e=e??{})&&!("context"in e)&&(e.context=e.origin);const{scope:i,instruction:n}=rt.for(e.context??null,"string"==typeof t?t:void 0);if("string"==typeof t)if(s)t=n;else{t=X.from(this,n);for(const e of t)null===e.scope&&(e.scope=i)}else{t=X.from(this,t);for(const e of t)null===e.scope&&(e.scope=i)}return{instructions:t,scope:i}}refresh(){return this.navigator.refresh()}back(){return this.navigator.go(-1)}forward(){return this.navigator.go(1)}go(t){return this.navigator.go(t)}checkActive(t,e){if("string"==typeof t)throw Q(2003,t);e=e??{},({instructions:t}=this.applyLoadOptions(t,e)),t.forEach((t=>t.scope??=this.rootScope.scope));const s=B(t.map((t=>t.scope)));for(const e of s){const s=e.matchScope(t,!1),i=e.matchScope(this.activeComponents,!0);if(!X.contains(this,i,s,!0))return!1}return!0}unresolvedInstructionsError(t,e){throw this.ea.publish(It.eventName,It.create(t)),this.ea.publish(kt.eventName,kt.create(t)),function(t,e){const s=new Error(`${t.length} remaining instructions after 100 iterations; there is likely an infinite loop.`);return s.remainingInstructions=t,e.warn(s,s.remainingInstructions),s}(e,this.R)}cancelNavigation(t,e){e.cancel(),this.ea.publish(Tt.eventName,Tt.create(t)),this.ea.publish(kt.eventName,kt.create(t))}appendInstructions(t,e=null){null===e&&(e=this.rootScope.scope);for(const s of t)null===s.scope&&(s.scope=e);let s=null;for(let t=this.coordinators.length-1;t>=0;t--)if(!this.coordinators[t].completed){s=this.coordinators[t];break}if(null===s){if(this.loadedFirst)throw Q(2004);this.appendedInstructions.push(...t)}s?.enqueueAppendedInstructions(t)}async updateNavigation(t){this.rootScope.scope.reparentRoutingInstructions();const e=this.rootScope.scope.getRoutingInstructions(t.timestamp);let{matchedInstructions:s}=this.rootScope.scope.matchEndpoints(e,[],!0),i=100;for(;s.length>0;){if(0==i--)throw Q(2005);s=s.map((t=>{const{matchedInstructions:e}=t.endpoint.instance.scope.matchEndpoints(t.nextScopeInstructions??[],[],!0);return e})).flat()}t.timestamp>=(this.activeNavigation?.timestamp??0)&&(this.activeNavigation=t,this.activeComponents=e);let n=await pt.invokeTransformToUrl(e,t);if("string"!=typeof n&&(n=X.stringify(this,n,!1,!0)),n=await pt.invokeTransformToUrl(n,t),null==t.query&&null!=t.parameters){const e=new URLSearchParams;for(let[s,i]of Object.entries(t.parameters)){s=encodeURIComponent(s),Array.isArray(i)||(i=[i]);for(const t of i)e.append(s,encodeURIComponent(t))}t.query=e.toString()}let r=`${this.configuration.options.basePath}/`;(null===r||""!==n&&"/"===n[0]||this.configuration.options.useUrlFragmentHash)&&(r="");const o=(t.query?.length??0)>0?"?"+t.query:"",a=(t.fragment?.length??0)>0?"#"+t.fragment:"";t.path=r+n+o+a;const h=[],c=1===e.length?e[0].route:null;if(null!=c&&("string"==typeof c&&""===c||""===c.matching)||h.push(X.create(X.clear(this))),h.push(...X.clone(e,this.statefulHistory)),t.fullStateInstruction=h,null===(t.title??null)){const s=await gt.getTitle(e,t,this.configuration.options.title);null!==s&&(t.title=s)}return Promise.resolve()}extractFragment(t,e){if("string"==typeof t&&null==e.fragment){const[s,i]=t.split("#");t=s,e.fragment=i}return t}extractQuery(t,e){if("string"==typeof t&&null==e.query){const[s,i]=t.split("?");t=s,e.query=i}return"string"==typeof e.parameters&&null==e.query&&(e.query=e.parameters,e.parameters=void 0),"string"==typeof e.query&&e.query.length>0&&(e.parameters??={},new URLSearchParams(e.query).forEach(((t,s)=>{s=decodeURIComponent(s),t=decodeURIComponent(t),s in e.parameters?(Array.isArray(e.parameters[s])||(e.parameters[s]=[e.parameters[s]]),e.parameters[s].push(t)):e.parameters[s]=t}))),t}}vt.closestEndpointKey=e.Zs.annotation.keyFor("closest-endpoint");class wt{constructor(t){this.eventName=t}}class bt extends wt{static create(){return new bt(this.eventName)}}bt.eventName="au:router:router-start";class yt extends wt{static create(){return new yt(this.eventName)}}yt.eventName="au:router:router-stop";class Ct{constructor(t,e){this.eventName=t,this.navigation=e}}class St extends Ct{static create(t){return new St(this.eventName,t)}}St.eventName="au:router:navigation-start";class kt extends Ct{static create(t){return new kt(this.eventName,t)}}kt.eventName="au:router:navigation-end";class Tt extends Ct{static create(t){return new Tt(this.eventName,t)}}Tt.eventName="au:router:navigation-cancel";class xt extends Ct{static create(t){return new xt(this.eventName,t)}}xt.eventName="au:router:navigation-complete";class It extends Ct{static create(t){return new It(this.eventName,t)}}It.eventName="au:router:navigation-error";const At=e.DI.createInterface("ILinkHandler",(t=>t.singleton($t)));class $t{constructor(){this.window=(0,e.hd)(s.mYM),this.router=(0,e.hd)(mt)}handleEvent(t){this.handleClick(t)}handleClick(t){if(0!==t.button||t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)return;const e=t.currentTarget;if(e.hasAttribute("external"))return;const i=e.getAttribute("target")??"";if(i.length>0&&i!==this.window.name&&"_self"!==i)return;const n=s.I6R.for(e,"load"),r=void 0!==n?n.viewModel.value:null,o=this.router.configuration.options.useHref&&e.hasAttribute("href")?e.getAttribute("href"):null;if(!(null!==r&&0!==r.length||null!==o&&0!==o.length))return;t.preventDefault();let a=r??o??"";"string"==typeof a&&a.startsWith("#")&&(a=a.slice(1),a.startsWith("/")||(a=`/${a}`)),this.router.load(a,{origin:e}).catch((t=>{throw t}))}}function Et(t,e,s,i,n=!1){if(n)return""===e;if(s)return e;const r=i.getAttribute(t)??"";return r.length>0?r:e}function Rt(t,e){if(!t.isActive)return new Promise((t=>{const s=e.subscribe(bt.eventName,(()=>{t(),s.dispose()}))}))}function Nt(t,e,i,n){let r=s.I6R.for(i,"considered-active")?.viewModel?.value;void 0===r&&(r=n);const o=t.applyLoadOptions(r,{context:e}),a=X.from(t,o.instructions);for(const t of a)null===t.scope&&(t.scope=o.scope);return a}function Pt(t){let e=t.parentElement;for(;null!=e;){if("AU-VIEWPORT"===e.tagName){e=null;break}if(e.hasAttribute("load-active"))break;e=e.parentElement}return e??=t,e}const Ot=s.Zmt.toView,Mt=s.K94.createInjectable();class Bt{constructor(){this.name="default",this.usedBy="",this.default="",this.fallback="",this.fallbackAction="",this.noScope=!1,this.noLink=!1,this.noTitle=!1,this.noHistory=!1,this.stateful=!1,this.endpoint=null,this.pendingChildren=[],this.pendingPromise=null,this.isBound=!1,this.router=(0,e.hd)(mt),this.element=(0,e.hd)(s.w3g),this.container=(0,e.hd)(e.p7),this.ea=(0,e.hd)(e.xe),this.parentViewport=(0,e.hd)(Mt),this.instruction=(0,e.hd)(s.OAD)}hydrated(t){this.controller=t;const e=this.instruction.props.filter((t=>"default"===t.to)).length>0;return e&&null!=this.parentViewport&&(this.parentViewport.pendingChildren.push(this),null===this.parentViewport.pendingPromise&&(this.parentViewport.pendingPromise=new L)),j.run(null,(()=>Rt(this.router,this.ea)),(()=>{this.router.isRestrictedNavigation&&this.connect()}))}binding(t,e){return this.isBound=!0,j.run(null,(()=>Rt(this.router,this.ea)),(()=>{this.router.isRestrictedNavigation||this.connect()}),(()=>{null!=this.endpoint?.activeResolve&&(this.endpoint.activeResolve(),this.endpoint.activeResolve=null)}),(()=>{if(null!==this.endpoint&&null===this.endpoint.getNextContent())return this.endpoint.activate(null,t,this.controller,void 0)?.asValue}))}detaching(t,e){if(null!==this.endpoint)return this.isBound=!1,this.endpoint.deactivate(null,t,e)}unbinding(t,e){if(null!==this.endpoint)return this.disconnect(null)}dispose(){this.endpoint?.dispose(),this.endpoint=null}connect(){const{isBound:t,element:e}=this,s=Et("name",this.name,t,e),i={};i.scope=!Et("no-scope",this.noScope,!1,e,!0),i.usedBy=Et("used-by",this.usedBy,t,e),i.default=Et("default",this.default,t,e),i.fallback=Et("fallback",this.fallback,t,e),i.fallbackAction=Et("fallback-action",this.fallbackAction,t,e),i.noLink=Et("no-link",this.noLink,t,e,!0),i.noTitle=Et("no-title",this.noTitle,t,e,!0),i.noHistory=Et("no-history",this.noHistory,t,e,!0),i.stateful=Et("stateful",this.stateful,t,e,!0),Object.keys(i).forEach((t=>{void 0===i[t]&&delete i[t]})),this.endpoint=this.router.connectEndpoint(this.endpoint,"Viewport",this,s,i);const n=this.parentViewport;null!=n&&(M(n.pendingChildren,(t=>t===this)),0===n.pendingChildren.length&&null!==n.pendingPromise&&(n.pendingPromise.resolve(),n.pendingPromise=null))}disconnect(t){null!==this.endpoint&&this.router.disconnectEndpoint(t,this.endpoint,this)}setActivity(t,e){const s=this.router.configuration.options.indicators.viewportNavigating;if("string"==typeof t)this.element.classList.toggle(t,e);else for(const i in t)this.element.classList.toggle(`${s}-${i}`,e&&t[i])}}s.K94.define({name:"au-viewport",injectable:Mt,bindables:["name","usedBy","default","fallback","fallbackAction","noScope","noLink","noTitle","noHistory","stateful"]},Bt);const Lt=s.K94.createInjectable();class jt{constructor(){this.name="default",this.catches="",this.collection=!1,this.source=null,this.viewportScope=null,this.isBound=!1,this.router=(0,e.hd)(mt),this.element=(0,e.hd)(s.w3g),this.container=(0,e.hd)(e.p7),this.parent=(0,e.hd)(Lt),this.parentController=(0,e.hd)(s.MH3)}hydrated(t){this.controller=t}bound(t,e){this.isBound=!0,this.$controller.scope=this.parentController.scope,this.connect(),null!==this.viewportScope&&this.viewportScope.binding()}unbinding(t,e){return null!==this.viewportScope&&this.viewportScope.unbinding(),Promise.resolve()}connect(){if(null===this.router.rootScope)return;const t=this.getAttribute("name",this.name),e={};let s=this.getAttribute("catches",this.catches);void 0!==s&&(e.catches=s),s=this.getAttribute("collection",this.collection,!0),void 0!==s&&(e.collection=s),e.source=this.source??null,this.viewportScope=this.router.connectEndpoint(this.viewportScope,"ViewportScope",this,t,e)}disconnect(){this.viewportScope&&this.router.disconnectEndpoint(null,this.viewportScope,this),this.viewportScope=null}getAttribute(t,e,s=!1){if(this.isBound)return e;if(this.element.hasAttribute(t)){if(s)return!0;if((e=this.element.getAttribute(t)).length>0)return e}}}s.K94.define({name:"au-viewport-scope",template:"<template></template>",containerless:!1,injectable:Lt,bindables:["name","catches","collection","source"]},jt);class Ft{constructor(){this.P=!1,this.hasHref=null,this.element=(0,e.hd)(s.w3g),this.router=(0,e.hd)(mt),this.linkHandler=(0,e.hd)(At),this.ea=(0,e.hd)(e.xe),this.activeClass=this.router.configuration.options.indicators.loadActive,this.navigationEndHandler=t=>{this.updateActive()}}binding(){null==this.value&&(this.P=!0),this.element.addEventListener("click",this.linkHandler),this.updateValue(),this.updateActive(),this.routerNavigationSubscription=this.ea.subscribe(kt.eventName,this.navigationEndHandler)}unbinding(){this.element.removeEventListener("click",this.linkHandler),this.routerNavigationSubscription.dispose()}valueChanged(t){this.updateValue(),this.updateActive()}updateValue(){if(this.P&&(this.value={component:this.component,parameters:this.parameters,viewport:this.viewport,id:this.id}),null===this.hasHref&&(this.hasHref=this.element.hasAttribute("href")),!this.hasHref){let t=this.value;if("string"!=typeof t){const e=X.from(this.router,t).shift(),s=this.V(t);s.foundConfiguration&&(e.route=s.matching),t=X.stringify(this.router,[e])}const{scope:e,instruction:s}=rt.for(this.element,t);t=`${e?.path??""}${s??""}`,this.router.configuration.options.useUrlFragmentHash&&!t.startsWith("#")&&(t=`#/${t}`),this.element.setAttribute("href",t)}}async updateActive(){const t=s.I6R.for(this.element,"load").parent,e="string"==typeof this.value?{id:this.value,path:this.value}:this.value,i=this.V(e),n=i.foundConfiguration?i.instructions:Nt(this.router,t,this.element,this.value);Pt(this.element).classList.toggle(this.activeClass,this.router.checkActive(n,{context:t}))}V(t){if("string"==typeof t)return new I;const e=rt.for(this.element).scope??this.router.rootScope.scope;if(null!=t.id)return e.findMatchingRoute(t.id,t.parameters??{});const s=t.path;return null!=s?e.findMatchingRoute(s,t.parameters??{}):new I}}s.I6R.define({name:"load",bindables:{value:{mode:Ot},component:{},parameters:{},viewport:{},id:{}}},Ft);class Dt{constructor(){this.element=(0,e.hd)(s.w3g),this.router=(0,e.hd)(mt),this.linkHandler=(0,e.hd)(At),this.ea=(0,e.hd)(e.xe),this.activeClass=this.router.configuration.options.indicators.loadActive,this.navigationEndHandler=t=>{this.updateActive()}}binding(){!this.router.configuration.options.useHref||this.hasLoad()||this.element.hasAttribute("external")||(this.element.addEventListener("click",this.linkHandler),this.routerNavigationSubscription=this.ea.subscribe(kt.eventName,this.navigationEndHandler)),this.updateValue(),this.updateActive()}unbinding(){this.element.removeEventListener("click",this.linkHandler),this.routerNavigationSubscription?.dispose()}valueChanged(){this.updateValue(),this.updateActive()}updateValue(){this.element.setAttribute("href",this.value)}updateActive(){if(this.router.configuration.options.useHref&&!this.hasLoad()&&!this.element.hasAttribute("external")){const t=s.I6R.for(this.element,"href").parent,e=Nt(this.router,t,this.element,this.value);Pt(this.element).classList.toggle(this.activeClass,this.router.checkActive(e,{context:t}))}}hasLoad(){const t=this.$controller.parent.children;return t?.some((t=>"customAttribute"===t.vmKind&&t.viewModel instanceof Ft))??!1}}Dt.$au={type:"custom-attribute",name:"href",noMultiBindings:!0,bindables:{value:{mode:Ot}}};class Vt{}s.I6R.define({name:"considered-active",bindables:{value:{mode:Ot}}},Vt);const Ht=e.DI.createInterface("IRouterConfiguration",(t=>t.singleton(Wt))),qt=[mt],Ut=[Bt,jt,Ft,Dt,Vt];class Wt{static register(t){const e=t.get(Ht);return e.options=Wt.options,e.options.setRouterConfiguration(e),Wt.options=N.create(),t.register(...qt,...Ut,s.NMh.activating(mt,Wt.configurationCall),s.NMh.activated(mt,(t=>t.initialLoad())),s.NMh.deactivated(mt,(t=>t.stop())))}static customize(t){return void 0===t?(Wt.options=N.create(),Wt.configurationCall=t=>{t.start()}):t instanceof Function?Wt.configurationCall=t:(Wt.options=N.create(),Wt.options.apply(t)),Wt}static createContainer(){return this.register(e.DI.createContainer())}static for(t){return t instanceof vt?t.configuration:t.get(Ht)}apply(t,e=!1){e&&(this.options=N.create()),this.options.apply(t)}addHook(t,e){return pt.add(t,e)}removeHook(t){return pt.remove(t)}removeAllHooks(){return pt.removeAll()}}Wt.options=N.create(),Wt.configurationCall=t=>{t.start()};class _t{constructor(){this.cache=new Map,this.delete=t=>this.cache.delete(t),this.has=t=>this.cache.has(t),this.set=(t,e)=>this.cache.set(t,e),this.get=t=>this.cache.get(t),this.clear=()=>this.cache.clear()}}const Kt=e.DI.createInterface((t=>t.singleton(_t)));class Qt{constructor(){this.baseUrl="",this.defaults={},this.interceptors=[],this.dispatcher=null,this.c=(0,e.hd)(e.p7)}withBaseUrl(t){return this.baseUrl=t,this}withDefaults(t){return this.defaults=t,this}withInterceptor(t){return this.interceptors.push(t),this}useStandardConfiguration(){return Object.assign(this.defaults,{credentials:"same-origin"},this.defaults),this.rejectErrorResponses()}rejectErrorResponses(){return this.withInterceptor({response:zt})}withRetry(t){const e=this.c.invoke(de,[t]);return this.withInterceptor(e)}withDispatcher(t){return this.dispatcher=t,this}}function zt(t){if(!t.ok)throw t;return t}const Gt=/^([a-z][a-z0-9+\-.]*:)?\/\//i,Jt=e.DI.createInterface("fetch",(t=>{if("function"!=typeof fetch)throw new Error("Could not resolve fetch function. Please provide a fetch function implementation or a polyfill for the global fetch function.");return t.instance(fetch)})),Yt=e.DI.createInterface("IHttpClient",(t=>t.aliasTo(Zt)));class Zt{constructor(){this.activeRequestCount=0,this.isRequesting=!1,this.isConfigured=!1,this.baseUrl="",this.defaults=null,this.t=[],this.i=null,this.h=(0,e.hd)((0,e.P9)(Qt)),this.u=(0,e.hd)(Jt)}get interceptors(){return this.t.slice(0)}configure(t){let e;if("object"==typeof t)e={defaults:t};else{if("function"!=typeof t)throw new Error("invalid config, expecting a function or an object, received "+typeof t);{e=this.h(),e.baseUrl=this.baseUrl,e.defaults={...this.defaults},e.interceptors=this.t,e.dispatcher=this.i;const s=t(e);if(null!=s){if("object"!=typeof s)throw new Error("The config callback did not return a valid HttpClientConfiguration like instance. Received "+typeof s);e=s}}}const s=e.defaults;if(s?.headers instanceof Headers)throw new Error("Default headers must be a plain object.");const i=e.interceptors;if(i?.length>0){if(i.filter((t=>t instanceof de)).length>1)throw new Error("Only one RetryInterceptor is allowed.");const t=i.findIndex((t=>t instanceof de));if(t>=0&&t!==i.length-1)throw new Error("The retry interceptor must be the last interceptor defined.")}return this.baseUrl=e.baseUrl,this.defaults=s,this.t=e.interceptors??[],this.i=e.dispatcher,this.isConfigured=!0,this}fetch(t,e){this.C();let s=this.buildRequest(t,e);return this.processRequest(s,this.t).then((t=>{let e;if(t instanceof Response)e=Promise.resolve(t);else{if(!(t instanceof Request))throw new Error(`An invalid result was returned by the interceptor chain. Expected a Request or Response instance, but got [${t}]`);s=t,e=this.u.call(void 0,s)}return this.processResponse(e,this.t,s)})).then((t=>t instanceof Request?this.fetch(t):t)).then((t=>(this.R(),t)),(t=>{throw this.R(),t}))}buildRequest(t,e){const s=this.defaults??{};let i,n,r;const o=function(t){const e={},s=t??{};for(const t of Object.keys(s))e[t]="function"==typeof s[t]?s[t]():s[t];return e}(s.headers);if(t instanceof Request)i=t,r=new Headers(i.headers).get("Content-Type");else{e||(e={}),n=e.body;const o=void 0!==n?{body:n}:null,a={...s,headers:{},...e,...o};r=new Headers(a.headers).get("Content-Type"),i=new Request(Xt(this.baseUrl,t),a)}return r||(new Headers(o).has("content-type")?i.headers.set("Content-Type",new Headers(o).get("content-type")):void 0!==n&&function(t){try{JSON.parse(t)}catch(t){return!1}return!0}(n)&&i.headers.set("Content-Type","application/json")),function(t,e){const s=e??{};for(const e of Object.keys(s))t.has(e)||t.set(e,s[e])}(i.headers,o),n instanceof Blob&&n.type&&i.headers.set("Content-Type",n.type),i}get(t,e){return this.fetch(t,e)}post(t,e,s){return this.I(t,e,s,"POST")}put(t,e,s){return this.I(t,e,s,"PUT")}patch(t,e,s){return this.I(t,e,s,"PATCH")}delete(t,e,s){return this.I(t,e,s,"DELETE")}dispose(){this.t.forEach((t=>t.dispose?.())),this.t.length=0,this.i=null}C(){this.isRequesting=!!++this.activeRequestCount,this.isRequesting&&null!=this.i&&se(this.i,ie.started)}R(){this.isRequesting=!! --this.activeRequestCount,this.isRequesting||null==this.i||se(this.i,ie.drained)}processRequest(t,e){return this.B(t,e,"request","requestError",Request,this)}processResponse(t,e,s){return this.B(t,e,"response","responseError",Response,s,this)}B(t,e,s,i,n,...r){return(e??[]).reduce(((t,e)=>{const o=e[s],a=e[i];return t.then(o?t=>t instanceof n?o.call(e,t,...r):t:te,a?t=>a.call(e,t,...r):ee)}),Promise.resolve(t))}I(t,e,s,i){return s||(s={}),s.method=i,null!=e&&(s.body=e),this.fetch(t,s)}}function Xt(t,e){return Gt.test(e)?e:(t??"")+e}function te(t){return t}function ee(t){throw t}function se(t,e){const s=new t.ownerDocument.defaultView.CustomEvent(e,{bubbles:!0,cancelable:!0});setTimeout((()=>{t.dispatchEvent(s)}),1)}const ie=Object.freeze({started:"aurelia-fetch-client-request-started",drained:"aurelia-fetch-client-requests-drained"}),ne=e.DI.createInterface((t=>t.singleton(oe))),re=Object.freeze({Set:"au:fetch:cache:set",Get:"au:fetch:cache:get",Clear:"au:fetch:cache:clear",Reset:"au:fetch:cache:reset",Dispose:"au:fetch:cache:dispose",CacheHit:"au:fetch:cache:hit",CacheMiss:"au:fetch:cache:miss",CacheStale:"au:fetch:cache:stale",CacheStaleRefreshed:"au:fetch:cache:stale:refreshed",CacheExpired:"au:fetch:cache:expired",CacheBackgroundRefreshed:"au:fetch:cache:background:refreshed",CacheBackgroundRefreshing:"au:fetch:cache:background:refreshing",CacheBackgroundStopped:"au:fetch:cache:background:stopped"});class oe{constructor(){this.storage=(0,e.hd)(Kt),this.p=(0,e.hd)(e.r_),this.ea=(0,e.hd)(e.xe),this.q=(0,e.hd)(Yt),this.H=[],this.O=-1,this.j=[],this.T=new Map}subscribe(t,e){const s=this.ea.subscribe(t,e);return this.H.push(s),s}subscribeOnce(t,e){const s=this.ea.subscribeOnce(t,e);return this.H.push(s),s}setStaleTimer(t,e,s){const i=this.p.setTimeout((async()=>{this.delete(t),await this.q.get(s);const e=this.getItem(t);this.ea.publish(re.CacheStaleRefreshed,{key:t,value:e}),this.P(i)}),e);this.j.push(i)}startBackgroundRefresh(t){!t||this.O>-1||(this.O=this.p.setInterval((()=>{this.ea.publish(re.CacheBackgroundRefreshing),this.T.forEach(((t,e)=>{this.delete(e),this.q.get(t).then((()=>{const t=this.getItem(e);this.ea.publish(re.CacheBackgroundRefreshed,{key:e,value:t})}))}))}),t))}stopBackgroundRefresh(){this.p.clearInterval(this.O),this.O=-1,this.ea.publish(re.CacheBackgroundStopped)}set(t,e,s,i){const n={data:e,...s};this.setItem(t,n,i)}get(t){return this.getItem(t)?.data}setItem(t,e,s){e.lastCached=Date.now(),this.storage.set(t,e),this.T.set(t,s),this.ea.publish(re.Set,{key:t,value:e})}getItem(t){if(!this.storage.has(t))return void this.ea.publish(re.CacheMiss,{key:t});const e=this.storage.get(t);if(!e?.staleTime||!e?.lastCached)return this.ea.publish(re.CacheHit,{key:t,value:e}),e;const s=Date.now();if(s>e.lastCached+(e.staleTime??0))this.ea.publish(re.CacheStale,{key:t,value:e});else{if(!(s>e.lastCached+(e.cacheTime??0)))return this.ea.publish(re.CacheHit,{key:t,value:e}),e;this.ea.publish(re.CacheExpired,{key:t,value:e})}}delete(t){this.storage.delete(t),this.ea.publish(re.Clear,{key:t})}clear(){this.storage.clear(),this.T.clear(),this.ea.publish(re.Reset),this.stopBackgroundRefresh(),this.j.forEach((t=>{this.p.clearTimeout(t)})),this.j.length=0}dispose(){this.clear(),this.H.forEach((t=>t.dispose())),this.ea.publish(re.Dispose)}P(t){this.p.clearTimeout(t);const e=this.j.indexOf(t);e>-1&&this.j.splice(e,1)}}const ae={cacheTime:3e5,staleTime:0,refreshStaleImmediate:!1,refreshInterval:0};class he{constructor(t){this.N=(0,e.hd)(ne),this.cf={...ae,...t??{}}}request(t){if(this.N.startBackgroundRefresh(this.cf.refreshInterval),"GET"!==t.method)return t;const e=this.N.get(this.key(t));return this.mark(e)??t}response(t,e){if(!e)return t;if(t.headers.has(he.cacheHeader))return t;const s=this.key(e);return this.N.setItem(s,{data:t,...this.cf},e),this.cf?.refreshStaleImmediate&&this.cf.staleTime>0&&this.N.setStaleTimer(s,this.cf.staleTime,e),t}dispose(){this.N.stopBackgroundRefresh()}key(t){return`${he.prefix}${t.url}`}mark(t){return t?.headers.set(he.cacheHeader,"hit"),t}}he.prefix="au:interceptor:",he.cacheHeader="x-au-fetch-cache";class ce{constructor(){this.cache=(0,e.hd)(e.r_).globalThis.indexedDB,this.getStore=()=>this.database.transaction(ce.cacheName,"readwrite").objectStore(ce.cacheName),this.delete=t=>{this.getStore().delete(t)},this.has=t=>this.getStore().count(t).result>0,this.set=(t,e)=>this.getStore().put(e,t),this.get=t=>this.getStore().get(t).result,this.clear=()=>{const t=this.getStore();t.getAllKeys().result.forEach((e=>{t.delete(e)}))},this.database=this.cache.open(ce.cacheName).result}}ce.cacheName="au-cache";const le=Object.freeze({fixed:0,incremental:1,exponential:2,random:3}),ue={maxRetries:3,interval:1e3,strategy:le.fixed};class de{constructor(t){if(this.p=(0,e.hd)(e.r_),this.retryConfig={...ue,...t??{}},this.retryConfig.strategy===le.exponential&&this.retryConfig.interval<=1e3)throw new Error("An interval less than or equal to 1 second is not allowed when using the exponential retry strategy")}request(t){return t.retryConfig||(t.retryConfig={...this.retryConfig},t.retryConfig.counter=0),t.retryConfig.requestClone=t.clone(),t}response(t,e){return delete e.retryConfig,t}responseError(t,e,s){const{retryConfig:i}=e,{requestClone:n}=i;return Promise.resolve().then((()=>{if(i.counter<i.maxRetries){const r=null==i.doRetry||i.doRetry(t,e);return Promise.resolve(r).then((r=>{if(r){i.counter++;const t=function(t){const{interval:e,strategy:s,minRandomInterval:i,maxRandomInterval:n,counter:r}=t;if("function"==typeof s)return t.strategy(r);switch(s){case le.fixed:return pe[le.fixed](e);case le.incremental:return pe[le.incremental](r,e);case le.exponential:return pe[le.exponential](r,e);case le.random:return pe[le.random](r,e,i,n);default:throw new Error("Unrecognized retry strategy")}}(i);return new Promise((e=>this.p.setTimeout(e,isNaN(t)?0:t))).then((()=>{const t=n.clone();return"function"==typeof i.beforeRetry?i.beforeRetry(t,s):t})).then((t=>{const e={...t,retryConfig:i};return s.fetch(e)}))}throw delete e.retryConfig,t}))}throw delete e.retryConfig,t}))}}const pe=[t=>t,(t,e)=>e*t,(t,e)=>1===t?e:e**t/1e3,(t,e,s=0,i=6e4)=>Math.random()*(i-s)+s],fe={disable:void 0,text:t=>t.text(),json:t=>t.json(),blob:t=>t.blob(),formData:t=>t.formData()};function ge(t,e){const s="/"===t.slice(-1)?"/":"";return e&&(t+=`?${me(e)}`),t+s}function me(t,e=""){const s=[];for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)){const n=t[i],r=e?`${e}[${encodeURIComponent(i)}]`:encodeURIComponent(i);if(null!==n&&"object"==typeof n)s.push(me(n,r));else{const t=encodeURIComponent(n);s.push(`${r}=${t}`)}}return s.join("&")}Object.keys(fe);class ve{constructor(t,s,i="json"){this.container=t,this.client=this.container.get((0,e.pn)(Yt)),this.client?.configure(s),this.setParser(i)}setParser(t){this.parser=this.findParser(t)}get(t,e){return this.request("GET",t,e)}post(t,e){return this.request("POST",t,e)}patch(t,e){return this.request("PATCH",t,e)}put(t,e){return this.request("PUT",t,e)}delete(t,e){return this.request("DELETE",t,e)}async request(t,e,s){const i=this.buildRequest(t,e,s);s?.beforeSend&&s.beforeSend(i);const n=this.client.fetch(i.resource,i.request),r=this.findParser(s?.beforeReturn);return r?r(await n):n}buildRequest(t,e,s){const i=this.client?.defaults?structuredClone(this.client.defaults):{};return i.method=t,{resource:e,url:ge(e,s?.query),request:i}}findParser(t){const e=t??this.parser;let s;return e&&("function"==typeof e?s=e:"string"==typeof e&&(s=fe[e])),s}dispose(){this.client?.dispose()}}const we=e.DI.createInterface((t=>t.singleton(be)));class be{constructor(){this.endpoints={}}setContainer(t){this.container=t}getEndpointNames(){return Object.keys(this.endpoints)}getEndpoint(t){return this.endpoints[t??this.defaultEndpoint]}registerEndpoint(t,e,s){if(this.exists(t))throw new Error(`Endpoint ${t} already exists`);return this.endpoints[t]=new ve(this.container,e,s),this}removeEndpoint(t){return this.endpoints[t].dispose(),delete this.endpoints[t],this}exists(t){return!!this.endpoints[t]}setDefaultEndpoint(t){return this.defaultEndpoint=t,this}}const ye=[we],Ce=function t(e){return{register(t){const s=t.get(we);return s.setContainer(t),e&&e(s),t.register(...ye),t},setup:e=>t(e)}}();var Se=n(591),ke=n.n(Se),Te=n(740),xe=n.n(Te),Ie=n(128),Ae=n.n(Ie),$e=n(855),Ee=n.n($e),Re=n(51),Ne=n.n(Re),Pe=n(656),Oe=n.n(Pe),Me=n(183),Be={};Be.styleTagTransform=Oe(),Be.setAttributes=Ee(),Be.insert=Ae().bind(null,"head"),Be.domAPI=xe(),Be.insertStyleElement=Ne(),ke()(Me.A,Be),Me.A&&Me.A.locals&&Me.A.locals;const Le="my-app",je='<div>My APP</div>\r\n<button click.trigger="fetch()">FETCH DATA</button>\r\n\r\n\r\n\x3c!-- <nav>\r\n    <a load="/">Home</a>\r\n    <a load="/next">Next</a>\r\n</nav>\r\n\r\n<au-viewport></au-viewport> --\x3e',Fe=je,De=[];let Ve;function He(t){Ve||(Ve=s.K94.define({name:Le,template:je,dependencies:De})),t.register(Ve)}class qe{constructor(){this.githubApi=(0,e.hd)(we).getEndpoint(Ue.github),this.mapApi=(0,e.hd)(we).getEndpoint(Ue.counties)}async fetch(){console.log("find data"),console.log("shoudl get data from api");const t=await this.githubApi.get("/users/aurelia"),e=await this.mapApi.get("/fylkerkommuner");console.log(t),console.log(e)}}var Ue;s.K94.define(t,qe),function(t){t.github="github",t.counties="counties"}(Ue||(Ue={})),a.register(Wt.customize({fallback:n.e(458).then(n.bind(n,458)),useHref:!1}),Ce.setup((t=>{t.registerEndpoint(Ue.github,(t=>{t.baseUrl="https://api.github.com"})).registerEndpoint(Ue.counties,(t=>{t.baseUrl="https://api.kartverket.no/kommuneinfo/v1/"}))}))).app(qe).start()})()})();